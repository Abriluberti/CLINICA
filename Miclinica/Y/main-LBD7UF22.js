import{A as yf,B as lD,C as Mo,D as vf,E as xt,F as qy,G as Jn,a as ne,b as qe,c as Fk,d as Bi,e as jy,f as O,g as oD,h as df,i as sD,j as aD,k as cD,l as hf,m as By,n as ff,o as ml,p as Uy,q as pf,r as gf,s as uD,t as $y,u as ze,v as Sr,w as ei,x as mf,y as Ls,z as yl}from"./chunk-POHAHFTP.js";var Di=Fk((Ci,IC)=>{"use strict";(function(t,e){typeof Ci=="object"&&typeof IC<"u"?IC.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(Ci,function(){"use strict";function t(v,d){(d==null||d>v.length)&&(d=v.length);for(var f=0,y=Array(d);f<d;f++)y[f]=v[f];return y}function e(v){if(Array.isArray(v))return v}function n(v){if(Array.isArray(v))return t(v)}function r(v,d,f){if(typeof v=="function"?v===d:v.has(d))return arguments.length<3?d:f;throw new TypeError("Private element is not present on this object")}function i(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function o(v,d,f){return d=k(d),se(v,U()?Reflect.construct(d,f||[],k(v).constructor):d.apply(v,f))}function s(v,d){if(d.has(v))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function c(v,d){return v.get(r(v,d))}function l(v,d,f){s(v,d),d.set(v,f)}function h(v,d,f){return v.set(r(v,d),f),f}function g(v,d,f){if(U())return Reflect.construct.apply(null,arguments);var y=[null];y.push.apply(y,d);var I=new(v.bind.apply(v,y));return I}function w(v,d){for(var f=0;f<d.length;f++){var y=d[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,F(y.key),y)}}function b(v,d,f){return d&&w(v.prototype,d),Object.defineProperty(v,"prototype",{writable:!1}),v}function A(){return A=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(v,d,f){var y=D(v,d);if(y){var I=Object.getOwnPropertyDescriptor(y,d);return I.get?I.get.call(arguments.length<3?v:f):I.value}},A.apply(null,arguments)}function k(v){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},k(v)}function M(v,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(d&&d.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),d&&T(v,d)}function U(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U=function(){return!!v})()}function Y(v){if(typeof Symbol<"u"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function q(v,d){var f=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(f!=null){var y,I,$,re,Me=[],Fe=!0,It=!1;try{if($=(f=f.call(v)).next,d!==0)for(;!(Fe=(y=$.call(f)).done)&&(Me.push(y.value),Me.length!==d);Fe=!0);}catch(gl){It=!0,I=gl}finally{try{if(!Fe&&f.return!=null&&(re=f.return(),Object(re)!==re))return}finally{if(It)throw I}}return Me}}function Q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(v,d){if(d&&(typeof d=="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(v)}function T(v,d){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,y){return f.__proto__=y,f},T(v,d)}function E(v,d){return e(v)||q(v,d)||cr(v,d)||Q()}function D(v,d){for(;!{}.hasOwnProperty.call(v,d)&&(v=k(v))!==null;);return v}function S(v){return n(v)||Y(v)||cr(v)||ue()}function x(v,d){if(typeof v!="object"||!v)return v;var f=v[Symbol.toPrimitive];if(f!==void 0){var y=f.call(v,d);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}function F(v){var d=x(v,"string");return typeof d=="symbol"?d:d+""}function C(v){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},C(v)}function cr(v,d){if(v){if(typeof v=="string")return t(v,d);var f={}.toString.call(v).slice(8,-1);return f==="Object"&&v.constructor&&(f=v.constructor.name),f==="Map"||f==="Set"?Array.from(v):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?t(v,d):void 0}}var _s=100,Te={},bs=function(){Te.previousActiveElement instanceof HTMLElement?(Te.previousActiveElement.focus(),Te.previousActiveElement=null):document.body&&document.body.focus()},Es=function(d){return new Promise(function(f){if(!d)return f();var y=window.scrollX,I=window.scrollY;Te.restoreFocusTimeout=setTimeout(function(){bs(),f()},_s),window.scrollTo(y,I)})},qa="swal2-",wh=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],B=wh.reduce(function(v,d){return v[d]=qa+d,v},{}),Hr=["success","warning","info","question","error"],St=Hr.reduce(function(v,d){return v[d]=qa+d,v},{}),_h="SweetAlert2:",Mi=function(d){return d.charAt(0).toUpperCase()+d.slice(1)},cn=function(d){console.warn("".concat(_h," ").concat(C(d)==="object"?d.join(" "):d))},Zn=function(d){console.error("".concat(_h," ").concat(d))},bh=[],Ey=function(d){bh.includes(d)||(bh.push(d),cn(d))},za=function(d,f){Ey('"'.concat(d,'" is deprecated and will be removed in the next major release. Please use "').concat(f,'" instead.'))},xi=function(d){return typeof d=="function"?d():d},Is=function(d){return d&&typeof d.toPromise=="function"},Pi=function(d){return Is(d)?d.toPromise():Promise.resolve(d)},Cs=function(d){return d&&Promise.resolve(d)===d},Zt=function(){return document.body.querySelector(".".concat(B.container))},yo=function(d){var f=Zt();return f?f.querySelector(d):null},un=function(d){return yo(".".concat(d))},Ge=function(){return un(B.popup)},vo=function(){return un(B.icon)},Eh=function(){return un(B["icon-content"])},Ha=function(){return un(B.title)},Ga=function(){return un(B["html-container"])},Ih=function(){return un(B.image)},Ds=function(){return un(B["progress-steps"])},wo=function(){return un(B["validation-message"])},On=function(){return yo(".".concat(B.actions," .").concat(B.confirm))},gt=function(){return yo(".".concat(B.actions," .").concat(B.cancel))},mt=function(){return yo(".".concat(B.actions," .").concat(B.deny))},Wa=function(){return un(B["input-label"])},Ri=function(){return yo(".".concat(B.loader))},_o=function(){return un(B.actions)},Ch=function(){return un(B.footer)},Gr=function(){return un(B["timer-progress-bar"])},Ka=function(){return un(B.close)},Dh=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Ts=function(){var d=Ge();if(!d)return[];var f=d.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),y=Array.from(f).sort(function(re,Me){var Fe=parseInt(re.getAttribute("tabindex")||"0"),It=parseInt(Me.getAttribute("tabindex")||"0");return Fe>It?1:Fe<It?-1:0}),I=d.querySelectorAll(Dh),$=Array.from(I).filter(function(re){return re.getAttribute("tabindex")!=="-1"});return S(new Set(y.concat($))).filter(function(re){return En(re)})},el=function(){return ur(document.body,B.shown)&&!ur(document.body,B["toast-shown"])&&!ur(document.body,B["no-backdrop"])},Qa=function(){var d=Ge();return d?ur(d,B.toast):!1},tl=function(){var d=Ge();return d?d.hasAttribute("data-loading"):!1},ln=function(d,f){if(d.textContent="",f){var y=new DOMParser,I=y.parseFromString(f,"text/html"),$=I.querySelector("head");$&&Array.from($.childNodes).forEach(function(Me){d.appendChild(Me)});var re=I.querySelector("body");re&&Array.from(re.childNodes).forEach(function(Me){Me instanceof HTMLVideoElement||Me instanceof HTMLAudioElement?d.appendChild(Me.cloneNode(!0)):d.appendChild(Me)})}},ur=function(d,f){if(!f)return!1;for(var y=f.split(/\s+/),I=0;I<y.length;I++)if(!d.classList.contains(y[I]))return!1;return!0},As=function(d,f){Array.from(d.classList).forEach(function(y){!Object.values(B).includes(y)&&!Object.values(St).includes(y)&&!Object.values(f.showClass||{}).includes(y)&&d.classList.remove(y)})},dn=function(d,f,y){if(As(d,f),f.customClass&&f.customClass[y]){if(typeof f.customClass[y]!="string"&&!f.customClass[y].forEach){cn("Invalid type of customClass.".concat(y,'! Expected string or iterable object, got "').concat(C(f.customClass[y]),'"'));return}Se(d,f.customClass[y])}},bo=function(d,f){if(!f)return null;switch(f){case"select":case"textarea":case"file":return d.querySelector(".".concat(B.popup," > .").concat(B[f]));case"checkbox":return d.querySelector(".".concat(B.popup," > .").concat(B.checkbox," input"));case"radio":return d.querySelector(".".concat(B.popup," > .").concat(B.radio," input:checked"))||d.querySelector(".".concat(B.popup," > .").concat(B.radio," input:first-child"));case"range":return d.querySelector(".".concat(B.popup," > .").concat(B.range," input"));default:return d.querySelector(".".concat(B.popup," > .").concat(B.input))}},Wr=function(d){if(d.focus(),d.type!=="file"){var f=d.value;d.value="",d.value=f}},nl=function(d,f,y){!d||!f||(typeof f=="string"&&(f=f.split(/\s+/).filter(Boolean)),f.forEach(function(I){Array.isArray(d)?d.forEach(function($){y?$.classList.add(I):$.classList.remove(I)}):y?d.classList.add(I):d.classList.remove(I)}))},Se=function(d,f){nl(d,f,!0)},Xn=function(d,f){nl(d,f,!1)},Fn=function(d,f){for(var y=Array.from(d.children),I=0;I<y.length;I++){var $=y[I];if($ instanceof HTMLElement&&ur($,f))return $}},Kr=function(d,f,y){y==="".concat(parseInt(y))&&(y=parseInt(y)),y||parseInt(y)===0?d.style.setProperty(f,typeof y=="number"?"".concat(y,"px"):y):d.style.removeProperty(f)},je=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";d&&(d.style.display=f)},$t=function(d){d&&(d.style.display="none")},Ni=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";d&&new MutationObserver(function(){Ss(d,d.innerHTML,f)}).observe(d,{childList:!0,subtree:!0})},Eo=function(d,f,y,I){var $=d.querySelector(f);$&&$.style.setProperty(y,I)},Ss=function(d,f){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";f?je(d,y):$t(d)},En=function(d){return!!(d&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length))},Io=function(){return!En(On())&&!En(mt())&&!En(gt())},Th=function(d){return d.scrollHeight>d.clientHeight},Ah=function(d){var f=window.getComputedStyle(d),y=parseFloat(f.getPropertyValue("animation-duration")||"0"),I=parseFloat(f.getPropertyValue("transition-duration")||"0");return y>0||I>0},Co=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=Gr();y&&En(y)&&(f&&(y.style.transition="none",y.style.width="100%"),setTimeout(function(){y.style.transition="width ".concat(d/1e3,"s linear"),y.style.width="0%"},10))},Sh=function(){var d=Gr();if(d){var f=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";var y=parseInt(window.getComputedStyle(d).width),I=f/y*100;d.style.width="".concat(I,"%")}},Ya=function(){return typeof window>"u"||typeof document>"u"},Za=`
 <div aria-labelledby="`.concat(B.title,'" aria-describedby="').concat(B["html-container"],'" class="').concat(B.popup,`" tabindex="-1">
   <button type="button" class="`).concat(B.close,`"></button>
   <ul class="`).concat(B["progress-steps"],`"></ul>
   <div class="`).concat(B.icon,`"></div>
   <img class="`).concat(B.image,`" />
   <h2 class="`).concat(B.title,'" id="').concat(B.title,`"></h2>
   <div class="`).concat(B["html-container"],'" id="').concat(B["html-container"],`"></div>
   <input class="`).concat(B.input,'" id="').concat(B.input,`" />
   <input type="file" class="`).concat(B.file,`" />
   <div class="`).concat(B.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(B.select,'" id="').concat(B.select,`"></select>
   <div class="`).concat(B.radio,`"></div>
   <label class="`).concat(B.checkbox,`">
     <input type="checkbox" id="`).concat(B.checkbox,`" />
     <span class="`).concat(B.label,`"></span>
   </label>
   <textarea class="`).concat(B.textarea,'" id="').concat(B.textarea,`"></textarea>
   <div class="`).concat(B["validation-message"],'" id="').concat(B["validation-message"],`"></div>
   <div class="`).concat(B.actions,`">
     <div class="`).concat(B.loader,`"></div>
     <button type="button" class="`).concat(B.confirm,`"></button>
     <button type="button" class="`).concat(B.deny,`"></button>
     <button type="button" class="`).concat(B.cancel,`"></button>
   </div>
   <div class="`).concat(B.footer,`"></div>
   <div class="`).concat(B["timer-progress-bar-container"],`">
     <div class="`).concat(B["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),Qr=function(){var d=Zt();return d?(d.remove(),Xn([document.documentElement,document.body],[B["no-backdrop"],B["toast-shown"],B["has-column"]]),!0):!1},Yr=function(){Te.currentInstance.resetValidationMessage()},Mh=function(){var d=Ge(),f=Fn(d,B.input),y=Fn(d,B.file),I=d.querySelector(".".concat(B.range," input")),$=d.querySelector(".".concat(B.range," output")),re=Fn(d,B.select),Me=d.querySelector(".".concat(B.checkbox," input")),Fe=Fn(d,B.textarea);f.oninput=Yr,y.onchange=Yr,re.onchange=Yr,Me.onchange=Yr,Fe.oninput=Yr,I.oninput=function(){Yr(),$.value=I.value},I.onchange=function(){Yr(),$.value=I.value}},rl=function(d){return typeof d=="string"?document.querySelector(d):d},il=function(d){var f=Ge();f.setAttribute("role",d.toast?"alert":"dialog"),f.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||f.setAttribute("aria-modal","true")},xh=function(d){window.getComputedStyle(d).direction==="rtl"&&Se(Zt(),B.rtl)},Ph=function(d){var f=Qr();if(Ya()){Zn("SweetAlert2 requires document to initialize");return}var y=document.createElement("div");y.className=B.container,f&&Se(y,B["no-transition"]),ln(y,Za);var I=rl(d.target);I.appendChild(y),il(d),xh(I),Mh()},ol=function(d,f){d instanceof HTMLElement?f.appendChild(d):C(d)==="object"?Xa(d,f):d&&ln(f,d)},Xa=function(d,f){d.jquery?Rh(f,d):ln(f,d.toString())},Rh=function(d,f){if(d.textContent="",0 in f)for(var y=0;y in f;y++)d.appendChild(f[y].cloneNode(!0));else d.appendChild(f.cloneNode(!0))},Ir=function(){if(Ya())return!1;var v=document.createElement("div");return typeof v.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof v.style.animation<"u"?"animationend":!1}(),Ms=function(d,f){var y=_o(),I=Ri();!y||!I||(!f.showConfirmButton&&!f.showDenyButton&&!f.showCancelButton?$t(y):je(y),dn(y,f,"actions"),ki(y,I,f),ln(I,f.loaderHtml||""),dn(I,f,"loader"))};function ki(v,d,f){var y=On(),I=mt(),$=gt();!y||!I||!$||(al(y,"confirm",f),al(I,"deny",f),al($,"cancel",f),sl(y,I,$,f),f.reverseButtons&&(f.toast?(v.insertBefore($,y),v.insertBefore(I,y)):(v.insertBefore($,d),v.insertBefore(I,d),v.insertBefore(y,d))))}function sl(v,d,f,y){if(!y.buttonsStyling){Xn([v,d,f],B.styled);return}Se([v,d,f],B.styled),y.confirmButtonColor&&(v.style.backgroundColor=y.confirmButtonColor,Se(v,B["default-outline"])),y.denyButtonColor&&(d.style.backgroundColor=y.denyButtonColor,Se(d,B["default-outline"])),y.cancelButtonColor&&(f.style.backgroundColor=y.cancelButtonColor,Se(f,B["default-outline"]))}function al(v,d,f){var y=Mi(d);Ss(v,f["show".concat(y,"Button")],"inline-block"),ln(v,f["".concat(d,"ButtonText")]||""),v.setAttribute("aria-label",f["".concat(d,"ButtonAriaLabel")]||""),v.className=B[d],dn(v,f,"".concat(d,"Button"))}var Nh=function(d,f){var y=Ka();y&&(ln(y,f.closeButtonHtml||""),dn(y,f,"closeButton"),Ss(y,f.showCloseButton),y.setAttribute("aria-label",f.closeButtonAriaLabel||""))},kh=function(d,f){var y=Zt();y&&(Oh(y,f.backdrop),cl(y,f.position),ul(y,f.grow),dn(y,f,"container"))};function Oh(v,d){typeof d=="string"?v.style.background=d:d||Se([document.documentElement,document.body],B["no-backdrop"])}function cl(v,d){d&&(d in B?Se(v,B[d]):(cn('The "position" parameter is not valid, defaulting to "center"'),Se(v,B.center)))}function ul(v,d){d&&Se(v,B["grow-".concat(d)])}var Ye={innerParams:new WeakMap,domCache:new WeakMap},Fh=["input","file","range","select","radio","checkbox","textarea"],Iy=function(d,f){var y=Ge();if(y){var I=Ye.innerParams.get(d),$=!I||f.input!==I.input;Fh.forEach(function(re){var Me=Fn(y,B[re]);Me&&(Lh(re,f.inputAttributes),Me.className=B[re],$&&$t(Me))}),f.input&&($&&Cy(f),Dy(f))}},Cy=function(d){if(d.input){if(!dt[d.input]){Zn("Unexpected type of input! Expected ".concat(Object.keys(dt).join(" | "),', got "').concat(d.input,'"'));return}var f=xs(d.input),y=dt[d.input](f,d);je(f),d.inputAutoFocus&&setTimeout(function(){Wr(y)})}},Vh=function(d){for(var f=0;f<d.attributes.length;f++){var y=d.attributes[f].name;["id","type","value","style"].includes(y)||d.removeAttribute(y)}},Lh=function(d,f){var y=bo(Ge(),d);if(y){Vh(y);for(var I in f)y.setAttribute(I,f[I])}},Dy=function(d){var f=xs(d.input);C(d.customClass)==="object"&&Se(f,d.customClass.input)},Cr=function(d,f){(!d.placeholder||f.inputPlaceholder)&&(d.placeholder=f.inputPlaceholder)},In=function(d,f,y){if(y.inputLabel){var I=document.createElement("label"),$=B["input-label"];I.setAttribute("for",d.id),I.className=$,C(y.customClass)==="object"&&Se(I,y.customClass.inputLabel),I.innerText=y.inputLabel,f.insertAdjacentElement("beforebegin",I)}},xs=function(d){return Fn(Ge(),B[d]||B.input)},Oi=function(d,f){["string","number"].includes(C(f))?d.value="".concat(f):Cs(f)||cn('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(C(f),'"'))},dt={};dt.text=dt.email=dt.password=dt.number=dt.tel=dt.url=dt.search=dt.date=dt["datetime-local"]=dt.time=dt.week=dt.month=function(v,d){return Oi(v,d.inputValue),In(v,v,d),Cr(v,d),v.type=d.input,v},dt.file=function(v,d){return In(v,v,d),Cr(v,d),v},dt.range=function(v,d){var f=v.querySelector("input"),y=v.querySelector("output");return Oi(f,d.inputValue),f.type=d.input,Oi(y,d.inputValue),In(f,v,d),v},dt.select=function(v,d){if(v.textContent="",d.inputPlaceholder){var f=document.createElement("option");ln(f,d.inputPlaceholder),f.value="",f.disabled=!0,f.selected=!0,v.appendChild(f)}return In(v,v,d),v},dt.radio=function(v){return v.textContent="",v},dt.checkbox=function(v,d){var f=bo(Ge(),"checkbox");f.value="1",f.checked=!!d.inputValue;var y=v.querySelector("span");return ln(y,d.inputPlaceholder),f},dt.textarea=function(v,d){Oi(v,d.inputValue),Cr(v,d),In(v,v,d);var f=function(I){return parseInt(window.getComputedStyle(I).marginLeft)+parseInt(window.getComputedStyle(I).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var y=parseInt(window.getComputedStyle(Ge()).width),I=function(){if(document.body.contains(v)){var re=v.offsetWidth+f(v);re>y?Ge().style.width="".concat(re,"px"):Kr(Ge(),"width",d.width)}};new MutationObserver(I).observe(v,{attributes:!0,attributeFilter:["style"]})}}),v};var tt=function(d,f){var y=Ga();y&&(Ni(y),dn(y,f,"htmlContainer"),f.html?(ol(f.html,y),je(y,"block")):f.text?(y.textContent=f.text,je(y,"block")):$t(y),Iy(d,f))},Ja=function(d,f){var y=Ch();y&&(Ni(y),Ss(y,f.footer,"block"),f.footer&&ol(f.footer,y),dn(y,f,"footer"))},Ps=function(d,f){var y=Ye.innerParams.get(d),I=vo();if(I){if(y&&f.icon===y.icon){Bh(I,f),Do(I,f);return}if(!f.icon&&!f.iconHtml){$t(I);return}if(f.icon&&Object.keys(St).indexOf(f.icon)===-1){Zn('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(f.icon,'"')),$t(I);return}je(I),Bh(I,f),Do(I,f),Se(I,f.showClass&&f.showClass.icon)}},Do=function(d,f){for(var y=0,I=Object.entries(St);y<I.length;y++){var $=E(I[y],2),re=$[0],Me=$[1];f.icon!==re&&Xn(d,Me)}Se(d,f.icon&&St[f.icon]),Sy(d,f),Ty(),dn(d,f,"icon")},Ty=function(){var d=Ge();if(d)for(var f=window.getComputedStyle(d).getPropertyValue("background-color"),y=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),I=0;I<y.length;I++)y[I].style.backgroundColor=f},jh=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Ay=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Bh=function(d,f){if(!(!f.icon&&!f.iconHtml)){var y=d.innerHTML,I="";if(f.iconHtml)I=Uh(f.iconHtml);else if(f.icon==="success")I=jh,y=y.replace(/ style=".*?"/g,"");else if(f.icon==="error")I=Ay;else if(f.icon){var $={question:"?",warning:"!",info:"i"};I=Uh($[f.icon])}y.trim()!==I.trim()&&ln(d,I)}},Sy=function(d,f){if(f.iconColor){d.style.color=f.iconColor,d.style.borderColor=f.iconColor;for(var y=0,I=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];y<I.length;y++){var $=I[y];Eo(d,$,"background-color",f.iconColor)}Eo(d,".swal2-success-ring","border-color",f.iconColor)}},Uh=function(d){return'<div class="'.concat(B["icon-content"],'">').concat(d,"</div>")},Rs=function(d,f){var y=Ih();if(y){if(!f.imageUrl){$t(y);return}je(y,""),y.setAttribute("src",f.imageUrl),y.setAttribute("alt",f.imageAlt||""),Kr(y,"width",f.imageWidth),Kr(y,"height",f.imageHeight),y.className=B.image,dn(y,f,"image")}},Zr=function(d,f){var y=Zt(),I=Ge();if(!(!y||!I)){if(f.toast){Kr(y,"width",f.width),I.style.width="100%";var $=Ri();$&&I.insertBefore($,vo())}else Kr(I,"width",f.width);Kr(I,"padding",f.padding),f.color&&(I.style.color=f.color),f.background&&(I.style.background=f.background),$t(wo()),$h(I,f)}},$h=function(d,f){var y=f.showClass||{};d.className="".concat(B.popup," ").concat(En(d)?y.popup:""),f.toast?(Se([document.documentElement,document.body],B["toast-shown"]),Se(d,B.toast)):Se(d,B.modal),dn(d,f,"popup"),typeof f.customClass=="string"&&Se(d,f.customClass),f.icon&&Se(d,B["icon-".concat(f.icon)])},qh=function(d,f){var y=Ds();if(y){var I=f.progressSteps,$=f.currentProgressStep;if(!I||I.length===0||$===void 0){$t(y);return}je(y),y.textContent="",$>=I.length&&cn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),I.forEach(function(re,Me){var Fe=zh(re);if(y.appendChild(Fe),Me===$&&Se(Fe,B["active-progress-step"]),Me!==I.length-1){var It=To(f);y.appendChild(It)}})}},zh=function(d){var f=document.createElement("li");return Se(f,B["progress-step"]),ln(f,d),f},To=function(d){var f=document.createElement("li");return Se(f,B["progress-step-line"]),d.progressStepsDistance&&Kr(f,"width",d.progressStepsDistance),f},My=function(d,f){var y=Ha();y&&(Ni(y),Ss(y,f.title||f.titleText,"block"),f.title&&ol(f.title,y),f.titleText&&(y.innerText=f.titleText),dn(y,f,"title"))},Hh=function(d,f){Zr(d,f),kh(d,f),qh(d,f),Ps(d,f),Rs(d,f),My(d,f),Nh(d,f),tt(d,f),Ms(d,f),Ja(d,f);var y=Ge();typeof f.didRender=="function"&&y&&f.didRender(y)},xy=function(){return En(Ge())},Dr=function(){var d;return(d=On())===null||d===void 0?void 0:d.click()},Py=function(){var d;return(d=mt())===null||d===void 0?void 0:d.click()},Ry=function(){var d;return(d=gt())===null||d===void 0?void 0:d.click()},lr=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ns=function(d){d.keydownTarget&&d.keydownHandlerAdded&&(d.keydownTarget.removeEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!1)},Gh=function(d,f,y){Ns(d),f.toast||(d.keydownHandler=function(I){return ll(f,I,y)},d.keydownTarget=f.keydownListenerCapture?window:Ge(),d.keydownListenerCapture=f.keydownListenerCapture,d.keydownTarget.addEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!0)},Fi=function(d,f){var y,I=Ts();if(I.length){d=d+f,d===I.length?d=0:d===-1&&(d=I.length-1),I[d].focus();return}(y=Ge())===null||y===void 0||y.focus()},Ao=["ArrowRight","ArrowDown"],Wh=["ArrowLeft","ArrowUp"],ll=function(d,f,y){d&&(f.isComposing||f.keyCode===229||(d.stopKeydownPropagation&&f.stopPropagation(),f.key==="Enter"?ht(f,d):f.key==="Tab"?Ny(f):[].concat(Ao,Wh).includes(f.key)?ky(f.key):f.key==="Escape"&&Kh(f,d,y)))},ht=function(d,f){if(xi(f.allowEnterKey)){var y=bo(Ge(),f.input);if(d.target&&y&&d.target instanceof HTMLElement&&d.target.outerHTML===y.outerHTML){if(["textarea","file"].includes(f.input))return;Dr(),d.preventDefault()}}},Ny=function(d){for(var f=d.target,y=Ts(),I=-1,$=0;$<y.length;$++)if(f===y[$]){I=$;break}d.shiftKey?Fi(I,-1):Fi(I,1),d.stopPropagation(),d.preventDefault()},ky=function(d){var f=_o(),y=On(),I=mt(),$=gt();if(!(!f||!y||!I||!$)){var re=[y,I,$];if(!(document.activeElement instanceof HTMLElement&&!re.includes(document.activeElement))){var Me=Ao.includes(d)?"nextElementSibling":"previousElementSibling",Fe=document.activeElement;if(Fe){for(var It=0;It<f.children.length;It++){if(Fe=Fe[Me],!Fe)return;if(Fe instanceof HTMLButtonElement&&En(Fe))break}Fe instanceof HTMLButtonElement&&Fe.focus()}}}},Kh=function(d,f,y){xi(f.allowEscapeKey)&&(d.preventDefault(),y(lr.esc))},Vi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Qh=function(){var d=Zt(),f=Array.from(document.body.children);f.forEach(function(y){y.contains(d)||(y.hasAttribute("aria-hidden")&&y.setAttribute("data-previous-aria-hidden",y.getAttribute("aria-hidden")||""),y.setAttribute("aria-hidden","true"))})},ks=function(){var d=Array.from(document.body.children);d.forEach(function(f){f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")||""),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},dl=typeof window<"u"&&!!window.GestureEvent,Tr=function(){if(dl&&!ur(document.body,B.iosfix)){var d=document.body.scrollTop;document.body.style.top="".concat(d*-1,"px"),Se(document.body,B.iosfix),Yh()}},Yh=function(){var d=Zt();if(d){var f;d.ontouchstart=function(y){f=Oy(y)},d.ontouchmove=function(y){f&&(y.preventDefault(),y.stopPropagation())}}},Oy=function(d){var f=d.target,y=Zt(),I=Ga();return!y||!I||Os(d)||Zh(d)?!1:f===y||!Th(y)&&f instanceof HTMLElement&&f.tagName!=="INPUT"&&f.tagName!=="TEXTAREA"&&!(Th(I)&&I.contains(f))},Os=function(d){return d.touches&&d.touches.length&&d.touches[0].touchType==="stylus"},Zh=function(d){return d.touches&&d.touches.length>1},hl=function(){if(ur(document.body,B.iosfix)){var d=parseInt(document.body.style.top,10);Xn(document.body,B.iosfix),document.body.style.top="",document.body.scrollTop=d*-1}},ec=function(){var d=document.createElement("div");d.className=B["scrollbar-measure"],document.body.appendChild(d);var f=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),f},Li=null,tc=function(d){Li===null&&(document.body.scrollHeight>window.innerHeight||d==="scroll")&&(Li=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Li+ec(),"px"))},Fy=function(){Li!==null&&(document.body.style.paddingRight="".concat(Li,"px"),Li=null)};function fl(v,d,f,y){Qa()?pl(v,y):(Es(f).then(function(){return pl(v,y)}),Ns(Te)),dl?(d.setAttribute("style","display:none !important"),d.removeAttribute("class"),d.innerHTML=""):d.remove(),el()&&(Fy(),hl(),ks()),Fs()}function Fs(){Xn([document.documentElement,document.body],[B.shown,B["height-auto"],B["no-backdrop"],B["toast-shown"]])}function Ar(v){v=Jh(v);var d=Vi.swalPromiseResolve.get(this),f=Xh(this);this.isAwaitingPromise?v.isDismissed||(ji(this),d(v)):f&&d(v)}var Xh=function(d){var f=Ge();if(!f)return!1;var y=Ye.innerParams.get(d);if(!y||ur(f,y.hideClass.popup))return!1;Xn(f,y.showClass.popup),Se(f,y.hideClass.popup);var I=Zt();return Xn(I,y.showClass.backdrop),Se(I,y.hideClass.backdrop),rc(d,f,y),!0};function nc(v){var d=Vi.swalPromiseReject.get(this);ji(this),d&&d(v)}var ji=function(d){d.isAwaitingPromise&&(delete d.isAwaitingPromise,Ye.innerParams.get(d)||d._destroy())},Jh=function(d){return typeof d>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d)},rc=function(d,f,y){var I=Zt(),$=Ir&&Ah(f);typeof y.willClose=="function"&&y.willClose(f),$?ef(d,f,I,y.returnFocus,y.didClose):fl(d,I,y.returnFocus,y.didClose)},ef=function(d,f,y,I,$){Ir&&(Te.swalCloseEventFinishedCallback=fl.bind(null,d,y,I,$),f.addEventListener(Ir,function(re){re.target===f&&(Te.swalCloseEventFinishedCallback(),delete Te.swalCloseEventFinishedCallback)}))},pl=function(d,f){setTimeout(function(){typeof f=="function"&&f.bind(d.params)(),d._destroy&&d._destroy()})},Vn=function(d){var f=Ge();if(f||new lf,f=Ge(),!!f){var y=Ri();Qa()?$t(vo()):tf(f,d),je(y),f.setAttribute("data-loading","true"),f.setAttribute("aria-busy","true"),f.focus()}},tf=function(d,f){var y=_o(),I=Ri();!y||!I||(!f&&En(On())&&(f=On()),je(y),f&&($t(f),I.setAttribute("data-button-to-replace",f.className),y.insertBefore(I,f)),Se([d,y],B.loading))},nf=function(d,f){f.input==="select"||f.input==="radio"?sf(d,f):["text","email","number","tel","textarea"].some(function(y){return y===f.input})&&(Is(f.inputValue)||Cs(f.inputValue))&&(Vn(On()),af(d,f))},rf=function(d,f){var y=d.getInput();if(!y)return null;switch(f.input){case"checkbox":return of(y);case"radio":return ic(y);case"file":return Cn(y);default:return f.inputAutoTrim?y.value.trim():y.value}},of=function(d){return d.checked?1:0},ic=function(d){return d.checked?d.value:null},Cn=function(d){return d.files&&d.files.length?d.getAttribute("multiple")!==null?d.files:d.files[0]:null},sf=function(d,f){var y=Ge();if(y){var I=function(re){f.input==="select"?So(y,p(re),f):f.input==="radio"&&u(y,p(re),f)};Is(f.inputOptions)||Cs(f.inputOptions)?(Vn(On()),Pi(f.inputOptions).then(function($){d.hideLoading(),I($)})):C(f.inputOptions)==="object"?I(f.inputOptions):Zn("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(C(f.inputOptions)))}},af=function(d,f){var y=d.getInput();y&&($t(y),Pi(f.inputValue).then(function(I){y.value=f.input==="number"?"".concat(parseFloat(I)||0):"".concat(I),je(y),y.focus(),d.hideLoading()}).catch(function(I){Zn("Error in inputValue promise: ".concat(I)),y.value="",je(y),y.focus(),d.hideLoading()}))};function So(v,d,f){var y=Fn(v,B.select);if(y){var I=function(re,Me,Fe){var It=document.createElement("option");It.value=Fe,ln(It,Me),It.selected=m(Fe,f.inputValue),re.appendChild(It)};d.forEach(function($){var re=$[0],Me=$[1];if(Array.isArray(Me)){var Fe=document.createElement("optgroup");Fe.label=re,Fe.disabled=!1,y.appendChild(Fe),Me.forEach(function(It){return I(Fe,It[1],It[0])})}else I(y,Me,re)}),y.focus()}}function u(v,d,f){var y=Fn(v,B.radio);if(y){d.forEach(function($){var re=$[0],Me=$[1],Fe=document.createElement("input"),It=document.createElement("label");Fe.type="radio",Fe.name=B.radio,Fe.value=re,m(re,f.inputValue)&&(Fe.checked=!0);var gl=document.createElement("span");ln(gl,Me),gl.className=B.label,It.appendChild(Fe),It.appendChild(gl),y.appendChild(It)});var I=y.querySelectorAll("input");I.length&&I[0].focus()}}var p=function v(d){var f=[];return d instanceof Map?d.forEach(function(y,I){var $=y;C($)==="object"&&($=v($)),f.push([I,$])}):Object.keys(d).forEach(function(y){var I=d[y];C(I)==="object"&&(I=v(I)),f.push([y,I])}),f},m=function(d,f){return!!f&&f.toString()===d.toString()},_=void 0,R=function(d){var f=Ye.innerParams.get(d);d.disableButtons(),f.input?We(d,"confirm"):Xr(d,!0)},L=function(d){var f=Ye.innerParams.get(d);d.disableButtons(),f.returnInputValueOnDeny?We(d,"deny"):Oe(d,!1)},Z=function(d,f){d.disableButtons(),f(lr.cancel)},We=function(d,f){var y=Ye.innerParams.get(d);if(!y.input){Zn('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Mi(f)));return}var I=d.getInput(),$=rf(d,y);y.inputValidator?qt(d,$,f):I&&!I.checkValidity()?(d.enableButtons(),d.showValidationMessage(y.validationMessage||I.validationMessage)):f==="deny"?Oe(d,$):Xr(d,$)},qt=function(d,f,y){var I=Ye.innerParams.get(d);d.disableInput();var $=Promise.resolve().then(function(){return Pi(I.inputValidator(f,I.validationMessage))});$.then(function(re){d.enableButtons(),d.enableInput(),re?d.showValidationMessage(re):y==="deny"?Oe(d,f):Xr(d,f)})},Oe=function(d,f){var y=Ye.innerParams.get(d||_);if(y.showLoaderOnDeny&&Vn(mt()),y.preDeny){d.isAwaitingPromise=!0;var I=Promise.resolve().then(function(){return Pi(y.preDeny(f,y.validationMessage))});I.then(function($){$===!1?(d.hideLoading(),ji(d)):d.close({isDenied:!0,value:typeof $>"u"?f:$})}).catch(function($){return Ht(d||_,$)})}else d.close({isDenied:!0,value:f})},zt=function(d,f){d.close({isConfirmed:!0,value:f})},Ht=function(d,f){d.rejectPromise(f)},Xr=function(d,f){var y=Ye.innerParams.get(d||_);if(y.showLoaderOnConfirm&&Vn(),y.preConfirm){d.resetValidationMessage(),d.isAwaitingPromise=!0;var I=Promise.resolve().then(function(){return Pi(y.preConfirm(f,y.validationMessage))});I.then(function($){En(wo())||$===!1?(d.hideLoading(),ji(d)):zt(d,typeof $>"u"?f:$)}).catch(function($){return Ht(d||_,$)})}else zt(d,f)};function hn(){var v=Ye.innerParams.get(this);if(v){var d=Ye.domCache.get(this);$t(d.loader),Qa()?v.icon&&je(vo()):oc(d),Xn([d.popup,d.actions],B.loading),d.popup.removeAttribute("aria-busy"),d.popup.removeAttribute("data-loading"),d.confirmButton.disabled=!1,d.denyButton.disabled=!1,d.cancelButton.disabled=!1}}var oc=function(d){var f=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));f.length?je(f[0],"inline-block"):Io()&&$t(d.actions)};function sc(){var v=Ye.innerParams.get(this),d=Ye.domCache.get(this);return d?bo(d.popup,v.input):null}function FC(v,d,f){var y=Ye.domCache.get(v);d.forEach(function(I){y[I].disabled=f})}function VC(v,d){var f=Ge();if(!(!f||!v))if(v.type==="radio")for(var y=f.querySelectorAll('[name="'.concat(B.radio,'"]')),I=0;I<y.length;I++)y[I].disabled=d;else v.disabled=d}function LC(){FC(this,["confirmButton","denyButton","cancelButton"],!1)}function jC(){FC(this,["confirmButton","denyButton","cancelButton"],!0)}function BC(){VC(this.getInput(),!1)}function UC(){VC(this.getInput(),!0)}function $C(v){var d=Ye.domCache.get(this),f=Ye.innerParams.get(this);ln(d.validationMessage,v),d.validationMessage.className=B["validation-message"],f.customClass&&f.customClass.validationMessage&&Se(d.validationMessage,f.customClass.validationMessage),je(d.validationMessage);var y=this.getInput();y&&(y.setAttribute("aria-invalid","true"),y.setAttribute("aria-describedby",B["validation-message"]),Wr(y),Se(y,B.inputerror))}function qC(){var v=Ye.domCache.get(this);v.validationMessage&&$t(v.validationMessage);var d=this.getInput();d&&(d.removeAttribute("aria-invalid"),d.removeAttribute("aria-describedby"),Xn(d,B.inputerror))}var ac={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},LN=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],jN={},BN=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],zC=function(d){return Object.prototype.hasOwnProperty.call(ac,d)},HC=function(d){return LN.indexOf(d)!==-1},GC=function(d){return jN[d]},UN=function(d){zC(d)||cn('Unknown parameter "'.concat(d,'"'))},$N=function(d){BN.includes(d)&&cn('The parameter "'.concat(d,'" is incompatible with toasts'))},qN=function(d){var f=GC(d);f&&za(d,f)},zN=function(d){d.backdrop===!1&&d.allowOutsideClick&&cn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var f in d)UN(f),d.toast&&$N(f),qN(f)};function WC(v){var d=Ge(),f=Ye.innerParams.get(this);if(!d||ur(d,f.hideClass.popup)){cn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var y=HN(v),I=Object.assign({},f,y);Hh(this,I),Ye.innerParams.set(this,I),Object.defineProperties(this,{params:{value:Object.assign({},this.params,v),writable:!1,enumerable:!0}})}var HN=function(d){var f={};return Object.keys(d).forEach(function(y){HC(y)?f[y]=d[y]:cn("Invalid parameter to update: ".concat(y))}),f};function KC(){var v=Ye.domCache.get(this),d=Ye.innerParams.get(this);if(!d){QC(this);return}v.popup&&Te.swalCloseEventFinishedCallback&&(Te.swalCloseEventFinishedCallback(),delete Te.swalCloseEventFinishedCallback),typeof d.didDestroy=="function"&&d.didDestroy(),GN(this)}var GN=function(d){QC(d),delete d.params,delete Te.keydownHandler,delete Te.keydownTarget,delete Te.currentInstance},QC=function(d){d.isAwaitingPromise?(Vy(Ye,d),d.isAwaitingPromise=!0):(Vy(Vi,d),Vy(Ye,d),delete d.isAwaitingPromise,delete d.disableButtons,delete d.enableButtons,delete d.getInput,delete d.disableInput,delete d.enableInput,delete d.hideLoading,delete d.disableLoading,delete d.showValidationMessage,delete d.resetValidationMessage,delete d.close,delete d.closePopup,delete d.closeModal,delete d.closeToast,delete d.rejectPromise,delete d.update,delete d._destroy)},Vy=function(d,f){for(var y in d)d[y].delete(f)},WN=Object.freeze({__proto__:null,_destroy:KC,close:Ar,closeModal:Ar,closePopup:Ar,closeToast:Ar,disableButtons:jC,disableInput:UC,disableLoading:hn,enableButtons:LC,enableInput:BC,getInput:sc,handleAwaitingPromise:ji,hideLoading:hn,rejectPromise:nc,resetValidationMessage:qC,showValidationMessage:$C,update:WC}),KN=function(d,f,y){d.toast?QN(d,f,y):(ZN(f),XN(f),JN(d,f,y))},QN=function(d,f,y){f.popup.onclick=function(){d&&(YN(d)||d.timer||d.input)||y(lr.close)}},YN=function(d){return!!(d.showConfirmButton||d.showDenyButton||d.showCancelButton||d.showCloseButton)},cf=!1,ZN=function(d){d.popup.onmousedown=function(){d.container.onmouseup=function(f){d.container.onmouseup=function(){},f.target===d.container&&(cf=!0)}}},XN=function(d){d.container.onmousedown=function(f){f.target===d.container&&f.preventDefault(),d.popup.onmouseup=function(y){d.popup.onmouseup=function(){},(y.target===d.popup||y.target instanceof HTMLElement&&d.popup.contains(y.target))&&(cf=!0)}}},JN=function(d,f,y){f.container.onclick=function(I){if(cf){cf=!1;return}I.target===f.container&&xi(d.allowOutsideClick)&&y(lr.backdrop)}},ek=function(d){return C(d)==="object"&&d.jquery},YC=function(d){return d instanceof Element||ek(d)},tk=function(d){var f={};return C(d[0])==="object"&&!YC(d[0])?Object.assign(f,d[0]):["title","html","icon"].forEach(function(y,I){var $=d[I];typeof $=="string"||YC($)?f[y]=$:$!==void 0&&Zn("Unexpected type of ".concat(y,'! Expected "string" or "Element", got ').concat(C($)))}),f};function nk(){for(var v=this,d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return g(v,f)}function rk(v){var d=function(f){function y(){return a(this,y),o(this,y,arguments)}return M(y,f),b(y,[{key:"_main",value:function($,re){return A(k(y.prototype),"_main",this).call(this,$,Object.assign({},v,re))}}])}(this);return d}var ik=function(){return Te.timeout&&Te.timeout.getTimerLeft()},ZC=function(){if(Te.timeout)return Sh(),Te.timeout.stop()},XC=function(){if(Te.timeout){var d=Te.timeout.start();return Co(d),d}},ok=function(){var d=Te.timeout;return d&&(d.running?ZC():XC())},sk=function(d){if(Te.timeout){var f=Te.timeout.increase(d);return Co(f,!0),f}},ak=function(){return!!(Te.timeout&&Te.timeout.isRunning())},JC=!1,Ly={};function ck(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Ly[v]=this,JC||(document.body.addEventListener("click",uk),JC=!0)}var uk=function(d){for(var f=d.target;f&&f!==document;f=f.parentNode)for(var y in Ly){var I=f.getAttribute(y);if(I){Ly[y].fire({template:I});return}}},lk=Object.freeze({__proto__:null,argsToParams:tk,bindClickHandler:ck,clickCancel:Ry,clickConfirm:Dr,clickDeny:Py,enableLoading:Vn,fire:nk,getActions:_o,getCancelButton:gt,getCloseButton:Ka,getConfirmButton:On,getContainer:Zt,getDenyButton:mt,getFocusableElements:Ts,getFooter:Ch,getHtmlContainer:Ga,getIcon:vo,getIconContent:Eh,getImage:Ih,getInputLabel:Wa,getLoader:Ri,getPopup:Ge,getProgressSteps:Ds,getTimerLeft:ik,getTimerProgressBar:Gr,getTitle:Ha,getValidationMessage:wo,increaseTimer:sk,isDeprecatedParameter:GC,isLoading:tl,isTimerRunning:ak,isUpdatableParameter:HC,isValidParameter:zC,isVisible:xy,mixin:rk,resumeTimer:XC,showLoading:Vn,stopTimer:ZC,toggleTimer:ok}),dk=function(){function v(d,f){a(this,v),this.callback=d,this.remaining=f,this.running=!1,this.start()}return b(v,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(f){var y=this.running;return y&&this.stop(),this.remaining+=f,y&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),eD=["swal-title","swal-html","swal-footer"],hk=function(d){var f=typeof d.template=="string"?document.querySelector(d.template):d.template;if(!f)return{};var y=f.content;_k(y);var I=Object.assign(fk(y),pk(y),gk(y),mk(y),yk(y),vk(y),wk(y,eD));return I},fk=function(d){var f={},y=Array.from(d.querySelectorAll("swal-param"));return y.forEach(function(I){Vs(I,["name","value"]);var $=I.getAttribute("name"),re=I.getAttribute("value");typeof ac[$]=="boolean"?f[$]=re!=="false":C(ac[$])==="object"?f[$]=JSON.parse(re):f[$]=re}),f},pk=function(d){var f={},y=Array.from(d.querySelectorAll("swal-function-param"));return y.forEach(function(I){var $=I.getAttribute("name"),re=I.getAttribute("value");f[$]=new Function("return ".concat(re))()}),f},gk=function(d){var f={},y=Array.from(d.querySelectorAll("swal-button"));return y.forEach(function(I){Vs(I,["type","color","aria-label"]);var $=I.getAttribute("type");f["".concat($,"ButtonText")]=I.innerHTML,f["show".concat(Mi($),"Button")]=!0,I.hasAttribute("color")&&(f["".concat($,"ButtonColor")]=I.getAttribute("color")),I.hasAttribute("aria-label")&&(f["".concat($,"ButtonAriaLabel")]=I.getAttribute("aria-label"))}),f},mk=function(d){var f={},y=d.querySelector("swal-image");return y&&(Vs(y,["src","width","height","alt"]),y.hasAttribute("src")&&(f.imageUrl=y.getAttribute("src")||void 0),y.hasAttribute("width")&&(f.imageWidth=y.getAttribute("width")||void 0),y.hasAttribute("height")&&(f.imageHeight=y.getAttribute("height")||void 0),y.hasAttribute("alt")&&(f.imageAlt=y.getAttribute("alt")||void 0)),f},yk=function(d){var f={},y=d.querySelector("swal-icon");return y&&(Vs(y,["type","color"]),y.hasAttribute("type")&&(f.icon=y.getAttribute("type")),y.hasAttribute("color")&&(f.iconColor=y.getAttribute("color")),f.iconHtml=y.innerHTML),f},vk=function(d){var f={},y=d.querySelector("swal-input");y&&(Vs(y,["type","label","placeholder","value"]),f.input=y.getAttribute("type")||"text",y.hasAttribute("label")&&(f.inputLabel=y.getAttribute("label")),y.hasAttribute("placeholder")&&(f.inputPlaceholder=y.getAttribute("placeholder")),y.hasAttribute("value")&&(f.inputValue=y.getAttribute("value")));var I=Array.from(d.querySelectorAll("swal-input-option"));return I.length&&(f.inputOptions={},I.forEach(function($){Vs($,["value"]);var re=$.getAttribute("value"),Me=$.innerHTML;f.inputOptions[re]=Me})),f},wk=function(d,f){var y={};for(var I in f){var $=f[I],re=d.querySelector($);re&&(Vs(re,[]),y[$.replace(/^swal-/,"")]=re.innerHTML.trim())}return y},_k=function(d){var f=eD.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(d.children).forEach(function(y){var I=y.tagName.toLowerCase();f.includes(I)||cn("Unrecognized element <".concat(I,">"))})},Vs=function(d,f){Array.from(d.attributes).forEach(function(y){f.indexOf(y.name)===-1&&cn(['Unrecognized attribute "'.concat(y.name,'" on <').concat(d.tagName.toLowerCase(),">."),"".concat(f.length?"Allowed attributes are: ".concat(f.join(", ")):"To set the value, use HTML within the element.")])})},tD=10,bk=function(d){var f=Zt(),y=Ge();typeof d.willOpen=="function"&&d.willOpen(y);var I=window.getComputedStyle(document.body),$=I.overflowY;Dk(f,y,d),setTimeout(function(){Ik(f,y)},tD),el()&&(Ck(f,d.scrollbarPadding,$),Qh()),!Qa()&&!Te.previousActiveElement&&(Te.previousActiveElement=document.activeElement),typeof d.didOpen=="function"&&setTimeout(function(){return d.didOpen(y)}),Xn(f,B["no-transition"])},Ek=function v(d){var f=Ge();if(!(d.target!==f||!Ir)){var y=Zt();f.removeEventListener(Ir,v),y.style.overflowY="auto"}},Ik=function(d,f){Ir&&Ah(f)?(d.style.overflowY="hidden",f.addEventListener(Ir,Ek)):d.style.overflowY="auto"},Ck=function(d,f,y){Tr(),f&&y!=="hidden"&&tc(y),setTimeout(function(){d.scrollTop=0})},Dk=function(d,f,y){Se(d,y.showClass.backdrop),y.animation?(f.style.setProperty("opacity","0","important"),je(f,"grid"),setTimeout(function(){Se(f,y.showClass.popup),f.style.removeProperty("opacity")},tD)):je(f,"grid"),Se([document.documentElement,document.body],B.shown),y.heightAuto&&y.backdrop&&!y.toast&&Se([document.documentElement,document.body],B["height-auto"])},nD={email:function(d,f){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(d)?Promise.resolve():Promise.resolve(f||"Invalid email address")},url:function(d,f){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(f||"Invalid URL")}};function Tk(v){v.inputValidator||(v.input==="email"&&(v.inputValidator=nD.email),v.input==="url"&&(v.inputValidator=nD.url))}function Ak(v){(!v.target||typeof v.target=="string"&&!document.querySelector(v.target)||typeof v.target!="string"&&!v.target.appendChild)&&(cn('Target parameter is not valid, defaulting to "body"'),v.target="body")}function Sk(v){Tk(v),v.showLoaderOnConfirm&&!v.preConfirm&&cn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Ak(v),typeof v.title=="string"&&(v.title=v.title.split(`
`).join("<br />")),Ph(v)}var Jr,uf=new WeakMap,Mt=function(){function v(){if(a(this,v),l(this,uf,void 0),!(typeof window>"u")){Jr=this;for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];var I=Object.freeze(this.constructor.argsToParams(f));this.params=I,this.isAwaitingPromise=!1,h(uf,this,this._main(Jr.params))}}return b(v,[{key:"_main",value:function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zN(Object.assign({},y,f)),Te.currentInstance){var I=Vi.swalPromiseResolve.get(Te.currentInstance),$=Te.currentInstance.isAwaitingPromise;Te.currentInstance._destroy(),$||I({isDismissed:!0}),el()&&ks()}Te.currentInstance=Jr;var re=xk(f,y);Sk(re),Object.freeze(re),Te.timeout&&(Te.timeout.stop(),delete Te.timeout),clearTimeout(Te.restoreFocusTimeout);var Me=Pk(Jr);return Hh(Jr,re),Ye.innerParams.set(Jr,re),Mk(Jr,Me,re)}},{key:"then",value:function(f){return c(uf,this).then(f)}},{key:"finally",value:function(f){return c(uf,this).finally(f)}}])}(),Mk=function(d,f,y){return new Promise(function(I,$){var re=function(Fe){d.close({isDismissed:!0,dismiss:Fe})};Vi.swalPromiseResolve.set(d,I),Vi.swalPromiseReject.set(d,$),f.confirmButton.onclick=function(){R(d)},f.denyButton.onclick=function(){L(d)},f.cancelButton.onclick=function(){Z(d,re)},f.closeButton.onclick=function(){re(lr.close)},KN(y,f,re),Gh(Te,y,re),nf(d,y),bk(y),Rk(Te,y,re),Nk(f,y),setTimeout(function(){f.container.scrollTop=0})})},xk=function(d,f){var y=hk(d),I=Object.assign({},ac,f,y,d);return I.showClass=Object.assign({},ac.showClass,I.showClass),I.hideClass=Object.assign({},ac.hideClass,I.hideClass),I.animation===!1&&(I.showClass={backdrop:"swal2-noanimation"},I.hideClass={}),I},Pk=function(d){var f={popup:Ge(),container:Zt(),actions:_o(),confirmButton:On(),denyButton:mt(),cancelButton:gt(),loader:Ri(),closeButton:Ka(),validationMessage:wo(),progressSteps:Ds()};return Ye.domCache.set(d,f),f},Rk=function(d,f,y){var I=Gr();$t(I),f.timer&&(d.timeout=new dk(function(){y("timer"),delete d.timeout},f.timer),f.timerProgressBar&&(je(I),dn(I,f,"timerProgressBar"),setTimeout(function(){d.timeout&&d.timeout.running&&Co(f.timer)})))},Nk=function(d,f){if(!f.toast){if(!xi(f.allowEnterKey)){Ok();return}kk(d,f)||Fi(-1,1)}},kk=function(d,f){return f.focusDeny&&En(d.denyButton)?(d.denyButton.focus(),!0):f.focusCancel&&En(d.cancelButton)?(d.cancelButton.focus(),!0):f.focusConfirm&&En(d.confirmButton)?(d.confirmButton.focus(),!0):!1},Ok=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var rD=new Date,iD=localStorage.getItem("swal-initiation");iD?(rD.getTime()-Date.parse(iD))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var v=document.createElement("audio");v.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",v.loop=!0,document.body.appendChild(v),setTimeout(function(){v.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(rD))}Mt.prototype.disableButtons=jC,Mt.prototype.enableButtons=LC,Mt.prototype.getInput=sc,Mt.prototype.disableInput=UC,Mt.prototype.enableInput=BC,Mt.prototype.hideLoading=hn,Mt.prototype.disableLoading=hn,Mt.prototype.showValidationMessage=$C,Mt.prototype.resetValidationMessage=qC,Mt.prototype.close=Ar,Mt.prototype.closePopup=Ar,Mt.prototype.closeModal=Ar,Mt.prototype.closeToast=Ar,Mt.prototype.rejectPromise=nc,Mt.prototype.update=WC,Mt.prototype._destroy=KC,Object.assign(Mt,lk),Object.keys(WN).forEach(function(v){Mt[v]=function(){if(Jr&&Jr[v]){var d;return(d=Jr)[v].apply(d,arguments)}return null}}),Mt.DismissReason=lr,Mt.version="11.11.1";var lf=Mt;return lf.default=lf,lf});typeof Ci<"u"&&Ci.Sweetalert2&&(Ci.swal=Ci.sweetAlert=Ci.Swal=Ci.SweetAlert=Ci.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var dD=null;var zy=1,Hy=Symbol("SIGNAL");function He(t){let e=dD;return dD=t,e}var hD={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vk(t){if(!(Ky(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===zy)){if(!t.producerMustRecompute(t)&&!Gy(t)){t.dirty=!1,t.lastCleanEpoch=zy;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=zy}}function fD(t){return t&&(t.nextProducerIndex=0),He(t)}function pD(t,e){if(He(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ky(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Wy(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Gy(t){wf(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Vk(n),r!==n.version))return!0}return!1}function gD(t){if(wf(t),Ky(t))for(let e=0;e<t.producerNode.length;e++)Wy(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Wy(t,e){if(Lk(t),wf(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Wy(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];wf(i),i.producerIndexOfThis[r]=e}}function Ky(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function wf(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Lk(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function jk(){throw new Error}var Bk=jk;function mD(t){Bk=t}function ge(t){return typeof t=="function"}function cc(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var _f=cc(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function js(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(o){e=o instanceof _f?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{yD(o)}catch(s){e=e??[],s instanceof _f?e=[...e,...s.errors]:e.push(s)}}if(e)throw new _f(e)}}add(e){var n;if(e&&e!==this)if(this.closed)yD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&js(n,e)}remove(e){let{_finalizers:n}=this;n&&js(n,e),e instanceof t&&e._removeParent(this)}};Pt.EMPTY=(()=>{let t=new Pt;return t.closed=!0,t})();var Qy=Pt.EMPTY;function bf(t){return t instanceof Pt||t&&"closed"in t&&ge(t.remove)&&ge(t.add)&&ge(t.unsubscribe)}function yD(t){ge(t)?t():t.unsubscribe()}var Mr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var uc={setTimeout(t,e,...n){let{delegate:r}=uc;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=uc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ef(t){uc.setTimeout(()=>{let{onUnhandledError:e}=Mr;if(e)e(t);else throw t})}function vl(){}var vD=Yy("C",void 0,void 0);function wD(t){return Yy("E",void 0,t)}function _D(t){return Yy("N",t,void 0)}function Yy(t,e,n){return{kind:t,value:e,error:n}}var Bs=null;function lc(t){if(Mr.useDeprecatedSynchronousErrorHandling){let e=!Bs;if(e&&(Bs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bs;if(Bs=null,n)throw r}}else t()}function bD(t){Mr.useDeprecatedSynchronousErrorHandling&&Bs&&(Bs.errorThrown=!0,Bs.error=t)}var Us=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bf(e)&&e.add(this)):this.destination=qk}static create(e,n,r){return new Ui(e,n,r)}next(e){this.isStopped?Xy(_D(e),this):this._next(e)}error(e){this.isStopped?Xy(wD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xy(vD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Uk=Function.prototype.bind;function Zy(t,e){return Uk.call(t,e)}var Jy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){If(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){If(r)}else If(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){If(n)}}},Ui=class extends Us{constructor(e,n,r){super();let i;if(ge(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Mr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zy(e.next,o),error:e.error&&Zy(e.error,o),complete:e.complete&&Zy(e.complete,o)}):i=e}this.destination=new Jy(i)}};function If(t){Mr.useDeprecatedSynchronousErrorHandling?bD(t):Ef(t)}function $k(t){throw t}function Xy(t,e){let{onStoppedNotification:n}=Mr;n&&uc.setTimeout(()=>n(t,e))}var qk={closed:!0,next:vl,error:$k,complete:vl};var dc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dn(t){return t}function ev(...t){return tv(t)}function tv(t){return t.length===0?Dn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ve=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Hk(n)?n:new Ui(n,r,i);return lc(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ED(r),new r((i,o)=>{let s=new Ui({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[dc](){return this}pipe(...n){return tv(n)(this)}toPromise(n){return n=ED(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function ED(t){var e;return(e=t??Mr.Promise)!==null&&e!==void 0?e:Promise}function zk(t){return t&&ge(t.next)&&ge(t.error)&&ge(t.complete)}function Hk(t){return t&&t instanceof Us||zk(t)&&bf(t)}function nv(t){return ge(t?.lift)}function Ee(t){return e=>{if(nv(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ie(t,e,n,r,i){return new rv(t,e,n,r,i)}var rv=class extends Us{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hc(){return Ee((t,e)=>{let n=null;t._refCount++;let r=Ie(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var fc=class extends ve{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,nv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;let n=this.getSubject();e.add(this.source.subscribe(Ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return hc()(this)}};var ID=cc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ct=(()=>{class t extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Cf(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ID}next(n){lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qy:(this.currentObservers=null,o.push(n),new Pt(()=>{this.currentObservers=null,js(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ve;return n.source=this,n}}return t.create=(e,n)=>new Cf(e,n),t})(),Cf=class extends Ct{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Qy}};var Gt=class extends Ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var wl={now(){return(wl.delegate||Date).now()},delegate:void 0};var Df=class extends Ct{constructor(e=1/0,n=1/0,r=wl){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Tf=class extends Pt{constructor(e,n){super()}schedule(e,n=0){return this}};var _l={setInterval(t,e,...n){let{delegate:r}=_l;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=_l;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var pc=class extends Tf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return _l.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&_l.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,js(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var gc=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};gc.now=wl.now;var mc=class extends gc{constructor(e,n=gc.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var $s=new mc(pc);var Af=class extends pc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Sf=class extends mc{};var iv=new Sf(Af);var Tn=new ve(t=>t.complete());function CD(t){return t&&ge(t.schedule)}function ov(t){return t[t.length-1]}function Mf(t){return ge(ov(t))?t.pop():void 0}function ti(t){return CD(ov(t))?t.pop():void 0}function DD(t,e){return typeof ov(t)=="number"?t.pop():e}var xf=t=>t&&typeof t.length=="number"&&typeof t!="function";function Pf(t){return ge(t?.then)}function Rf(t){return ge(t[dc])}function Nf(t){return Symbol.asyncIterator&&ge(t?.[Symbol.asyncIterator])}function kf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Gk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Of=Gk();function Ff(t){return ge(t?.[Of])}function Vf(t){return sD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield df(n.read());if(i)return yield df(void 0);yield yield df(r)}}finally{n.releaseLock()}})}function Lf(t){return ge(t?.getReader)}function ct(t){if(t instanceof ve)return t;if(t!=null){if(Rf(t))return Wk(t);if(xf(t))return Kk(t);if(Pf(t))return Qk(t);if(Nf(t))return TD(t);if(Ff(t))return Yk(t);if(Lf(t))return Zk(t)}throw kf(t)}function Wk(t){return new ve(e=>{let n=t[dc]();if(ge(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kk(t){return new ve(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Qk(t){return new ve(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ef)})}function Yk(t){return new ve(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function TD(t){return new ve(e=>{Xk(t,e).catch(n=>e.error(n))})}function Zk(t){return TD(Vf(t))}function Xk(t,e){var n,r,i,o;return oD(this,void 0,void 0,function*(){try{for(n=aD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ln(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function jn(t,e=0){return Ee((n,r)=>{n.subscribe(Ie(r,i=>Ln(r,t,()=>r.next(i),e),()=>Ln(r,t,()=>r.complete(),e),i=>Ln(r,t,()=>r.error(i),e)))})}function dr(t,e=0){return Ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function AD(t,e){return ct(t).pipe(dr(e),jn(e))}function SD(t,e){return ct(t).pipe(dr(e),jn(e))}function MD(t,e){return new ve(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function xD(t,e){return new ve(n=>{let r;return Ln(n,e,()=>{r=t[Of](),Ln(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}function jf(t,e){if(!t)throw new Error("Iterable cannot be null");return new ve(n=>{Ln(n,e,()=>{let r=t[Symbol.asyncIterator]();Ln(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function PD(t,e){return jf(Vf(t),e)}function RD(t,e){if(t!=null){if(Rf(t))return AD(t,e);if(xf(t))return MD(t,e);if(Pf(t))return SD(t,e);if(Nf(t))return jf(t,e);if(Ff(t))return xD(t,e);if(Lf(t))return PD(t,e)}throw kf(t)}function xe(t,e){return e?RD(t,e):ct(t)}function le(...t){let e=ti(t);return xe(t,e)}function yc(t,e){let n=ge(t)?t:()=>t,r=i=>i.error(n());return new ve(e?i=>e.schedule(r,0,i):r)}function sv(t){return!!t&&(t instanceof ve||ge(t.lift)&&ge(t.subscribe))}var $i=cc(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(t,e){return Ee((n,r)=>{let i=0;n.subscribe(Ie(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Jk}=Array;function eO(t,e){return Jk(e)?t(...e):t(e)}function Bf(t){return ae(e=>eO(t,e))}var{isArray:tO}=Array,{getPrototypeOf:nO,prototype:rO,keys:iO}=Object;function Uf(t){if(t.length===1){let e=t[0];if(tO(e))return{args:e,keys:null};if(oO(e)){let n=iO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function oO(t){return t&&typeof t=="object"&&nO(t)===rO}function $f(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function qf(...t){let e=ti(t),n=Mf(t),{args:r,keys:i}=Uf(t);if(r.length===0)return xe([],e);let o=new ve(sO(r,e,i?s=>$f(i,s):Dn));return n?o.pipe(Bf(n)):o}function sO(t,e,n=Dn){return r=>{ND(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ND(e,()=>{let l=xe(t[c],e),h=!1;l.subscribe(Ie(r,g=>{o[c]=g,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ND(t,e,n){t?Ln(n,t,e):e()}function kD(t,e,n,r,i,o,s,a){let c=[],l=0,h=0,g=!1,w=()=>{g&&!c.length&&!l&&e.complete()},b=k=>l<r?A(k):c.push(k),A=k=>{o&&e.next(k),l++;let M=!1;ct(n(k,h++)).subscribe(Ie(e,U=>{i?.(U),o?b(U):e.next(U)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let U=c.shift();s?Ln(e,s,()=>A(U)):A(U)}w()}catch(U){e.error(U)}}))};return t.subscribe(Ie(e,b,()=>{g=!0,w()})),()=>{a?.()}}function Wt(t,e,n=1/0){return ge(e)?Wt((r,i)=>ae((o,s)=>e(r,o,i,s))(ct(t(r,i))),n):(typeof e=="number"&&(n=e),Ee((r,i)=>kD(r,i,t,n)))}function bl(t=1/0){return Wt(Dn,t)}function OD(){return bl(1)}function vc(...t){return OD()(xe(t,ti(t)))}function zf(t){return new ve(e=>{ct(t()).subscribe(e)})}function av(...t){let e=Mf(t),{args:n,keys:r}=Uf(t),i=new ve(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let g=!1;ct(n[h]).subscribe(Ie(o,w=>{g||(g=!0,l--),a[h]=w},()=>c--,void 0,()=>{(!c||!g)&&(l||o.next(r?$f(r,a):a),o.complete())}))}});return e?i.pipe(Bf(e)):i}function cv(...t){let e=ti(t),n=DD(t,1/0),r=t;return r.length?r.length===1?ct(r[0]):bl(n)(xe(r,e)):Tn}function Xt(t,e){return Ee((n,r)=>{let i=0;n.subscribe(Ie(r,o=>t.call(e,o,i++)&&r.next(o)))})}function xo(t){return Ee((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ie(n,void 0,void 0,s=>{o=ct(t(s,xo(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function FD(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(Ie(s,h=>{let g=l++;c=a?t(c,h,g):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Po(t,e){return ge(e)?Wt(t,e,1):Wt(t,1)}function uv(t,e=$s){return Ee((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(Ie(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Ro(t){return Ee((e,n)=>{let r=!1;e.subscribe(Ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qi(t){return t<=0?()=>Tn:Ee((e,n)=>{let r=0;e.subscribe(Ie(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function lv(t){return ae(()=>t)}function dv(t,e=Dn){return t=t??aO,Ee((n,r)=>{let i,o=!0;n.subscribe(Ie(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function aO(t,e){return t===e}function Hf(t=cO){return Ee((e,n)=>{let r=!1;e.subscribe(Ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function cO(){return new $i}function xr(t){return Ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function hr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((i,o)=>t(i,o,r)):Dn,qi(1),n?Ro(e):Hf(()=>new $i))}function wc(t){return t<=0?()=>Tn:Ee((e,n)=>{let r=[];e.subscribe(Ie(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function hv(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((i,o)=>t(i,o,r)):Dn,wc(1),n?Ro(e):Hf(()=>new $i))}function El(){return Ee((t,e)=>{let n,r=!1;t.subscribe(Ie(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function qs(t,e){return Ee(FD(t,e,arguments.length>=2,!0))}function VD(t={}){let{connector:e=()=>new Ct,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,h=!1,g=!1,w=()=>{a?.unsubscribe(),a=void 0},b=()=>{w(),s=c=void 0,h=g=!1},A=()=>{let k=s;b(),k?.unsubscribe()};return Ee((k,M)=>{l++,!g&&!h&&w();let U=c=c??e();M.add(()=>{l--,l===0&&!g&&!h&&(a=fv(A,i))}),U.subscribe(M),!s&&l>0&&(s=new Ui({next:Y=>U.next(Y),error:Y=>{g=!0,w(),a=fv(b,n,Y),U.error(Y)},complete:()=>{h=!0,w(),a=fv(b,r),U.complete()}}),ct(k).subscribe(s))})(o)}}function fv(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Ui({next:()=>{r.unsubscribe(),t()}});return ct(e(...n)).subscribe(r)}function Gf(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,VD({connector:()=>new Df(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function zs(...t){let e=ti(t);return Ee((n,r)=>{(e?vc(t,n,e):vc(t,n)).subscribe(r)})}function Xe(t,e){return Ee((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ie(r,c=>{i?.unsubscribe();let l=0,h=o++;ct(t(c,h)).subscribe(i=Ie(r,g=>r.next(e?e(c,g,h,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Wf(t,e){return ge(e)?Xe(()=>t,e):Xe(()=>t)}function pv(t){return Ee((e,n)=>{ct(t).subscribe(Ie(n,()=>n.complete(),vl)),!n.closed&&e.subscribe(n)})}function yt(t,e,n){let r=ge(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ie(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dn}var bT="https://g.co/ng/security#xss",fe=class extends Error{constructor(e,n){super(Cp(e,n)),this.code=e}};function Cp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ol(t){return{toString:t}.toString()}var Kf="__parameters__";function uO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function ET(t,e,n){return Ol(()=>{let r=uO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let g=c.hasOwnProperty(Kf)?c[Kf]:Object.defineProperty(c,Kf,{value:[]})[Kf];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Hs=globalThis;function nt(t){for(let e in t)if(t[e]===nt)return e;throw Error("Could not find renamed property on target object.")}function lO(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Sn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Sn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function LD(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var dO=nt({__forward_ref__:nt});function Fr(t){return t.__forward_ref__=Fr,t.toString=function(){return Sn(this())},t}function An(t){return IT(t)?t():t}function IT(t){return typeof t=="function"&&t.hasOwnProperty(dO)&&t.__forward_ref__===Fr}function ce(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function er(t){return{providers:t.providers||[],imports:t.imports||[]}}function Dp(t){return jD(t,DT)||jD(t,TT)}function CT(t){return Dp(t)!==null}function jD(t,e){return t.hasOwnProperty(e)?t[e]:null}function hO(t){let e=t&&(t[DT]||t[TT]);return e||null}function BD(t){return t&&(t.hasOwnProperty(UD)||t.hasOwnProperty(fO))?t[UD]:null}var DT=nt({\u0275prov:nt}),UD=nt({\u0275inj:nt}),TT=nt({ngInjectableDef:nt}),fO=nt({ngInjectorDef:nt}),X=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ce({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function AT(t){return t&&!!t.\u0275providers}var pO=nt({\u0275cmp:nt}),gO=nt({\u0275dir:nt}),mO=nt({\u0275pipe:nt}),yO=nt({\u0275mod:nt}),rp=nt({\u0275fac:nt}),Il=nt({__NG_ELEMENT_ID__:nt}),$D=nt({__NG_ENV_ID__:nt});function Tp(t){return typeof t=="string"?t:t==null?"":String(t)}function vO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Tp(t)}function wO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new fe(-200,t)}function mw(t,e){throw new fe(-201,!1)}var Pe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Pe||{}),xv;function ST(){return xv}function Bn(t){let e=xv;return xv=t,e}function MT(t,e,n){let r=Dp(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Pe.Optional)return null;if(e!==void 0)return e;mw(t,"Injector")}var _O={},Cl=_O,Pv="__NG_DI_FLAG__",ip="ngTempTokenPath",bO="ngTokenPath",EO=/\n/gm,IO="\u0275",qD="__source",Ic;function CO(){return Ic}function No(t){let e=Ic;return Ic=t,e}function DO(t,e=Pe.Default){if(Ic===void 0)throw new fe(-203,!1);return Ic===null?MT(t,void 0,e):Ic.get(t,e&Pe.Optional?null:void 0,e)}function K(t,e=Pe.Default){return(ST()||DO)(An(t),e)}function ie(t,e=Pe.Default){return K(t,Ap(e))}function Ap(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Rv(t){let e=[];for(let n=0;n<t.length;n++){let r=An(t[n]);if(Array.isArray(r)){if(r.length===0)throw new fe(900,!1);let i,o=Pe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=TO(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function xT(t,e){return t[Pv]=e,t.prototype[Pv]=e,t}function TO(t){return t[Pv]}function AO(t,e,n,r){let i=t[ip];throw e[qD]&&i.unshift(e[qD]),t.message=SO(`
`+t.message,i,n,r),t[bO]=i,t[ip]=null,t}function SO(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==IO?t.slice(2):t;let i=Sn(e);if(Array.isArray(e))i=e.map(Sn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Sn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(EO,`
  `)}`}var Rt=xT(ET("Optional"),8);var PT=xT(ET("SkipSelf"),4);function Ks(t,e){let n=t.hasOwnProperty(rp);return n?t[rp]:null}function yw(t,e){t.forEach(n=>Array.isArray(n)?yw(n,e):e(n))}function RT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function op(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function MO(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function xO(t,e,n){let r=Fl(t,e);return r>=0?t[r|1]=n:(r=~r,MO(t,r,e,n)),r}function gv(t,e){let n=Fl(t,e);if(n>=0)return t[n|1]}function Fl(t,e){return PO(t,e,1)}function PO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Dc={},fr=[],Tc=new X(""),NT=new X("",-1),kT=new X(""),sp=class{get(e,n=Cl){if(n===Cl){let r=new Error(`NullInjectorError: No provider for ${Sn(e)}!`);throw r.name="NullInjectorError",r}return n}},OT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(OT||{}),ii=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ii||{}),pn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(pn||{});function RO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Nv(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];NO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function FT(t){return t===3||t===4||t===6}function NO(t){return t.charCodeAt(0)===64}function Dl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?zD(t,n,i,null,e[++r]):zD(t,n,i,null,null))}}return t}function zD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var VT="ng-template";function kO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(vw(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function vw(t){return t.type===4&&t.value!==VT}function OO(t,e,n){let r=t.type===4&&!n?VT:t.value;return e===r}function FO(t,e,n){let r=4,i=t.attrs,o=i!==null?jO(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Pr(r)&&!Pr(c))return!1;if(s&&Pr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!OO(t,c,n)||c===""&&e.length===1){if(Pr(r))return!1;s=!0}}else if(r&8){if(i===null||!kO(t,i,c,n)){if(Pr(r))return!1;s=!0}}else{let l=e[++a],h=VO(c,i,vw(t),n);if(h===-1){if(Pr(r))return!1;s=!0;continue}if(l!==""){let g;if(h>o?g="":g=i[h+1].toLowerCase(),r&2&&l!==g){if(Pr(r))return!1;s=!0}}}}return Pr(r)||s}function Pr(t){return(t&1)===0}function VO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return BO(e,t)}function LO(t,e,n=!1){for(let r=0;r<e.length;r++)if(FO(t,e[r],n))return!0;return!1}function jO(t){for(let e=0;e<t.length;e++){let n=t[e];if(FT(n))return e}return t.length}function BO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function HD(t,e){return t?":not("+e.trim()+")":e}function UO(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Pr(s)&&(e+=HD(o,i),i=""),r=s,o=o||!Pr(r);n++}return i!==""&&(e+=HD(o,i)),e}function $O(t){return t.map(UO).join(",")}function qO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Pr(i))break;i=o}r++}return{attrs:e,classes:n}}function Je(t){return Ol(()=>{let e=$T(t),n=qe(ne({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===OT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ii.Emulated,styles:t.styles||fr,_:null,schemas:t.schemas||null,tView:null,id:""});qT(n);let r=t.dependencies;return n.directiveDefs=WD(r,!1),n.pipeDefs=WD(r,!0),n.id=GO(n),n})}function zO(t){return Qs(t)||LT(t)}function HO(t){return t!==null}function tr(t){return Ol(()=>({type:t.type,bootstrap:t.bootstrap||fr,declarations:t.declarations||fr,imports:t.imports||fr,exports:t.exports||fr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function GD(t,e){if(t==null)return Dc;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=pn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==pn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function vt(t){return Ol(()=>{let e=$T(t);return qT(e),e})}function ww(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Qs(t){return t[pO]||null}function LT(t){return t[gO]||null}function jT(t){return t[mO]||null}function BT(t){let e=Qs(t)||LT(t)||jT(t);return e!==null?e.standalone:!1}function UT(t,e){let n=t[yO]||null;if(!n&&e===!0)throw new Error(`Type ${Sn(t)} does not have '\u0275mod' property.`);return n}function $T(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Dc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||fr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:GD(t.inputs,e),outputs:GD(t.outputs),debugInfo:null}}function qT(t){t.features?.forEach(e=>e(t))}function WD(t,e){if(!t)return null;let n=e?jT:zO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(HO)}function GO(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $n(t){return{\u0275providers:t}}function WO(...t){return{\u0275providers:zT(!0,t),\u0275fromNgModule:!0}}function zT(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return yw(e,s=>{let a=s;kv(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&HT(i,o),n}function HT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];_w(i,o=>{e(o,r)})}}function kv(t,e,n,r){if(t=An(t),!t)return!1;let i=null,o=BD(t),s=!o&&Qs(t);if(!o&&!s){let c=t.ngModule;if(o=BD(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)kv(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{yw(o.imports,h=>{kv(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&HT(l,e)}if(!a){let l=Ks(i)||(()=>new i);e({provide:i,useFactory:l,deps:fr},i),e({provide:kT,useValue:i,multi:!0},i),e({provide:Tc,useValue:()=>K(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;_w(c,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function _w(t,e){for(let n of t)AT(n)&&(n=n.\u0275providers),Array.isArray(n)?_w(n,e):e(n)}var KO=nt({provide:String,useValue:nt});function GT(t){return t!==null&&typeof t=="object"&&KO in t}function QO(t){return!!(t&&t.useExisting)}function YO(t){return!!(t&&t.useFactory)}function Ac(t){return typeof t=="function"}function ZO(t){return!!t.useClass}var Sp=new X(""),Xf={},XO={},mv;function bw(){return mv===void 0&&(mv=new sp),mv}var Un=class{},Tl=class extends Un{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fv(e,s=>this.processProvider(s)),this.records.set(NT,_c(void 0,this)),i.has("environment")&&this.records.set(Un,_c(void 0,this));let o=this.records.get(Sp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kT,fr,Pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=He(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=No(this),r=Bn(void 0),i;try{return e()}finally{No(n),Bn(r)}}get(e,n=Cl,r=Pe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($D))return e[$D](this);r=Ap(r);let i,o=No(this),s=Bn(void 0);try{if(!(r&Pe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=rF(e)&&Dp(e);l&&this.injectableDefInScope(l)?c=_c(Ov(e),Xf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Pe.Self?bw():this.parent;return n=r&Pe.Optional&&n===Cl?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ip]=a[ip]||[]).unshift(Sn(e)),o)throw a;return AO(a,e,"R3InjectorError",this.source)}else throw a}finally{Bn(s),No(o)}}resolveInjectorInitializers(){let e=He(null),n=No(this),r=Bn(void 0),i;try{let o=this.get(Tc,fr,Pe.Self);for(let s of o)s()}finally{No(n),Bn(r),He(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Sn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(e){e=An(e);let n=Ac(e)?e:An(e&&e.provide),r=eF(e);if(!Ac(e)&&e.multi===!0){let i=this.records.get(n);i||(i=_c(void 0,Xf,!0),i.factory=()=>Rv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=He(null);try{return n.value===Xf&&(n.value=XO,n.value=n.factory()),typeof n.value=="object"&&n.value&&nF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{He(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=An(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ov(t){let e=Dp(t),n=e!==null?e.factory:Ks(t);if(n!==null)return n;if(t instanceof X)throw new fe(204,!1);if(t instanceof Function)return JO(t);throw new fe(204,!1)}function JO(t){if(t.length>0)throw new fe(204,!1);let n=hO(t);return n!==null?()=>n.factory(t):()=>new t}function eF(t){if(GT(t))return _c(void 0,t.useValue);{let e=WT(t);return _c(e,Xf)}}function WT(t,e,n){let r;if(Ac(t)){let i=An(t);return Ks(i)||Ov(i)}else if(GT(t))r=()=>An(t.useValue);else if(YO(t))r=()=>t.useFactory(...Rv(t.deps||[]));else if(QO(t))r=()=>K(An(t.useExisting));else{let i=An(t&&(t.useClass||t.provide));if(tF(t))r=()=>new i(...Rv(t.deps));else return Ks(i)||Ov(i)}return r}function _c(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function tF(t){return!!t.deps}function nF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function rF(t){return typeof t=="function"||typeof t=="object"&&t instanceof X}function Fv(t,e){for(let n of t)Array.isArray(n)?Fv(n,e):n&&AT(n)?Fv(n.\u0275providers,e):e(n)}function Wi(t,e){t instanceof Tl&&t.assertNotDestroyed();let n,r=No(t),i=Bn(void 0);try{return e()}finally{No(r),Bn(i)}}function iF(){return ST()!==void 0||CO()!=null}function oF(t){return typeof t=="function"}var Ki=0,Ve=1,pe=2,gn=3,Rr=4,Vr=5,ap=6,Al=7,Nr=8,Sc=9,kr=10,Kt=11,Sl=12,KD=13,Rc=14,oi=15,Mp=16,bc=17,Mc=18,xp=19,KT=20,ko=21,yv=22,Ys=23,Or=25,QT=1;var Zs=7,cp=8,up=9,pr=10,Ew=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ew||{});function Gs(t){return Array.isArray(t)&&typeof t[QT]=="object"}function Qi(t){return Array.isArray(t)&&t[QT]===!0}function YT(t){return(t.flags&4)!==0}function Pp(t){return t.componentOffset>-1}function Iw(t){return(t.flags&1)===1}function Oo(t){return!!t.template}function sF(t){return(t[pe]&512)!==0}var Vv=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ZT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Vo(){return XT}function XT(t){return t.type.prototype.ngOnChanges&&(t.setInput=cF),aF}Vo.ngInherit=!0;function aF(){let t=eA(this),e=t?.current;if(e){let n=t.previous;if(n===Dc)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function cF(t,e,n,r,i){let o=this.declaredInputs[r],s=eA(t)||uF(t,{previous:Dc,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Vv(l&&l.currentValue,n,c===Dc),ZT(t,e,i,n)}var JT="__ngSimpleChanges__";function eA(t){return t[JT]||null}function uF(t,e){return t[JT]=e}var QD=null;var ni=function(t,e,n){QD?.(t,e,n)},lF="svg",dF="math",hF=!1;function fF(){return hF}function si(t){for(;Array.isArray(t);)t=t[Ki];return t}function tA(t,e){return si(e[t])}function gr(t,e){return si(e[t.index])}function nA(t,e){return t.data[e]}function rA(t,e){return t[e]}function Lo(t,e){let n=e[t];return Gs(n)?n:n[Ki]}function Cw(t){return(t[pe]&128)===128}function pF(t){return Qi(t[gn])}function lp(t,e){return e==null?null:t[e]}function iA(t){t[bc]=0}function gF(t){t[pe]&1024||(t[pe]|=1024,Cw(t)&&Ml(t))}function mF(t,e){for(;t>0;)e=e[Rc],t--;return e}function Dw(t){return!!(t[pe]&9216||t[Ys]?.dirty)}function Lv(t){t[kr].changeDetectionScheduler?.notify(1),Dw(t)?Ml(t):t[pe]&64&&(fF()?(t[pe]|=1024,Ml(t)):t[kr].changeDetectionScheduler?.notify())}function Ml(t){t[kr].changeDetectionScheduler?.notify();let e=xl(t);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!Cw(e)));)e=xl(e)}function oA(t,e){if((t[pe]&256)===256)throw new fe(911,!1);t[ko]===null&&(t[ko]=[]),t[ko].push(e)}function yF(t,e){if(t[ko]===null)return;let n=t[ko].indexOf(e);n!==-1&&t[ko].splice(n,1)}function xl(t){let e=t[gn];return Qi(e)?e[gn]:e}var Ne={lFrame:hA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function vF(){return Ne.lFrame.elementDepthCount}function wF(){Ne.lFrame.elementDepthCount++}function _F(){Ne.lFrame.elementDepthCount--}function sA(){return Ne.bindingsEnabled}function bF(){return Ne.skipHydrationRootTNode!==null}function EF(t){return Ne.skipHydrationRootTNode===t}function IF(){Ne.skipHydrationRootTNode=null}function rt(){return Ne.lFrame.lView}function qn(){return Ne.lFrame.tView}function wt(t){return Ne.lFrame.contextLView=t,t[Nr]}function _t(t){return Ne.lFrame.contextLView=null,t}function zn(){let t=aA();for(;t!==null&&t.type===64;)t=t.parent;return t}function aA(){return Ne.lFrame.currentTNode}function CF(){let t=Ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Vl(t,e){let n=Ne.lFrame;n.currentTNode=t,n.isParent=e}function cA(){return Ne.lFrame.isParent}function DF(){Ne.lFrame.isParent=!1}function TF(){return Ne.lFrame.contextLView}function AF(){let t=Ne.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function SF(t){return Ne.lFrame.bindingIndex=t}function Rp(){return Ne.lFrame.bindingIndex++}function MF(t){let e=Ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function xF(){return Ne.lFrame.inI18n}function PF(t,e){let n=Ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,jv(e)}function RF(){return Ne.lFrame.currentDirectiveIndex}function jv(t){Ne.lFrame.currentDirectiveIndex=t}function NF(t){let e=Ne.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function uA(t){Ne.lFrame.currentQueryIndex=t}function kF(t){let e=t[Ve];return e.type===2?e.declTNode:e.type===1?t[Vr]:null}function lA(t,e,n){if(n&Pe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Pe.Host);)if(i=kF(o),i===null||(o=o[Rc],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ne.lFrame=dA();return r.currentTNode=e,r.lView=t,!0}function Tw(t){let e=dA(),n=t[Ve];Ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function dA(){let t=Ne.lFrame,e=t===null?null:t.child;return e===null?hA(t):e}function hA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function fA(){let t=Ne.lFrame;return Ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var pA=fA;function Aw(){let t=fA();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function OF(t){return(Ne.lFrame.contextLView=mF(t,Ne.lFrame.contextLView))[Nr]}function Nc(){return Ne.lFrame.selectedIndex}function Xs(t){Ne.lFrame.selectedIndex=t}function Sw(){let t=Ne.lFrame;return nA(t.tView,t.selectedIndex)}function FF(){return Ne.lFrame.currentNamespace}var gA=!0;function Mw(){return gA}function xw(t){gA=t}function VF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=XT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Pw(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Jf(t,e,n){mA(t,e,3,n)}function ep(t,e,n,r){(t[pe]&3)===n&&mA(t,e,n,r)}function vv(t,e){let n=t[pe];(n&3)===e&&(n&=16383,n+=1,t[pe]=n)}function mA(t,e,n,r){let i=r!==void 0?t[bc]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[bc]+=65536),(a<o||o==-1)&&(LF(t,n,e,c),t[bc]=(t[bc]&4294901760)+c+2),c++}function YD(t,e){ni(4,t,e);let n=He(null);try{e.call(t)}finally{He(n),ni(5,t,e)}}function LF(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[pe]>>14<t[bc]>>16&&(t[pe]&3)===e&&(t[pe]+=16384,YD(a,o)):YD(a,o)}var Cc=-1,Js=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function jF(t){return t instanceof Js}function BF(t){return(t.flags&8)!==0}function UF(t){return(t.flags&16)!==0}function yA(t){return t!==Cc}function dp(t){return t&32767}function $F(t){return t>>16}function hp(t,e){let n=$F(t),r=e;for(;n>0;)r=r[Rc],n--;return r}var Bv=!0;function fp(t){let e=Bv;return Bv=t,e}var qF=256,vA=qF-1,wA=5,zF=0,ri={};function HF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Il)&&(r=n[Il]),r==null&&(r=n[Il]=zF++);let i=r&vA,o=1<<i;e.data[t+(i>>wA)]|=o}function pp(t,e){let n=_A(t,e);if(n!==-1)return n;let r=e[Ve];r.firstCreatePass&&(t.injectorIndex=e.length,wv(r.data,t),wv(e,null),wv(r.blueprint,null));let i=Rw(t,e),o=t.injectorIndex;if(yA(i)){let s=dp(i),a=hp(i,e),c=a[Ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function wv(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _A(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Rw(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=DA(i),r===null)return Cc;if(n++,i=i[Rc],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Cc}function Uv(t,e,n){HF(t,e,n)}function GF(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(FT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function bA(t,e,n){if(n&Pe.Optional||t!==void 0)return t;mw(e,"NodeInjector")}function EA(t,e,n,r){if(n&Pe.Optional&&r===void 0&&(r=null),!(n&(Pe.Self|Pe.Host))){let i=t[Sc],o=Bn(void 0);try{return i?i.get(e,r,n&Pe.Optional):MT(e,r,n&Pe.Optional)}finally{Bn(o)}}return bA(r,e,n)}function IA(t,e,n,r=Pe.Default,i){if(t!==null){if(e[pe]&2048&&!(r&Pe.Self)){let s=ZF(t,e,n,r,ri);if(s!==ri)return s}let o=CA(t,e,n,r,ri);if(o!==ri)return o}return EA(e,n,r,i)}function CA(t,e,n,r,i){let o=QF(n);if(typeof o=="function"){if(!lA(e,t,r))return r&Pe.Host?bA(i,n,r):EA(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Pe.Optional))mw(n);else return s}finally{pA()}}else if(typeof o=="number"){let s=null,a=_A(t,e),c=Cc,l=r&Pe.Host?e[oi][Vr]:null;for((a===-1||r&Pe.SkipSelf)&&(c=a===-1?Rw(t,e):e[a+8],c===Cc||!XD(r,!1)?a=-1:(s=e[Ve],a=dp(c),e=hp(c,e)));a!==-1;){let h=e[Ve];if(ZD(o,a,h.data)){let g=WF(a,e,n,s,r,l);if(g!==ri)return g}c=e[a+8],c!==Cc&&XD(r,e[Ve].data[a+8]===l)&&ZD(o,a,e)?(s=h,a=dp(c),e=hp(c,e)):a=-1}}return i}function WF(t,e,n,r,i,o){let s=e[Ve],a=s.data[t+8],c=r==null?Pp(a)&&Bv:r!=s&&(a.type&3)!==0,l=i&Pe.Host&&o===a,h=KF(a,s,n,c,l);return h!==null?xc(e,s,h,a):ri}function KF(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,h=o>>20,g=r?a:a+h,w=i?a+h:l;for(let b=g;b<w;b++){let A=s[b];if(b<c&&n===A||b>=c&&A.type===n)return b}if(i){let b=s[c];if(b&&Oo(b)&&b.type===n)return c}return null}function xc(t,e,n,r){let i=t[n],o=e.data;if(jF(i)){let s=i;s.resolving&&wO(vO(o[n]));let a=fp(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Bn(s.injectImpl):null,h=lA(t,r,Pe.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&VF(n,o[n],e)}finally{l!==null&&Bn(l),fp(a),s.resolving=!1,pA()}}return i}function QF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Il)?t[Il]:void 0;return typeof e=="number"?e>=0?e&vA:YF:e}function ZD(t,e,n){let r=1<<t;return!!(n[e+(t>>wA)]&r)}function XD(t,e){return!(t&Pe.Self)&&!(t&Pe.Host&&e)}var Ws=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return IA(this._tNode,this._lView,e,Ap(r),n)}};function YF(){return new Ws(zn(),rt())}function ai(t){return Ol(()=>{let e=t.prototype.constructor,n=e[rp]||$v(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[rp]||$v(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function $v(t){return IT(t)?()=>{let e=$v(An(t));return e&&e()}:Ks(t)}function ZF(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[pe]&2048&&!(s[pe]&512);){let a=CA(o,s,n,r|Pe.Self,ri);if(a!==ri)return a;let c=o.parent;if(!c){let l=s[KT];if(l){let h=l.get(n,ri,r);if(h!==ri)return h}c=DA(s),s=s[Rc]}o=c}return i}function DA(t){let e=t[Ve],n=e.type;return n===2?e.declTNode:n===1?t[Vr]:null}function Nw(t){return GF(zn(),t)}function JD(t,e=null,n=null,r){let i=TA(t,e,n,r);return i.resolveInjectorInitializers(),i}function TA(t,e=null,n=null,r,i=new Set){let o=[n||fr,WO(t)];return r=r||(typeof t=="object"?void 0:Sn(t)),new Tl(o,e||bw(),r||null,i)}var Hn=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return JD({name:""},i,r,"");{let o=r.name??"";return JD({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Cl,e.NULL=new sp,e.\u0275prov=ce({token:e,providedIn:"any",factory:()=>K(NT)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var XF="ngOriginalError";function _v(t){return t[XF]}var zi=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&_v(e);for(;n&&_v(n);)n=_v(n);return n||null}},AA=new X("",{providedIn:"root",factory:()=>ie(zi).handleError.bind(void 0)}),SA=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=JF,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),qv=class extends SA{constructor(e){super(),this._lView=e}onDestroy(e){return oA(this._lView,e),()=>yF(this._lView,e)}};function JF(){return new qv(rt())}function e2(){return Np(zn(),rt())}function Np(t,e){return new ci(gr(t,e))}var ci=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=e2;let t=e;return t})();var zv=class extends Ct{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,iF()&&(this.destroyRef=ie(SA,{optional:!0})??void 0)}emit(e){let n=He(null);try{super.next(e)}finally{He(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=bv(o),i&&(i=bv(i)),s&&(s=bv(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pt&&e.add(a),a}};function bv(t){return e=>{setTimeout(t,void 0,e)}}var fn=zv;function MA(t){return(t.flags&128)===128}var xA=new Map,t2=0;function n2(){return t2++}function r2(t){xA.set(t[xp],t)}function i2(t){xA.delete(t[xp])}var eT="__ngContext__";function ea(t,e){Gs(e)?(t[eT]=e[xp],r2(e)):t[eT]=e}function PA(t){return NA(t[Sl])}function RA(t){return NA(t[Rr])}function NA(t){for(;t!==null&&!Qi(t);)t=t[Rr];return t}var Hv;function kA(t){Hv=t}function o2(){if(Hv!==void 0)return Hv;if(typeof document<"u")return document;throw new fe(210,!1)}var kw=new X("",{providedIn:"root",factory:()=>s2}),s2="ng",Ow=new X(""),nn=new X("",{providedIn:"platform",factory:()=>"unknown"});var Fw=new X("",{providedIn:"root",factory:()=>o2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var a2="h",c2="b";var u2=()=>null;function Vw(t,e,n=!1){return u2(t,e,n)}var OA=!1,l2=new X("",{providedIn:"root",factory:()=>OA});var Qf;function d2(){if(Qf===void 0&&(Qf=null,Hs.trustedTypes))try{Qf=Hs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Qf}function tT(t){return d2()?.createScriptURL(t)||t}var gp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bT})`}};function Ll(t){return t instanceof gp?t.changingThisBreaksApplicationSecurity:t}function Lw(t,e){let n=h2(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${bT})`)}return n===e}function h2(t){return t instanceof gp&&t.getTypeName()||null}var f2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function FA(t){return t=String(t),t.match(f2)?t:"unsafe:"+t}var kp=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(kp||{});function p2(t){let e=LA();return e?e.sanitize(kp.URL,t)||"":Lw(t,"URL")?Ll(t):FA(Tp(t))}function g2(t){let e=LA();if(e)return tT(e.sanitize(kp.RESOURCE_URL,t)||"");if(Lw(t,"ResourceURL"))return tT(Ll(t));throw new fe(904,!1)}function m2(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?g2:p2}function VA(t,e,n){return m2(e,n)(t)}function LA(){let t=rt();return t&&t[kr].sanitizer}function jA(t){return t instanceof Function?t():t}var Hi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Hi||{}),y2;function jw(t,e){return y2(t,e)}function Ec(t,e,n,r,i){if(r!=null){let o,s=!1;Qi(r)?o=r:Gs(r)&&(s=!0,r=r[Ki]);let a=si(r);t===0&&n!==null?i==null?zA(e,n,a):mp(e,n,a,i||null,!0):t===1&&n!==null?mp(e,n,a,i||null,!0):t===2?k2(e,a,s):t===3&&e.destroyNode(a),o!=null&&F2(e,t,o,n,i)}}function v2(t,e){return t.createText(e)}function w2(t,e,n){t.setValue(e,n)}function BA(t,e,n){return t.createElement(e,n)}function _2(t,e){UA(t,e),e[Ki]=null,e[Vr]=null}function b2(t,e,n,r,i,o){r[Ki]=i,r[Vr]=e,Op(t,r,n,1,i,o)}function UA(t,e){e[kr].changeDetectionScheduler?.notify(1),Op(t,e,e[Kt],2,null,null)}function E2(t){let e=t[Sl];if(!e)return Ev(t[Ve],t);for(;e;){let n=null;if(Gs(e))n=e[Sl];else{let r=e[pr];r&&(n=r)}if(!n){for(;e&&!e[Rr]&&e!==t;)Gs(e)&&Ev(e[Ve],e),e=e[gn];e===null&&(e=t),Gs(e)&&Ev(e[Ve],e),n=e&&e[Rr]}e=n}}function I2(t,e,n,r){let i=pr+r,o=n.length;r>0&&(n[i-1][Rr]=e),r<o-pr?(e[Rr]=n[i],RT(n,pr+r,e)):(n.push(e),e[Rr]=null),e[gn]=n;let s=e[Mp];s!==null&&n!==s&&C2(s,e);let a=e[Mc];a!==null&&a.insertView(t),Lv(e),e[pe]|=128}function C2(t,e){let n=t[up],i=e[gn][gn][oi];e[oi]!==i&&(t[pe]|=Ew.HasTransplantedViews),n===null?t[up]=[e]:n.push(e)}function $A(t,e){let n=t[up],r=n.indexOf(e);n.splice(r,1)}function Gv(t,e){if(t.length<=pr)return;let n=pr+e,r=t[n];if(r){let i=r[Mp];i!==null&&i!==t&&$A(i,r),e>0&&(t[n-1][Rr]=r[Rr]);let o=op(t,pr+e);_2(r[Ve],r);let s=o[Mc];s!==null&&s.detachView(o[Ve]),r[gn]=null,r[Rr]=null,r[pe]&=-129}return r}function qA(t,e){if(!(e[pe]&256)){let n=e[Kt];n.destroyNode&&Op(t,e,n,3,null,null),E2(e)}}function Ev(t,e){if(e[pe]&256)return;let n=He(null);try{e[pe]&=-129,e[pe]|=256,e[Ys]&&gD(e[Ys]),T2(t,e),D2(t,e),e[Ve].type===1&&e[Kt].destroy();let r=e[Mp];if(r!==null&&Qi(e[gn])){r!==e[gn]&&$A(r,e);let i=e[Mc];i!==null&&i.detachView(t)}i2(e)}finally{He(n)}}function D2(t,e){let n=t.cleanup,r=e[Al];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Al]=null);let i=e[ko];if(i!==null){e[ko]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function T2(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Js)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ni(4,a,c);try{c.call(a)}finally{ni(5,a,c)}}else{ni(4,i,o);try{o.call(i)}finally{ni(5,i,o)}}}}}function A2(t,e,n){return S2(t,e.parent,n)}function S2(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ki];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===ii.None||o===ii.Emulated)return null}return gr(r,n)}}function mp(t,e,n,r,i){t.insertBefore(e,n,r,i)}function zA(t,e,n){t.appendChild(e,n)}function nT(t,e,n,r,i){r!==null?mp(t,e,n,r,i):zA(t,e,n)}function M2(t,e,n,r){t.removeChild(e,n,r)}function Bw(t,e){return t.parentNode(e)}function x2(t,e){return t.nextSibling(e)}function P2(t,e,n){return N2(t,e,n)}function R2(t,e,n){return t.type&40?gr(t,n):null}var N2=R2,rT;function Uw(t,e,n,r){let i=A2(t,r,e),o=e[Kt],s=r.parent||e[Vr],a=P2(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)nT(o,i,n[c],a,!1);else nT(o,i,n,a,!1);rT!==void 0&&rT(o,r,e,n,i)}function tp(t,e){if(e!==null){let n=e.type;if(n&3)return gr(e,t);if(n&4)return Wv(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return tp(t,r);{let i=t[e.index];return Qi(i)?Wv(-1,i):si(i)}}else{if(n&32)return jw(e,t)()||si(t[e.index]);{let r=HA(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=xl(t[oi]);return tp(i,r)}else return tp(t,e.next)}}}return null}function HA(t,e){if(e!==null){let r=t[oi][Vr],i=e.projection;return r.projection[i]}return null}function Wv(t,e){let n=pr+t+1;if(n<e.length){let r=e[n],i=r[Ve].firstChild;if(i!==null)return tp(r,i)}return e[Zs]}function k2(t,e,n){let r=Bw(t,e);r&&M2(t,r,e,n)}function $w(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&ea(si(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)$w(t,e,n.child,r,i,o,!1),Ec(e,t,i,a,o);else if(c&32){let l=jw(n,r),h;for(;h=l();)Ec(e,t,i,h,o);Ec(e,t,i,a,o)}else c&16?O2(t,e,r,n,i,o):Ec(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Op(t,e,n,r,i,o){$w(n,r,t.firstChild,e,i,o,!1)}function O2(t,e,n,r,i,o){let s=n[oi],c=s[Vr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ec(e,t,i,h,o)}else{let l=c,h=s[gn];MA(r)&&(l.flags|=128),$w(t,e,l,h,i,o,!0)}}function F2(t,e,n,r,i){let o=n[Zs],s=si(n);o!==s&&Ec(e,t,r,o,i);for(let a=pr;a<n.length;a++){let c=n[a];Op(c[Ve],c,t,e,r,o)}}function V2(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Hi.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Hi.Important),t.setStyle(n,r,i,o))}}function L2(t,e,n){t.setAttribute(e,"style",n)}function GA(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function WA(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Nv(t,e,r),i!==null&&GA(t,e,i),o!==null&&L2(t,e,o)}var ra={};function z(t=1){KA(qn(),rt(),Nc()+t,!1)}function KA(t,e,n,r){if(!r)if((e[pe]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Jf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&ep(e,o,0,n)}Xs(n)}function ee(t,e=Pe.Default){let n=rt();if(n===null)return K(t,e);let r=zn();return IA(r,n,An(t),e)}function QA(t,e,n,r,i,o){let s=He(null);try{let a=null;i&pn.SignalBased&&(a=e[r][Hy]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&pn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):ZT(e,a,r,o)}finally{He(s)}}function j2(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Xs(~i);else{let o=i,s=n[++r],a=n[++r];PF(s,o);let c=e[o];a(2,c)}}}finally{Xs(-1)}}function Fp(t,e,n,r,i,o,s,a,c,l,h){let g=e.blueprint.slice();return g[Ki]=i,g[pe]=r|4|128|8|64,(l!==null||t&&t[pe]&2048)&&(g[pe]|=2048),iA(g),g[gn]=g[Rc]=t,g[Nr]=n,g[kr]=s||t&&t[kr],g[Kt]=a||t&&t[Kt],g[Sc]=c||t&&t[Sc]||null,g[Vr]=o,g[xp]=n2(),g[ap]=h,g[KT]=l,g[oi]=e.type==2?t[oi]:g,g}function Vp(t,e,n,r,i){let o=t.data[e];if(o===null)o=B2(t,e,n,r,i),xF()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=CF();o.injectorIndex=s===null?-1:s.injectorIndex}return Vl(o,!0),o}function B2(t,e,n,r,i){let o=aA(),s=cA(),a=s?o:o&&o.parent,c=t.data[e]=H2(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function YA(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ZA(t,e,n,r,i){let o=Nc(),s=r&2;try{Xs(-1),s&&e.length>Or&&KA(t,e,Or,!1),ni(s?2:0,i),n(r,i)}finally{Xs(o),ni(s?3:1,i)}}function XA(t,e,n){if(YT(e)){let r=He(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{He(r)}}}function JA(t,e,n){sA()&&(Z2(t,e,n,gr(n,e)),(n.flags&64)===64&&oS(t,e,n))}function eS(t,e,n=gr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function tS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=qw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function qw(t,e,n,r,i,o,s,a,c,l,h){let g=Or+r,w=g+i,b=U2(g,w),A=typeof l=="function"?l():l;return b[Ve]={type:t,blueprint:b,template:n,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:A,incompleteFirstPass:!1,ssrId:h}}function U2(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ra);return n}function $2(t,e,n,r){let o=r.get(l2,OA)||n===ii.ShadowDom,s=t.selectRootElement(e,o);return q2(s),s}function q2(t){z2(t)}var z2=()=>null;function H2(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return bF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function iT(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=pn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?oT(r,n,l,a,c):oT(r,n,l,a)}return r}function oT(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function G2(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let g=o[h],w=n?n.get(g):null,b=w?w.inputs:null,A=w?w.outputs:null;c=iT(0,g.inputs,h,c,b),l=iT(1,g.outputs,h,l,A);let k=c!==null&&s!==null&&!vw(e)?cV(c,h,s):null;a.push(k)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function W2(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function nS(t,e,n,r,i,o,s,a){let c=gr(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(zw(t,n,h,r,i),Pp(e)&&K2(n,e.index)):e.type&3?(r=W2(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function K2(t,e){let n=Lo(e,t);n[pe]&16||(n[pe]|=64)}function rS(t,e,n,r){if(sA()){let i=r===null?null:{"":-1},o=J2(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&iS(t,e,n,s,i,a),i&&eV(n,r,i)}n.mergedAttrs=Dl(n.mergedAttrs,n.attrs)}function iS(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Uv(pp(n,e),t,r[l].type);nV(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=YA(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Dl(n.mergedAttrs,h.hostAttrs),rV(t,n,e,c,h),tV(c,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}G2(t,n,o)}function Q2(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Y2(s)!=a&&s.push(a),s.push(n,r,o)}}function Y2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Z2(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Pp(n)&&iV(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||pp(n,e),ea(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=xc(e,t,a,n);if(ea(l,e),s!==null&&aV(e,a-i,l,c,n,s),Oo(c)){let h=Lo(n.index,e);h[Nr]=xc(e,t,a,n)}}}function oS(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=RF();try{Xs(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];jv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&X2(c,l)}}finally{Xs(-1),jv(s)}}function X2(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function J2(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(LO(e,s.selectors,!1))if(r||(r=[]),Oo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Kv(t,e,c)}else r.unshift(s),Kv(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Kv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function eV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new fe(-301,!1);r.push(e[i],o)}}}function tV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Oo(e)&&(n[""]=t)}}function nV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function rV(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ks(i.type,!0)),s=new Js(o,Oo(i),ee);t.blueprint[r]=s,n[r]=s,Q2(t,e,r,YA(t,n,i.hostVars,ra),i)}function iV(t,e,n){let r=gr(e,t),i=tS(n),o=t[kr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Lp(t,Fp(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function oV(t,e,n,r,i,o){let s=gr(t,e);sV(e[Kt],s,o,t.value,n,r,i)}function sV(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Tp(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function aV(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],g=s[a++];QA(r,n,c,l,h,g)}}function cV(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function sS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function aS(t,e){let n=t.contentQueries;if(n!==null){let r=He(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];uA(o),a.contentQueries(2,e[s],s)}}}finally{He(r)}}}function Lp(t,e){return t[Sl]?t[KD][Rr]=e:t[Sl]=e,t[KD]=e,e}function Qv(t,e,n){uA(0);let r=He(null);try{e(t,n)}finally{He(r)}}function uV(t){return t[Al]||(t[Al]=[])}function lV(t){return t.cleanup||(t.cleanup=[])}function cS(t,e){let n=t[Sc],r=n?n.get(zi,null):null;r&&r.handleError(e)}function zw(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],h=t.data[s];QA(h,l,r,a,c,i)}}function dV(t,e,n){let r=tA(e,t);w2(t[Kt],r,n)}function hV(t,e){let n=Lo(e,t),r=n[Ve];fV(r,n);let i=n[Ki];i!==null&&n[ap]===null&&(n[ap]=Vw(i,n[Sc])),Hw(r,n,n[Nr])}function fV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Hw(t,e,n){Tw(e);try{let r=t.viewQuery;r!==null&&Qv(1,r,n);let i=t.template;i!==null&&ZA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Mc]?.finishViewCreation(t),t.staticContentQueries&&aS(t,e),t.staticViewQueries&&Qv(2,t.viewQuery,n);let o=t.components;o!==null&&pV(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[pe]&=-5,Aw()}}function pV(t,e){for(let n=0;n<e.length;n++)hV(t,e[n])}function gV(t,e,n,r){let i=He(null);try{let o=e.tView,a=t[pe]&4096?4096:16,c=Fp(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Mp]=l;let h=t[Mc];return h!==null&&(c[Mc]=h.createEmbeddedView(o)),Hw(o,c,n),c}finally{He(i)}}function sT(t,e){return!e||e.firstChild===null||MA(t)}function mV(t,e,n,r=!0){let i=e[Ve];if(I2(i,e,t,n),r){let s=Wv(n,t),a=e[Kt],c=Bw(a,t[Zs]);c!==null&&b2(i,t[Vr],a,e,c,s)}let o=e[ap];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function yp(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(si(o)),Qi(o)&&yV(o,r);let s=n.type;if(s&8)yp(t,e,n.child,r);else if(s&32){let a=jw(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=HA(e,n);if(Array.isArray(a))r.push(...a);else{let c=xl(e[oi]);yp(c[Ve],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function yV(t,e){for(let n=pr;n<t.length;n++){let r=t[n],i=r[Ve].firstChild;i!==null&&yp(r[Ve],r,i,e)}t[Zs]!==t[Ki]&&e.push(t[Zs])}var uS=[];function vV(t){return t[Ys]??wV(t)}function wV(t){let e=uS.pop()??Object.create(bV);return e.lView=t,e}function _V(t){t.lView[Ys]!==t&&(t.lView=null,uS.push(t))}var bV=qe(ne({},hD),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ml(t.lView)},consumerOnSignalRead(){this.lView[Ys]=this}}),lS=100;function dS(t,e=!0,n=0){let r=t[kr],i=r.rendererFactory,o=!1;o||i.begin?.();try{EV(t,n)}catch(s){throw e&&cS(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function EV(t,e){Yv(t,e);let n=0;for(;Dw(t);){if(n===lS)throw new fe(103,!1);n++,Yv(t,1)}}function IV(t,e,n,r){let i=e[pe];if((i&256)===256)return;let o=!1;!o&&e[kr].inlineEffectRunner?.flush(),Tw(e);let s=null,a=null;!o&&CV(t)&&(a=vV(e),s=fD(a));try{iA(e),SF(t.bindingStartIndex),n!==null&&ZA(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let g=t.preOrderCheckHooks;g!==null&&Jf(e,g,null)}else{let g=t.preOrderHooks;g!==null&&ep(e,g,0,null),vv(e,0)}if(DV(e),hS(e,0),t.contentQueries!==null&&aS(t,e),!o)if(c){let g=t.contentCheckHooks;g!==null&&Jf(e,g)}else{let g=t.contentHooks;g!==null&&ep(e,g,1),vv(e,1)}j2(t,e);let l=t.components;l!==null&&pS(e,l,0);let h=t.viewQuery;if(h!==null&&Qv(2,h,r),!o)if(c){let g=t.viewCheckHooks;g!==null&&Jf(e,g)}else{let g=t.viewHooks;g!==null&&ep(e,g,2),vv(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[yv]){for(let g of e[yv])g();e[yv]=null}o||(e[pe]&=-73)}catch(c){throw Ml(e),c}finally{a!==null&&(pD(a,s),_V(a)),Aw()}}function CV(t){return t.type!==2}function hS(t,e){for(let n=PA(t);n!==null;n=RA(n))for(let r=pr;r<n.length;r++){let i=n[r];fS(i,e)}}function DV(t){for(let e=PA(t);e!==null;e=RA(e)){if(!(e[pe]&Ew.HasTransplantedViews))continue;let n=e[up];for(let r=0;r<n.length;r++){let i=n[r],o=i[gn];gF(i)}}}function TV(t,e,n){let r=Lo(e,t);fS(r,n)}function fS(t,e){Cw(t)&&Yv(t,e)}function Yv(t,e){let r=t[Ve],i=t[pe],o=t[Ys],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gy(o)),o&&(o.dirty=!1),t[pe]&=-9217,s)IV(r,t,r.template,t[Nr]);else if(i&8192){hS(t,1);let a=r.components;a!==null&&pS(t,a,1)}}function pS(t,e,n){for(let r=0;r<e.length;r++)TV(t,e[r],n)}function Gw(t){for(t[kr].changeDetectionScheduler?.notify();t;){t[pe]|=64;let e=xl(t);if(sF(t)&&!e)return t;t=e}return null}var ta=class{get rootNodes(){let e=this._lView,n=e[Ve];return yp(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nr]}set context(e){this._lView[Nr]=e}get destroyed(){return(this._lView[pe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gn];if(Qi(e)){let n=e[cp],r=n?n.indexOf(this):-1;r>-1&&(Gv(e,r),op(n,r))}this._attachedToViewContainer=!1}qA(this._lView[Ve],this._lView)}onDestroy(e){oA(this._lView,e)}markForCheck(){Gw(this._cdRefInjectingView||this._lView)}detach(){this._lView[pe]&=-129}reattach(){Lv(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,dS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,UA(this._lView[Ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=e,Lv(this._lView)}},jp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=MV;let t=e;return t})(),AV=jp,SV=class extends AV{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=gV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ta(i)}};function MV(){return xV(zn(),rt())}function xV(t,e){return t.type&4?new SV(e,t,Np(t,e)):null}var XK=new RegExp(`^(\\d+)*(${c2}|${a2})*(.*)`);var PV=()=>null;function aT(t,e){return PV(t,e)}var Zv=class{},Xv=class{},vp=class{};function RV(t){let e=Error(`No component factory found for ${Sn(t)}.`);return e[NV]=t,e}var NV="ngComponent";var Jv=class{resolveComponentFactory(e){throw RV(e)}},Bp=(()=>{let e=class e{};e.NULL=new Jv;let t=e;return t})(),Pl=class{},Yi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>kV();let t=e;return t})();function kV(){let t=rt(),e=zn(),n=Lo(e.index,t);return(Gs(n)?n:t)[Kt]}var OV=(()=>{let e=class e{};e.\u0275prov=ce({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Iv={};var cT=new Set;function Ww(t){cT.has(t)||(cT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function uT(...t){}function FV(){let t=typeof Hs.requestAnimationFrame=="function",e=Hs[t?"requestAnimationFrame":"setTimeout"],n=Hs[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fn(!1),this.onMicrotaskEmpty=new fn(!1),this.onStable=new fn(!1),this.onError=new fn(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=FV().nativeRequestAnimationFrame,jV(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new fe(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,VV,uT,uT);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},VV={};function Kw(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function LV(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Hs,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ew(t),t.isCheckStableRunning=!0,Kw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ew(t))}function jV(t){let e=()=>{LV(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(BV(a))return n.invokeTask(i,o,s,a);try{return lT(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),dT(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return lT(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),dT(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,ew(t),Kw(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function ew(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function lT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function dT(t){t._nesting--,Kw(t)}function BV(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var gS=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ce({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function tw(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=LD(i,a);else if(o==2){let c=a,l=e[++s];r=LD(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var wp=class extends Bp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Qs(e);return new Rl(n,this.ngModule)}};function hT(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function UV(t){let e=t.toLowerCase();return e==="svg"?lF:e==="math"?dF:null}var nw=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ap(r);let i=this.injector.get(e,Iv,r);return i!==Iv||n===Iv?i:this.parentInjector.get(e,n,r)}},Rl=class extends vp{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=hT(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return hT(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=$O(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=He(null);try{i=i||this.ngModule;let s=i instanceof Un?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new nw(e,s):e,c=a.get(Pl,null);if(c===null)throw new fe(407,!1);let l=a.get(OV,null),h=a.get(gS,null),g=a.get(Zv,null),w={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:g},b=c.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",k=r?$2(b,r,this.componentDef.encapsulation,a):BA(b,A,UV(A)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let U=null;k!==null&&(U=Vw(k,a,!0));let Y=qw(0,null,null,1,0,null,null,null,null,null,null),q=Fp(null,Y,null,M,null,null,w,b,a,null,U);Tw(q);let Q,ue;try{let se=this.componentDef,T,E=null;se.findHostDirectiveDefs?(T=[],E=new Map,se.findHostDirectiveDefs(se,T,E),T.push(se)):T=[se];let D=$V(q,k),S=qV(D,k,se,T,q,w,b);ue=nA(Y,Or),k&&GV(b,se,k,r),n!==void 0&&WV(ue,this.ngContentSelectors,n),Q=HV(S,se,T,E,q,[KV]),Hw(Y,q,null)}finally{Aw()}return new rw(this.componentType,Q,Np(ue,q),q,ue)}finally{He(o)}}},rw=class extends Xv{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ta(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;zw(o[Ve],o,i,e,n),this.previousInputValues.set(e,n);let s=Lo(this._tNode.index,o);Gw(s)}}get injector(){return new Ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $V(t,e){let n=t[Ve],r=Or;return t[r]=e,Vp(n,r,2,"#host",null)}function qV(t,e,n,r,i,o,s){let a=i[Ve];zV(r,t,e,s);let c=null;e!==null&&(c=Vw(e,i[Sc]));let l=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let g=Fp(i,tS(n),null,h,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&Kv(a,t,r.length-1),Lp(i,g),i[t.index]=g}function zV(t,e,n,r){for(let i of t)e.mergedAttrs=Dl(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(tw(e,e.mergedAttrs,!0),n!==null&&WA(r,n,e))}function HV(t,e,n,r,i,o){let s=zn(),a=i[Ve],c=gr(s,i);iS(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let g=s.directiveStart+h,w=xc(i,a,g,s);ea(w,i)}oS(a,i,s),c&&ea(c,i);let l=xc(i,a,s.directiveStart+s.componentOffset,s);if(t[Nr]=i[Nr]=l,o!==null)for(let h of o)h(l,e);return XA(a,s,i),l}function GV(t,e,n,r){if(r)Nv(t,n,["ng-version","17.3.11"]);else{let{attrs:i,classes:o}=qO(e.selectors[0]);i&&Nv(t,n,i),o&&o.length>0&&GA(t,n,o.join(" "))}}function WV(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function KV(){let t=zn();Pw(rt()[Ve],t)}var kc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=QV;let t=e;return t})();function QV(){let t=zn();return ZV(t,rt())}var YV=kc,mS=class extends YV{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Np(this._hostTNode,this._hostLView)}get injector(){return new Ws(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rw(this._hostTNode,this._hostLView);if(yA(e)){let n=hp(e,this._hostLView),r=dp(e),i=n[Ve].data[r+8];return new Ws(i,n)}else return new Ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=fT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-pr}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=aT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,sT(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!oF(e),a;if(s)a=n;else{let A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}let c=s?e:new Rl(Qs(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let k=(s?l:this.parentInjector).get(Un,null);k&&(o=k)}let h=Qs(c.componentType??{}),g=aT(this._lContainer,h?.id??null),w=g?.firstChild??null,b=c.create(l,i,w,o);return this.insertImpl(b.hostView,a,sT(this._hostTNode,g)),b}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(pF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[gn],l=new mS(c,c[Vr],c[gn]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return mV(s,i,o,r),e.attachToViewContainerRef(),RT(Cv(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=fT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Gv(this._lContainer,n);r&&(op(Cv(this._lContainer),n),qA(r[Ve],r))}detach(e){let n=this._adjustIndex(e,-1),r=Gv(this._lContainer,n);return r&&op(Cv(this._lContainer),n)!=null?new ta(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function fT(t){return t[cp]}function Cv(t){return t[cp]||(t[cp]=[])}function ZV(t,e){let n,r=e[t.index];return Qi(r)?n=r:(n=sS(r,e,null,t),e[t.index]=n,Lp(e,n)),JV(n,e,t,r),new mS(n,t,e)}function XV(t,e){let n=t[Kt],r=n.createComment(""),i=gr(e,t),o=Bw(n,i);return mp(n,o,r,x2(n,i),!1),r}var JV=nL,eL=()=>!1;function tL(t,e,n){return eL(t,e,n)}function nL(t,e,n,r){if(t[Zs])return;let i;n.type&8?i=si(r):i=XV(e,n),t[Zs]=i}function rL(t){return typeof t=="function"&&t[Hy]!==void 0}function yS(t){return rL(t)&&typeof t.set=="function"}function iL(t){return Object.getPrototypeOf(t.prototype).constructor}function nr(t){let e=iL(t.type),n=!0,r=[t];for(;e;){let i;if(Oo(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new fe(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Yf(t.inputs),s.inputTransforms=Yf(t.inputTransforms),s.declaredInputs=Yf(t.declaredInputs),s.outputs=Yf(t.outputs);let a=i.hostBindings;a&&uL(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&aL(t,c),l&&cL(t,l),oL(t,i),lO(t.outputs,i.outputs),Oo(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===nr&&(n=!1)}}e=Object.getPrototypeOf(e)}sL(r)}function oL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function sL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Dl(i.hostAttrs,n=Dl(n,i.hostAttrs))}}function Yf(t){return t===Dc?{}:t===fr?[]:t}function aL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function cL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function uL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Qw(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Fo=class{},Nl=class{};var iw=class extends Fo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wp(this);let i=UT(e);this._bootstrapComponents=jA(i.bootstrap),this._r3Injector=TA(e,n,[{provide:Fo,useValue:this},{provide:Bp,useValue:this.componentFactoryResolver},...r],Sn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ow=class extends Nl{constructor(e){super(),this.moduleType=e}create(e){return new iw(this.moduleType,e,[])}};var _p=class extends Fo{constructor(e){super(),this.componentFactoryResolver=new wp(this),this.instance=null;let n=new Tl([...e.providers,{provide:Fo,useValue:this},{provide:Bp,useValue:this.componentFactoryResolver}],e.parent||bw(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yw(t,e,n=null){return new _p({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ia=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vS(t){return dL(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function lL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function dL(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function hL(t,e,n){return t[e]=n}function Oc(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function fL(t){return(t.flags&32)===32}function pL(t,e,n,r,i,o,s,a,c){let l=e.consts,h=Vp(e,t,4,s||null,lp(l,a));rS(e,n,h,lp(l,c)),Pw(e,h);let g=h.tView=qw(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}function Ke(t,e,n,r,i,o,s,a){let c=rt(),l=qn(),h=t+Or,g=l.firstCreatePass?pL(h,l,c,e,n,r,i,o,s):l.data[h];Vl(g,!1);let w=gL(l,c,g,t);Mw()&&Uw(l,c,w,g),ea(w,c);let b=sS(w,c,w,g);return c[h]=b,Lp(c,b),tL(b,g,c),Iw(g)&&JA(l,c,g),s!=null&&eS(c,g,a),Ke}var gL=mL;function mL(t,e,n,r){return xw(!0),e[Kt].createComment("")}function Fc(t,e,n,r){let i=rt(),o=Rp();if(Oc(i,o,e)){let s=qn(),a=Sw();oV(a,i,t,e,n,r)}return Fc}function yL(t,e,n,r){return Oc(t,Rp(),n)?e+Tp(n)+r:ra}function Zf(t,e){return t<<17|e<<2}function na(t){return t>>17&32767}function vL(t){return(t&2)==2}function wL(t,e){return t&131071|e<<17}function sw(t){return t|2}function Pc(t){return(t&131068)>>2}function Dv(t,e){return t&-131069|e<<2}function _L(t){return(t&1)===1}function aw(t){return t|1}function bL(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=na(s),c=Pc(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let g=n;h=g[1],(h===null||Fl(g,h)>0)&&(l=!0)}else h=n;if(i)if(c!==0){let w=na(t[a+1]);t[r+1]=Zf(w,a),w!==0&&(t[w+1]=Dv(t[w+1],r)),t[a+1]=wL(t[a+1],r)}else t[r+1]=Zf(a,0),a!==0&&(t[a+1]=Dv(t[a+1],r)),a=r;else t[r+1]=Zf(c,0),a===0?a=r:t[c+1]=Dv(t[c+1],r),c=r;l&&(t[r+1]=sw(t[r+1])),pT(t,h,r,!0),pT(t,h,r,!1),EL(e,h,t,r,o),s=Zf(a,c),o?e.classBindings=s:e.styleBindings=s}function EL(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Fl(o,e)>=0&&(n[r+1]=aw(n[r+1]))}function pT(t,e,n,r){let i=t[n+1],o=e===null,s=r?na(i):Pc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];IL(c,e)&&(a=!0,t[s+1]=r?aw(l):sw(l)),s=r?na(l):Pc(l)}a&&(t[n+1]=r?sw(i):aw(i))}function IL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Fl(t,e)>=0:!1}function me(t,e,n){let r=rt(),i=Rp();if(Oc(r,i,e)){let o=qn(),s=Sw();nS(o,s,r,t,e,r[Kt],n,!1)}return me}function gT(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";zw(t,n,o[s],s,r)}function Up(t,e){return CL(t,e,null,!0),Up}function CL(t,e,n,r){let i=rt(),o=qn(),s=MF(2);if(o.firstUpdatePass&&TL(o,t,s,r),e!==ra&&Oc(i,s,e)){let a=o.data[Nc()];PL(o,a,i,i[Kt],t,i[s+1]=RL(e,n),r,s)}}function DL(t,e){return e>=t.expandoStartIndex}function TL(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Nc()],s=DL(t,n);NL(o,r)&&e===null&&!s&&(e=!1),e=AL(i,o,e,r),bL(i,o,e,n,s,r)}}function AL(t,e,n,r){let i=NF(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Tv(null,t,e,n,r),n=kl(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Tv(i,t,e,n,r),o===null){let c=SL(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Tv(null,t,e,c[1],r),c=kl(c,e.attrs,r),ML(t,e,r,c))}else o=xL(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function SL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Pc(r)!==0)return t[na(r)]}function ML(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[na(i)]=r}function xL(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=kl(r,s,n)}return kl(r,e.attrs,n)}function Tv(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=kl(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function kl(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),xO(t,s,n?!0:e[++o]))}return t===void 0?null:t}function PL(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],h=_L(l)?mT(c,e,n,i,Pc(l),s):void 0;if(!bp(h)){bp(o)||vL(l)&&(o=mT(c,null,n,i,a,s));let g=tA(Nc(),n);V2(r,s,g,i,o)}}function mT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),h=l?c[1]:c,g=h===null,w=n[i+1];w===ra&&(w=g?fr:void 0);let b=g?gv(w,r):h===r?w:void 0;if(l&&!bp(b)&&(b=gv(c,r)),bp(b)&&(a=b,s))return a;let A=t[i+1];i=s?na(A):Pc(A)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=gv(c,r))}return a}function bp(t){return t!==void 0}function RL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Sn(Ll(t)))),t}function NL(t,e){return(t.flags&(e?8:16))!==0}function kL(t,e,n,r,i,o){let s=e.consts,a=lp(s,i),c=Vp(e,t,2,r,a);return rS(e,n,c,lp(s,o)),c.attrs!==null&&tw(c,c.attrs,!1),c.mergedAttrs!==null&&tw(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function N(t,e,n,r){let i=rt(),o=qn(),s=Or+t,a=i[Kt],c=o.firstCreatePass?kL(s,o,i,e,n,r):o.data[s],l=OL(o,i,c,a,e,t);i[s]=l;let h=Iw(c);return Vl(c,!0),WA(a,l,c),!fL(c)&&Mw()&&Uw(o,i,l,c),vF()===0&&ea(l,i),wF(),h&&(JA(o,i,c),XA(o,c,i)),r!==null&&eS(i,c),N}function P(){let t=zn();cA()?DF():(t=t.parent,Vl(t,!1));let e=t;EF(e)&&IF(),_F();let n=qn();return n.firstCreatePass&&(Pw(n,t),YT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&BF(e)&&gT(n,e,rt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&UF(e)&&gT(n,e,rt(),e.stylesWithoutHost,!1),P}function it(t,e,n,r){return N(t,e,n,r),P(),it}var OL=(t,e,n,r,i,o)=>(xw(!0),BA(r,i,FF()));function Qt(){return rt()}var Ep="en-US";var FL=Ep;function VL(t){typeof t=="string"&&(FL=t.toLowerCase().replace(/_/g,"-"))}function ye(t,e,n,r){let i=rt(),o=qn(),s=zn();return wS(o,i,i[Kt],s,t,e,r),ye}function LL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Al],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function wS(t,e,n,r,i,o,s){let a=Iw(r),l=t.firstCreatePass&&lV(t),h=e[Nr],g=uV(e),w=!0;if(r.type&3||s){let k=gr(r,e),M=s?s(k):k,U=g.length,Y=s?Q=>s(si(Q[r.index])):r.index,q=null;if(!s&&a&&(q=LL(t,e,i,r.index)),q!==null){let Q=q.__ngLastListenerFn__||q;Q.__ngNextListenerFn__=o,q.__ngLastListenerFn__=o,w=!1}else{o=vT(r,e,h,o,!1);let Q=n.listen(M,i,o);g.push(o,Q),l&&l.push(i,Y,U,U+1)}}else o=vT(r,e,h,o,!1);let b=r.outputs,A;if(w&&b!==null&&(A=b[i])){let k=A.length;if(k)for(let M=0;M<k;M+=2){let U=A[M],Y=A[M+1],ue=e[U][Y].subscribe(o),se=g.length;g.push(o,ue),l&&l.push(i,r.index,se,-(se+1))}}}function yT(t,e,n,r){let i=He(null);try{return ni(6,e,n),n(r)!==!1}catch(o){return cS(t,o),!1}finally{ni(7,e,n),He(i)}}function vT(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Lo(t.index,e):e;Gw(a);let c=yT(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=yT(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function ke(t=1){return OF(t)}function jL(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function _S(t){let e=TF();return rA(e,Or+t)}function G(t,e=""){let n=rt(),r=qn(),i=t+Or,o=r.firstCreatePass?Vp(r,i,1,e,null):r.data[i],s=BL(r,n,o,e,t);n[i]=s,Mw()&&Uw(r,n,s,o),Vl(o,!1)}var BL=(t,e,n,r,i)=>(xw(!0),v2(e[Kt],r));function ut(t){return Dt("",t,""),ut}function Dt(t,e,n){let r=rt(),i=yL(r,t,e,n);return i!==ra&&dV(r,Nc(),i),Dt}function we(t,e,n){yS(e)&&(e=e());let r=rt(),i=Rp();if(Oc(r,i,e)){let o=qn(),s=Sw();nS(o,s,r,t,e,r[Kt],n,!1)}return we}function Ce(t,e){let n=yS(t);return n&&t.set(e),n}function _e(t,e){let n=rt(),r=qn(),i=zn();return wS(r,n,n[Kt],i,t,e),_e}function UL(t,e,n){let r=qn();if(r.firstCreatePass){let i=Oo(t);cw(n,r.data,r.blueprint,i,!0),cw(e,r.data,r.blueprint,i,!1)}}function cw(t,e,n,r,i){if(t=An(t),Array.isArray(t))for(let o=0;o<t.length;o++)cw(t[o],e,n,r,i);else{let o=qn(),s=rt(),a=zn(),c=Ac(t)?t:An(t.provide),l=WT(t),h=a.providerIndexes&1048575,g=a.directiveStart,w=a.providerIndexes>>20;if(Ac(t)||!t.multi){let b=new Js(l,i,ee),A=Sv(c,e,i?h:h+w,g);A===-1?(Uv(pp(a,s),o,c),Av(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(b),s.push(b)):(n[A]=b,s[A]=b)}else{let b=Sv(c,e,h+w,g),A=Sv(c,e,h,h+w),k=b>=0&&n[b],M=A>=0&&n[A];if(i&&!M||!i&&!k){Uv(pp(a,s),o,c);let U=zL(i?qL:$L,n.length,i,r,l);!i&&M&&(n[A].providerFactory=U),Av(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),s.push(U)}else{let U=bS(n[i?A:b],l,!i&&r);Av(o,t,b>-1?b:A,U)}!i&&r&&M&&n[A].componentProviders++}}}function Av(t,e,n,r){let i=Ac(e),o=ZO(e);if(i||o){let c=(o?An(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,c]):l[h+1].push(r,c)}else l.push(n,c)}}}function bS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Sv(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function $L(t,e,n,r){return uw(this.multi,[])}function qL(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=xc(n,n[Ve],this.providerFactory.index,r);o=a.slice(0,s),uw(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],uw(i,o);return o}function uw(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function zL(t,e,n,r,i){let o=new Js(t,n,ee);return o.multi=[],o.index=e,o.componentProviders=0,bS(o,i,r&&!n),o}function Zi(t,e=[]){return n=>{n.providersResolver=(r,i)=>UL(r,i?i(t):t,e)}}var HL=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=zT(!1,r.type),o=i.length>0?Yw([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ce({token:e,providedIn:"environment",factory:()=>new e(K(Un))});let t=e;return t})();function et(t){Ww("NgStandalone"),t.getStandaloneInjector=e=>e.get(HL).getOrCreateStandaloneInjector(t)}function GL(t,e){let n=t[e];return n===ra?void 0:n}function WL(t,e,n,r,i,o){let s=e+n;return Oc(t,s,i)?hL(t,s+1,o?r.call(o,i):r(i)):GL(t,s+1)}function Xi(t,e){let n=qn(),r,i=t+Or;n.firstCreatePass?(r=KL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ks(r.type,!0)),s,a=Bn(ee);try{let c=fp(!1),l=o();return fp(c),jL(n,rt(),i,l),l}finally{Bn(a)}}function KL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ji(t,e,n){let r=t+Or,i=rt(),o=rA(i,r);return QL(i,r)?WL(i,AF(),e,o.transform,n,o):o.transform(n)}function QL(t,e){return t[Ve].data[e].pure}var Gi=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Zw=new Gi("17.3.11"),$p=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var ES=new X("");function jo(t){return!!t&&typeof t.then=="function"}function Xw(t){return!!t&&typeof t.subscribe=="function"}var IS=new X(""),CS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ie(IS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(jo(s))r.push(s);else if(Xw(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qp=new X("");function YL(){mD(()=>{throw new fe(600,!1)})}function ZL(t){return t.isBoundToModule}function XL(t,e,n){try{let r=n();return jo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Vc=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ie(AA),this.afterRenderEffectManager=ie(gS),this.externalTestViews=new Set,this.beforeRender=new Ct,this.afterTick=new Ct,this.componentTypes=[],this.components=[],this.isStable=ie(ia).hasPendingTasks.pipe(ae(r=>!r)),this._injector=ie(Un)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof vp;if(!this._injector.get(CS).done){let b=!o&&BT(r),A=!1;throw new fe(405,A)}let a;o?a=r:a=this._injector.get(Bp).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=ZL(a)?void 0:this._injector.get(Fo),l=i||a.selector,h=a.create(Hn.NULL,[],l,c),g=h.location.nativeElement,w=h.injector.get(ES,null);return w?.registerApplication(g),h.onDestroy(()=>{this.detachView(h.hostView),Mv(this.components,h),w?.unregisterApplication(g)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new fe(101,!1);let i=He(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,He(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===lS)throw new fe(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)JL(a,s,c)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>lw(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>lw(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Mv(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(qp,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Mv(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new fe(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Mv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function JL(t,e,n){!e&&!lw(t)||ej(t,n,e)}function lw(t){return Dw(t)}function ej(t,e,n){let r;n?(r=0,t[pe]|=1024):t[pe]&64?r=0:r=1,dS(t,e,r)}var dw=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Jw=(()=>{let e=class e{compileModuleSync(r){return new ow(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=UT(r),s=jA(o.declarations).reduce((a,c)=>{let l=Qs(c);return l&&a.push(new Rl(l)),a},[]);return new dw(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var tj=(()=>{let e=class e{constructor(){this.zone=ie(Re),this.applicationRef=ie(Vc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nj(t){return[{provide:Re,useFactory:t},{provide:Tc,multi:!0,useFactory:()=>{let e=ie(tj,{optional:!0});return()=>e.initialize()}},{provide:Tc,multi:!0,useFactory:()=>{let e=ie(sj);return()=>{e.initialize()}}},{provide:AA,useFactory:rj}]}function rj(){let t=ie(Re),e=ie(zi);return n=>t.runOutsideAngular(()=>e.handleError(n))}function ij(t){let e=nj(()=>new Re(oj(t)));return $n([[],e])}function oj(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sj=(()=>{let e=class e{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=ie(Re),this.pendingTasks=ie(ia)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aj(){return typeof $localize<"u"&&$localize.locale||Ep}var e_=new X("",{providedIn:"root",factory:()=>ie(e_,Pe.Optional|Pe.SkipSelf)||aj()});var DS=new X("");var np=null;function cj(t=[],e){return Hn.create({name:e,providers:[{provide:Sp,useValue:"platform"},{provide:DS,useValue:new Set([()=>np=null])},...t]})}function uj(t=[]){if(np)return np;let e=cj(t);return np=e,YL(),lj(e),e}function lj(t){t.get(Ow,null)?.forEach(n=>n())}function t_(){return!1}var eo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=dj;let t=e;return t})();function dj(t){return hj(zn(),rt(),(t&16)===16)}function hj(t,e,n){if(Pp(t)&&!n){let r=Lo(t.index,e);return new ta(r,r)}else if(t.type&47){let r=e[oi];return new ta(r,e)}return null}var hw=class{constructor(){}supports(e){return vS(e)}create(e){return new fw(e)}},fj=(t,e)=>e,fw=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fj}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<wT(r,i,o)?n:r,a=wT(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let w=0;w<l;w++){let b=w<o.length?o[w]:o[w]=0,A=b+w;h<=A&&A<l&&(o[w]=b+1)}let g=s.previousIndex;o[g]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!vS(e))throw new fe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,lL(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new pw(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ip),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ip),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},pw=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},gw=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ip=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new gw,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function _T(){return new n_([new hw])}var n_=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||_T()),deps:[[e,new PT,new Rt]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new fe(901,!1)}};e.\u0275prov=ce({token:e,providedIn:"root",factory:_T});let t=e;return t})();function TS(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=uj(r),o=[ij(),...n||[]],a=new _p({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Re);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(zi,null),h;c.runOutsideAngular(()=>{h=c.onError.subscribe({next:b=>{l.handleError(b)}})});let g=()=>a.destroy(),w=i.get(DS);return w.add(g),a.onDestroy(()=>{h.unsubscribe(),w.delete(g)}),XL(l,c,()=>{let b=a.get(CS);return b.runInitializers(),b.donePromise.then(()=>{let A=a.get(e_,Ep);VL(A||Ep);let k=a.get(Vc);return e!==void 0&&k.bootstrap(e),k})})})}catch(e){return Promise.reject(e)}}function Bo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function r_(t){let e=He(null);try{return t()}finally{He(e)}}var PS=null;function to(){return PS}function RS(t){PS??=t}var zp=class{};var Gn=new X(""),NS=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:()=>ie(pj),providedIn:"platform"});let t=e;return t})();var pj=(()=>{let e=class e extends NS{constructor(){super(),this._doc=ie(Gn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return to().getBaseHref(this._doc)}onPopState(r){let i=to().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=to().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function kS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function AS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function oa(t){return t&&t[0]!=="?"?"?"+t:t}var jc=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:()=>ie(OS),providedIn:"root"});let t=e;return t})(),gj=new X(""),OS=(()=>{let e=class e extends jc{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ie(Gn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return kS(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+oa(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+oa(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+oa(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(K(NS),K(gj,8))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jl=(()=>{let e=class e{constructor(r){this._subject=new fn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=vj(AS(SS(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+oa(i))}normalize(r){return e.stripTrailingSlash(yj(this._basePath,SS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+oa(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+oa(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=oa,e.joinWithSlash=kS,e.stripTrailingSlash=AS,e.\u0275fac=function(i){return new(i||e)(K(jc))},e.\u0275prov=ce({token:e,factory:()=>mj(),providedIn:"root"});let t=e;return t})();function mj(){return new jl(K(jc))}function yj(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function SS(t){return t.replace(/\/index.html$/,"")}function vj(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Hp(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var i_=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},mr=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new i_(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),MS(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);MS(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ee(kc),ee(jp),ee(n_))},e.\u0275dir=vt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function MS(t,e){t.context.$implicit=e.item}var Wn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new o_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){xS("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){xS("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ee(kc),ee(jp))},e.\u0275dir=vt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),o_=class{constructor(){this.$implicit=null,this.ngIf=null}};function xS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Sn(e)}'.`)}function wj(t,e){return new fe(2100,!1)}var s_=class{createSubscription(e,n){return r_(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){r_(()=>e.unsubscribe())}},a_=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},_j=new a_,bj=new s_,Bc=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(jo(r))return _j;if(Xw(r))return bj;throw wj(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(ee(eo,16))},e.\u0275pipe=ww({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var rn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=er({});let t=e;return t})(),FS="browser",Ej="server";function Uo(t){return t===Ej}var Lc=class{};var Ul=class{},Wp=class{},sa=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var u_=class{encodeKey(e){return VS(e)}encodeValue(e){return VS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Ij(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Cj=/%(\d[a-f0-9])/gi,Dj={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VS(t){return encodeURIComponent(t).replace(Cj,(e,n)=>Dj[n]??e)}function Gp(t){return`${t}`}var qo=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new u_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Ij(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Gp):[Gp(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Gp(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Gp(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var l_=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Tj(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function LS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function jS(t){return typeof Blob<"u"&&t instanceof Blob}function BS(t){return typeof FormData<"u"&&t instanceof FormData}function Aj(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Bl=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(Tj(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new sa,this.context??=new l_,!this.params)this.params=new qo,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||LS(this.body)||jS(this.body)||BS(this.body)||Aj(this.body)?this.body:this.body instanceof qo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||BS(this.body)?null:jS(this.body)?this.body.type||null:LS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof qo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((w,b)=>w.set(b,e.setHeaders[b]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((w,b)=>w.set(b,e.setParams[b]),h)),new t(n,r,s,{params:h,headers:l,context:g,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Uc=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Uc||{}),$l=class{constructor(e,n=Yp.Ok,r="OK"){this.headers=e.headers||new sa,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},d_=class t extends $l{constructor(e={}){super(e),this.type=Uc.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Kp=class t extends $l{constructor(e={}){super(e),this.type=Uc.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Qp=class extends $l{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Yp=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Yp||{});function c_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Sj=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Bl)s=r;else{let l;o.headers instanceof sa?l=o.headers:l=new sa(o.headers);let h;o.params&&(o.params instanceof qo?h=o.params:h=new qo({fromObject:o.params})),s=new Bl(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:h,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=le(s).pipe(Po(l=>this.handler.handle(l)));if(r instanceof Bl||o.observe==="events")return a;let c=a.pipe(Xt(l=>l instanceof Kp));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ae(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ae(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new qo().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,c_(o,i))}post(r,i,o={}){return this.request("POST",r,c_(o,i))}put(r,i,o={}){return this.request("PUT",r,c_(o,i))}};e.\u0275fac=function(i){return new(i||e)(K(Ul))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})();function GS(t,e){return e(t)}function Mj(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function xj(t,e,n){return(r,i)=>Wi(n,()=>e(r,o=>t(o,i)))}var Pj=new X(""),h_=new X(""),Rj=new X(""),Nj=new X("");function kj(){let t=null;return(e,n)=>{t===null&&(t=(ie(Pj,{optional:!0})??[]).reduceRight(Mj,GS));let r=ie(ia),i=r.add();return t(e,n).pipe(xr(()=>r.remove(i)))}}var US=(()=>{let e=class e extends Ul{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=ie(ia);let o=ie(Nj,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(h_),...this.injector.get(Rj,[])]));this.chain=o.reduceRight((s,a)=>xj(s,a,this.injector),GS)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(xr(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(K(Wp),K(Un))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})();var Oj=/^\)\]\}',?\n/;function Fj(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var $S=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new fe(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?xe(i.\u0275loadImpl()):le(null)).pipe(Xe(()=>new ve(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((M,U)=>a.setRequestHeader(M,U.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let M=r.detectContentTypeHeader();M!==null&&a.setRequestHeader("Content-Type",M)}if(r.responseType){let M=r.responseType.toLowerCase();a.responseType=M!=="json"?M:"text"}let c=r.serializeBody(),l=null,h=()=>{if(l!==null)return l;let M=a.statusText||"OK",U=new sa(a.getAllResponseHeaders()),Y=Fj(a)||r.url;return l=new d_({headers:U,status:a.status,statusText:M,url:Y}),l},g=()=>{let{headers:M,status:U,statusText:Y,url:q}=h(),Q=null;U!==Yp.NoContent&&(Q=typeof a.response>"u"?a.responseText:a.response),U===0&&(U=Q?Yp.Ok:0);let ue=U>=200&&U<300;if(r.responseType==="json"&&typeof Q=="string"){let se=Q;Q=Q.replace(Oj,"");try{Q=Q!==""?JSON.parse(Q):null}catch(T){Q=se,ue&&(ue=!1,Q={error:T,text:Q})}}ue?(s.next(new Kp({body:Q,headers:M,status:U,statusText:Y,url:q||void 0})),s.complete()):s.error(new Qp({error:Q,headers:M,status:U,statusText:Y,url:q||void 0}))},w=M=>{let{url:U}=h(),Y=new Qp({error:M,status:a.status||0,statusText:a.statusText||"Unknown Error",url:U||void 0});s.error(Y)},b=!1,A=M=>{b||(s.next(h()),b=!0);let U={type:Uc.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(U.total=M.total),r.responseType==="text"&&a.responseText&&(U.partialText=a.responseText),s.next(U)},k=M=>{let U={type:Uc.UploadProgress,loaded:M.loaded};M.lengthComputable&&(U.total=M.total),s.next(U)};return a.addEventListener("load",g),a.addEventListener("error",w),a.addEventListener("timeout",w),a.addEventListener("abort",w),r.reportProgress&&(a.addEventListener("progress",A),c!==null&&a.upload&&a.upload.addEventListener("progress",k)),a.send(c),s.next({type:Uc.Sent}),()=>{a.removeEventListener("error",w),a.removeEventListener("abort",w),a.removeEventListener("load",g),a.removeEventListener("timeout",w),r.reportProgress&&(a.removeEventListener("progress",A),c!==null&&a.upload&&a.upload.removeEventListener("progress",k)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(K(Lc))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})(),WS=new X(""),Vj="XSRF-TOKEN",Lj=new X("",{providedIn:"root",factory:()=>Vj}),jj="X-XSRF-TOKEN",Bj=new X("",{providedIn:"root",factory:()=>jj}),Zp=class{},Uj=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hp(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(K(Gn),K(nn),K(Lj))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})();function $j(t,e){let n=t.url.toLowerCase();if(!ie(WS)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=ie(Zp).getToken(),i=ie(Bj);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var KS=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(KS||{});function qj(t,e){return{\u0275kind:t,\u0275providers:e}}function zj(...t){let e=[Sj,$S,US,{provide:Ul,useExisting:US},{provide:Wp,useExisting:$S},{provide:h_,useValue:$j,multi:!0},{provide:WS,useValue:!0},{provide:Zp,useClass:Uj}];for(let n of t)e.push(...n.\u0275providers);return $n(e)}var qS=new X("");function Hj(){return qj(KS.LegacyInterceptors,[{provide:qS,useFactory:kj},{provide:h_,useExisting:qS,multi:!0}])}var QS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=er({providers:[zj(Hj())]});let t=e;return t})();var g_=class extends zp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},m_=class t extends g_{static makeCurrent(){RS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Gj();return n==null?null:Wj(n)}resetBaseElement(){ql=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Hp(document.cookie,e)}},ql=null;function Gj(){return ql=ql||document.querySelector("base"),ql?ql.getAttribute("href"):null}function Wj(t){return new URL(t,document.baseURI).pathname}var Kj=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})(),y_=new X(""),JS=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new fe(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(K(y_),K(Re))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})(),Xp=class{constructor(e){this._doc=e}},f_="ng-app-id",eM=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Uo(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${f_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(f_),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(f_,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(K(Gn),K(kw),K(Fw,8),K(nn))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})(),p_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},w_=/%COMP%/g,tM="%COMP%",Qj=`_nghost-${tM}`,Yj=`_ngcontent-${tM}`,Zj=!0,Xj=new X("",{providedIn:"root",factory:()=>Zj});function Jj(t){return Yj.replace(w_,t)}function eB(t){return Qj.replace(w_,t)}function nM(t,e){return e.map(n=>n.replace(w_,t))}var YS=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Uo(c),this.defaultRenderer=new zl(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ii.ShadowDom&&(i=qe(ne({},i),{encapsulation:ii.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Jp?o.applyToHost(r):o instanceof Hl&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(i.encapsulation){case ii.Emulated:s=new Jp(l,h,i,this.appId,g,a,c,w);break;case ii.ShadowDom:return new v_(l,h,r,i,a,c,this.nonce,w);default:s=new Hl(l,h,i,g,a,c,w);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(K(JS),K(eM),K(kw),K(Xj),K(Gn),K(nn),K(Re),K(Fw))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})(),zl=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(p_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ZS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ZS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new fe(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=p_[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=p_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Hi.DashCase|Hi.Important)?e.style.setProperty(n,r,i&Hi.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Hi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=to().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function ZS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var v_=class extends zl{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=nM(i.id,i.styles);for(let h of l){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Hl=class extends zl{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?nM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Jp=class extends Hl{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=Jj(l),this.hostAttr=eB(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},tB=(()=>{let e=class e extends Xp{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(K(Gn))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})(),XS=["alt","control","meta","shift"],nB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},iB=(()=>{let e=class e extends Xp{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>to().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),XS.forEach(h=>{let g=i.indexOf(h);g>-1&&(i.splice(g,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=nB[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),XS.forEach(a=>{if(a!==o){let c=rB[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(K(Gn))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let t=e;return t})();function rM(t,e){return TS(ne({rootComponent:t},oB(e)))}function oB(t){return{appProviders:[...lB,...t?.providers??[]],platformProviders:uB}}function sB(){m_.makeCurrent()}function aB(){return new zi}function cB(){return kA(document),document}var uB=[{provide:nn,useValue:FS},{provide:Ow,useValue:sB,multi:!0},{provide:Gn,useFactory:cB,deps:[]}];var lB=[{provide:Sp,useValue:"root"},{provide:zi,useFactory:aB,deps:[]},{provide:y_,useClass:tB,multi:!0,deps:[Gn,Re,nn]},{provide:y_,useClass:iB,multi:!0,deps:[Gn]},YS,eM,JS,{provide:Pl,useExisting:YS},{provide:Lc,useClass:Kj,deps:[]},[]];var iM=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(K(Gn))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hB="firebase",fB="10.12.2";xt(hB,fB,"app");var yr=new Gi("ANGULARFIRE2_VERSION");function qc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ca=(t,e)=>{let n=e?[e]:vf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Mn=class{constructor(){return ca(pB)}},pB="app-check";function $c(){}var eg=class{zone;delegate;constructor(e,n=iv){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},__=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$c,{},$c,$c)),n.pipe(yt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Kn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new eg(Zone.current)),this.insideAngular=n.run(()=>new eg(Zone.current,$s)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(K(Re))};static \u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function gB(t){return Gl().ngZone.runOutsideAngular(()=>t())}function aa(t){return Gl().ngZone.run(()=>t())}function b_(t){return t.pipe(jn(Gl().outsideAngular))}function Jt(t){return mB(Gl())(t)}function mB(t){return function(n){return n=n.lift(new __(t.ngZone)),n.pipe(dr(t.outsideAngular),jn(t.insideAngular))}}var yB=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),aa(()=>t.apply(void 0,r))},no=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=aa(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$c,{},$c,$c))),r[o]=yB(r[o],n));let i=gB(()=>t.apply(this,r));if(!e)if(i instanceof ve){let o=Gl();return i.pipe(dr(o.outsideAngular),jn(o.insideAngular))}else return aa(()=>i);return i instanceof ve?i.pipe(Jt):i instanceof Promise?aa(()=>new Promise((o,s)=>i.then(a=>aa(()=>o(a)),a=>aa(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:aa(()=>i)};var Lr=class{constructor(e){return e}},ro=class{constructor(){return vf()}};function vB(t){return t&&t.length===1?t[0]:new Lr(Mo())}var I_=new X("angularfire2._apps"),wB={provide:Lr,useFactory:vB,deps:[[new Rt,I_]]},_B={provide:ro,deps:[[new Rt,I_]]};function bB(t){return(e,n)=>{let r=n.get(nn);xt("angularfire",yr.full,"core"),xt("angularfire",yr.full,"app"),xt("angular",Zw.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Lr(i)}}function oM(t,...e){return $n([wB,_B,{provide:I_,useFactory:bB(t),multi:!0,deps:[Re,Hn,Kn,...e]}])}var tg=no(Mo,!0);var sM=no(lD,!0);var aM="auth",Wl=class{constructor(e){return e}},ua=class{constructor(){return ca(aM)}};var C_=new X("angularfire2.auth-instances");function bU(t,e){let n=qc(aM,t,e);return n&&new Wl(n)}function EU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Wl(r)}}var IU={provide:ua,deps:[[new Rt,C_]]},CU={provide:Wl,useFactory:bU,deps:[[new Rt,C_],Lr]};function cM(t,...e){return xt("angularfire",yr.full,"auth"),$n([CU,IU,{provide:C_,useFactory:EU(t),multi:!0,deps:[Re,Hn,Kn,ro,[new Rt,Mn],...e]}])}var uM=no(qy,!0);var lM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dM={};var zo,D_;(function(){var t;function e(T,E){function D(){}D.prototype=E.prototype,T.D=E.prototype,T.prototype=new D,T.prototype.constructor=T,T.C=function(S,x,F){for(var C=Array(arguments.length-2),cr=2;cr<arguments.length;cr++)C[cr-2]=arguments[cr];return E.prototype[x].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,E,D){D||(D=0);var S=Array(16);if(typeof E=="string")for(var x=0;16>x;++x)S[x]=E.charCodeAt(D++)|E.charCodeAt(D++)<<8|E.charCodeAt(D++)<<16|E.charCodeAt(D++)<<24;else for(x=0;16>x;++x)S[x]=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24;E=T.g[0],D=T.g[1],x=T.g[2];var F=T.g[3],C=E+(F^D&(x^F))+S[0]+3614090360&4294967295;E=D+(C<<7&4294967295|C>>>25),C=F+(x^E&(D^x))+S[1]+3905402710&4294967295,F=E+(C<<12&4294967295|C>>>20),C=x+(D^F&(E^D))+S[2]+606105819&4294967295,x=F+(C<<17&4294967295|C>>>15),C=D+(E^x&(F^E))+S[3]+3250441966&4294967295,D=x+(C<<22&4294967295|C>>>10),C=E+(F^D&(x^F))+S[4]+4118548399&4294967295,E=D+(C<<7&4294967295|C>>>25),C=F+(x^E&(D^x))+S[5]+1200080426&4294967295,F=E+(C<<12&4294967295|C>>>20),C=x+(D^F&(E^D))+S[6]+2821735955&4294967295,x=F+(C<<17&4294967295|C>>>15),C=D+(E^x&(F^E))+S[7]+4249261313&4294967295,D=x+(C<<22&4294967295|C>>>10),C=E+(F^D&(x^F))+S[8]+1770035416&4294967295,E=D+(C<<7&4294967295|C>>>25),C=F+(x^E&(D^x))+S[9]+2336552879&4294967295,F=E+(C<<12&4294967295|C>>>20),C=x+(D^F&(E^D))+S[10]+4294925233&4294967295,x=F+(C<<17&4294967295|C>>>15),C=D+(E^x&(F^E))+S[11]+2304563134&4294967295,D=x+(C<<22&4294967295|C>>>10),C=E+(F^D&(x^F))+S[12]+1804603682&4294967295,E=D+(C<<7&4294967295|C>>>25),C=F+(x^E&(D^x))+S[13]+4254626195&4294967295,F=E+(C<<12&4294967295|C>>>20),C=x+(D^F&(E^D))+S[14]+2792965006&4294967295,x=F+(C<<17&4294967295|C>>>15),C=D+(E^x&(F^E))+S[15]+1236535329&4294967295,D=x+(C<<22&4294967295|C>>>10),C=E+(x^F&(D^x))+S[1]+4129170786&4294967295,E=D+(C<<5&4294967295|C>>>27),C=F+(D^x&(E^D))+S[6]+3225465664&4294967295,F=E+(C<<9&4294967295|C>>>23),C=x+(E^D&(F^E))+S[11]+643717713&4294967295,x=F+(C<<14&4294967295|C>>>18),C=D+(F^E&(x^F))+S[0]+3921069994&4294967295,D=x+(C<<20&4294967295|C>>>12),C=E+(x^F&(D^x))+S[5]+3593408605&4294967295,E=D+(C<<5&4294967295|C>>>27),C=F+(D^x&(E^D))+S[10]+38016083&4294967295,F=E+(C<<9&4294967295|C>>>23),C=x+(E^D&(F^E))+S[15]+3634488961&4294967295,x=F+(C<<14&4294967295|C>>>18),C=D+(F^E&(x^F))+S[4]+3889429448&4294967295,D=x+(C<<20&4294967295|C>>>12),C=E+(x^F&(D^x))+S[9]+568446438&4294967295,E=D+(C<<5&4294967295|C>>>27),C=F+(D^x&(E^D))+S[14]+3275163606&4294967295,F=E+(C<<9&4294967295|C>>>23),C=x+(E^D&(F^E))+S[3]+4107603335&4294967295,x=F+(C<<14&4294967295|C>>>18),C=D+(F^E&(x^F))+S[8]+1163531501&4294967295,D=x+(C<<20&4294967295|C>>>12),C=E+(x^F&(D^x))+S[13]+2850285829&4294967295,E=D+(C<<5&4294967295|C>>>27),C=F+(D^x&(E^D))+S[2]+4243563512&4294967295,F=E+(C<<9&4294967295|C>>>23),C=x+(E^D&(F^E))+S[7]+1735328473&4294967295,x=F+(C<<14&4294967295|C>>>18),C=D+(F^E&(x^F))+S[12]+2368359562&4294967295,D=x+(C<<20&4294967295|C>>>12),C=E+(D^x^F)+S[5]+4294588738&4294967295,E=D+(C<<4&4294967295|C>>>28),C=F+(E^D^x)+S[8]+2272392833&4294967295,F=E+(C<<11&4294967295|C>>>21),C=x+(F^E^D)+S[11]+1839030562&4294967295,x=F+(C<<16&4294967295|C>>>16),C=D+(x^F^E)+S[14]+4259657740&4294967295,D=x+(C<<23&4294967295|C>>>9),C=E+(D^x^F)+S[1]+2763975236&4294967295,E=D+(C<<4&4294967295|C>>>28),C=F+(E^D^x)+S[4]+1272893353&4294967295,F=E+(C<<11&4294967295|C>>>21),C=x+(F^E^D)+S[7]+4139469664&4294967295,x=F+(C<<16&4294967295|C>>>16),C=D+(x^F^E)+S[10]+3200236656&4294967295,D=x+(C<<23&4294967295|C>>>9),C=E+(D^x^F)+S[13]+681279174&4294967295,E=D+(C<<4&4294967295|C>>>28),C=F+(E^D^x)+S[0]+3936430074&4294967295,F=E+(C<<11&4294967295|C>>>21),C=x+(F^E^D)+S[3]+3572445317&4294967295,x=F+(C<<16&4294967295|C>>>16),C=D+(x^F^E)+S[6]+76029189&4294967295,D=x+(C<<23&4294967295|C>>>9),C=E+(D^x^F)+S[9]+3654602809&4294967295,E=D+(C<<4&4294967295|C>>>28),C=F+(E^D^x)+S[12]+3873151461&4294967295,F=E+(C<<11&4294967295|C>>>21),C=x+(F^E^D)+S[15]+530742520&4294967295,x=F+(C<<16&4294967295|C>>>16),C=D+(x^F^E)+S[2]+3299628645&4294967295,D=x+(C<<23&4294967295|C>>>9),C=E+(x^(D|~F))+S[0]+4096336452&4294967295,E=D+(C<<6&4294967295|C>>>26),C=F+(D^(E|~x))+S[7]+1126891415&4294967295,F=E+(C<<10&4294967295|C>>>22),C=x+(E^(F|~D))+S[14]+2878612391&4294967295,x=F+(C<<15&4294967295|C>>>17),C=D+(F^(x|~E))+S[5]+4237533241&4294967295,D=x+(C<<21&4294967295|C>>>11),C=E+(x^(D|~F))+S[12]+1700485571&4294967295,E=D+(C<<6&4294967295|C>>>26),C=F+(D^(E|~x))+S[3]+2399980690&4294967295,F=E+(C<<10&4294967295|C>>>22),C=x+(E^(F|~D))+S[10]+4293915773&4294967295,x=F+(C<<15&4294967295|C>>>17),C=D+(F^(x|~E))+S[1]+2240044497&4294967295,D=x+(C<<21&4294967295|C>>>11),C=E+(x^(D|~F))+S[8]+1873313359&4294967295,E=D+(C<<6&4294967295|C>>>26),C=F+(D^(E|~x))+S[15]+4264355552&4294967295,F=E+(C<<10&4294967295|C>>>22),C=x+(E^(F|~D))+S[6]+2734768916&4294967295,x=F+(C<<15&4294967295|C>>>17),C=D+(F^(x|~E))+S[13]+1309151649&4294967295,D=x+(C<<21&4294967295|C>>>11),C=E+(x^(D|~F))+S[4]+4149444226&4294967295,E=D+(C<<6&4294967295|C>>>26),C=F+(D^(E|~x))+S[11]+3174756917&4294967295,F=E+(C<<10&4294967295|C>>>22),C=x+(E^(F|~D))+S[2]+718787259&4294967295,x=F+(C<<15&4294967295|C>>>17),C=D+(F^(x|~E))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+F&4294967295}r.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var D=E-this.blockSize,S=this.B,x=this.h,F=0;F<E;){if(x==0)for(;F<=D;)i(this,T,F),F+=this.blockSize;if(typeof T=="string"){for(;F<E;)if(S[x++]=T.charCodeAt(F++),x==this.blockSize){i(this,S),x=0;break}}else for(;F<E;)if(S[x++]=T[F++],x==this.blockSize){i(this,S),x=0;break}}this.h=x,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var D=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=D&255,D/=256;for(this.u(T),T=Array(16),E=D=0;4>E;++E)for(var S=0;32>S;S+=8)T[D++]=this.g[E]>>>S&255;return T};function o(T,E){var D=a;return Object.prototype.hasOwnProperty.call(D,T)?D[T]:D[T]=E(T)}function s(T,E){this.h=E;for(var D=[],S=!0,x=T.length-1;0<=x;x--){var F=T[x]|0;S&&F==E||(D[x]=F,S=!1)}this.g=D}var a={};function c(T){return-128<=T&&128>T?o(T,function(E){return new s([E|0],0>E?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return M(l(-T));for(var E=[],D=1,S=0;T>=D;S++)E[S]=T/D|0,D*=4294967296;return new s(E,0)}function h(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return M(h(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=l(Math.pow(E,8)),S=g,x=0;x<T.length;x+=8){var F=Math.min(8,T.length-x),C=parseInt(T.substring(x,x+F),E);8>F?(F=l(Math.pow(E,F)),S=S.j(F).add(l(C))):(S=S.j(D),S=S.add(l(C)))}return S}var g=c(0),w=c(1),b=c(16777216);t=s.prototype,t.m=function(){if(k(this))return-M(this).m();for(var T=0,E=1,D=0;D<this.g.length;D++){var S=this.i(D);T+=(0<=S?S:4294967296+S)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(k(this))return"-"+M(this).toString(T);for(var E=l(Math.pow(T,6)),D=this,S="";;){var x=Q(D,E).g;D=U(D,x.j(E));var F=((0<D.g.length?D.g[0]:D.h)>>>0).toString(T);if(D=x,A(D))return F+S;for(;6>F.length;)F="0"+F;S=F+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function k(T){return T.h==-1}t.l=function(T){return T=U(this,T),k(T)?-1:A(T)?0:1};function M(T){for(var E=T.g.length,D=[],S=0;S<E;S++)D[S]=~T.g[S];return new s(D,~T.h).add(w)}t.abs=function(){return k(this)?M(this):this},t.add=function(T){for(var E=Math.max(this.g.length,T.g.length),D=[],S=0,x=0;x<=E;x++){var F=S+(this.i(x)&65535)+(T.i(x)&65535),C=(F>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);S=C>>>16,F&=65535,C&=65535,D[x]=C<<16|F}return new s(D,D[D.length-1]&-2147483648?-1:0)};function U(T,E){return T.add(M(E))}t.j=function(T){if(A(this)||A(T))return g;if(k(this))return k(T)?M(this).j(M(T)):M(M(this).j(T));if(k(T))return M(this.j(M(T)));if(0>this.l(b)&&0>T.l(b))return l(this.m()*T.m());for(var E=this.g.length+T.g.length,D=[],S=0;S<2*E;S++)D[S]=0;for(S=0;S<this.g.length;S++)for(var x=0;x<T.g.length;x++){var F=this.i(S)>>>16,C=this.i(S)&65535,cr=T.i(x)>>>16,_s=T.i(x)&65535;D[2*S+2*x]+=C*_s,Y(D,2*S+2*x),D[2*S+2*x+1]+=F*_s,Y(D,2*S+2*x+1),D[2*S+2*x+1]+=C*cr,Y(D,2*S+2*x+1),D[2*S+2*x+2]+=F*cr,Y(D,2*S+2*x+2)}for(S=0;S<E;S++)D[S]=D[2*S+1]<<16|D[2*S];for(S=E;S<2*E;S++)D[S]=0;return new s(D,0)};function Y(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function q(T,E){this.g=T,this.h=E}function Q(T,E){if(A(E))throw Error("division by zero");if(A(T))return new q(g,g);if(k(T))return E=Q(M(T),E),new q(M(E.g),M(E.h));if(k(E))return E=Q(T,M(E)),new q(M(E.g),E.h);if(30<T.g.length){if(k(T)||k(E))throw Error("slowDivide_ only works with positive integers.");for(var D=w,S=E;0>=S.l(T);)D=ue(D),S=ue(S);var x=se(D,1),F=se(S,1);for(S=se(S,2),D=se(D,2);!A(S);){var C=F.add(S);0>=C.l(T)&&(x=x.add(D),F=C),S=se(S,1),D=se(D,1)}return E=U(T,x.j(E)),new q(x,E)}for(x=g;0<=T.l(E);){for(D=Math.max(1,Math.floor(T.m()/E.m())),S=Math.ceil(Math.log(D)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),F=l(D),C=F.j(E);k(C)||0<C.l(T);)D-=S,F=l(D),C=F.j(E);A(F)&&(F=w),x=x.add(F),T=U(T,C)}return new q(x,T)}t.A=function(T){return Q(this,T).h},t.and=function(T){for(var E=Math.max(this.g.length,T.g.length),D=[],S=0;S<E;S++)D[S]=this.i(S)&T.i(S);return new s(D,this.h&T.h)},t.or=function(T){for(var E=Math.max(this.g.length,T.g.length),D=[],S=0;S<E;S++)D[S]=this.i(S)|T.i(S);return new s(D,this.h|T.h)},t.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),D=[],S=0;S<E;S++)D[S]=this.i(S)^T.i(S);return new s(D,this.h^T.h)};function ue(T){for(var E=T.g.length+1,D=[],S=0;S<E;S++)D[S]=T.i(S)<<1|T.i(S-1)>>>31;return new s(D,T.h)}function se(T,E){var D=E>>5;E%=32;for(var S=T.g.length-D,x=[],F=0;F<S;F++)x[F]=0<E?T.i(F+D)>>>E|T.i(F+D+1)<<32-E:T.i(F+D);return new s(x,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,D_=dM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,zo=dM.Integer=s}).apply(typeof lM<"u"?lM:typeof self<"u"?self:typeof window<"u"?window:{});var ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},io={};var T_,A_,zc,S_,Kl,rg,M_,x_,P_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,m){return u==Array.prototype||u==Object.prototype||(u[p]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ng=="object"&&ng];for(var p=0;p<u.length;++p){var m=u[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var m=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var R=u[_];if(!(R in m))break e;m=m[R]}u=u[u.length-1],_=m[u],p=p(_),p!=_&&p!=null&&e(m,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var m=0,_=!1,R={next:function(){if(!_&&m<u.length){var L=m++;return{value:p(L,u[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(u){return u||function(){return o(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,m){return u.call.apply(u.bind,arguments)}function g(u,p,m){if(!u)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,_),u.apply(p,R)}}return function(){return u.apply(p,arguments)}}function w(u,p,m){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,w.apply(null,arguments)}function b(u,p){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function A(u,p){function m(){}m.prototype=p.prototype,u.aa=p.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(_,R,L){for(var Z=Array(arguments.length-2),We=2;We<arguments.length;We++)Z[We-2]=arguments[We];return p.prototype[R].apply(_,Z)}}function k(u){let p=u.length;if(0<p){let m=Array(p);for(let _=0;_<p;_++)m[_]=u[_];return m}return[]}function M(u,p){for(let m=1;m<arguments.length;m++){let _=arguments[m];if(c(_)){let R=u.length||0,L=_.length||0;u.length=R+L;for(let Z=0;Z<L;Z++)u[R+Z]=_[Z]}else u.push(_)}}class U{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Y(u){return/^[\s\xa0]*$/.test(u)}function q(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var ue=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function se(u,p,m){for(let _ in u)p.call(m,u[_],_,u)}function T(u,p){for(let m in u)p.call(void 0,u[m],m,u)}function E(u){let p={};for(let m in u)p[m]=u[m];return p}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,p){let m,_;for(let R=1;R<arguments.length;R++){_=arguments[R];for(m in _)u[m]=_[m];for(let L=0;L<D.length;L++)m=D[L],Object.prototype.hasOwnProperty.call(_,m)&&(u[m]=_[m])}}function x(u){var p=1;u=u.split(":");let m=[];for(;0<p&&u.length;)m.push(u.shift()),p--;return u.length&&m.push(u.join(":")),m}function F(u){a.setTimeout(()=>{throw u},0)}function C(){var u=qa;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class cr{constructor(){this.h=this.g=null}add(p,m){let _=_s.get();_.set(p,m),this.h?this.h.next=_:this.g=_,this.h=_}}var _s=new U(()=>new Te,u=>u.reset());class Te{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let bs,Es=!1,qa=new cr,wh=()=>{let u=a.Promise.resolve(void 0);bs=()=>{u.then(B)}};var B=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){F(m)}var p=_s;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}Es=!1};function Hr(){this.s=this.s,this.C=this.C}Hr.prototype.s=!1,Hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function St(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var _h=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return u}();function Mi(u,p){if(St.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(ue){e:{try{Q(p.nodeName);var R=!0;break e}catch{}R=!1}R||(p=null)}}else m=="mouseover"?p=u.fromElement:m=="mouseout"&&(p=u.toElement);this.relatedTarget=p,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:cn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Mi.aa.h.call(this)}}A(Mi,St);var cn={2:"touch",3:"pen",4:"mouse"};Mi.prototype.h=function(){Mi.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Zn="closure_listenable_"+(1e6*Math.random()|0),bh=0;function Ey(u,p,m,_,R){this.listener=u,this.proxy=null,this.src=p,this.type=m,this.capture=!!_,this.ha=R,this.key=++bh,this.da=this.fa=!1}function za(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xi(u){this.src=u,this.g={},this.h=0}xi.prototype.add=function(u,p,m,_,R){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var Z=Pi(u,p,_,R);return-1<Z?(p=u[Z],m||(p.fa=!1)):(p=new Ey(p,this.src,L,!!_,R),p.fa=m,u.push(p)),p};function Is(u,p){var m=p.type;if(m in u.g){var _=u.g[m],R=Array.prototype.indexOf.call(_,p,void 0),L;(L=0<=R)&&Array.prototype.splice.call(_,R,1),L&&(za(p),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Pi(u,p,m,_){for(var R=0;R<u.length;++R){var L=u[R];if(!L.da&&L.listener==p&&L.capture==!!m&&L.ha==_)return R}return-1}var Cs="closure_lm_"+(1e6*Math.random()|0),Zt={};function yo(u,p,m,_,R){if(_&&_.once)return vo(u,p,m,_,R);if(Array.isArray(p)){for(var L=0;L<p.length;L++)yo(u,p[L],m,_,R);return null}return m=On(m),u&&u[Zn]?u.K(p,m,l(_)?!!_.capture:!!_,R):un(u,p,m,!1,_,R)}function un(u,p,m,_,R,L){if(!p)throw Error("Invalid event type");var Z=l(R)?!!R.capture:!!R,We=Ds(u);if(We||(u[Cs]=We=new xi(u)),m=We.add(p,m,_,Z,L),m.proxy)return m;if(_=Ge(),m.proxy=_,_.src=u,_.listener=m,u.addEventListener)_h||(R=Z),R===void 0&&(R=!1),u.addEventListener(p.toString(),_,R);else if(u.attachEvent)u.attachEvent(Ga(p.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ge(){function u(m){return p.call(u.src,u.listener,m)}let p=Ih;return u}function vo(u,p,m,_,R){if(Array.isArray(p)){for(var L=0;L<p.length;L++)vo(u,p[L],m,_,R);return null}return m=On(m),u&&u[Zn]?u.L(p,m,l(_)?!!_.capture:!!_,R):un(u,p,m,!0,_,R)}function Eh(u,p,m,_,R){if(Array.isArray(p))for(var L=0;L<p.length;L++)Eh(u,p[L],m,_,R);else _=l(_)?!!_.capture:!!_,m=On(m),u&&u[Zn]?(u=u.i,p=String(p).toString(),p in u.g&&(L=u.g[p],m=Pi(L,m,_,R),-1<m&&(za(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ds(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Pi(p,m,_,R)),(m=-1<u?p[u]:null)&&Ha(m))}function Ha(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Zn])Is(p.i,u);else{var m=u.type,_=u.proxy;p.removeEventListener?p.removeEventListener(m,_,u.capture):p.detachEvent?p.detachEvent(Ga(m),_):p.addListener&&p.removeListener&&p.removeListener(_),(m=Ds(p))?(Is(m,u),m.h==0&&(m.src=null,p[Cs]=null)):za(u)}}}function Ga(u){return u in Zt?Zt[u]:Zt[u]="on"+u}function Ih(u,p){if(u.da)u=!0;else{p=new Mi(p,this);var m=u.listener,_=u.ha||u.src;u.fa&&Ha(u),u=m.call(_,p)}return u}function Ds(u){return u=u[Cs],u instanceof xi?u:null}var wo="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(u){return typeof u=="function"?u:(u[wo]||(u[wo]=function(p){return u.handleEvent(p)}),u[wo])}function gt(){Hr.call(this),this.i=new xi(this),this.M=this,this.F=null}A(gt,Hr),gt.prototype[Zn]=!0,gt.prototype.removeEventListener=function(u,p,m,_){Eh(this,u,p,m,_)};function mt(u,p){var m,_=u.F;if(_)for(m=[];_;_=_.F)m.push(_);if(u=u.M,_=p.type||p,typeof p=="string")p=new St(p,u);else if(p instanceof St)p.target=p.target||u;else{var R=p;p=new St(_,u),S(p,R)}if(R=!0,m)for(var L=m.length-1;0<=L;L--){var Z=p.g=m[L];R=Wa(Z,_,!0,p)&&R}if(Z=p.g=u,R=Wa(Z,_,!0,p)&&R,R=Wa(Z,_,!1,p)&&R,m)for(L=0;L<m.length;L++)Z=p.g=m[L],R=Wa(Z,_,!1,p)&&R}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var m=u.g[p],_=0;_<m.length;_++)za(m[_]);delete u.g[p],u.h--}}this.F=null},gt.prototype.K=function(u,p,m,_){return this.i.add(String(u),p,!1,m,_)},gt.prototype.L=function(u,p,m,_){return this.i.add(String(u),p,!0,m,_)};function Wa(u,p,m,_){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var R=!0,L=0;L<p.length;++L){var Z=p[L];if(Z&&!Z.da&&Z.capture==m){var We=Z.listener,qt=Z.ha||Z.src;Z.fa&&Is(u.i,Z),R=We.call(qt,_)!==!1&&R}}return R&&!_.defaultPrevented}function Ri(u,p,m){if(typeof u=="function")m&&(u=w(u,m));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function _o(u){u.g=Ri(()=>{u.g=null,u.i&&(u.i=!1,_o(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class Ch extends Hr{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:_o(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(u){Hr.call(this),this.h=u,this.g={}}A(Gr,Hr);var Ka=[];function Dh(u){se(u.g,function(p,m){this.g.hasOwnProperty(m)&&Ha(p)},u),u.g={}}Gr.prototype.N=function(){Gr.aa.N.call(this),Dh(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ts=a.JSON.stringify,el=a.JSON.parse,Qa=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function tl(){}tl.prototype.h=null;function ln(u){return u.h||(u.h=u.i())}function ur(){}var As={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dn(){St.call(this,"d")}A(dn,St);function bo(){St.call(this,"c")}A(bo,St);var Wr={},nl=null;function Se(){return nl=nl||new gt}Wr.La="serverreachability";function Xn(u){St.call(this,Wr.La,u)}A(Xn,St);function Fn(u){let p=Se();mt(p,new Xn(p))}Wr.STAT_EVENT="statevent";function Kr(u,p){St.call(this,Wr.STAT_EVENT,u),this.stat=p}A(Kr,St);function je(u){let p=Se();mt(p,new Kr(p,u))}Wr.Ma="timingevent";function $t(u,p){St.call(this,Wr.Ma,u),this.size=p}A($t,St);function Ni(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Eo(){this.g=!0}Eo.prototype.xa=function(){this.g=!1};function Ss(u,p,m,_,R,L){u.info(function(){if(u.g)if(L)for(var Z="",We=L.split("&"),qt=0;qt<We.length;qt++){var Oe=We[qt].split("=");if(1<Oe.length){var zt=Oe[0];Oe=Oe[1];var Ht=zt.split("_");Z=2<=Ht.length&&Ht[1]=="type"?Z+(zt+"="+Oe+"&"):Z+(zt+"=redacted&")}}else Z=null;else Z=L;return"XMLHTTP REQ ("+_+") [attempt "+R+"]: "+p+`
`+m+`
`+Z})}function En(u,p,m,_,R,L,Z){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+R+"]: "+p+`
`+m+`
`+L+" "+Z})}function Io(u,p,m,_){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ah(u,m)+(_?" "+_:"")})}function Th(u,p){u.info(function(){return"TIMEOUT: "+p})}Eo.prototype.info=function(){};function Ah(u,p){if(!u.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var _=m[u];if(!(2>_.length)){var R=_[1];if(Array.isArray(R)&&!(1>R.length)){var L=R[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Z=1;Z<R.length;Z++)R[Z]=""}}}}return Ts(m)}catch{return p}}var Co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ya;function Za(){}A(Za,tl),Za.prototype.g=function(){return new XMLHttpRequest},Za.prototype.i=function(){return{}},Ya=new Za;function Qr(u,p,m,_){this.j=u,this.i=p,this.l=m,this.R=_||1,this.U=new Gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yr}function Yr(){this.i=null,this.g="",this.h=!1}var Mh={},rl={};function il(u,p,m){u.L=1,u.v=Ja(In(p)),u.m=m,u.P=!0,xh(u,null)}function xh(u,p){u.F=Date.now(),Xa(u),u.A=In(u.v);var m=u.A,_=u.R;Array.isArray(_)||(_=[String(_)]),zh(m.i,"t",_),u.C=0,m=u.j.J,u.h=new Yr,u.g=rf(u.j,m?p:null,!u.m),0<u.O&&(u.M=new Ch(w(u.Y,u,u.g),u.O)),p=u.U,m=u.g,_=u.ca;var R="readystatechange";Array.isArray(R)||(R&&(Ka[0]=R.toString()),R=Ka);for(var L=0;L<R.length;L++){var Z=yo(m,R[L],_||p.handleEvent,!1,p.h||p);if(!Z)break;p.g[Z.key]=Z}p=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Fn(),Ss(u.i,u.u,u.A,u.l,u.R,u.m)}Qr.prototype.ca=function(u){u=u.target;let p=this.M;p&&Tr(u)==3?p.j():this.Y(u)},Qr.prototype.Y=function(u){try{if(u==this.g)e:{let Ht=Tr(this.g);var p=this.g.Ba();let Xr=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Yh(this.g)))){this.J||Ht!=4||p==7||(p==8||0>=Xr?Fn(3):Fn(2)),Ir(this);var m=this.g.Z();this.X=m;t:if(Ph(this)){var _=Yh(this.g);u="";var R=_.length,L=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),Ms(this);var Z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<R;p++)this.h.h=!0,u+=this.h.i.decode(_[p],{stream:!(L&&p==R-1)});_.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,En(this.i,this.u,this.A,this.l,this.R,Ht,m),this.o){if(this.T&&!this.K){t:{if(this.g){var We,qt=this.g;if((We=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(We)){var Oe=We;break t}}Oe=null}if(m=Oe)Io(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sl(this,m);else{this.o=!1,this.s=3,je(12),ki(this),Ms(this);break e}}if(this.P){m=!0;let hn;for(;!this.J&&this.C<Z.length;)if(hn=ol(this,Z),hn==rl){Ht==4&&(this.s=4,je(14),m=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Mh){this.s=4,je(15),Io(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else Io(this.i,this.l,hn,null),sl(this,hn);if(Ph(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||Z.length!=0||this.h.h||(this.s=1,je(16),m=!1),this.o=this.o&&m,!m)Io(this.i,this.l,Z,"[Invalid Chunked Response]"),ki(this),Ms(this);else if(0<Z.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),ji(zt),zt.M=!0,je(11))}}else Io(this.i,this.l,Z,null),sl(this,Z);Ht==4&&ki(this),this.o&&!this.J&&(Ht==4?ef(this.j,this):(this.o=!1,Xa(this)))}else Oy(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,je(12)):(this.s=0,je(13)),ki(this),Ms(this)}}}catch{}finally{}};function Ph(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ol(u,p){var m=u.C,_=p.indexOf(`
`,m);return _==-1?rl:(m=Number(p.substring(m,_)),isNaN(m)?Mh:(_+=1,_+m>p.length?rl:(p=p.slice(_,_+m),u.C=_+m,p)))}Qr.prototype.cancel=function(){this.J=!0,ki(this)};function Xa(u){u.S=Date.now()+u.I,Rh(u,u.I)}function Rh(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ni(w(u.ba,u),p)}function Ir(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Qr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Th(this.i,this.A),this.L!=2&&(Fn(),je(17)),ki(this),this.s=2,Ms(this)):Rh(this,this.S-u)};function Ms(u){u.j.G==0||u.J||ef(u.j,u)}function ki(u){Ir(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Dh(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function sl(u,p){try{var m=u.j;if(m.G!=0&&(m.g==u||cl(m.h,u))){if(!u.K&&cl(m.h,u)&&m.G==3){try{var _=m.Da.g.parse(p)}catch{_=null}if(Array.isArray(_)&&_.length==3){var R=_;if(R[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)rc(m),ec(m);else break e;nc(m),je(18)}}else m.za=R[1],0<m.za-m.T&&37500>R[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ni(w(m.Za,m),6e3));if(1>=Oh(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Vn(m,11)}else if((u.K||m.g==u)&&rc(m),!Y(p))for(R=m.Da.g.parse(p),p=0;p<R.length;p++){let Oe=R[p];if(m.T=Oe[0],Oe=Oe[1],m.G==2)if(Oe[0]=="c"){m.K=Oe[1],m.ia=Oe[2];let zt=Oe[3];zt!=null&&(m.la=zt,m.j.info("VER="+m.la));let Ht=Oe[4];Ht!=null&&(m.Aa=Ht,m.j.info("SVER="+m.Aa));let Xr=Oe[5];Xr!=null&&typeof Xr=="number"&&0<Xr&&(_=1.5*Xr,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;let hn=u.g;if(hn){let oc=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oc){var L=_.h;L.g||oc.indexOf("spdy")==-1&&oc.indexOf("quic")==-1&&oc.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ul(L,L.h),L.h=null))}if(_.D){let sc=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(_.ya=sc,tt(_.I,_.D,sc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var Z=u;if(_.qa=nf(_,_.J?_.ia:null,_.W),Z.K){Ye(_.h,Z);var We=Z,qt=_.L;qt&&(We.I=qt),We.B&&(Ir(We),Xa(We)),_.g=Z}else Xh(_);0<m.i.length&&tc(m)}else Oe[0]!="stop"&&Oe[0]!="close"||Vn(m,7);else m.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Vn(m,7):hl(m):Oe[0]!="noop"&&m.l&&m.l.ta(Oe),m.v=0)}}Fn(4)}catch{}}var al=class{constructor(u,p){this.g=u,this.map=p}};function Nh(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kh(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Oh(u){return u.h?1:u.g?u.g.size:0}function cl(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ul(u,p){u.g?u.g.add(p):u.h=p}function Ye(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Nh.prototype.cancel=function(){if(this.i=Fh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Fh(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let m of u.g.values())p=p.concat(m.D);return p}return k(u.i)}function Iy(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var p=[],m=u.length,_=0;_<m;_++)p.push(u[_]);return p}p=[],m=0;for(_ in u)p[m++]=u[_];return p}function Cy(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var p=[];u=u.length;for(var m=0;m<u;m++)p.push(m);return p}p=[],m=0;for(let _ in u)p[m++]=_;return p}}}function Vh(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var m=Cy(u),_=Iy(u),R=_.length,L=0;L<R;L++)p.call(void 0,_[L],m&&m[L],u)}var Lh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dy(u,p){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var _=u[m].indexOf("="),R=null;if(0<=_){var L=u[m].substring(0,_);R=u[m].substring(_+1)}else L=u[m];p(L,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Cr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Cr){this.h=u.h,xs(this,u.j),this.o=u.o,this.g=u.g,Oi(this,u.s),this.l=u.l;var p=u.i,m=new Rs;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),dt(this,m),this.m=u.m}else u&&(p=String(u).match(Lh))?(this.h=!1,xs(this,p[1]||"",!0),this.o=Ps(p[2]||""),this.g=Ps(p[3]||"",!0),Oi(this,p[4]),this.l=Ps(p[5]||"",!0),dt(this,p[6]||"",!0),this.m=Ps(p[7]||"")):(this.h=!1,this.i=new Rs(null,this.h))}Cr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Do(p,jh,!0),":");var m=this.g;return(m||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Do(p,jh,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Do(m,m.charAt(0)=="/"?Bh:Ay,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Do(m,Uh)),u.join("")};function In(u){return new Cr(u)}function xs(u,p,m){u.j=m?Ps(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Oi(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function dt(u,p,m){p instanceof Rs?(u.i=p,My(u.i,u.h)):(m||(p=Do(p,Sy)),u.i=new Rs(p,u.h))}function tt(u,p,m){u.i.set(p,m)}function Ja(u){return tt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ps(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Do(u,p,m){return typeof u=="string"?(u=encodeURI(u).replace(p,Ty),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ty(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var jh=/[#\/\?@]/g,Ay=/[#\?:]/g,Bh=/[#\?]/g,Sy=/[#\?@]/g,Uh=/#/g;function Rs(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Zr(u){u.g||(u.g=new Map,u.h=0,u.i&&Dy(u.i,function(p,m){u.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=Rs.prototype,t.add=function(u,p){Zr(this),this.i=null,u=To(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(p),this.h+=1,this};function $h(u,p){Zr(u),p=To(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function qh(u,p){return Zr(u),p=To(u,p),u.g.has(p)}t.forEach=function(u,p){Zr(this),this.g.forEach(function(m,_){m.forEach(function(R){u.call(p,R,_,this)},this)},this)},t.na=function(){Zr(this);let u=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let _=0;_<p.length;_++){let R=u[_];for(let L=0;L<R.length;L++)m.push(p[_])}return m},t.V=function(u){Zr(this);let p=[];if(typeof u=="string")qh(this,u)&&(p=p.concat(this.g.get(To(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)p=p.concat(u[m])}return p},t.set=function(u,p){return Zr(this),this.i=null,u=To(this,u),qh(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function zh(u,p,m){$h(u,p),0<m.length&&(u.i=null,u.g.set(To(u,p),k(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var _=p[m];let L=encodeURIComponent(String(_)),Z=this.V(_);for(_=0;_<Z.length;_++){var R=L;Z[_]!==""&&(R+="="+encodeURIComponent(String(Z[_]))),u.push(R)}}return this.i=u.join("&")};function To(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function My(u,p){p&&!u.j&&(Zr(u),u.i=null,u.g.forEach(function(m,_){var R=_.toLowerCase();_!=R&&($h(this,_),zh(this,R,m))},u)),u.j=p}function Hh(u,p){let m=new Eo;if(a.Image){let _=new Image;_.onload=b(Dr,m,"TestLoadImage: loaded",!0,p,_),_.onerror=b(Dr,m,"TestLoadImage: error",!1,p,_),_.onabort=b(Dr,m,"TestLoadImage: abort",!1,p,_),_.ontimeout=b(Dr,m,"TestLoadImage: timeout",!1,p,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else p(!1)}function xy(u,p){let m=new Eo,_=new AbortController,R=setTimeout(()=>{_.abort(),Dr(m,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:_.signal}).then(L=>{clearTimeout(R),L.ok?Dr(m,"TestPingServer: ok",!0,p):Dr(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(R),Dr(m,"TestPingServer: error",!1,p)})}function Dr(u,p,m,_,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),_(m)}catch{}}function Py(){this.g=new Qa}function Ry(u,p,m){let _=m||"";try{Vh(u,function(R,L){let Z=R;l(R)&&(Z=Ts(R)),p.push(_+L+"="+encodeURIComponent(Z))})}catch(R){throw p.push(_+"type="+encodeURIComponent("_badmap")),R}}function lr(u){this.l=u.Ub||null,this.j=u.eb||!1}A(lr,tl),lr.prototype.g=function(){return new Ns(this.l,this.j)},lr.prototype.i=function(u){return function(){return u}}({});function Ns(u,p){gt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Ns,gt),t=Ns.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fi(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gh(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gh(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Fi(this):Ao(this),this.readyState==3&&Gh(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Fi(this))},t.Qa=function(u){this.g&&(this.response=u,Fi(this))},t.ga=function(){this.g&&Fi(this)};function Fi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ao(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=p.next();return u.join(`\r
`)};function Ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wh(u){let p="";return se(u,function(m,_){p+=_,p+=":",p+=m,p+=`\r
`}),p}function ll(u,p,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Wh(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):tt(u,p,m))}function ht(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ht,gt);var Ny=/^https?$/i,ky=["POST","PUT"];t=ht.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ya.g(),this.v=this.o?ln(this.o):ln(Ya),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(L){Kh(this,L);return}if(u=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var R in _)m.set(R,_[R]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let L of _.keys())m.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),R=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ky,p,void 0))||_||R||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Z]of m)this.g.setRequestHeader(L,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dl(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Kh(this,L)}};function Kh(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Vi(u),ks(u)}function Vi(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),ht.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qh(this):this.bb())},t.bb=function(){Qh(this)};function Qh(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Tr(u)!=4||u.Z()!=2)){if(u.u&&Tr(u)==4)Ri(u.Ea,0,u);else if(mt(u,"readystatechange"),Tr(u)==4){u.h=!1;try{let Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var _;if(_=Z===0){var R=String(u.D).match(Lh)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),_=!Ny.test(R?R.toLowerCase():"")}m=_}if(m)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var L=2<Tr(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",Vi(u)}}finally{ks(u)}}}}function ks(u,p){if(u.g){dl(u);let m=u.g,_=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||mt(u,"ready");try{m.onreadystatechange=_}catch{}}}function dl(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Tr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),el(p)}};function Yh(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Oy(u){let p={};u=(u.g&&2<=Tr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(Y(u[_]))continue;var m=x(u[_]);let R=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=p[R]||[];p[R]=L,L.push(m)}T(p,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(u,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||p}function Zh(u){this.Aa=0,this.i=[],this.j=new Eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,u),this.cb=Os("retryDelaySeedMs",1e4,u),this.Wa=Os("forwardChannelMaxRetries",2,u),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Nh(u&&u.concurrentRequestLimit),this.Da=new Py,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zh.prototype,t.la=8,t.G=1,t.connect=function(u,p,m,_){je(0),this.W=u,this.H=p||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=nf(this,null,this.W),tc(this)};function hl(u){if(Li(u),u.G==3){var p=u.U++,m=In(u.I);if(tt(m,"SID",u.K),tt(m,"RID",p),tt(m,"TYPE","terminate"),Fs(u,m),p=new Qr(u,u.j,p),p.L=2,p.v=Ja(In(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=rf(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Xa(p)}tf(u)}function ec(u){u.g&&(ji(u),u.g.cancel(),u.g=null)}function Li(u){ec(u),u.u&&(a.clearTimeout(u.u),u.u=null),rc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function tc(u){if(!kh(u.h)&&!u.s){u.s=!0;var p=u.Ga;bs||wh(),Es||(bs(),Es=!0),qa.add(p,u),u.B=0}}function Fy(u,p){return Oh(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ni(w(u.Ga,u,p),pl(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let R=new Qr(this,this.j,u),L=this.o;if(this.S&&(L?(L=E(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(R.H=L,L=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(p+=_,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=Ar(this,R,p),m=In(this.I),tt(m,"RID",u),tt(m,"CVER",22),this.D&&tt(m,"X-HTTP-Session-Id",this.D),Fs(this,m),L&&(this.O?p="headers="+encodeURIComponent(String(Wh(L)))+"&"+p:this.m&&ll(m,this.m,L)),ul(this.h,R),this.Ua&&tt(m,"TYPE","init"),this.P?(tt(m,"$req",p),tt(m,"SID","null"),R.T=!0,il(R,m,null)):il(R,m,p),this.G=2}}else this.G==3&&(u?fl(this,u):this.i.length==0||kh(this.h)||fl(this))};function fl(u,p){var m;p?m=p.l:m=u.U++;let _=In(u.I);tt(_,"SID",u.K),tt(_,"RID",m),tt(_,"AID",u.T),Fs(u,_),u.m&&u.o&&ll(_,u.m,u.o),m=new Qr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Ar(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ul(u.h,m),il(m,_,p)}function Fs(u,p){u.H&&se(u.H,function(m,_){tt(p,_,m)}),u.l&&Vh({},function(m,_){tt(p,_,m)})}function Ar(u,p,m){m=Math.min(u.i.length,m);var _=u.l?w(u.l.Na,u.l,u):null;e:{var R=u.i;let L=-1;for(;;){let Z=["count="+m];L==-1?0<m?(L=R[0].g,Z.push("ofs="+L)):L=0:Z.push("ofs="+L);let We=!0;for(let qt=0;qt<m;qt++){let Oe=R[qt].g,zt=R[qt].map;if(Oe-=L,0>Oe)L=Math.max(0,R[qt].g-100),We=!1;else try{Ry(zt,Z,"req"+Oe+"_")}catch{_&&_(zt)}}if(We){_=Z.join("&");break e}}}return u=u.i.splice(0,m),p.D=u,_}function Xh(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;bs||wh(),Es||(bs(),Es=!0),qa.add(p,u),u.v=0}}function nc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ni(w(u.Fa,u),pl(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Jh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ni(w(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,je(10),ec(this),Jh(this))};function ji(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Jh(u){u.g=new Qr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=In(u.qa);tt(p,"RID","rpc"),tt(p,"SID",u.K),tt(p,"AID",u.T),tt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&tt(p,"TO",u.ja),tt(p,"TYPE","xmlhttp"),Fs(u,p),u.m&&u.o&&ll(p,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ja(In(p)),m.m=null,m.P=!0,xh(m,u)}t.Za=function(){this.C!=null&&(this.C=null,ec(this),nc(this),je(19))};function rc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function ef(u,p){var m=null;if(u.g==p){rc(u),ji(u),u.g=null;var _=2}else if(cl(u.h,p))m=p.D,Ye(u.h,p),_=1;else return;if(u.G!=0){if(p.o)if(_==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var R=u.B;_=Se(),mt(_,new $t(_,m)),tc(u)}else Xh(u);else if(R=p.s,R==3||R==0&&0<p.X||!(_==1&&Fy(u,p)||_==2&&nc(u)))switch(m&&0<m.length&&(p=u.h,p.i=p.i.concat(m)),R){case 1:Vn(u,5);break;case 4:Vn(u,10);break;case 3:Vn(u,6);break;default:Vn(u,2)}}}function pl(u,p){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*p}function Vn(u,p){if(u.j.info("Error code "+p),p==2){var m=w(u.fb,u),_=u.Xa;let R=!_;_=new Cr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xs(_,"https"),Ja(_),R?Hh(_.toString(),m):xy(_.toString(),m)}else je(2);u.G=0,u.l&&u.l.sa(p),tf(u),Li(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function tf(u){if(u.G=0,u.ka=[],u.l){let p=Fh(u.h);(p.length!=0||u.i.length!=0)&&(M(u.ka,p),M(u.ka,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.ra()}}function nf(u,p,m){var _=m instanceof Cr?In(m):new Cr(m);if(_.g!="")p&&(_.g=p+"."+_.g),Oi(_,_.s);else{var R=a.location;_=R.protocol,p=p?p+"."+R.hostname:R.hostname,R=+R.port;var L=new Cr(null);_&&xs(L,_),p&&(L.g=p),R&&Oi(L,R),m&&(L.l=m),_=L}return m=u.D,p=u.ya,m&&p&&tt(_,m,p),tt(_,"VER",u.la),Fs(u,_),_}function rf(u,p,m){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new ht(new lr({eb:m})):new ht(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function of(){}t=of.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ic(){}ic.prototype.g=function(u,p){return new Cn(u,p)};function Cn(u,p){gt.call(this),this.g=new Zh(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!Y(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!Y(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new So(this)}A(Cn,gt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){hl(this.g)},Cn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Ts(u),u=m);p.i.push(new al(p.Ya++,u)),p.G==3&&tc(p)},Cn.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,Cn.aa.N.call(this)};function sf(u){dn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let m in p){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}A(sf,dn);function af(){bo.call(this),this.status=1}A(af,bo);function So(u){this.g=u}A(So,of),So.prototype.ua=function(){mt(this.g,"a")},So.prototype.ta=function(u){mt(this.g,new sf(u))},So.prototype.sa=function(u){mt(this.g,new af)},So.prototype.ra=function(){mt(this.g,"b")},ic.prototype.createWebChannel=ic.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,P_=io.createWebChannelTransport=function(){return new ic},x_=io.getStatEventTarget=function(){return Se()},M_=io.Event=Wr,rg=io.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Co.NO_ERROR=0,Co.TIMEOUT=8,Co.HTTP_ERROR=6,Kl=io.ErrorCode=Co,Sh.COMPLETE="complete",S_=io.EventType=Sh,ur.EventType=As,As.OPEN="a",As.CLOSE="b",As.ERROR="c",As.MESSAGE="d",gt.prototype.listen=gt.prototype.K,zc=io.WebChannel=ur,A_=io.FetchXmlHttpFactory=lr,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,T_=io.XhrIo=ht}).apply(typeof ng<"u"?ng:typeof self<"u"?self:typeof window<"u"?window:{});var hM="@firebase/firestore";var Lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");var bu="10.12.1";var Zo=new mf("@firebase/firestore");function Qc(){return Zo.logLevel}function kb(t){Zo.setLogLevel(t)}function W(t,...e){if(Zo.logLevel<=ei.DEBUG){let n=e.map(Ob);Zo.debug(`Firestore (${bu}): ${t}`,...n)}}function Nt(t,...e){if(Zo.logLevel<=ei.ERROR){let n=e.map(Ob);Zo.error(`Firestore (${bu}): ${t}`,...n)}}function wr(t,...e){if(Zo.logLevel<=ei.WARN){let n=e.map(Ob);Zo.warn(`Firestore (${bu}): ${t}`,...n)}}function Ob(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function oe(t="Unexpected state"){let e=`FIRESTORE (${bu}) INTERNAL ASSERTION FAILED: `+t;throw Nt(e),new Error(e)}function de(t,e){t||oe()}function hx(t,e){t||oe()}function te(t,e){return t}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends gf{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var jt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var pg=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},F_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}},V_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},L_=class{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new jt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new jt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>O(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new jt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new pg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new Lt(e)}},j_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},B_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new j_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},U_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new U_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function DU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var gg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=DU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function be(t,e){return t<e?-1:t>e?1:0}function iu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function fx(t){return t+"\0"}var bt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var he=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new bt(0,0))}static max(){return new t(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var mg=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ue=class t extends mg{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},TU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kt=class t extends mg{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return TU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var J=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ue.fromString(e))}static fromName(e){return new t(Ue.fromString(e).popFirst(5))}static empty(){return new t(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ue(e.slice()))}};var ou=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function q_(t){return t.fields.find(e=>e.kind===2)}function da(t){return t.fields.filter(e=>e.kind!==2)}ou.UNKNOWN_ID=-1;var tu=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var sd=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,_r.min())}};function px(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new _r(i,J.empty(),e)}function gx(t){return new _r(t.readTime,t.key,-1)}var _r=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(he.min(),J.empty(),-1)}static max(){return new t(he.max(),J.empty(),-1)}};function Fb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}var mx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function as(t){return O(this,null,function*(){if(t.code!==j.FAILED_PRECONDITION||t.message!==mx)throw t;W("LocalStore","Unexpectedly lost primary lease")})}var V=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var vg=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new jt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ya(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Vb(r.target.error);this.V.reject(new ya(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new ya(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new H_(n)}},Xo=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(ml())===12.2&&Nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),ha(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pf())return!1;if(t.C())return!0;let e=ml(),n=t.S(e),r=0<n&&n<10,i=yx(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return O(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new ya(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new H(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new H(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ya(e,s))},i.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return O(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=vg.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),V.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(W("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function yx(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var z_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ha(this.B.delete())}},ya=class extends H{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function cs(t){return t.name==="IndexedDbTransactionError"}var H_=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ha(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),ha(this.store.add(e))}get(e){return ha(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),ha(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),ha(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new V((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new V((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){W("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new V((r,i)=>{n.onerror=o=>{let s=Vb(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new V((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new z_(a),l=n(a.primaryKey,a.value,c);if(l instanceof V){let h=l.catch(g=>(c.done(),V.reject(g)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ha(t){return new V((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Vb(r.target.error);n(i)}})}var fM=!1;function Vb(t){let e=Xo.S(ml());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fM||(fM=!0,setTimeout(()=>{throw r},0)),r}}return t}var G_=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>O(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){cs(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield as(n)}yield this.X(6e4)}))}},W_=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return O(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return V.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return W("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=gx(o);Fb(s,r)>0&&(r=s)}),new _r(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var rr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Sd(t){return t==null}function ad(t){return t===0&&1/t==-1/0}function vx(t){return typeof t=="number"&&Number.isInteger(t)&&!ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function xn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pM(e)),e=AU(t.get(n),e);return pM(e)}function AU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function pM(t){return t+""}function ui(t){let e=t.length;if(de(e>=2),e===2)return de(t.charAt(0)===""&&t.charAt(1)===""),Ue.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&oe(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:oe()}o=s+2}return new Ue(r)}var gM=["userId","batchId"];function cg(t,e){return[t,xn(e)]}function wx(t,e,n){return[t,xn(e),n]}var SU={},MU=["prefixPath","collectionGroup","readTime","documentId"],xU=["prefixPath","collectionGroup","documentId"],PU=["collectionGroup","readTime","prefixPath","documentId"],RU=["canonicalId","targetId"],NU=["targetId","path"],kU=["path","targetId"],OU=["collectionId","parent"],FU=["indexId","uid"],VU=["uid","sequenceNumber"],LU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jU=["indexId","uid","orderedDocumentKey"],BU=["userId","collectionPath","documentId"],UU=["userId","collectionPath","largestBatchId"],$U=["userId","collectionGroup","largestBatchId"],_x=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qU=[..._x,"documentOverlays"],bx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ex=bx,Ix=[...Ex,"indexConfiguration","indexState","indexEntries"],zU=Ix;var cd=class extends yg{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function tn(t,e){let n=te(t);return Xo.F(n._e,e)}function mM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ma(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var lt=class t{constructor(e,n){this.comparator=e,this.root=n||di.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,di.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,di.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}},eu=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},di=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();let e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}};di.EMPTY=null,di.RED=!0,di.BLACK=!1;di.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,o){return this}insert(e,n,r){return new di(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var st=class t{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(e){return new wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},wg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Hc(t){return t.hasNext()?t.getNext():void 0}var ir=class t{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new t([])}unionWith(e){let n=new st(kt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return iu(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var _g=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Dx(){return typeof atob<"u"}var en=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _g("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};en.EMPTY_BYTE_STRING=new en("");var HU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(t){if(de(!!t),typeof t=="string"){let e=0,n=HU.exec(t);if(de(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jo(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}function lm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Lb(t){let e=t.mapValue.fields.__previous_value__;return lm(e)?Lb(e):e}function ud(t){let e=ao(t.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}var K_=class{constructor(e,n,r,i,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},es=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ug={nullValue:"NULL_VALUE"};function va(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lm(t)?4:Tx(t)?9007199254740991:10:oe()}function pi(t,e){if(t===e)return!0;let n=va(t);if(n!==va(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ud(t).isEqual(ud(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ao(i.timestampValue),a=ao(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Jo(i.bytesValue).isEqual(Jo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Tt(i.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Tt(i.integerValue)===Tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Tt(i.doubleValue),a=Tt(o.doubleValue);return s===a?ad(s)===ad(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return iu(t.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(mM(s)!==mM(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!pi(s[c],a[c])))return!1;return!0}(t,e);default:return oe()}}function ld(t,e){return(t.values||[]).find(n=>pi(n,e))!==void 0}function ts(t,e){if(t===e)return 0;let n=va(t),r=va(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Tt(o.integerValue||o.doubleValue),c=Tt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return yM(t.timestampValue,e.timestampValue);case 4:return yM(ud(t),ud(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Jo(o),c=Jo(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=be(a[l],c[l]);if(h!==0)return h}return be(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=be(Tt(o.latitude),Tt(s.latitude));return a!==0?a:be(Tt(o.longitude),Tt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let h=ts(a[l],c[l]);if(h)return h}return be(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Qo.mapValue&&s===Qo.mapValue)return 0;if(o===Qo.mapValue)return 1;if(s===Qo.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let w=be(c[g],h[g]);if(w!==0)return w;let b=ts(a[c[g]],l[h[g]]);if(b!==0)return b}return be(c.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function yM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);let n=ao(t),r=ao(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function su(t){return Q_(t)}function Q_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ao(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Q_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Q_(n.fields[s])}`;return i+"}"}(t.mapValue):oe()}function wa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Y_(t){return!!t&&"integerValue"in t}function dd(t){return!!t&&"arrayValue"in t}function vM(t){return!!t&&"nullValue"in t}function wM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lg(t){return!!t&&"mapValue"in t}function td(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ma(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=td(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=td(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Tx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function GU(t){return"nullValue"in t?ug:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?wa(es.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:oe()}function WU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?wa(es.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Qo:oe()}function _M(t,e){let n=ts(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function bM(t,e){let n=ts(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var yn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=td(n)}setAll(e){let n=kt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=td(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());lg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ma(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(td(this.value))}};function Ax(t){let e=[];return Ma(t.fields,(n,r)=>{let i=new kt([n]);if(lg(r)){let o=Ax(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new ir(e)}var Bt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,he.min(),he.min(),he.min(),yn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,he.min(),he.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,he.min(),he.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gi=class{constructor(e,n){this.position=e,this.inclusive=n}};function EM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=J.comparator(J.fromName(s.referenceValue),n.key):r=ts(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function IM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pi(t.position[n],e.position[n]))return!1;return!0}var _a=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function KU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var bg=class{},Le=class t extends bg{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new J_(e,n,r):n==="array-contains"?new n0(e,r):n==="in"?new Eg(e,r):n==="not-in"?new r0(e,r):n==="array-contains-any"?new i0(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new e0(e,r):new t0(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ts(n,this.value)):n!==null&&va(this.value)===va(n)&&this.matchesComparison(ts(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ze=class t extends bg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return au(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function au(t){return t.op==="and"}function Z_(t){return t.op==="or"}function jb(t){return Sx(t)&&au(t)}function Sx(t){for(let e of t.filters)if(e instanceof Ze)return!1;return!0}function X_(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+su(t.value);if(jb(t))return t.filters.map(e=>X_(e)).join(",");{let e=t.filters.map(n=>X_(n)).join(",");return`${t.op}(${e})`}}function Mx(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&pi(r.value,i.value)}(t,e):t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Mx(s,i.filters[a]),!0):!1}(t,e):void oe()}function xx(t,e){let n=t.filters.concat(e);return Ze.create(n,t.op)}function Px(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${su(n.value)}`}(t):t instanceof Ze?function(n){return n.op.toString()+" {"+n.getFilters().map(Px).join(" ,")+"}"}(t):"Filter"}var J_=class extends Le{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){let n=J.comparator(e.key,this.key);return this.matchesComparison(n)}},e0=class extends Le{constructor(e,n){super(e,"in",n),this.keys=Rx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},t0=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=Rx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Rx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}var n0=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return dd(n)&&ld(n.arrayValue,this.value)}},Eg=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ld(this.value.arrayValue,n)}},r0=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ld(this.value.arrayValue,n)}},i0=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!dd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ld(this.value.arrayValue,r))}};var o0=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function s0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new o0(t,e,n,r,i,o,s)}function ba(t){let e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>X_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>su(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>su(r)).join(",")),e.ue=n}return e.ue}function Md(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IM(t.startAt,e.startAt)&&IM(t.endAt,e.endAt)}function Ig(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Cg(t,e){return t.filters.filter(n=>n instanceof Le&&n.field.isEqual(e))}function CM(t,e,n){let r=ug,i=!0;for(let o of Cg(t,e)){let s=ug,a=!0;switch(o.op){case"<":case"<=":s=GU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ug}_M({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];_M({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function DM(t,e,n){let r=Qo,i=!0;for(let o of Cg(t,e)){let s=Qo,a=!0;switch(o.op){case">=":case">":s=WU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Qo}bM({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];bM({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var jr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Nx(t,e,n,r,i,o,s,a){return new jr(t,e,n,r,i,o,s,a)}function Eu(t){return new jr(t)}function TM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Bb(t){return t.collectionGroup!==null}function nu(t){let e=te(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new st(kt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new _a(o,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new _a(kt.keyField(),r))}return e.ce}function Pn(t){let e=te(t);return e.le||(e.le=QU(e,nu(t))),e.le}function QU(t,e){if(t.limitType==="F")return s0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new _a(i.field,o)});let n=t.endAt?new gi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gi(t.startAt.position,t.startAt.inclusive):null;return s0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function a0(t,e){let n=t.filters.concat([e]);return new jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dg(t,e,n){return new jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xd(t,e){return Md(Pn(t),Pn(e))&&t.limitType===e.limitType}function kx(t){return`${ba(Pn(t))}|lt:${t.limitType}`}function Yc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Px(i)).join(", ")}]`),Sd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>su(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>su(i)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function Pd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):J.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of nu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=EM(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,nu(r),i)||r.endAt&&!function(s,a,c){let l=EM(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,nu(r),i))}(t,e)}function Ox(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fx(t){return(e,n)=>{let r=!1;for(let i of nu(t)){let o=YU(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function YU(t,e,n){let r=t.field.isKeyField()?J.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?ts(c,l):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}var mi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Cx(this.inner)}size(){return this.innerSize}};var ZU=new lt(J.comparator);function Qn(){return ZU}var Vx=new lt(J.comparator);function Jl(...t){let e=Vx;for(let n of t)e=e.insert(n.key,n);return e}function Lx(t){let e=Vx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function li(){return nd()}function jx(){return nd()}function nd(){return new mi(t=>t.toString(),(t,e)=>t.isEqual(e))}var XU=new lt(J.comparator),JU=new st(J.comparator);function De(...t){let e=JU;for(let n of t)e=e.add(n);return e}var e$=new st(be);function Ub(){return e$}function Bx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function Ux(t){return{integerValue:""+t}}function $x(t,e){return vx(e)?Ux(e):Bx(t,e)}var cu=class{constructor(){this._=void 0}};function t$(t,e,n){return t instanceof ns?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lm(o)&&(o=Lb(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof co?zx(t,e):t instanceof uo?Hx(t,e):function(i,o){let s=qx(i,o),a=AM(s)+AM(i.Pe);return Y_(s)&&Y_(i.Pe)?Ux(a):Bx(i.serializer,a)}(t,e)}function n$(t,e,n){return t instanceof co?zx(t,e):t instanceof uo?Hx(t,e):n}function qx(t,e){return t instanceof rs?function(r){return Y_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ns=class extends cu{},co=class extends cu{constructor(e){super(),this.elements=e}};function zx(t,e){let n=Gx(e);for(let r of t.elements)n.some(i=>pi(i,r))||n.push(r);return{arrayValue:{values:n}}}var uo=class extends cu{constructor(e){super(),this.elements=e}};function Hx(t,e){let n=Gx(e);for(let r of t.elements)n=n.filter(i=>!pi(i,r));return{arrayValue:{values:n}}}var rs=class extends cu{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function AM(t){return Tt(t.integerValue||t.doubleValue)}function Gx(t){return dd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ea=class{constructor(e,n){this.field=e,this.transform=n}};function r$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof co&&i instanceof co||r instanceof uo&&i instanceof uo?iu(r.elements,i.elements,pi):r instanceof rs&&i instanceof rs?pi(r.Pe,i.Pe):r instanceof ns&&i instanceof ns}(t.transform,e.transform)}var c0=class{constructor(e,n){this.version=e,this.transformResults=n}},At=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var uu=class{};function Wx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new os(t.key,At.none()):new is(t.key,t.data,At.none());{let n=t.data,r=yn.empty(),i=new st(kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Br(t.key,r,new ir(i.toArray()),At.none())}}function i$(t,e,n){t instanceof is?function(i,o,s){let a=i.value.clone(),c=MM(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Br?function(i,o,s){if(!dg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=MM(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Kx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function rd(t,e,n,r){return t instanceof is?function(o,s,a,c){if(!dg(o.precondition,s))return a;let l=o.value.clone(),h=xM(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Br?function(o,s,a,c){if(!dg(o.precondition,s))return a;let l=xM(o.fieldTransforms,c,s),h=s.data;return h.setAll(Kx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(o,s,a){return dg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function o$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=qx(r.transform,i||null);o!=null&&(n===null&&(n=yn.empty()),n.set(r.field,o))}return n||null}function SM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&iu(r,i,(o,s)=>r$(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var is=class extends uu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Br=class extends uu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Kx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function MM(t,e,n){let r=new Map;de(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,n$(s,a,n[i]))}return r}function xM(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,t$(o,s,e))}return r}var os=class extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hd=class extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fd=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&i$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=rd(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=rd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=jx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=Wx(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),De())}isEqual(e){return this.batchId===e.batchId&&iu(this.mutations,e.mutations,(n,r)=>SM(n,r))&&iu(this.baseMutations,e.baseMutations,(n,r)=>SM(n,r))}},u0=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length);let i=function(){return XU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var pd=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var l0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ft,Be;function Qx(t){switch(t){default:return oe();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function Yx(t){if(t===void 0)return Nt("GRPC error has no .code"),j.UNKNOWN;switch(t){case Ft.OK:return j.OK;case Ft.CANCELLED:return j.CANCELLED;case Ft.UNKNOWN:return j.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return j.INTERNAL;case Ft.UNAVAILABLE:return j.UNAVAILABLE;case Ft.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ft.NOT_FOUND:return j.NOT_FOUND;case Ft.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ft.ABORTED:return j.ABORTED;case Ft.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ft.DATA_LOSS:return j.DATA_LOSS;default:return oe()}}(Be=Ft||(Ft={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";var PM=null;function Zx(){return new TextEncoder}var s$=new zo([4294967295,4294967295],0);function RM(t){let e=Zx().encode(t),n=new D_;return n.update(e),new Uint8Array(n.digest())}function NM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zo([n,r],0),new zo([i,o],0)]}var d0=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ma(`Invalid padding: ${n}`);if(r<0)throw new ma(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ma(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ma(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(zo.fromNumber(r)));return i.compare(s$)===1&&(i=new zo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=RM(e),[r,i]=NM(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=RM(e),[r,i]=NM(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ma=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(he.min(),i,new lt(be),Qn(),De())}},md=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,De(),De(),De())}};var ru=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Tg=class{constructor(e,n){this.targetId=e,this.me=n}},Ag=class{constructor(e,n,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Sg=class{constructor(){this.fe=0,this.ge=OM(),this.pe=en.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=De(),n=De(),r=De();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new md(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=OM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},h0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qn(),this.qe=kM(),this.Qe=new lt(be)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(Ig(o))if(r===0){let s=new J(o.path);this.Ue(n,s,Bt.newNoDocument(s,he.min()))}else de(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}PM?.et(function(h,g,w,b,A){var k,M,U,Y,q,Q;let ue={localCacheCount:h,existenceFilterCount:g.count,databaseId:w.database,projectId:w.projectId},se=g.unchangedNames;return se&&(ue.bloomFilter={applied:A===0,hashCount:(k=se?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(Y=(U=(M=se?.bits)===null||M===void 0?void 0:M.bitmap)===null||U===void 0?void 0:U.length)!==null&&Y!==void 0?Y:0,padding:(Q=(q=se?.bits)===null||q===void 0?void 0:q.padding)!==null&&Q!==void 0?Q:0,mightContain:T=>{var E;return(E=b?.mightContain(T))!==null&&E!==void 0&&E}}),ue}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Jo(r).toUint8Array()}catch(c){if(c instanceof _g)return wr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new d0(s,i,o)}catch(c){return wr(c instanceof ma?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Ig(a.target)){let c=new J(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Bt.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=De();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new gd(e,n,this.Qe,this.ke,r);return this.ke=Qn(),this.qe=kM(),this.Qe=new lt(be),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Sg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new st(be),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function kM(){return new lt(J.comparator)}function OM(){return new lt(J.comparator)}var a$={asc:"ASCENDING",desc:"DESCENDING"},c$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u$={and:"AND",or:"OR"},f0=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function p0(t,e){return t.useProto3Json||Sd(e)?e:{value:e}}function lu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function l$(t,e){return lu(t,e.toTimestamp())}function Ot(t){return de(!!t),he.fromTimestamp(function(n){let r=ao(n);return new bt(r.seconds,r.nanos)}(t))}function $b(t,e){return g0(t,e).canonicalString()}function g0(t,e){let n=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Jx(t){let e=Ue.fromString(t);return de(uP(e)),e}function yd(t,e){return $b(t.databaseId,e.path)}function hi(t,e){let n=Jx(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(nP(n))}function eP(t,e){return $b(t.databaseId,e)}function tP(t){let e=Jx(t);return e.length===4?Ue.emptyPath():nP(e)}function m0(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nP(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function FM(t,e,n){return{name:yd(t,e),fields:n.value.mapValue.fields}}function rP(t,e,n){let r=hi(t,e.name),i=Ot(e.updateTime),o=e.createTime?Ot(e.createTime):he.min(),s=new yn({mapValue:{fields:e.fields}}),a=Bt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function d$(t,e){return"found"in e?function(r,i){de(!!i.found),i.found.name,i.found.updateTime;let o=hi(r,i.found.name),s=Ot(i.found.updateTime),a=i.found.createTime?Ot(i.found.createTime):he.min(),c=new yn({mapValue:{fields:i.found.fields}});return Bt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){de(!!i.missing),de(!!i.readTime);let o=hi(r,i.missing),s=Ot(i.readTime);return Bt.newNoDocument(o,s)}(t,e):oe()}function h$(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(de(h===void 0||typeof h=="string"),en.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array),en.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?j.UNKNOWN:Yx(l.code);return new H(h,l.message||"")}(s);n=new Ag(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hi(t,r.document.name),o=Ot(r.document.updateTime),s=r.document.createTime?Ot(r.document.createTime):he.min(),a=new yn({mapValue:{fields:r.document.fields}}),c=Bt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ru(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hi(t,r.document),o=r.readTime?Ot(r.readTime):he.min(),s=Bt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ru([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hi(t,r.document),o=r.removedTargetIds||[];n=new ru([],o,i,null)}else{if(!("filter"in e))return oe();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new l0(i,o),a=r.targetId;n=new Tg(a,s)}}return n}function vd(t,e){let n;if(e instanceof is)n={update:FM(t,e.key,e.value)};else if(e instanceof os)n={delete:yd(t,e.key)};else if(e instanceof Br)n={update:FM(t,e.key,e.data),updateMask:v$(e.fieldMask)};else{if(!(e instanceof hd))return oe();n={verify:yd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ns)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof co)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof uo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rs)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:l$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe()}(t,e.precondition)),n}function y0(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?At.updateTime(Ot(o.updateTime)):o.exists!==void 0?At.exists(o.exists):At.none()}(e.currentDocument):At.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)de(a.setToServerValue==="REQUEST_TIME"),c=new ns;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new co(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new uo(h)}else"increment"in a?c=new rs(s,a.increment):oe();let l=kt.fromServerFormat(a.fieldPath);return new Ea(l,c)}(t,i)):[];if(e.update){e.update.name;let i=hi(t,e.update.name),o=new yn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new ir(l.map(h=>kt.fromServerFormat(h)))}(e.updateMask);return new Br(i,o,s,n,r)}return new is(i,o,n,r)}if(e.delete){let i=hi(t,e.delete);return new os(i,n)}if(e.verify){let i=hi(t,e.verify);return new hd(i,n)}return oe()}function f$(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ot(i.updateTime):Ot(o);return s.isEqual(he.min())&&(s=Ot(o)),new c0(s,i.transformResults||[])}(n,e))):[]}function iP(t,e){return{documents:[eP(t,e.path)]}}function oP(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eP(t,i);let o=function(l){if(l.length!==0)return cP(Ze.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(w){return{field:Zc(w.field),direction:g$(w.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=p0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function sP(t){let e=tP(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){de(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(g){let w=aP(g);return w instanceof Ze&&jb(w)?w.getFilters():[w]}(n.where));let s=[];n.orderBy&&(s=function(g){return g.map(w=>function(A){return new _a(Xc(A.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(w))}(n.orderBy));let a=null;n.limit&&(a=function(g){let w;return w=typeof g=="object"?g.value:g,Sd(w)?null:w}(n.limit));let c=null;n.startAt&&(c=function(g){let w=!!g.before,b=g.values||[];return new gi(b,w)}(n.startAt));let l=null;return n.endAt&&(l=function(g){let w=!g.before,b=g.values||[];return new gi(b,w)}(n.endAt)),Nx(e,i,s,o,a,"F",c,l)}function p$(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Xc(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xc(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Xc(n.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Xc(n.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Xc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ze.create(n.compositeFilter.filters.map(r=>aP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function g$(t){return a$[t]}function m$(t){return c$[t]}function y$(t){return u$[t]}function Zc(t){return{fieldPath:t.canonicalString()}}function Xc(t){return kt.fromServerFormat(t.fieldPath)}function cP(t){return t instanceof Le?function(n){if(n.op==="=="){if(wM(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NAN"}};if(vM(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wM(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NAN"}};if(vM(n.value))return{unaryFilter:{field:Zc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zc(n.field),op:m$(n.op),value:n.value}}}(t):t instanceof Ze?function(n){let r=n.getFilters().map(i=>cP(i));return r.length===1?r[0]:{compositeFilter:{op:y$(n.op),filters:r}}}(t):oe()}function v$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var du=class t{constructor(e,n,r,i,o=he.min(),s=he.min(),a=en.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Mg=class{constructor(e){this.ct=e}};function w$(t,e){let n;if(e.document)n=rP(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=J.fromSegments(e.noDocument.path),i=Ca(e.noDocument.readTime);n=Bt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return oe();{let r=J.fromSegments(e.unknownDocument.path),i=Ca(e.unknownDocument.version);n=Bt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new bt(i[0],i[1]);return he.fromTimestamp(o)}(e.readTime)),n}function VM(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:yd(o,s.key),fields:s.data.value.mapValue.fields,updateTime:lu(o,s.version.toTimestamp()),createTime:lu(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ia(e.version)};else{if(!e.isUnknownDocument())return oe();r.unknownDocument={path:n.path.toArray(),version:Ia(e.version)}}return r}function xg(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ia(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ca(t){let e=new bt(t.seconds,t.nanoseconds);return he.fromTimestamp(e)}function fa(t,e){let n=(e.baseMutations||[]).map(o=>y0(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>y0(t.ct,o)),i=bt.fromMillis(e.localWriteTimeMs);return new fd(e.batchId,i,n,r)}function ed(t){let e=Ca(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ca(t.lastLimboFreeSnapshotVersion):he.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return de(o.documents.length===1),Pn(Eu(tP(o.documents[0])))}(t.query):function(o){return Pn(sP(o))}(t.query),new du(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,en.fromBase64String(t.resumeToken))}function lP(t,e){let n=Ia(e.snapshotVersion),r=Ia(e.lastLimboFreeSnapshotVersion),i;i=Ig(e.target)?iP(t.ct,e.target):oP(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ba(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qb(t){let e=sP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dg(e,e.limit,"L"):e}function R_(t,e){return new pd(e.largestBatchId,y0(t.ct,e.overlayMutation))}function LM(t,e){let n=e.path.lastSegment();return[t,xn(e.path.popLast()),n]}function jM(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ia(r.readTime),documentKey:xn(r.documentKey.path),largestBatchId:r.largestBatchId}}var v0=class{getBundleMetadata(e,n){return BM(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ca(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return BM(e).put(function(i){return{bundleId:i.id,createTime:Ia(Ot(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return UM(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:qb(o.bundledQuery),readTime:Ca(o.readTime)}}(r)})}saveNamedQuery(e,n){return UM(e).put(function(i){return{name:i.name,readTime:Ia(Ot(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function BM(t){return tn(t,"bundles")}function UM(t){return tn(t,"namedQueries")}var Pg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Ql(e).get(LM(this.userId,n)).next(r=>r?R_(this.serializer,r):null)}getOverlays(e,n){let r=li();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new pd(n,s);i.push(this.ht(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(xn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ql(e).j("collectionPathOverlayIndex",a))}),V.waitFor(o)}getOverlaysForCollection(e,n,r){let i=li(),o=xn(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ql(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=R_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=li(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ql(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let g=R_(this.serializer,l);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Ql(e).put(function(i,o,s){let[a,c,l]=LM(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:vd(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Ql(t){return tn(t,"documentOverlays")}var oo=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Tt(e.integerValue));else if("doubleValue"in e){let r=Tt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ad(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=ao(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Jo(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Tx(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):oe()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),J.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};oo.bt=new oo;function _$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function $M(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=_$(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var w0=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=$M(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=$M(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},_0=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},b0=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},pa=class{constructor(){this.Gt=new w0,this.zt=new _0(this.Gt),this.jt=new b0(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var ga=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Ho(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=qM(t.arrayValue,e.arrayValue),n!==0?n:(n=qM(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function qM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Rg=class{constructor(e){this.Yt=new st((n,r)=>kt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(de(e.collectionGroup===this.collectionId),this.en)return!1;let n=q_(e);if(n!==void 0&&!this.nn(n))return!1;let r=da(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new st(kt.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new tu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new tu(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new tu(r.field,r.dir==="asc"?0:1)));return new ou(ou.UNKNOWN_ID,this.collectionId,n,sd.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function dP(t){var e,n;if(de(t instanceof Le||t instanceof Ze),t instanceof Le){if(t instanceof Eg){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Le.create(t.field,"==",o)))||[];return Ze.create(i,"or")}return t}let r=t.filters.map(i=>dP(i));return Ze.create(r,t.op)}function b$(t){if(t.getFilters().length===0)return[];let e=C0(dP(t));return de(hP(e)),E0(e)||I0(e)?[e]:e.getFilters()}function E0(t){return t instanceof Le}function I0(t){return t instanceof Ze&&jb(t)}function hP(t){return E0(t)||I0(t)||function(n){if(n instanceof Ze&&Z_(n)){for(let r of n.getFilters())if(!E0(r)&&!I0(r))return!1;return!0}return!1}(t)}function C0(t){if(de(t instanceof Le||t instanceof Ze),t instanceof Le)return t;if(t.filters.length===1)return C0(t.filters[0]);let e=t.filters.map(r=>C0(r)),n=Ze.create(e,t.op);return n=Ng(n),hP(n)?n:(de(n instanceof Ze),de(au(n)),de(n.filters.length>1),n.filters.reduce((r,i)=>zb(r,i)))}function zb(t,e){let n;return de(t instanceof Le||t instanceof Ze),de(e instanceof Le||e instanceof Ze),n=t instanceof Le?e instanceof Le?function(i,o){return Ze.create([i,o],"and")}(t,e):zM(t,e):e instanceof Le?zM(e,t):function(i,o){if(de(i.filters.length>0&&o.filters.length>0),au(i)&&au(o))return xx(i,o.getFilters());let s=Z_(i)?i:o,a=Z_(i)?o:i,c=s.filters.map(l=>zb(l,a));return Ze.create(c,"or")}(t,e),Ng(n)}function zM(t,e){if(au(e))return xx(e,t.getFilters());{let n=e.filters.map(r=>zb(t,r));return Ze.create(n,"or")}}function Ng(t){if(de(t instanceof Le||t instanceof Ze),t instanceof Le)return t;let e=t.getFilters();if(e.length===1)return Ng(e[0]);if(Sx(t))return t;let n=e.map(i=>Ng(i)),r=[];return n.forEach(i=>{i instanceof Le?r.push(i):i instanceof Ze&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ze.create(r,t.op)}var D0=class{constructor(){this._n=new wd}addToCollectionParentIndex(e,n){return this._n.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(_r.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}},wd=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new st(Ue.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(Ue.comparator)).toArray()}};var ig=new Uint8Array(0),T0=class{constructor(e,n){this.databaseId=n,this.an=new wd,this.un=new mi(r=>ba(r),(r,i)=>Md(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:xn(i)};return HM(e).put(o)}return V.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[fx(n),""],!1,!0);return HM(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(ui(s.parent))}return r})}addFieldIndex(e,n){let r=Yl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=Wc(e);return o.next(a=>{s.put(jM(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Yl(e),i=Wc(e),o=Gc(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Yl(e),r=Gc(e),i=Wc(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return V.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Rg(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Gc(e),i=!0,o=new Map;return V.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=De(),a=[];return V.forEach(o,(c,l)=>{W("IndexedDbIndexManager",`Using index ${function(q){return`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(c)} to execute ${ba(n)}`);let h=function(q,Q){let ue=q_(Q);if(ue===void 0)return null;for(let se of Cg(q,ue.fieldPath))switch(se.op){case"array-contains-any":return se.value.arrayValue.values||[];case"array-contains":return[se.value]}return null}(l,c),g=function(q,Q){let ue=new Map;for(let se of da(Q))for(let T of Cg(q,se.fieldPath))switch(T.op){case"==":case"in":ue.set(se.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return ue.set(se.fieldPath.canonicalString(),T.value),Array.from(ue.values())}return null}(l,c),w=function(q,Q){let ue=[],se=!0;for(let T of da(Q)){let E=T.kind===0?CM(q,T.fieldPath,q.startAt):DM(q,T.fieldPath,q.startAt);ue.push(E.value),se&&(se=E.inclusive)}return new gi(ue,se)}(l,c),b=function(q,Q){let ue=[],se=!0;for(let T of da(Q)){let E=T.kind===0?DM(q,T.fieldPath,q.endAt):CM(q,T.fieldPath,q.endAt);ue.push(E.value),se&&(se=E.inclusive)}return new gi(ue,se)}(l,c),A=this.hn(c,l,w),k=this.hn(c,l,b),M=this.Pn(c,l,g),U=this.In(c.indexId,h,A,w.inclusive,k,b.inclusive,M);return V.forEach(U,Y=>r.G(Y,n.limit).next(q=>{q.forEach(Q=>{let ue=J.fromSegments(Q.documentKey);s.has(ue)||(s=s.add(ue),a.push(ue))})}))}).next(()=>a)}return V.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=b$(Ze.create(e.filters,"and")).map(r=>s0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),l=c/(n!=null?n.length:1),h=[];for(let g=0;g<c;++g){let w=n?this.Tn(n[g/l]):ig,b=this.En(e,w,r[g%l],i),A=this.dn(e,w,o[g%l],s),k=a.map(M=>this.En(e,w,M,!0));h.push(...this.createRange(b,A,k))}return h}En(e,n,r,i){let o=new ga(e,J.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new ga(e,J.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new Rg(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return V.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new st(kt.comparator),h=!1;for(let g of c.filters)for(let w of g.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?h=!0:l=l.add(w.field));for(let g of c.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new pa;for(let i of da(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);oo.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new pa;return oo.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new pa;return oo.bt.Pt(wa(this.databaseId,n),r.Ht(function(o){let s=da(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new pa);let o=0;for(let s of da(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&dd(a))i=this.mn(i,s,a);else{let l=c.Ht(s.kind);oo.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new pa;c.seed(a.Wt()),oo.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Le&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Yl(e),i=Wc(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return V.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,g){let w=g?new sd(g.sequenceNumber,new _r(Ca(g.readTime),new J(ui(g.documentKey)),g.largestBatchId)):sd.empty(),b=h.fields.map(([A,k])=>new tu(kt.fromServerFormat(A),k));return new ou(h.indexId,h.collectionGroup,b,w)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:be(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Yl(e),o=Wc(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,c=>o.put(jM(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return V.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?V.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,c=>this.pn(e,i,c).next(l=>{let h=this.yn(o,c);return l.isEqual(h)?V.resolve():this.wn(e,o,c,l,h)}))))})}Sn(e,n,r,i){return Gc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Gc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Gc(e),o=new st(Ho);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new ga(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new st(Ho),i=this.An(n,e);if(i==null)return r;let o=q_(n);if(o!=null){let s=e.data.field(o.fieldPath);if(dd(s))for(let a of s.arrayValue.values||[])r=r.add(new ga(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new ga(n.indexId,e.key,ig,i));return r}wn(e,n,r,i,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,h,g,w){let b=c.getIterator(),A=l.getIterator(),k=Hc(b),M=Hc(A);for(;k||M;){let U=!1,Y=!1;if(k&&M){let q=h(k,M);q<0?Y=!0:q>0&&(U=!0)}else k!=null?Y=!0:U=!0;U?(g(M),M=Hc(A)):Y?(w(k),k=Hc(b)):(k=Hc(b),M=Hc(A))}}(i,o,Ho,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),V.waitFor(s)}gn(e){let n=1;return Wc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Ho(s,a)).filter((s,a,c)=>!a||Ho(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ho(s,e),c=Ho(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,ig,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,ig,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return Ho(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(GM)}getMinOffset(e,n){return V.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||oe())).next(GM)}};function HM(t){return tn(t,"collectionParents")}function Gc(t){return tn(t,"indexEntries")}function Yl(t){return tn(t,"indexConfiguration")}function Wc(t){return tn(t,"indexState")}function GM(t){de(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Fb(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _r(e.readTime,e.documentKey,n)}var WM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function fP(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:s},(h,g,w)=>(a++,w.delete()));o.push(c.next(()=>{de(a===1)}));let l=[];for(let h of n.mutations){let g=wx(e,h.key.path,n.batchId);o.push(i.delete(g)),l.push(h.key)}return V.waitFor(o).next(()=>l)}function kg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw oe();e=t.noDocument}return JSON.stringify(e).length}vr.DEFAULT_COLLECTION_PERCENTILE=10,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vr.DEFAULT=new vr(41943040,vr.DEFAULT_COLLECTION_PERCENTILE,vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vr.DISABLED=new vr(-1,0,0);var Og=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){de(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Go(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Jc(e),s=Go(e);return s.add({}).next(a=>{de(typeof a=="number");let c=new fd(a,n,r,i),l=function(b,A,k){let M=k.baseMutations.map(Y=>vd(b.ct,Y)),U=k.mutations.map(Y=>vd(b.ct,Y));return{userId:A,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:M,mutations:U}}(this.serializer,this.userId,c),h=[],g=new st((w,b)=>be(w.canonicalString(),b.canonicalString()));for(let w of i){let b=wx(this.userId,w.key.path,a);g=g.add(w.key.path.popLast()),h.push(s.put(l)),h.push(o.put(b,SU))}return g.forEach(w=>{h.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),V.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return Go(e).get(n).next(r=>r?(de(r.userId===this.userId),fa(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?V.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Go(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(de(a.batchId>=r),o=fa(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Go(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Go(e).U("userMutationsIndex",n).next(r=>r.map(i=>fa(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=cg(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Jc(e).J({range:i},(s,a,c)=>{let[l,h,g]=s,w=ui(h);if(l===this.userId&&n.path.isEqual(w))return Go(e).get(g).next(b=>{if(!b)throw oe();de(b.userId===this.userId),o.push(fa(this.serializer,b))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(be),i=[];return n.forEach(o=>{let s=cg(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Jc(e).J({range:a},(l,h,g)=>{let[w,b,A]=l,k=ui(b);w===this.userId&&o.path.isEqual(k)?r=r.add(A):g.done()});i.push(c)}),V.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=cg(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new st(be);return Jc(e).J({range:s},(c,l,h)=>{let[g,w,b]=c,A=ui(w);g===this.userId&&r.isPrefixOf(A)?A.length===i&&(a=a.add(b)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Go(e).get(o).next(s=>{if(s===null)throw oe();de(s.userId===this.userId),r.push(fa(this.serializer,s))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return fP(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Jc(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=ui(o[1]);i.push(c)}else a.done()}).next(()=>{de(i.length===0)})})}containsKey(e,n){return pP(e,this.userId,n)}xn(e){return gP(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function pP(t,e,n){let r=cg(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Jc(t).J({range:o,H:!0},(a,c,l)=>{let[h,g,w]=a;h===e&&g===i&&(s=!0),l.done()}).next(()=>s)}function Go(t){return tn(t,"mutations")}function Jc(t){return tn(t,"documentMutations")}function gP(t){return tn(t,"mutationQueues")}var hu=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var A0=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new hu(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>he.fromTimestamp(new bt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Kc(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(de(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Kc(e).J((s,a)=>{let c=ed(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>V.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Kc(e).J((r,i)=>{let o=ed(i);n(o)})}Bn(e){return KM(e).get("targetGlobalKey").next(n=>(de(n!==null),n))}kn(e,n){return KM(e).put("targetGlobalKey",n)}qn(e,n){return Kc(e).put(lP(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=ba(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Kc(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=ed(a);Md(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Wo(e);return n.forEach(s=>{let a=xn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),V.waitFor(i)}removeMatchingKeys(e,n,r){let i=Wo(e);return V.forEach(n,o=>{let s=xn(o.path);return V.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Wo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Wo(e),o=De();return i.J({range:r,H:!0},(s,a,c)=>{let l=ui(s[1]),h=new J(l);o=o.add(h)}).next(()=>o)}containsKey(e,n){let r=xn(n.path),i=IDBKeyRange.bound([r],[fx(r)],!1,!0),o=0;return Wo(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,n){return Kc(e).get(n).next(r=>r?ed(r):null)}};function Kc(t){return tn(t,"targets")}function KM(t){return tn(t,"targetGlobal")}function Wo(t){return tn(t,"targetDocuments")}function QM([t,e],[n,r]){let i=be(t,n);return i===0?be(e,r):i}var S0=class{constructor(e){this.Kn=e,this.buffer=new st(QM),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();QM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},M0=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>O(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){cs(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield as(n)}yield this.zn(3e5)}))}},x0=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(rr.oe);let r=new S0(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(WM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WM):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Qc()<=ei.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function E$(t,e){return new x0(t,e)}var P0=class{constructor(e,n){this.db=e,this.garbageCollector=E$(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return og(e,r)}removeReference(e,n,r){return og(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return og(e,n)}er(e,n){return function(i,o){let s=!1;return gP(i).Y(a=>pP(i,a,o).next(c=>(c&&(s=!0),V.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,he.min()),Wo(e).delete(function(g){return[0,xn(g.path)]}(s))))});i.push(c)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return og(e,n)}Xn(e,n){let r=Wo(e),i,o=rr.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==rr.oe&&n(new J(ui(i)),o),o=l,i=c):o=rr.oe}).next(()=>{o!==rr.oe&&n(new J(ui(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function og(t,e){return Wo(t).put(function(r,i){return{targetId:0,path:xn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Fg=class{constructor(){this.changes=new mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var R0=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return la(e).put(r)}removeEntry(e,n,r){return la(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],xg(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Bt.newInvalidDocument(n);return la(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zl(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Bt.newInvalidDocument(n)};return la(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zl(n))},(i,o)=>{r={document:this.nr(n,o),size:kg(o)}}).next(()=>r)}getEntries(e,n){let r=Qn();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Qn(),i=new lt(J.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,kg(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return V.resolve();let i=new st(XM);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Zl(i.first()),Zl(i.last())),s=i.getIterator(),a=s.getNext();return la(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let g=J.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&XM(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Zl(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),xg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return la(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Qn();for(let g of l){let w=this.nr(J.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);w.isFoundDocument()&&(Pd(n,w)||i.has(w.key))&&(h=h.insert(w.key,w))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=Qn(),s=ZM(n,r),a=ZM(n,_r.max());return la(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let g=this.nr(J.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(g.key,g),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new N0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return YM(e).get("remoteDocumentGlobalKey").next(n=>(de(!!n),n))}tr(e,n){return YM(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=w$(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(he.min())))return r}return Bt.newInvalidDocument(e)}};function mP(t){return new R0(t)}var N0=class extends Fg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new mi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new st((o,s)=>be(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=VM(this.ar.serializer,s);i=i.add(o.path.popLast());let l=kg(c);r+=l-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=VM(this.ar.serializer,s.convertToNoDocument(he.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function YM(t){return tn(t,"remoteDocumentGlobal")}function la(t){return tn(t,"remoteDocumentsV14")}function Zl(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZM(t,e){let n=e.documentKey.path.toArray();return[t,xg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function XM(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=be(n[o],r[o]),i)return i;return i=be(n.length,r.length),i||(i=be(n[n.length-2],r[r.length-2]),i||be(n[n.length-1],r[r.length-1]))}var k0=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Vg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&rd(r.mutation,i,ir.empty(),bt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,n,r=De()){let i=li();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Jl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=li();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,De()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Qn(),s=nd(),a=function(){return nd()}();return n.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Br)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),rd(h.mutation,l,h.mutation.getFieldMask(),bt.now())):s.set(l.key,ir.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var g;return a.set(l,new k0(h,(g=s.get(l))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){let r=nd(),i=new lt((s,a)=>s-a),o=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let h=r.get(c)||ir.empty();h=a.applyToLocalView(l,h),r.set(c,h);let g=(i.get(a.batchId)||De()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,g=jx();h.forEach(w=>{if(!o.has(w)){let b=Wx(n.get(w),r.get(w));b!==null&&g.set(w,b),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,g))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(li()),a=-1,c=o;return s.next(l=>V.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(w=>{c=c.insert(h,w)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,De())).next(h=>({batchId:a,changes:Lx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Jl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Jl();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,c=>{let l=function(g,w){return new jr(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,w)=>{s=s.insert(g,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Bt.newInvalidDocument(h)))});let a=Jl();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&rd(h.mutation,l,ir.empty(),bt.now()),Pd(n,l)&&(a=a.insert(c,l))}),a})}};var O0=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return V.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ot(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:qb(i.bundledQuery),readTime:Ot(i.readTime)}}(n)),V.resolve()}};var F0=class{constructor(){this.overlays=new lt(J.comparator),this.hr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){let r=li();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){let i=li(),o=n.length+1,s=new J(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new lt((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=li(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=li(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new pd(n,r));let o=this.hr.get(n);o===void 0&&(o=De(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var _d=class{constructor(){this.Pr=new st(Vt.Ir),this.Tr=new st(Vt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Vt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Vt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new J(new Ue([])),r=new Vt(n,e),i=new Vt(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new J(new Ue([])),r=new Vt(n,e),i=new Vt(n,e+1),o=De();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Vt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Vt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||be(e.pr,n.pr)}static Er(e,n){return be(e.pr,n.pr)||J.comparator(e.key,n.key)}};var V0=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new st(Vt.Ir)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new fd(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Vt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Vt(n,0),i=new Vt(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(be);return n.forEach(i=>{let o=new Vt(i,0),s=new Vt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;J.isDocumentKey(o)||(o=o.child(""));let s=new Vt(new J(o),0),a=new st(be);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),V.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return V.forEach(n.mutations,i=>{let o=new Vt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Vt(n,0),i=this.wr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var L0=class{constructor(e){this.vr=e,this.docs=function(){return new lt(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Bt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Qn(),s=n.path,a=new J(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Fb(gx(h),r)<=0||(i.has(h.key)||Pd(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){oe()}Fr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new j0(this)}getSize(e){return V.resolve(this.size)}},j0=class extends Fg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var B0=class{constructor(e){this.persistence=e,this.Mr=new mi(n=>ba(n),Md),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Or=0,this.Nr=new _d,this.targetCount=0,this.Lr=hu.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),V.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new hu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.qn(n),V.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),V.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Nr.containsKey(n))}};var Lg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new rr(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new B0(this),this.indexManager=new D0,this.remoteDocumentCache=function(i){return new L0(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Mg(n),this.$r=new O0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new F0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new V0(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);let i=new U0(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return V.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},U0=class extends yg{constructor(e){super(),this.currentSequenceNumber=e}},jg=class t{constructor(e){this.persistence=e,this.zr=new _d,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw oe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),V.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{let i=J.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,he.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return V.or([()=>V.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var $0=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new vg("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gM,{unique:!0}),c.createObjectStore("documentMutations")}(e),JM(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=V.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),JM(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:he.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gM,{unique:!0});let g=l.store("mutations"),w=h.map(b=>g.put(b));return V.waitFor(w)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:BU});l.createIndex("collectionPathOverlayIndex",UU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",$U,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:MU});l.createIndex("documentKeyIndex",xU),l.createIndex("collectionGroupIndex",PU)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:FU}).createIndex("sequenceNumberIndex",VU,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:LU}).createIndex("documentKeyIndex",jU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=kg(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>V.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>V.forEach(a,c=>{de(c.userId===o.userId);let l=fa(this.serializer,c);return fP(e,o.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Ue(s),l=function(g){return[0,xn(g)]}(c);o.push(n.get(l).next(h=>h?V.resolve():(g=>n.put({targetId:0,path:xn(g),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>V.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:OU});let r=n.store("collectionParents"),i=new wd,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:xn(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Ue(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=ui(a);return o(h.popLast())}))}ri(e){let n=e.store("targets");return n.J((r,i)=>{let o=ed(i),s=lP(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(g){return g.document?new J(Ue.fromString(g.document.name).popFirst(5)):g.noDocument?J.fromSegments(g.noDocument.path):g.unknownDocument?J.fromSegments(g.unknownDocument.path):oe()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>V.waitFor(i))}si(e,n){let r=n.store("mutations"),i=mP(this.serializer),o=new Lg(jg.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:De();fa(this.serializer,c).keys().forEach(g=>h=h.add(g)),a.set(c.userId,h)}),V.forEach(a,(c,l)=>{let h=new Lt(l),g=Pg.lt(this.serializer,h),w=o.getIndexManager(h),b=Og.lt(h,this.serializer,w,o.referenceDelegate);return new Vg(i,b,g,w).recalculateAndSaveOverlaysForDocumentKeys(new cd(n,rr.oe),c).next()})})}};function JM(t){t.createObjectStore("targetDocuments",{keyPath:NU}).createIndex("documentTargetsIndex",kU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",RU,{unique:!0}),t.createObjectStore("targetGlobal")}var N_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",q0=class t{constructor(e,n,r,i,o,s,a,c,l,h,g=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=h,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=w=>Promise.resolve(),!t.D())throw new H(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new P0(this,i),this.Ti=n+"main",this.serializer=new Mg(c),this.Ei=new Xo(this.Ti,this.ui,new $0(this.serializer)),this.Qr=new A0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=mP(this.serializer),this.$r=new v0,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,h===!1&&Nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(j.FAILED_PRECONDITION,N_);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new rr(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>O(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>O(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>O(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(cs(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Xl(e).get("owner").next(n=>V.resolve(this.Si(n)))}bi(e){return sg(e).delete(this.clientId)}Di(){return O(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=tn(n,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return V.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?V.resolve(!0):Xl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new H(j.FAILED_PRECONDITION,N_);return!1}}return!(!this.networkEnabled||!this.inForeground)||sg(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return O(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new cd(e,rr.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>sg(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Og.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new T0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Pg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){W("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?zU:c===15?Ix:c===14?Ex:c===13?bx:c===12?qU:c===11?_x:void oe()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new cd(a,this.kr?this.kr.next():rr.oe),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new H(j.FAILED_PRECONDITION,mx);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Xl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H(j.FAILED_PRECONDITION,N_)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xl(e).put("owner",n)}static D(){return Xo.D()}yi(e){let n=Xl(e);return n.get("owner").next(r=>this.Si(r)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Uy()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Nt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Xl(t){return tn(t,"owner")}function sg(t){return tn(t,"clientMetadata")}function Hb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var z0=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=De(),i=De();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var H0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Uy()?8:yx(ml())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new H0;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Qc()<=ei.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Yc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),V.resolve()):(Qc()<=ei.DEBUG&&W("QueryEngine","Query:",Yc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Qc()<=ei.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Yc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):V.resolve())}ji(e,n){if(TM(n))return V.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dg(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=De(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,s,c.readTime)?this.ji(e,Dg(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return TM(n)||i.isEqual(he.min())?V.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?V.resolve(null):(Qc()<=ei.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Yc(n)),this.es(e,s,n,px(i,-1)).next(a=>a))})}Zi(e,n){let r=new st(Fx(e));return n.forEach((i,o)=>{Pd(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Qc()<=ei.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Yc(n)),this.zi.getDocumentsMatchingQuery(e,n,_r.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var G0=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new lt(be),this.rs=new mi(o=>ba(o),Md),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function yP(t,e,n,r){return new G0(t,e,n,r)}function vP(t,e){return O(this,null,function*(){let n=te(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=De();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function I$(t,e){let n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let g=l.batch,w=g.keys(),b=V.resolve();return w.forEach(A=>{b=b.next(()=>h.getEntry(c,A)).next(k=>{let M=l.docVersions.get(A);de(M!==null),k.version.compareTo(M)<0&&(g.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),h.addEntry(k)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=De();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wP(t){let e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function C$(t,e){let n=te(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((h,g)=>{let w=i.get(g);if(!w)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,g)));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(en.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(g,b),function(k,M,U){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(w,b,h)&&a.push(n.Qr.updateTargetData(o,b))});let c=Qn(),l=De();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(_P(o,s,e.documentUpdates).next(h=>{c=h.cs,l=h.ls})),!r.isEqual(he.min())){let h=n.Qr.getLastRemoteSnapshotVersion(o).next(g=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ns=i,o))}function _P(t,e,n){let r=De(),i=De();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Qn();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function D$(t,e){let n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fu(t,e){let n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new du(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function pu(t,e,n){return O(this,null,function*(){let r=te(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!cs(s))throw s;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Ug(t,e,n){let r=te(t),i=he.min(),o=De();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let g=te(c),w=g.rs.get(h);return w!==void 0?V.resolve(g.ns.get(w)):g.Qr.getTargetData(l,h)}(r,s,Pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:he.min(),n?o:De())).next(a=>(IP(r,Ox(e),a),{documents:a,hs:o})))}function bP(t,e){let n=te(t),r=te(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function EP(t,e){let n=te(t),r=n.ss.get(e)||he.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,px(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(IP(n,e,i),i))}function IP(t,e,n){let r=t.ss.get(e)||he.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function T$(t,e,n,r){return O(this,null,function*(){let i=te(t),o=De(),s=Qn();for(let l of n){let h=e.Ps(l.metadata.name);l.document&&(o=o.add(h));let g=e.Is(l);g.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(h,g)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield fu(i,function(h){return Pn(Eu(Ue.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>_P(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.cs,h.ls)).next(()=>h.cs)))})}function A$(r,i){return O(this,arguments,function*(t,e,n=De()){let o=yield fu(t,Pn(qb(e.bundledQuery))),s=te(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ot(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(en.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function ex(t,e){return`firestore_clients_${t}_${e}`}function tx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function k_(t,e){return`firestore_targets_${t}_${e}`}var $g=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new H(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Nt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},id=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new H(r.error.code,r.error.message))),o?new t(e,r.state,i):(Nt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},qg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Ub();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=vx(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Nt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},W0=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Nt("SharedClientState",`Failed to parse online state: ${e}`),null)}},bd=class{constructor(){this.activeTargetIds=Ub()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},od=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new lt(be),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=ex(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new bd),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return O(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(ex(this.persistenceKey,r));if(i){let o=qg.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(k_(this.persistenceKey,e));if(r){let i=id.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(k_(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>O(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=rr.oe;if(o!=null)try{let a=JSON.parse(o);de(typeof a=="number"),s=a}catch(a){Nt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==rr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new $g(this.currentUser,e,n,r),o=tx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let n=tx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=k_(this.persistenceKey,e),o=new id(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return qg.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return $g.Es(new Lt(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return id.Es(i,n)}xs(e){return W0.Es(e)}Js(e){return JSON.parse(e)}zs(e){return O(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Ub();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},zg=class{constructor(){this.no=new bd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new bd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var K0=class{io(e){}shutdown(){}};var Hg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ag=null;function O_(){return ag===null?ag=function(){return 268435456+Math.round(2147483648*Math.random())}():ag++,"0x"+ag.toString(16)}var S$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Q0=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var mn="WebChannelConnection",Y0=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(n,r,i,o,s){let a=O_(),c=this.vo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(n,c,l,i).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw wr("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}xo(n,r,i,o,s,a){return this.Co(n,r,i,o,s)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}vo(n,r){let i=S$[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let o=O_();return new Promise((s,a)=>{let c=new T_;c.setWithCredentials(!0),c.listenOnce(S_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Kl.NO_ERROR:let h=c.getResponseJson();W(mn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Kl.TIMEOUT:W(mn,`RPC '${e}' ${o} timed out`),a(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case Kl.HTTP_ERROR:let g=c.getStatus();if(W(mn,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);let b=w?.error;if(b&&b.status&&b.message){let A=function(M){let U=M.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(U)>=0?U:j.UNKNOWN}(b.status);a(new H(A,b.message))}else a(new H(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new H(j.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{W(mn,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);W(mn,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=O_(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=P_(),a=x_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new A_({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=o.join("");W(mn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=s.createWebChannel(h,c),w=!1,b=!1,A=new Q0({lo:M=>{b?W(mn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(w||(W(mn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),w=!0),W(mn,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},ho:()=>g.close()}),k=(M,U,Y)=>{M.listen(U,q=>{try{Y(q)}catch(Q){setTimeout(()=>{throw Q},0)}})};return k(g,zc.EventType.OPEN,()=>{b||(W(mn,`RPC '${e}' stream ${i} transport opened.`),A.mo())}),k(g,zc.EventType.CLOSE,()=>{b||(b=!0,W(mn,`RPC '${e}' stream ${i} transport closed`),A.po())}),k(g,zc.EventType.ERROR,M=>{b||(b=!0,wr(mn,`RPC '${e}' stream ${i} transport errored:`,M),A.po(new H(j.UNAVAILABLE,"The operation could not be completed")))}),k(g,zc.EventType.MESSAGE,M=>{var U;if(!b){let Y=M.data[0];de(!!Y);let q=Y,Q=q.error||((U=q[0])===null||U===void 0?void 0:U.error);if(Q){W(mn,`RPC '${e}' stream ${i} received error:`,Q);let ue=Q.status,se=function(D){let S=Ft[D];if(S!==void 0)return Yx(S)}(ue),T=Q.message;se===void 0&&(se=j.INTERNAL,T="Unknown error status: "+ue+" with message "+Q.message),b=!0,A.po(new H(se,T)),g.close()}else W(mn,`RPC '${e}' stream ${i} received:`,Y),A.yo(Y)}}),k(a,M_.STAT_EVENT,M=>{M.stat===rg.PROXY?W(mn,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===rg.NOPROXY&&W(mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.fo()},0),A}};function CP(){return typeof window<"u"?window:null}function hg(){return typeof document<"u"?document:null}function Rd(t){return new f0(t,!0)}var Ed=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Gg=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Ed(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return O(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return O(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return O(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Nt(n.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>O(this,null,function*(){this.state=0,this.start()}))}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Z0=class extends Gg{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=h$(this.serializer,e),r=function(o){if(!("targetChange"in o))return he.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?he.min():s.readTime?Ot(s.readTime):he.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=m0(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Ig(c)?{documents:iP(o,c)}:{query:oP(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Xx(o,s.resumeToken);let l=p0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(he.min())>0){a.readTime=lu(o,s.snapshotVersion.toTimestamp());let l=p0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=p$(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=m0(this.serializer),n.removeTarget=e,this.i_(n)}},X0=class extends Gg{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=f$(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.A_(r,n)}return de(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=m0(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>vd(this.serializer,r))};this.i_(n)}};var J0=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,g0(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(j.UNKNOWN,o.toString())})}xo(e,n,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,g0(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(j.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},eb=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Nt(n),this.y_=!1):W("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var tb=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>O(this,null,function*(){us(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(c){return O(this,null,function*(){let l=te(c);l.M_.add(4),yield Iu(l),l.N_.set("Unknown"),l.M_.delete(4),yield Nd(l)})}(this))}))}),this.N_=new eb(r,i)}};function Nd(t){return O(this,null,function*(){if(us(t))for(let e of t.x_)yield e(!0)})}function Iu(t){return O(this,null,function*(){for(let e of t.x_)yield e(!1)})}function dm(t,e){let n=te(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Kb(n)?Wb(n):Du(n).Xo()&&Gb(n,e))}function gu(t,e){let n=te(t),r=Du(n);n.F_.delete(e),r.Xo()&&DP(n,e),n.F_.size===0&&(r.Xo()?r.n_():us(n)&&n.N_.set("Unknown"))}function Gb(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Du(t).P_(e)}function DP(t,e){t.L_.xe(e),Du(t).I_(e)}function Wb(t){t.L_=new h0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Du(t).start(),t.N_.w_()}function Kb(t){return us(t)&&!Du(t).Zo()&&t.F_.size>0}function us(t){return te(t).M_.size===0}function TP(t){t.L_=void 0}function M$(t){return O(this,null,function*(){t.N_.set("Online")})}function x$(t){return O(this,null,function*(){t.F_.forEach((e,n)=>{Gb(t,e)})})}function P$(t,e){return O(this,null,function*(){TP(t),Kb(t)?(t.N_.D_(e),Wb(t)):t.N_.set("Unknown")})}function R$(t,e,n){return O(this,null,function*(){if(t.N_.set("Online"),e instanceof Ag&&e.state===2&&e.cause)try{yield function(i,o){return O(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wg(t,r)}else if(e instanceof ru?t.L_.Ke(e):e instanceof Tg?t.L_.He(e):t.L_.We(e),!n.isEqual(he.min()))try{let r=yield wP(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.F_.get(l);h&&o.F_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.F_.get(c);if(!h)return;o.F_.set(c,h.withResumeToken(en.EMPTY_BYTE_STRING,h.snapshotVersion)),DP(o,c);let g=new du(h.target,c,l,h.sequenceNumber);Gb(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){W("RemoteStore","Failed to raise snapshot:",r),yield Wg(t,r)}})}function Wg(t,e,n){return O(this,null,function*(){if(!cs(e))throw e;t.M_.add(1),yield Iu(t),t.N_.set("Offline"),n||(n=()=>wP(t.localStore)),t.asyncQueue.enqueueRetryable(()=>O(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Nd(t)}))})}function AP(t,e){return e().catch(n=>Wg(t,n,e))}function Cu(t){return O(this,null,function*(){let e=te(t),n=ss(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;N$(e);)try{let i=yield D$(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,k$(e,i)}catch(i){yield Wg(e,i)}SP(e)&&MP(e)})}function N$(t){return us(t)&&t.v_.length<10}function k$(t,e){t.v_.push(e);let n=ss(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function SP(t){return us(t)&&!ss(t).Zo()&&t.v_.length>0}function MP(t){ss(t).start()}function O$(t){return O(this,null,function*(){ss(t).V_()})}function F$(t){return O(this,null,function*(){let e=ss(t);for(let n of t.v_)e.d_(n.mutations)})}function V$(t,e,n){return O(this,null,function*(){let r=t.v_.shift(),i=u0.from(r,e,n);yield AP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Cu(t)})}function L$(t,e){return O(this,null,function*(){e&&ss(t).E_&&(yield function(r,i){return O(this,null,function*(){if(function(s){return Qx(s)&&s!==j.ABORTED}(i.code)){let o=r.v_.shift();ss(r).t_(),yield AP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Cu(r)}})}(t,e)),SP(t)&&MP(t)})}function nx(t,e){return O(this,null,function*(){let n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let r=us(n);n.M_.add(3),yield Iu(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Nd(n)})}function nb(t,e){return O(this,null,function*(){let n=te(t);e?(n.M_.delete(2),yield Nd(n)):e||(n.M_.add(2),yield Iu(n),n.N_.set("Unknown"))})}function Du(t){return t.B_||(t.B_=function(n,r,i){let o=te(n);return o.f_(),new Z0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:M$.bind(null,t),To:x$.bind(null,t),Ao:P$.bind(null,t),h_:R$.bind(null,t)}),t.x_.push(e=>O(this,null,function*(){e?(t.B_.t_(),Kb(t)?Wb(t):t.N_.set("Unknown")):(yield t.B_.stop(),TP(t))}))),t.B_}function ss(t){return t.k_||(t.k_=function(n,r,i){let o=te(n);return o.f_(),new X0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:O$.bind(null,t),Ao:L$.bind(null,t),R_:F$.bind(null,t),A_:V$.bind(null,t)}),t.x_.push(e=>O(this,null,function*(){e?(t.k_.t_(),yield Cu(t)):(yield t.k_.stop(),t.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var rb=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Tu(t,e){if(Nt("AsyncQueue",`${e}: ${t}`),cs(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}var Kg=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Jl(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Qg=class{constructor(){this.q_=new lt(J.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):oe():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},mu=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Kg.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var ib=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},ob=class{constructor(){this.queries=new mi(e=>kx(e),xd),this.onlineState="Unknown",this.z_=new Set}};function Qb(t,e){return O(this,null,function*(){let n=te(t),r=3,i=e.query,o=n.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new ib,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield n.onListen(i,!0);break;case 1:o.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Tu(s,`Initialization of query '${Yc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&Zb(n)})}function Yb(t,e){return O(this,null,function*(){let n=te(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function j$(t,e){let n=te(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&Zb(n)}function B$(t,e,n){let r=te(t),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(n);r.queries.delete(e)}function Zb(t){t.z_.forEach(e=>{e.next()})}var sb,rx;(rx=sb||(sb={})).J_="default",rx.Cache="cache";var Id=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==sb.Cache}};var ab=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Yg=class{constructor(e){this.serializer=e}Ps(e){return hi(this.serializer,e)}Is(e){return e.metadata.exists?rP(this.serializer,e.document,!1):Bt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ot(e)}},cb=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xP(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=Ue.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new Yg(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||De()).add(o);n.set(s,a)}}return n}complete(){return O(this,null,function*(){let e=yield T$(this.localStore,new Yg(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield A$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function xP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Zg=class{constructor(e){this.key=e}},Xg=class{constructor(e){this.key=e}},Jg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=De(),this.mutatedKeys=De(),this.Ia=Fx(e),this.Ta=new Kg(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Qg,i=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let w=i.get(h),b=Pd(this.query,g)?g:null,A=!!w&&this.mutatedKeys.has(w.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),M=!1;w&&b?w.data.isEqual(b.data)?A!==k&&(r.track({type:3,doc:b}),M=!0):this.Ra(w,b)||(r.track({type:2,doc:b}),M=!0,(c&&this.Ia(b,c)>0||l&&this.Ia(b,l)<0)&&(a=!0)):!w&&b?(r.track({type:0,doc:b}),M=!0):w&&!b&&(r.track({type:1,doc:w}),M=!0,(c||l)&&(a=!0)),M&&(b?(s=s.add(b),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((h,g)=>function(b,A){let k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return k(b)-k(A)}(h.type,g.type)||this.Ia(h.doc,g.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,s.length!==0||l?{snapshot:new mu(this.query,e.Ta,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Qg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=De(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Xg(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Zg(r))}),n}pa(e){this.la=e.hs,this.Pa=De();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return mu.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},ub=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},lb=class{constructor(e){this.key=e,this.wa=!1}},db=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new mi(a=>kx(a),xd),this.Da=new Map,this.Ca=new Set,this.va=new lt(J.comparator),this.Fa=new Map,this.Ma=new _d,this.xa={},this.Oa=new Map,this.Na=hu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function U$(t,e,n=!0){return O(this,null,function*(){let r=hm(t),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield PP(r,e,n,!0),i})}function $$(t,e){return O(this,null,function*(){let n=hm(t);yield PP(n,e,!0,!1)})}function PP(t,e,n,r){return O(this,null,function*(){let i=yield fu(t.localStore,Pn(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield Xb(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&dm(t.remoteStore,i),a})}function Xb(t,e,n,r,i){return O(this,null,function*(){t.Ba=(g,w,b)=>function(k,M,U,Y){return O(this,null,function*(){let q=M.view.da(U);q.Xi&&(q=yield Ug(k.localStore,M.query,!1).then(({documents:T})=>M.view.da(T,q)));let Q=Y&&Y.targetChanges.get(M.targetId),ue=Y&&Y.targetMismatches.get(M.targetId)!=null,se=M.view.applyChanges(q,k.isPrimaryClient,Q,ue);return hb(k,M.targetId,se.fa),se.snapshot})}(t,g,w,b);let o=yield Ug(t.localStore,e,!0),s=new Jg(e,o.hs),a=s.da(o.documents),c=md.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);hb(t,n,l.fa);let h=new ub(e,n,s);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function q$(t,e,n){return O(this,null,function*(){let r=te(t),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!xd(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield pu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gu(r.remoteStore,i.targetId),yu(r,i.targetId)}).catch(as))):(yu(r,i.targetId),yield pu(r.localStore,i.targetId,!0))})}function z$(t,e){return O(this,null,function*(){let n=te(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gu(n.remoteStore,r.targetId))})}function H$(t,e,n){return O(this,null,function*(){let r=nE(t);try{let i=yield function(s,a){let c=te(s),l=bt.now(),h=a.reduce((b,A)=>b.add(A.key),De()),g,w;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let A=Qn(),k=De();return c.os.getEntries(b,h).next(M=>{A=M,A.forEach((U,Y)=>{Y.isValidDocument()||(k=k.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,A)).next(M=>{g=M;let U=[];for(let Y of a){let q=o$(Y,g.get(Y.key).overlayedDocument);q!=null&&U.push(new Br(Y.key,q,Ax(q.value.mapValue),At.exists(!0)))}return c.mutationQueue.addMutationBatch(b,l,U,a)}).next(M=>{w=M;let U=M.applyToLocalDocumentSet(g,k);return c.documentOverlayCache.saveOverlays(b,M.batchId,U)})}).then(()=>({batchId:w.batchId,changes:Lx(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.xa[s.currentUser.toKey()];l||(l=new lt(be)),l=l.insert(a,c),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield fo(r,i.changes),yield Cu(r.remoteStore)}catch(i){let o=Tu(i,"Failed to persist write");n.reject(o)}})}function RP(t,e){return O(this,null,function*(){let n=te(t);try{let r=yield C$(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Fa.get(o);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?de(s.wa):i.removedDocuments.size>0&&(de(s.wa),s.wa=!1))}),yield fo(n,r,e)}catch(r){yield as(r)}})}function ix(t,e,n){let r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=te(s);c.onlineState=a;let l=!1;c.queries.forEach((h,g)=>{for(let w of g.U_)w.j_(a)&&(l=!0)}),l&&Zb(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function G$(t,e,n){return O(this,null,function*(){let r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new lt(J.comparator);s=s.insert(o,Bt.newNoDocument(o,he.min()));let a=De().add(o),c=new gd(he.min(),new Map,new lt(be),s,a);yield RP(r,c),r.va=r.va.remove(o),r.Fa.delete(e),tE(r)}else yield pu(r.localStore,e,!1).then(()=>yu(r,e,n)).catch(as)})}function W$(t,e){return O(this,null,function*(){let n=te(t),r=e.batch.batchId;try{let i=yield I$(n.localStore,e);eE(n,r,null),Jb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield fo(n,i)}catch(i){yield as(i)}})}function K$(t,e,n){return O(this,null,function*(){let r=te(t);try{let i=yield function(s,a){let c=te(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(g=>(de(g!==null),h=g.keys(),c.mutationQueue.removeMutationBatch(l,g))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);eE(r,e,n),Jb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield fo(r,i)}catch(i){yield as(i)}})}function Q$(t,e){return O(this,null,function*(){let n=te(t);us(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=te(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=Tu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Jb(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function eE(t,e,n){let r=te(t),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function yu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||NP(t,r)})}function NP(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(gu(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),tE(t))}function hb(t,e,n){for(let r of n)r instanceof Zg?(t.Ma.addReference(r.key,e),Y$(t,r)):r instanceof Xg?(W("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||NP(t,r.key)):oe()}function Y$(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(W("SyncEngine","New document in limbo: "+n),t.Ca.add(r),tE(t))}function tE(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new J(Ue.fromString(e)),r=t.Na.next();t.Fa.set(r,new lb(n)),t.va=t.va.insert(n,r),dm(t.remoteStore,new du(Pn(Eu(n.path)),r,"TargetPurposeLimboResolution",rr.oe))}}function fo(t,e,n){return O(this,null,function*(){let r=te(t),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=z0.Ki(c.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(c,l){return O(this,null,function*(){let h=te(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>V.forEach(l,w=>V.forEach(w.qi,b=>h.persistence.referenceDelegate.addReference(g,w.targetId,b)).next(()=>V.forEach(w.Qi,b=>h.persistence.referenceDelegate.removeReference(g,w.targetId,b)))))}catch(g){if(!cs(g))throw g;W("LocalStore","Failed to update sequence numbers: "+g)}for(let g of l){let w=g.targetId;if(!g.fromCache){let b=h.ns.get(w),A=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(A);h.ns=h.ns.insert(w,k)}}})}(r.localStore,o))})}function Z$(t,e){return O(this,null,function*(){let n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let r=yield vP(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new H(j.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fo(n,r.us)}})}function X$(t,e){let n=te(t),r=n.Fa.get(e);if(r&&r.wa)return De().add(r.key);{let i=De(),o=n.Da.get(e);if(!o)return i;for(let s of o){let a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function J$(t,e){return O(this,null,function*(){let n=te(t),r=yield Ug(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&hb(n,e.targetId,i.fa),i})}function e4(t,e){return O(this,null,function*(){let n=te(t);return EP(n.localStore,e).then(r=>fo(n,r))})}function t4(t,e,n,r){return O(this,null,function*(){let i=te(t),o=yield function(a,c){let l=te(a),h=te(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.vn(g,c).next(w=>w?l.localDocuments.getDocuments(g,w):V.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield Cu(i.remoteStore):n==="acknowledged"||n==="rejected"?(eE(i,e,r||null),Jb(i,e),function(a,c){te(te(a).mutationQueue).Mn(c)}(i.localStore,e)):oe(),yield fo(i,o)):W("SyncEngine","Cannot apply mutation batch with id: "+e)})}function n4(t,e){return O(this,null,function*(){let n=te(t);if(hm(n),nE(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield ox(n,r.toArray());n.La=!0,yield nb(n.remoteStore,!0);for(let o of i)dm(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(yu(n,s),pu(n.localStore,s,!0))),gu(n.remoteStore,s)}),yield i,yield ox(n,r),function(s){let a=te(s);a.Fa.forEach((c,l)=>{gu(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new lt(J.comparator)}(n),n.La=!1,yield nb(n.remoteStore,!1)}})}function ox(t,e,n){return O(this,null,function*(){let r=te(t),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield fu(r.localStore,Pn(c[0]));for(let l of c){let h=r.ba.get(l),g=yield J$(r,h);g.snapshot&&o.push(g.snapshot)}}else{let l=yield bP(r.localStore,s);a=yield fu(r.localStore,l),yield Xb(r,kP(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function kP(t){return Nx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function r4(t){return function(n){return te(te(n).persistence).Bi()}(te(t).localStore)}function i4(t,e,n,r){return O(this,null,function*(){let i=te(t);if(i.La)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield EP(i.localStore,Ox(o[0])),a=gd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",en.EMPTY_BYTE_STRING);yield fo(i,s,a);break}case"rejected":yield pu(i.localStore,e,!0),yu(i,e,r);break;default:oe()}})}function o4(t,e,n){return O(this,null,function*(){let r=hm(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W("SyncEngine","Adding an already active target "+i);continue}let o=yield bP(r.localStore,i),s=yield fu(r.localStore,o);yield Xb(r,kP(o),s.targetId,!1,s.resumeToken),dm(r.remoteStore,s)}for(let i of n)r.Da.has(i)&&(yield pu(r.localStore,i,!1).then(()=>{gu(r.remoteStore,i),yu(r,i)}).catch(as))}})}function hm(t){let e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G$.bind(null,e),e.Sa.h_=j$.bind(null,e.eventManager),e.Sa.ka=B$.bind(null,e.eventManager),e}function nE(t){let e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K$.bind(null,e),e}function s4(t,e,n){let r=te(t);(function(o,s,a){return O(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(b,A){let k=te(b),M=Ot(A.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",U=>k.$r.getBundleMetadata(U,A.id)).then(U=>!!U&&U.createTime.compareTo(M)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(xP(c));let l=new cb(c,o.localStore,s.serializer),h=yield s.qa();for(;h;){let w=yield l._a(h);w&&a._updateProgress(w),h=yield s.qa()}let g=yield l.complete();return yield fo(o,g.ca,void 0),yield function(b,A){let k=te(b);return k.persistence.runTransaction("Save bundle","readwrite",M=>k.$r.saveBundleMetadata(M,A))}(o.localStore,c),a._completeWith(g.progress),Promise.resolve(g.ua)}catch(c){return wr("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Cd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){this.serializer=Rd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return yP(this.persistence,new Bg,e.initialUser,this.serializer)}createPersistence(e){return new Lg(jg.Hr,this.serializer)}createSharedClientState(e){return new zg}terminate(){return O(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var em=class t extends Cd{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){yield jy(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield nE(this.Qa.syncEngine),yield Cu(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return yP(this.persistence,new Bg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new M0(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new W_(n,this.persistence);return new G_(e.asyncQueue,r)}createPersistence(e){let n=Hb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vr.withCacheSize(this.cacheSizeBytes):vr.DEFAULT;return new q0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,CP(),hg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zg}},fb=class t extends em{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return O(this,null,function*(){yield jy(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof od&&(this.sharedClientState.syncEngine={Zs:t4.bind(null,n),Xs:i4.bind(null,n),eo:o4.bind(null,n),Bi:r4.bind(null,n),Ys:e4.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>O(this,null,function*(){yield n4(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=CP();if(!od.D(n))throw new H(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Hb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new od(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Dd=class{initialize(e,n){return O(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ix(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z$.bind(null,this.syncEngine),yield nb(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new ob}()}createDatastore(e){let n=Rd(e.databaseInfo.databaseId),r=function(o){return new Y0(o)}(e.databaseInfo);return function(o,s,a,c){return new J0(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new tb(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ix(this.syncEngine,n,0),function(){return Hg.D()?new Hg:new K0}())}createSyncEngine(e,n){return function(i,o,s,a,c,l,h){let g=new db(i,o,s,a,c,l);return h&&(g.La=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return O(this,null,function*(){var e;yield function(r){return O(this,null,function*(){let i=te(r);W("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Iu(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function sx(t,e=10240){let n=0;return{read(){return O(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return O(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var vu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var pb=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new jt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return O(this,null,function*(){return this.metadata.promise})}qa(){return O(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return O(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new ab(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return O(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return O(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return O(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var gb=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return O(this,null,function*(){let s=te(i),a={documents:o.map(g=>yd(s.serializer,g))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,Ue.emptyPath(),a,o.length),l=new Map;c.forEach(g=>{let w=d$(s.serializer,g);l.set(w.key.toString(),w)});let h=[];return o.forEach(g=>{let w=l.get(g.toString());de(!!w),h.push(w)}),h})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new os(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=J.fromPath(r);this.mutations.push(new hd(i,this.precondition(i)))}),yield function(r,i){return O(this,null,function*(){let o=te(r),s={writes:i.map(a=>vd(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,Ue.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw oe();n=he.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new H(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(he.min())?At.exists(!1):At.updateTime(n):At.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(he.min()))throw new H(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return At.updateTime(n)}return At.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var mb=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new Ed(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>O(this,null,function*(){let e=new gb(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!Sd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Qx(n)}return!1}};var yb=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>O(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Tu(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function fg(t,e){return O(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>O(this,null,function*(){r.isEqual(i)||(yield vP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function vb(t,e){return O(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield rE(t);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>nx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>nx(e.remoteStore,i)),t._onlineComponents=e})}function OP(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function rE(t){return O(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!OP(n))throw n;wr("Error using user provided cache. Falling back to memory cache: "+n),yield fg(t,new Cd)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield fg(t,new Cd);return t._offlineComponents})}function fm(t){return O(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield vb(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield vb(t,new Dd))),t._onlineComponents})}function FP(t){return rE(t).then(e=>e.persistence)}function iE(t){return rE(t).then(e=>e.localStore)}function VP(t){return fm(t).then(e=>e.remoteStore)}function oE(t){return fm(t).then(e=>e.syncEngine)}function a4(t){return fm(t).then(e=>e.datastore)}function wu(t){return O(this,null,function*(){let e=yield fm(t),n=e.eventManager;return n.onListen=U$.bind(null,e.syncEngine),n.onUnlisten=q$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z$.bind(null,e.syncEngine),n})}function c4(t){return t.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield FP(t),n=yield VP(t);return e.setNetworkEnabled(!0),function(i){let o=te(i);return o.M_.delete(0),Nd(o)}(n)}))}function u4(t){return t.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield FP(t),n=yield VP(t);return e.setNetworkEnabled(!1),function(i){return O(this,null,function*(){let o=te(i);o.M_.add(0),yield Iu(o),o.N_.set("Offline")})}(n)}))}function l4(t,e){let n=new jt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,o,s){return O(this,null,function*(){try{let a=yield function(l,h){let g=te(l);return g.persistence.runTransaction("read document","readonly",w=>g.localDocuments.getDocument(w,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new H(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Tu(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield iE(t),e,n)})),n.promise}function LP(t,e,n={}){let r=new jt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,c,l){let h=new vu({next:w=>{s.enqueueAndForget(()=>Yb(o,g));let b=w.docs.has(a);!b&&w.fromCache?l.reject(new H(j.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&c&&c.source==="server"?l.reject(new H(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(w)},error:w=>l.reject(w)}),g=new Id(Eu(a.path),h,{includeMetadataChanges:!0,ra:!0});return Qb(o,g)}(yield wu(t),t.asyncQueue,e,n,r)})),r.promise}function d4(t,e){let n=new jt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,o,s){return O(this,null,function*(){try{let a=yield Ug(i,o,!0),c=new Jg(o,a.hs),l=c.da(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Tu(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield iE(t),e,n)})),n.promise}function jP(t,e,n={}){let r=new jt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,c,l){let h=new vu({next:w=>{s.enqueueAndForget(()=>Yb(o,g)),w.fromCache&&c.source==="server"?l.reject(new H(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(w)},error:w=>l.reject(w)}),g=new Id(a,h,{includeMetadataChanges:!0,ra:!0});return Qb(o,g)}(yield wu(t),t.asyncQueue,e,n,r)})),r.promise}function h4(t,e){let n=new vu(e);return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,o){te(i).z_.add(o),o.next()}(yield wu(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,o){te(i).z_.delete(o)}(yield wu(t),n)}))}}function f4(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?Zx().encode(s):s,function(h,g){return new pb(h,g)}(function(h,g){if(h instanceof Uint8Array)return sx(h,g);if(h instanceof ArrayBuffer)return sx(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Rd(e));t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){s4(yield oE(t),i,r)}))}function p4(t,e){return t.asyncQueue.enqueue(()=>O(this,null,function*(){return function(r,i){let o=te(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield iE(t),e)}))}function BP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ax=new Map;function sE(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aE(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cx(t){if(!J.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ux(t){if(J.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function $e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=pm(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function UP(t,e){if(e<=0)throw new H(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var tm=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Da=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F_;switch(r.type){case"firstParty":return new B_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ax.get(n);r&&(W("ComponentProvider","Removing Datastore"),ax.delete(n),r.terminate())}(this),Promise.resolve()}};function gm(t,e,n,r={}){var i;let o=(t=$e(t,Da))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Lt.MOCK_USER;else{a=ff(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new H(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Lt(l)}t._authCredentials=new V_(new pg(a,c))}}var on=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},at=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},fi=class t extends on{constructor(e,n,r){super(e,n,Eu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new J(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function mm(t,e,...n){if(t=ze(t),sE("collection","path",e),t instanceof Da){let r=Ue.fromString(e,...n);return ux(r),new fi(t,null,r)}{if(!(t instanceof at||t instanceof fi))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return ux(r),new fi(t.firestore,null,r)}}function cE(t,e){if(t=$e(t,Da),sE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new on(t,null,function(r){return new jr(Ue.emptyPath(),r)}(e))}function Au(t,e,...n){if(t=ze(t),arguments.length===1&&(e=gg.newId()),sE("doc","path",e),t instanceof Da){let r=Ue.fromString(e,...n);return cx(r),new at(t,null,new J(r))}{if(!(t instanceof at||t instanceof fi))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ue.fromString(e,...n));return cx(r),new at(t.firestore,t instanceof fi?t.converter:null,new J(r))}}function ym(t,e){return t=ze(t),e=ze(e),(t instanceof at||t instanceof fi)&&(e instanceof at||e instanceof fi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function vm(t,e){return t=ze(t),e=ze(e),t instanceof on&&e instanceof on&&t.firestore===e.firestore&&xd(t._query,e._query)&&t.converter===e.converter}var wb=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Ed(this,"async_queue_retry"),this.hu=()=>{let n=hg();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=hg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=hg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new jt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return O(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!cs(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Nt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=rb.createAndSchedule(this,e,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&oe()}verifyOperationInProgress(){}du(){return O(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function _b(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var bb=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new jt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var $P=-1,ft=class extends Da{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new wb}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zP(this),this._firestoreClient.terminate()}};function qP(t,e){let n=typeof t=="object"?t:Mo(),r=typeof t=="string"?t:e||"(default)",i=yl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=hf("firestore");o&&gm(i,...o)}return i}function Yt(t){return t._firestoreClient||zP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function zP(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,h){return new K_(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,BP(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new yb(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function uE(t,e){GP(t=$e(t,ft));let n=Yt(t);if(n._uninitializedComponentsProvider)throw new H(j.FAILED_PRECONDITION,"SDK cache is already specified.");wr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Dd;return HP(n,i,new em(i,r.cacheSizeBytes,e?.forceOwnership))}function lE(t){GP(t=$e(t,ft));let e=Yt(t);if(e._uninitializedComponentsProvider)throw new H(j.FAILED_PRECONDITION,"SDK cache is already specified.");wr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Dd;return HP(e,r,new fb(r,n.cacheSizeBytes))}function HP(t,e,n){let r=new jt;return t.asyncQueue.enqueue(()=>O(this,null,function*(){try{yield fg(t,n),yield vb(t,e),r.resolve()}catch(i){let o=i;if(!OP(o))throw o;wr("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function dE(t){if(t._initialized&&!t._terminated)throw new H(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new jt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{yield function(r){return O(this,null,function*(){if(!Xo.D())return Promise.resolve();let i=r+"main";yield Xo.delete(i)})}(Hb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function hE(t){return function(n){let r=new jt;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return Q$(yield oE(n),r)})),r.promise}(Yt(t=$e(t,ft)))}function fE(t){return c4(Yt(t=$e(t,ft)))}function pE(t){return u4(Yt(t=$e(t,ft)))}function gE(t,e){let n=Yt(t=$e(t,ft)),r=new bb;return f4(n,t._databaseId,e,r),r}function mE(t,e){return p4(Yt(t=$e(t,ft)),e).then(n=>n?new on(t,null,n.query):null)}function GP(t){if(t._initialized||t._terminated)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(en.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ur=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var lo=class{constructor(e){this._methodName=e}};var Ta=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}};var g4=/^__.*__$/,Eb=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,n,this.fieldTransforms):new is(e,this.data,n,this.fieldTransforms)}},nm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Br(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function WP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}var rm=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return im(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(WP(this.fu)&&g4.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Ib=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rd(e)}Fu(e,n,r,i=!1){return new rm({fu:e,methodName:n,vu:r,path:kt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function xa(t){let e=t._freezeSettings(),n=Rd(t._databaseId);return new Ib(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wm(t,e,n,r,i,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,i);wE("Data must be an object, but it was:",s,r);let a=YP(r,s),c,l;if(o.merge)c=new ir(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let g of o.mergeFields){let w=Sb(e,g,n);if(!s.contains(w))throw new H(j.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);XP(h,w)||h.push(w)}c=new ir(h),l=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,l=s.fieldTransforms;return new Eb(new yn(a),c,l)}var Td=class t extends lo{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function KP(t,e,n){return new rm({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Cb=class t extends lo{_toFieldTransform(e){return new Ea(e.path,new ns)}isEqual(e){return e instanceof t}},Db=class t extends lo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=KP(this,e,!0),r=this.Mu.map(o=>Pa(o,n)),i=new co(r);return new Ea(e.path,i)}isEqual(e){return e instanceof t&&$y(this.Mu,e.Mu)}},Tb=class t extends lo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=KP(this,e,!0),r=this.Mu.map(o=>Pa(o,n)),i=new uo(r);return new Ea(e.path,i)}isEqual(e){return e instanceof t&&$y(this.Mu,e.Mu)}},Ab=class t extends lo{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new rs(e.serializer,$x(e.serializer,this.xu));return new Ea(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function yE(t,e,n,r){let i=t.Fu(1,e,n);wE("Data must be an object, but it was:",i,r);let o=[],s=yn.empty();Ma(r,(c,l)=>{let h=_E(e,c,n);l=ze(l);let g=i.Su(h);if(l instanceof Td)o.push(h);else{let w=Pa(l,g);w!=null&&(o.push(h),s.set(h,w))}});let a=new ir(o);return new nm(s,a,i.fieldTransforms)}function vE(t,e,n,r,i,o){let s=t.Fu(1,e,n),a=[Sb(e,r,n)],c=[i];if(o.length%2!=0)throw new H(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(Sb(e,o[w])),c.push(o[w+1]);let l=[],h=yn.empty();for(let w=a.length-1;w>=0;--w)if(!XP(l,a[w])){let b=a[w],A=c[w];A=ze(A);let k=s.Su(b);if(A instanceof Td)l.push(b);else{let M=Pa(A,k);M!=null&&(l.push(b),h.set(b,M))}}let g=new ir(l);return new nm(h,g,s.fieldTransforms)}function QP(t,e,n,r=!1){return Pa(n,t.Fu(r?4:3,e))}function Pa(t,e){if(ZP(t=ze(t)))return wE("Unsupported field value:",e,t),YP(t,e);if(t instanceof lo)return function(r,i){if(!WP(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Pa(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $x(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=bt.fromDate(r);return{timestampValue:lu(i.serializer,o)}}if(r instanceof bt){let o=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lu(i.serializer,o)}}if(r instanceof Ta)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yi)return{bytesValue:Xx(i.serializer,r._byteString)};if(r instanceof at){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$b(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${pm(r)}`)}(t,e)}function YP(t,e){let n={};return Cx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(t,(r,i)=>{let o=Pa(i,e.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ZP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof Ta||t instanceof yi||t instanceof at||t instanceof lo)}function wE(t,e,n){if(!ZP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=pm(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Sb(t,e,n){if((e=ze(e))instanceof Ur)return e._internalPath;if(typeof e=="string")return _E(t,e);throw im("Field path arguments must be of type string or ",t,!1,void 0,n)}var m4=new RegExp("[~\\*/\\[\\]]");function _E(t,e,n){if(e.search(m4)>=0)throw im(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ur(...e.split("."))._internalPath}catch{throw im(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function im(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new H(j.INVALID_ARGUMENT,a+t+c)}function XP(t,e){return t.some(n=>n.isEqual(e))}var Aa=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Mb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(_m("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Mb=class extends Aa{data(){return super.data()}};function _m(t,e){return typeof e=="string"?_E(t,e):e instanceof Ur?e._internalPath:e._delegate._internalPath}function JP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ad=class{},Sa=class extends Ad{};function vi(t,e,...n){let r=[];e instanceof Ad&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof xb).length,a=o.filter(c=>c instanceof om).length;if(s>1||s>0&&a>0)throw new H(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var om=class t extends Sa{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return tR(e._query,n),new on(e.firestore,e.converter,a0(e._query,n))}_parse(e){let n=xa(e.firestore);return function(o,s,a,c,l,h,g){let w;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){dx(g,h);let b=[];for(let A of g)b.push(lx(c,o,A));w={arrayValue:{values:b}}}else w=lx(c,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||dx(g,h),w=QP(a,s,g,h==="in"||h==="not-in");return Le.create(l,h,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function bE(t,e,n){let r=e,i=_m("where",t);return om._create(i,r,n)}var xb=class t extends Ad{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ze.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)tR(s,c),s=a0(s,c)}(e._query,n),new on(e.firestore,e.converter,a0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Pb=class t extends Sa{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _a(o,s)}(e._query,this._field,this._direction);return new on(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new jr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function EE(t,e="asc"){let n=e,r=_m("orderBy",t);return Pb._create(r,n)}var sm=class t extends Sa{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new on(e.firestore,e.converter,Dg(e._query,this._limit,this._limitType))}};function IE(t){return UP("limit",t),sm._create("limit",t,"F")}function CE(t){return UP("limitToLast",t),sm._create("limitToLast",t,"L")}var am=class t extends Sa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=eR(e,this.type,this._docOrFields,this._inclusive);return new on(e.firestore,e.converter,function(i,o){return new jr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function DE(...t){return am._create("startAt",t,!0)}function TE(...t){return am._create("startAfter",t,!1)}var cm=class t extends Sa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=eR(e,this.type,this._docOrFields,this._inclusive);return new on(e.firestore,e.converter,function(i,o){return new jr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function AE(...t){return cm._create("endBefore",t,!1)}function SE(...t){return cm._create("endAt",t,!0)}function eR(t,e,n,r){if(n[0]=ze(n[0]),n[0]instanceof Aa)return function(o,s,a,c,l){if(!c)throw new H(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let g of nu(o))if(g.field.isKeyField())h.push(wa(s,c.key));else{let w=c.data.field(g.field);if(lm(w))throw new H(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let b=g.field.canonicalString();throw new H(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}h.push(w)}return new gi(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=xa(t.firestore);return function(s,a,c,l,h,g){let w=s.explicitOrderBy;if(h.length>w.length)throw new H(j.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let b=[];for(let A=0;A<h.length;A++){let k=h[A];if(w[A].field.isKeyField()){if(typeof k!="string")throw new H(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof k}`);if(!Bb(s)&&k.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${k}' contains a slash.`);let M=s.path.child(Ue.fromString(k));if(!J.isDocumentKey(M))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let U=new J(M);b.push(wa(a,U))}else{let M=QP(c,l,k);b.push(M)}}return new gi(b,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function lx(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new H(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bb(e)&&n.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ue.fromString(n));if(!J.isDocumentKey(r))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wa(t,new J(r))}if(n instanceof at)return wa(t,n._key);throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pm(n)}.`)}function dx(t,e){if(!Array.isArray(t)||t.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var _u=class{convertValue(e,n="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ma(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Ta(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Lb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ud(e));default:return null}}convertTimestamp(e){let n=ao(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ue.fromString(e);de(uP(r));let i=new es(r.get(1),r.get(3)),o=new J(r.popFirst(5));return i.isEqual(n)||Nt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function bm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Rb=class extends _u{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}};var so=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},br=class extends Aa{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Yo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(_m("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Yo=class extends br{data(e={}){return super.data(e)}},$r=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new so(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yo(this._firestore,this._userDataWriter,r.key,r,new so(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Yo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new so(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Yo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new so(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:y4(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function y4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}function Em(t,e){return t instanceof br&&e instanceof br?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $r&&e instanceof $r&&t._firestore===e._firestore&&vm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ME(t){t=$e(t,at);let e=$e(t.firestore,ft);return LP(Yt(e),t._key).then(n=>LE(e,t,n))}var ho=class extends _u{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}};function xE(t){t=$e(t,at);let e=$e(t.firestore,ft),n=Yt(e),r=new ho(e);return l4(n,t._key).then(i=>new br(e,r,t._key,i,new so(i!==null&&i.hasLocalMutations,!0),t.converter))}function PE(t){t=$e(t,at);let e=$e(t.firestore,ft);return LP(Yt(e),t._key,{source:"server"}).then(n=>LE(e,t,n))}function RE(t){t=$e(t,on);let e=$e(t.firestore,ft),n=Yt(e),r=new ho(e);return JP(t._query),jP(n,t._query).then(i=>new $r(e,r,t,i))}function NE(t){t=$e(t,on);let e=$e(t.firestore,ft),n=Yt(e),r=new ho(e);return d4(n,t._query).then(i=>new $r(e,r,t,i))}function kE(t){t=$e(t,on);let e=$e(t.firestore,ft),n=Yt(e),r=new ho(e);return jP(n,t._query,{source:"server"}).then(i=>new $r(e,r,t,i))}function Im(t,e,n){t=$e(t,at);let r=$e(t.firestore,ft),i=bm(t.converter,e,n);return Su(r,[wm(xa(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,At.none())])}function Cm(t,e,n,...r){t=$e(t,at);let i=$e(t.firestore,ft),o=xa(i),s;return s=typeof(e=ze(e))=="string"||e instanceof Ur?vE(o,"updateDoc",t._key,e,n,r):yE(o,"updateDoc",t._key,e),Su(i,[s.toMutation(t._key,At.exists(!0))])}function OE(t){return Su($e(t.firestore,ft),[new os(t._key,At.none())])}function FE(t,e){let n=$e(t.firestore,ft),r=Au(t),i=bm(t.converter,e);return Su(n,[wm(xa(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,At.exists(!1))]).then(()=>r)}function Dm(t,...e){var n,r,i;t=ze(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||_b(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(_b(e[s])){let g=e[s];e[s]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[s+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[s+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let c,l,h;if(t instanceof at)l=$e(t.firestore,ft),h=Eu(t._key.path),c={next:g=>{e[s]&&e[s](LE(l,t,g))},error:e[s+1],complete:e[s+2]};else{let g=$e(t,on);l=$e(g.firestore,ft),h=g._query;let w=new ho(l);c={next:b=>{e[s]&&e[s](new $r(l,w,g,b))},error:e[s+1],complete:e[s+2]},JP(t._query)}return function(w,b,A,k){let M=new vu(k),U=new Id(b,M,A);return w.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return Qb(yield wu(w),U)})),()=>{M.$a(),w.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return Yb(yield wu(w),U)}))}}(Yt(l),h,a,c)}function VE(t,e){return h4(Yt(t=$e(t,ft)),_b(e)?e:{next:e})}function Su(t,e){return function(r,i){let o=new jt;return r.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return H$(yield oE(r),i,o)})),o.promise}(Yt(t),e)}function LE(t,e,n){let r=n.docs.get(e._key),i=new ho(t);return new br(t,i,e._key,r,new so(n.hasPendingWrites,n.fromCache),e.converter)}var v4={maxAttempts:5};var um=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xa(e)}set(e,n,r){this._verifyNotCommitted();let i=Ko(e,this._firestore),o=bm(i.converter,n,r),s=wm(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,At.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Ko(e,this._firestore),s;return s=typeof(n=ze(n))=="string"||n instanceof Ur?vE(this._dataReader,"WriteBatch.update",o._key,n,r,i):yE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,At.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ko(e,this._firestore);return this._mutations=this._mutations.concat(new os(n._key,At.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ko(t,e){if((t=ze(t)).firestore!==e)throw new H(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Nb=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=xa(n)}get(n){let r=Ko(n,this._firestore),i=new Rb(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return oe();let s=o[0];if(s.isFoundDocument())return new Aa(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Aa(this._firestore,i,r._key,null,r.converter);throw oe()})}set(n,r,i){let o=Ko(n,this._firestore),s=bm(o.converter,r,i),a=wm(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Ko(n,this._firestore),a;return a=typeof(r=ze(r))=="string"||r instanceof Ur?vE(this._dataReader,"Transaction.update",s._key,r,i,o):yE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Ko(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Ko(e,this._firestore),r=new ho(this._firestore);return super.get(e).then(i=>new br(this._firestore,r,n._key,i._document,new so(!1,!1),n.converter))}};function jE(t,e,n){t=$e(t,ft);let r=Object.assign(Object.assign({},v4),n);return function(o){if(o.maxAttempts<1)throw new H(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new jt;return o.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){let l=yield a4(o);new mb(o.asyncQueue,l,a,s,c).Xa()})),c.promise}(Yt(t),i=>e(new Nb(t,i)),r)}function BE(){return new Td("deleteField")}function UE(){return new Cb("serverTimestamp")}function $E(...t){return new Db("arrayUnion",t)}function qE(...t){return new Tb("arrayRemove",t)}function zE(t){return new Ab("increment",t)}(function(e,n=!0){(function(i){bu=i})(yf),Ls(new Sr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ft(new L_(r.getProvider("auth-internal")),new $_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new es(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),xt(hM,"4.6.3",e),xt(hM,"4.6.3","esm2017")})();var kd=class{constructor(e){return e}},nR="firestore",HE=class{constructor(){return ca(nR)}};var GE=new X("angularfire2.firestore-instances");function w4(t,e){let n=qc(nR,t,e);return n&&new kd(n)}function _4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new kd(r)}}var b4={provide:HE,deps:[[new Rt,GE]]},E4={provide:kd,useFactory:w4,deps:[[new Rt,GE],Lr]};function rR(t,...e){return xt("angularfire",yr.full,"fst"),$n([E4,b4,{provide:GE,useFactory:_4(t),multi:!0,deps:[Re,Hn,Kn,ro,[new Rt,ua],[new Rt,Mn],...e]}])}var iR=no(qP,!0);var fR="firebasestorage.googleapis.com",pR="storageBucket",I4=2*60*1e3,C4=10*60*1e3,D4=1e3;var Et=class t extends gf{constructor(e,n,r=0){super(WE(e),`Firebase Storage: ${n} (${WE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return WE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},pt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(pt||{});function WE(t){return"storage/"+t}function tI(){let t="An unknown error occurred, please check the error payload for server response.";return new Et(pt.UNKNOWN,t)}function T4(t){return new Et(pt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function A4(t){return new Et(pt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function S4(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Et(pt.UNAUTHENTICATED,t)}function M4(){return new Et(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function x4(t){return new Et(pt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function gR(){return new Et(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mR(){return new Et(pt.CANCELED,"User canceled the upload/download.")}function P4(t){return new Et(pt.INVALID_URL,"Invalid URL '"+t+"'.")}function R4(t){return new Et(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function N4(){return new Et(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pR+"' property when initializing the app?")}function yR(){return new Et(pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function k4(){return new Et(pt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function O4(){return new Et(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function F4(t){return new Et(pt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ra(t){return new Et(pt.INVALID_ARGUMENT,t)}function vR(){return new Et(pt.APP_DELETED,"The Firebase app was deleted.")}function nI(t){return new Et(pt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fd(t,e){return new Et(pt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Od(t){throw new Et(pt.INTERNAL_ERROR,"Internal error: "+t)}var Rn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw R4(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(Q){Q.path_=decodeURIComponent(Q.path)}let h="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${h}/b/${i}/o${w}`,"i"),A={bucket:1,path:3},k=n===fR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",U=new RegExp(`^https?://${k}/${i}/${M}`,"i"),q=[{regex:a,indices:c,postModify:o},{regex:b,indices:A,postModify:l},{regex:U,indices:{bucket:1,path:2},postModify:l}];for(let Q=0;Q<q.length;Q++){let ue=q[Q],se=ue.regex.exec(e);if(se){let T=se[ue.indices.bucket],E=se[ue.indices.path];E||(E=""),r=new t(T,E),ue.postModify(r);break}}if(r==null)throw P4(e);return r}},QE=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function V4(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function h(...M){l||(l=!0,e.apply(null,M))}function g(M){i=setTimeout(()=>{i=null,t(b,c())},M)}function w(){o&&clearTimeout(o)}function b(M,...U){if(l){w();return}if(M){w(),h.call(null,M,...U);return}if(c()||s){w(),h.call(null,M,...U);return}r<64&&(r*=2);let q;a===1?(a=2,q=0):q=(r+Math.random())*1e3,g(q)}let A=!1;function k(M){A||(A=!0,w(),!l&&(i!==null?(M||(a=2),clearTimeout(i),g(0)):M||(a=1)))}return g(0),o=setTimeout(()=>{s=!0,k(!0)},n),k}function L4(t){t(!1)}function j4(t){return t!==void 0}function B4(t){return typeof t=="function"}function U4(t){return typeof t=="object"&&!Array.isArray(t)}function Sm(t){return typeof t=="string"||t instanceof String}function oR(t){return rI()&&t instanceof Blob}function rI(){return typeof Blob<"u"}function YE(t,e,n,r){if(r<e)throw Ra(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ra(`Invalid value for '${t}'. Expected ${n} or less.`)}function ls(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function wR(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Pu=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Pu||{});function _R(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var ZE=class{constructor(e,n,r,i,o,s,a,c,l,h,g,w=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=g,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,A)=>{this.resolve_=b,this.reject_=A,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new xu(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Pu.NO_ERROR,c=o.getStatus();if(!a||_R(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===Pu.ABORT;r(!1,new xu(!1,null,h));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new xu(l,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());j4(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=tI();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?vR():mR();s(c)}else{let c=gR();s(c)}};this.canceled_?n(!1,new xu(!1,null,!0)):this.backoffId_=V4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&L4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},xu=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function $4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function q4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function z4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function H4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function G4(t,e,n,r,i,o,s=!0){let a=wR(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return z4(l,e),$4(l,n),q4(l,o),H4(l,r),new ZE(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function W4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function K4(...t){let e=W4();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(rI())return new Blob(t);throw new Et(pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Q4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function Y4(t){if(typeof atob>"u")throw F4("base-64");return atob(t)}var or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Vd=class{constructor(e,n){this.data=e,this.contentType=n||null}};function iI(t,e){switch(t){case or.RAW:return new Vd(bR(e));case or.BASE64:case or.BASE64URL:return new Vd(ER(t,e));case or.DATA_URL:return new Vd(X4(e),J4(e))}throw tI()}function bR(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Z4(t){let e;try{e=decodeURIComponent(t)}catch{throw Fd(or.DATA_URL,"Malformed data URL.")}return bR(e)}function ER(t,e){switch(t){case or.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Fd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case or.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Fd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Y4(e)}catch(i){throw i.message.includes("polyfill")?i:Fd(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Am=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Fd(or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=eq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function X4(t){let e=new Am(t);return e.base64?ER(or.BASE64,e.rest):Z4(e.rest)}function J4(t){return new Am(t).contentType}function eq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var Ru=class t{constructor(e,n){let r=0,i="";oR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(oR(this.data_)){let r=this.data_,i=Q4(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(rI()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(K4.apply(null,n))}else{let n=e.map(s=>Sm(s)?iI(or.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function oI(t){let e;try{e=JSON.parse(t)}catch{return null}return U4(e)?e:null}function tq(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nq(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function IR(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function rq(t,e){return e}var sn=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||rq}},Tm=null;function iq(t){return!Sm(t)||t.length<2?t:IR(t)}function Mm(){if(Tm)return Tm;let t=[];t.push(new sn("bucket")),t.push(new sn("generation")),t.push(new sn("metageneration")),t.push(new sn("name","fullPath",!0));function e(o,s){return iq(s)}let n=new sn("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new sn("size");return i.xform=r,t.push(i),t.push(new sn("timeCreated")),t.push(new sn("updated")),t.push(new sn("md5Hash",null,!0)),t.push(new sn("cacheControl",null,!0)),t.push(new sn("contentDisposition",null,!0)),t.push(new sn("contentEncoding",null,!0)),t.push(new sn("contentLanguage",null,!0)),t.push(new sn("contentType",null,!0)),t.push(new sn("metadata","customMetadata",!0)),Tm=t,Tm}function oq(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new Rn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function sq(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return oq(r,t),r}function CR(t,e,n){let r=oI(e);return r===null?null:sq(t,r,n)}function aq(t,e,n,r){let i=oI(e);if(i===null||!Sm(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let h=t.bucket,g=t.fullPath,w="/b/"+s(h)+"/o/"+s(g),b=ls(w,n,r),A=wR({alt:"media",token:l});return b+A})[0]}function sI(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var sR="prefixes",aR="items";function cq(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[sR])for(let i of n[sR]){let o=i.replace(/\/$/,""),s=t._makeStorageReference(new Rn(e,o));r.prefixes.push(s)}if(n[aR])for(let i of n[aR]){let o=t._makeStorageReference(new Rn(e,i.name));r.items.push(o)}return r}function uq(t,e,n){let r=oI(n);return r===null?null:cq(t,e,r)}var qr=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function _i(t){if(!t)throw tI()}function xm(t,e){function n(r,i){let o=CR(t,i,e);return _i(o!==null),o}return n}function lq(t,e){function n(r,i){let o=uq(t,e,i);return _i(o!==null),o}return n}function dq(t,e){function n(r,i){let o=CR(t,i,e);return _i(o!==null),aq(o,i,t.host,t._protocol)}return n}function Ou(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=M4():i=S4():n.getStatus()===402?i=A4(t.bucket):n.getStatus()===403?i=x4(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Pm(t){let e=Ou(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=T4(t.path)),o.serverResponse=i.serverResponse,o}return n}function DR(t,e,n){let r=e.fullServerUrl(),i=ls(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new qr(i,o,xm(t,n),s);return a.errorHandler=Pm(e),a}function hq(t,e,n,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=ls(s,t.host,t._protocol),c="GET",l=t.maxOperationRetryTime,h=new qr(a,c,lq(t,e.bucket),l);return h.urlParams=o,h.errorHandler=Ou(e),h}function fq(t,e,n){let r=e.fullServerUrl(),i=ls(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new qr(i,o,dq(t,n),s);return a.errorHandler=Pm(e),a}function pq(t,e,n,r){let i=e.fullServerUrl(),o=ls(i,t.host,t._protocol),s="PATCH",a=sI(n,r),c={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,h=new qr(o,s,xm(t,r),l);return h.headers=c,h.body=a,h.errorHandler=Pm(e),h}function gq(t,e){let n=e.fullServerUrl(),r=ls(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,l){}let a=new qr(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=Pm(e),a}function mq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function TR(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mq(null,e)),r}function yq(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let q="";for(let Q=0;Q<2;Q++)q=q+Math.random().toString().slice(2);return q}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=TR(e,r,i),h=sI(l,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,w=`\r
--`+c+"--",b=Ru.getBlob(g,r,w);if(b===null)throw yR();let A={name:l.fullPath},k=ls(o,t.host,t._protocol),M="POST",U=t.maxUploadRetryTime,Y=new qr(k,M,xm(t,n),U);return Y.urlParams=A,Y.headers=s,Y.body=b.uploadData(),Y.errorHandler=Ou(e),Y}var Nu=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function aI(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{_i(!1)}return _i(!!n&&(e||["active"]).indexOf(n)!==-1),n}function vq(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s=TR(e,r,i),a={name:s.fullPath},c=ls(o,t.host,t._protocol),l="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},g=sI(s,n),w=t.maxUploadRetryTime;function b(k){aI(k);let M;try{M=k.getResponseHeader("X-Goog-Upload-URL")}catch{_i(!1)}return _i(Sm(M)),M}let A=new qr(c,l,b,w);return A.urlParams=a,A.headers=h,A.body=g,A.errorHandler=Ou(e),A}function wq(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let h=aI(l,["active","final"]),g=null;try{g=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{_i(!1)}g||_i(!1);let w=Number(g);return _i(!isNaN(w)),new Nu(w,r.size(),h==="final")}let s="POST",a=t.maxUploadRetryTime,c=new qr(n,s,o,a);return c.headers=i,c.errorHandler=Ou(e),c}var cR=256*1024;function _q(t,e,n,r,i,o,s,a){let c=new Nu(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw k4();let l=c.total-c.current,h=l;i>0&&(h=Math.min(h,i));let g=c.current,w=g+h,b="";h===0?b="finalize":l===h?b="upload, finalize":b="upload";let A={"X-Goog-Upload-Command":b,"X-Goog-Upload-Offset":`${c.current}`},k=r.slice(g,w);if(k===null)throw yR();function M(Q,ue){let se=aI(Q,["active","final"]),T=c.current+h,E=r.size(),D;return se==="final"?D=xm(e,o)(Q,ue):D=null,new Nu(T,E,se==="final",D)}let U="POST",Y=e.maxUploadRetryTime,q=new qr(n,U,M,Y);return q.headers=A,q.body=k.uploadData(),q.progressCallback=a||null,q.errorHandler=Ou(t),q}var AR={STATE_CHANGED:"state_changed"},vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KE(t){switch(t){case"running":case"pausing":case"canceling":return vn.RUNNING;case"paused":return vn.PAUSED;case"success":return vn.SUCCESS;case"canceled":return vn.CANCELED;case"error":return vn.ERROR;default:return vn.ERROR}}var XE=class{constructor(e,n,r){if(B4(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Mu(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var uR=null,JE=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Od("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Od("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Od("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Od("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Od("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},eI=class extends JE{initXhr(){this.xhr_.responseType="text"}};function wi(){return uR?uR():new eI}var Ld=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Mm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(pt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(_R(i.status,[]))if(o)i=gR();else{this.sleepTime=Math.max(this.sleepTime*2,D4),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(pt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=vq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wi,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=wq(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,wi,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=cR*this._chunkMultiplier,n=new Nu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=_q(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,wi,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){cR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=DR(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,wi,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=yq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wi,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=mR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=KE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let o=new XE(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(KE(this._state)){case vn.SUCCESS:Mu(this._resolve.bind(null,this.snapshot))();break;case vn.CANCELED:case vn.ERROR:let n=this._reject;Mu(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(KE(this._state)){case vn.RUNNING:case vn.PAUSED:e.next&&Mu(e.next.bind(e,this.snapshot))();break;case vn.SUCCESS:e.complete&&Mu(e.complete.bind(e))();break;case vn.CANCELED:case vn.ERROR:e.error&&Mu(e.error.bind(e,this._error))();break;default:e.error&&Mu(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var ku=class t{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IR(this._location.path)}get storage(){return this._service}get parent(){let e=tq(this._location.path);if(e===null)return null;let n=new Rn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nI(e)}};function bq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ld(t,new Ru(e),n)}function Eq(t){let e={prefixes:[],items:[]};return SR(t,e).then(()=>e)}function SR(t,e,n){return O(this,null,function*(){let i=yield MR(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield SR(t,e,i.nextPageToken))})}function MR(t,e){e!=null&&typeof e.maxResults=="number"&&YE("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=hq(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,wi)}function Iq(t){t._throwIfRoot("getMetadata");let e=DR(t.storage,t._location,Mm());return t.storage.makeRequestWithTokens(e,wi)}function Cq(t,e){t._throwIfRoot("updateMetadata");let n=pq(t.storage,t._location,e,Mm());return t.storage.makeRequestWithTokens(n,wi)}function Dq(t){t._throwIfRoot("getDownloadURL");let e=fq(t.storage,t._location,Mm());return t.storage.makeRequestWithTokens(e,wi).then(n=>{if(n===null)throw O4();return n})}function Tq(t){t._throwIfRoot("deleteObject");let e=gq(t.storage,t._location);return t.storage.makeRequestWithTokens(e,wi)}function xR(t,e){let n=nq(t._location.path,e),r=new Rn(t._location.bucket,n);return new ku(t.storage,r)}function Aq(t){return/^[A-Za-z]+:\/\//.test(t)}function Sq(t,e){return new ku(t,e)}function PR(t,e){if(t instanceof jd){let n=t;if(n._bucket==null)throw N4();let r=new ku(n,n._bucket);return e!=null?PR(r,e):r}else return e!==void 0?xR(t,e):t}function Mq(t,e){if(e&&Aq(e)){if(t instanceof jd)return Sq(t,e);throw Ra("To use ref(service, url), the first argument must be a Storage instance.")}else return PR(t,e)}function lR(t,e){let n=e?.[pR];return n==null?null:Rn.makeFromBucketSpec(n,t)}function xq(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ff(i,t.app.options.projectId))}var jd=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=fR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I4,this._maxUploadRetryTime=C4,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=lR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=lR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){YE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){YE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return O(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return O(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ku(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new QE(vR());{let s=G4(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return O(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},dR="@firebase/storage",hR="0.12.5";var RR="storage";function cI(t,e,n){return t=ze(t),bq(t,e,n)}function uI(t){return t=ze(t),Iq(t)}function lI(t,e){return t=ze(t),Cq(t,e)}function dI(t,e){return t=ze(t),MR(t,e)}function hI(t){return t=ze(t),Eq(t)}function fI(t){return t=ze(t),Dq(t)}function pI(t){return t=ze(t),Tq(t)}function Rm(t,e){return t=ze(t),Mq(t,e)}function NR(t,e){return xR(t,e)}function kR(t=Mo(),e){t=ze(t);let r=yl(t,RR).getImmediate({identifier:e}),i=hf("storage");return i&&Nm(r,...i),r}function Nm(t,e,n,r={}){xq(t,e,n,r)}function Pq(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new jd(n,r,i,e,yf)}function Rq(){Ls(new Sr(RR,Pq,"PUBLIC").setMultipleInstances(!0)),xt(dR,hR,""),xt(dR,hR,"esm2017")}Rq();var Bd=class{constructor(e){return e}},OR="storage",gI=class{constructor(){return ca(OR)}};var mI=new X("angularfire2.storage-instances");function Nq(t,e){let n=qc(OR,t,e);return n&&new Bd(n)}function kq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bd(r)}}var Oq={provide:gI,deps:[[new Rt,mI]]},Fq={provide:Bd,useFactory:Nq,deps:[[new Rt,mI],Lr]};function FR(t,...e){return xt("angularfire",yr.full,"gcs"),$n([Fq,Oq,{provide:mI,useFactory:kq(t),multi:!0,deps:[Re,Hn,Kn,ro,[new Rt,ua],[new Rt,Mn],...e]}])}var VR=no(kR,!0);var Ae="primary",th=Symbol("RouteTitle"),bI=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Bu(t){return new bI(t)}function Vq(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Lq(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bi(t[n],e[n]))return!1;return!0}function bi(t,e){let n=t?EI(t):void 0,r=e?EI(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qR(t[i],e[i]))return!1;return!0}function EI(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function zR(t){return t.length>0?t[t.length-1]:null}function ps(t){return sv(t)?t:jo(t)?xe(Promise.resolve(t)):le(t)}var jq={exact:GR,subset:WR},HR={exact:Bq,subset:Uq,ignored:()=>!0};function LR(t,e,n){return jq[n.paths](t.root,e.root,n.matrixParams)&&HR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Bq(t,e){return bi(t,e)}function GR(t,e,n){if(!ka(t.segments,e.segments)||!Fm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!GR(t.children[r],e.children[r],n))return!1;return!0}function Uq(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qR(t[n],e[n]))}function WR(t,e,n){return KR(t,e,e.segments,n)}function KR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ka(i,n)||e.hasChildren()||!Fm(i,n,r))}else if(t.segments.length===n.length){if(!ka(t.segments,n)||!Fm(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!WR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ka(t.segments,i)||!Fm(t.segments,i,r)||!t.children[Ae]?!1:KR(t.children[Ae],e,o,r)}}function Fm(t,e,n){return e.every((r,i)=>HR[n](t[i].parameters,r.parameters))}var ds=class{constructor(e=new Qe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bu(this.queryParams),this._queryParamMap}toString(){return zq.serialize(this)}},Qe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vm(this)}},Na=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Bu(this.parameters),this._parameterMap}toString(){return YR(this)}};function $q(t,e){return ka(t,e)&&t.every((n,r)=>bi(n.parameters,e[r].parameters))}function ka(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function qq(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ae&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ae&&(n=n.concat(e(i,r)))}),n}var KI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:()=>new jm,providedIn:"root"});let t=e;return t})(),jm=class{parse(e){let n=new CI(e);return new ds(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ud(e.root,!0)}`,r=Wq(e.queryParams),i=typeof e.fragment=="string"?`#${Hq(e.fragment)}`:"";return`${n}${r}${i}`}},zq=new jm;function Vm(t){return t.segments.map(e=>YR(e)).join("/")}function Ud(t,e){if(!t.hasChildren())return Vm(t);if(e){let n=t.children[Ae]?Ud(t.children[Ae],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ae&&r.push(`${i}:${Ud(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=qq(t,(r,i)=>i===Ae?[Ud(t.children[Ae],!1)]:[`${i}:${Ud(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ae]!=null?`${Vm(t)}/${n[0]}`:`${Vm(t)}/(${n.join("//")})`}}function QR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function km(t){return QR(t).replace(/%3B/gi,";")}function Hq(t){return encodeURI(t)}function II(t){return QR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lm(t){return decodeURIComponent(t)}function jR(t){return Lm(t.replace(/\+/g,"%20"))}function YR(t){return`${II(t.path)}${Gq(t.parameters)}`}function Gq(t){return Object.entries(t).map(([e,n])=>`;${II(e)}=${II(n)}`).join("")}function Wq(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${km(n)}=${km(i)}`).join("&"):`${km(n)}=${km(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Kq=/^[^\/()?;#]+/;function yI(t){let e=t.match(Kq);return e?e[0]:""}var Qq=/^[^\/()?;=#]+/;function Yq(t){let e=t.match(Qq);return e?e[0]:""}var Zq=/^[^=?&#]+/;function Xq(t){let e=t.match(Zq);return e?e[0]:""}var Jq=/^[^&#]+/;function e3(t){let e=t.match(Jq);return e?e[0]:""}var CI=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ae]=new Qe(e,n)),r}parseSegment(){let e=yI(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(e),new Na(Lm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Yq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=yI(this.remaining);i&&(r=i,this.capture(r))}e[Lm(n)]=Lm(r)}parseQueryParam(e){let n=Xq(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=e3(this.remaining);s&&(r=s,this.capture(r))}let i=jR(n),o=jR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=yI(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new fe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ae);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Ae]:new Qe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new fe(4011,!1)}};function ZR(t){return t.segments.length>0?new Qe([],{[Ae]:t}):t}function XR(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=XR(i);if(r===Ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Qe(t.segments,e);return t3(n)}function t3(t){if(t.numberOfChildren===1&&t.children[Ae]){let e=t.children[Ae];return new Qe(t.segments.concat(e.segments),e.children)}return t}function Uu(t){return t instanceof ds}function n3(t,e,n=null,r=null){let i=JR(t);return e1(i,e,n,r)}function JR(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Qe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=ZR(r);return e??i}function e1(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return vI(i,i,i,n,r);let o=r3(e);if(o.toRoot())return vI(i,i,new Qe([],{}),n,r);let s=i3(o,i,t),a=s.processChildren?zd(s.segmentGroup,s.index,o.commands):n1(s.segmentGroup,s.index,o.commands);return vI(i,s.segmentGroup,a,n,r)}function Bm(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Wd(t){return typeof t=="object"&&t!=null&&t.outlets}function vI(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=t1(t,e,n);let a=ZR(XR(s));return new ds(a,o,i)}function t1(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=t1(o,e,n)}),new Qe(t.segments,r)}var Um=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Bm(r[0]))throw new fe(4003,!1);let i=r.find(Wd);if(i&&i!==zR(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function r3(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Um(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Um(n,e,r)}var Lu=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function i3(t,e,n){if(t.isAbsolute)return new Lu(e,!0,0);if(!n)return new Lu(e,!1,NaN);if(n.parent===null)return new Lu(n,!0,0);let r=Bm(t.commands[0])?0:1,i=n.segments.length-1+r;return o3(n,i,t.numberOfDoubleDots)}function o3(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new Lu(r,!1,i-o)}function s3(t){return Wd(t[0])?t[0].outlets:{[Ae]:t}}function n1(t,e,n){if(t??=new Qe([],{}),t.segments.length===0&&t.hasChildren())return zd(t,e,n);let r=a3(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Qe(t.segments.slice(0,r.pathIndex),{});return o.children[Ae]=new Qe(t.segments.slice(r.pathIndex),t.children),zd(o,0,i)}else return r.match&&i.length===0?new Qe(t.segments,{}):r.match&&!t.hasChildren()?DI(t,e,n):r.match?zd(t,0,i):DI(t,e,n)}function zd(t,e,n){if(n.length===0)return new Qe(t.segments,{});{let r=s3(n),i={};if(Object.keys(r).some(o=>o!==Ae)&&t.children[Ae]&&t.numberOfChildren===1&&t.children[Ae].segments.length===0){let o=zd(t.children[Ae],e,n);return new Qe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=n1(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Qe(t.segments,i)}}function a3(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Wd(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!UR(c,l,s))return o;r+=2}else{if(!UR(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function DI(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Wd(o)){let c=c3(o.outlets);return new Qe(r,c)}if(i===0&&Bm(n[0])){let c=t.segments[e];r.push(new Na(c.path,BR(n[0]))),i++;continue}let s=Wd(o)?o.outlets[Ae]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Bm(a)?(r.push(new Na(s,BR(a))),i+=2):(r.push(new Na(s,{})),i++)}return new Qe(r,{})}function c3(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=DI(new Qe([],{}),0,r))}),e}function BR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function UR(t,e,n){return t==n.path&&bi(e,n.parameters)}var Hd="imperative",an=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(an||{}),Er=class{constructor(e,n){this.id=e,this.url=n}},Kd=class extends Er{constructor(e,n,r="imperative",i=null){super(e,n),this.type=an.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hs=class extends Er{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=an.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ar=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ar||{}),TI=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(TI||{}),fs=class extends Er{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=an.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Oa=class extends Er{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=an.NavigationSkipped}},Qd=class extends Er{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=an.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$m=class extends Er{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=an.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},AI=class extends Er{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=an.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},SI=class extends Er{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=an.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},MI=class extends Er{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=an.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xI=class extends Er{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=an.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},PI=class{constructor(e){this.route=e,this.type=an.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},RI=class{constructor(e){this.route=e,this.type=an.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},NI=class{constructor(e){this.snapshot=e,this.type=an.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kI=class{constructor(e){this.snapshot=e,this.type=an.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},OI=class{constructor(e){this.snapshot=e,this.type=an.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},FI=class{constructor(e){this.snapshot=e,this.type=an.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Yd=class{},Zd=class{constructor(e){this.url=e}};var VI=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Km,this.attachRef=null}},Km=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new VI,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=LI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=LI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=jI(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jI(e,this._root).map(n=>n.value)}};function LI(t,e){if(t===e.value)return e;for(let n of e.children){let r=LI(t,n);if(r)return r}return null}function jI(t,e){if(t===e.value)return[e];for(let n of e.children){let r=jI(t,n);if(r.length)return r.unshift(e),r}return[]}var sr=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Vu(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var zm=class extends qm{constructor(e,n){super(e),this.snapshot=n,YI(this,e)}toString(){return this.snapshot.toString()}};function r1(t){let e=u3(t),n=new Gt([new Na("",{})]),r=new Gt({}),i=new Gt({}),o=new Gt({}),s=new Gt(""),a=new Fa(n,r,o,s,i,Ae,t,e.root);return a.snapshot=e.root,new zm(new sr(a,[]),e)}function u3(t){let e={},n={},r={},i="",o=new Xd([],e,r,i,n,Ae,t,null,{});return new Hm("",new sr(o,[]))}var Fa=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ae(l=>l[th]))??le(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Bu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Bu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function QI(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:ne(ne({},e.params),t.params),data:ne(ne({},e.data),t.data),resolve:ne(ne(ne(ne({},t.data),e.data),i?.data),t._resolvedData)}:r={params:ne({},t.params),data:ne({},t.data),resolve:ne(ne({},t.data),t._resolvedData??{})},i&&o1(i)&&(r.resolve[th]=i.title),r}var Xd=class{get title(){return this.data?.[th]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Hm=class extends qm{constructor(e,n){super(n),this.url=e,YI(this,n)}toString(){return i1(this._root)}};function YI(t,e){e.value._routerState=t,e.children.forEach(n=>YI(t,n))}function i1(t){let e=t.children.length>0?` { ${t.children.map(i1).join(", ")} } `:"";return`${t.value}${e}`}function wI(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),bi(e.params,n.params)||t.paramsSubject.next(n.params),Lq(e.url,n.url)||t.urlSubject.next(n.url),bi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function BI(t,e){let n=bi(t.params,e.params)&&$q(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||BI(t.parent,e.parent))}function o1(t){return typeof t.title=="string"||t.title===null}var nh=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ae,this.activateEvents=new fn,this.deactivateEvents=new fn,this.attachEvents=new fn,this.detachEvents=new fn,this.parentContexts=ie(Km),this.location=ie(kc),this.changeDetector=ie(eo),this.environmentInjector=ie(Un),this.inputBinder=ie(ZI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new UI(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=vt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vo]});let t=e;return t})(),UI=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Fa?this.route:e===Km?this.childContexts:this.parent.get(e,n)}},ZI=new X("");function l3(t,e,n){let r=Jd(t,e._root,n?n._root:void 0);return new zm(r,e)}function Jd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=d3(t,e,n);return new sr(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Jd(t,a)),s}}let r=h3(e.value),i=e.children.map(o=>Jd(t,o));return new sr(r,i)}}function d3(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Jd(t,r,i);return Jd(t,r)})}function h3(t){return new Fa(new Gt(t.url),new Gt(t.params),new Gt(t.queryParams),new Gt(t.fragment),new Gt(t.data),t.outlet,t.component,t)}var s1="ngNavigationCancelingError";function a1(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Uu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=c1(!1,ar.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function c1(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[s1]=!0,n.cancellationCode=e,n}function f3(t){return u1(t)&&Uu(t.url)}function u1(t){return!!t&&t[s1]}var p3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Je({type:e,selectors:[["ng-component"]],standalone:!0,features:[et],decls:1,vars:0,template:function(i,o){i&1&&it(0,"router-outlet")},dependencies:[nh],encapsulation:2});let t=e;return t})();function g3(t,e){return t.providers&&!t._injector&&(t._injector=Yw(t.providers,e,`Route: ${t.path}`)),t._injector??e}function XI(t){let e=t.children&&t.children.map(XI),n=e?qe(ne({},t),{children:e}):ne({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ae&&(n.component=p3),n}function Ei(t){return t.outlet||Ae}function m3(t,e){let n=t.filter(r=>Ei(r)===e);return n.push(...t.filter(r=>Ei(r)!==e)),n}function rh(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var y3=(t,e,n,r)=>ae(i=>(new $I(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),$I=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),wI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Vu(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Vu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Vu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Vu(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new FI(o.value.snapshot))}),e.children.length&&this.forwardEvent(new kI(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(wI(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),wI(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=rh(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Gm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ju=class{constructor(e,n){this.component=e,this.route=n}};function v3(t,e,n){let r=t._root,i=e?e._root:null;return $d(r,i,n,[r.value])}function w3(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function qu(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!CT(t)?t:e.get(t):r}function $d(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vu(e);return t.children.forEach(s=>{_3(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Gd(a,n.getContext(s),i)),i}function _3(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=b3(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Gm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?$d(t,e,a?a.children:null,r,i):$d(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ju(a.outlet.component,s))}else s&&Gd(e,a,i),i.canActivateChecks.push(new Gm(r)),o.component?$d(t,null,a?a.children:null,r,i):$d(t,null,n,r,i);return i}function b3(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ka(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ka(t.url,e.url)||!bi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!BI(t,e)||!bi(t.queryParams,e.queryParams);case"paramsChange":default:return!BI(t,e)}}function Gd(t,e,n){let r=Vu(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Gd(s,e.children.getContext(o),n):Gd(s,null,n):Gd(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ju(e.outlet.component,i)):n.canDeactivateChecks.push(new ju(null,i)):n.canDeactivateChecks.push(new ju(null,i))}function ih(t){return typeof t=="function"}function E3(t){return typeof t=="boolean"}function I3(t){return t&&ih(t.canLoad)}function C3(t){return t&&ih(t.canActivate)}function D3(t){return t&&ih(t.canActivateChild)}function T3(t){return t&&ih(t.canDeactivate)}function A3(t){return t&&ih(t.canMatch)}function l1(t){return t instanceof $i||t?.name==="EmptyError"}var Om=Symbol("INITIAL_VALUE");function $u(){return Xe(t=>qf(t.map(e=>e.pipe(qi(1),zs(Om)))).pipe(ae(e=>{for(let n of e)if(n!==!0){if(n===Om)return Om;if(n===!1||n instanceof ds)return n}return!0}),Xt(e=>e!==Om),qi(1)))}function S3(t,e){return Wt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?le(qe(ne({},n),{guardsResult:!0})):M3(s,r,i,t).pipe(Wt(a=>a&&E3(a)?x3(r,o,t,e):le(a)),ae(a=>qe(ne({},n),{guardsResult:a})))})}function M3(t,e,n,r){return xe(t).pipe(Wt(i=>O3(i.component,i.route,n,e,r)),hr(i=>i!==!0,!0))}function x3(t,e,n,r){return xe(e).pipe(Po(i=>vc(R3(i.route.parent,r),P3(i.route,r),k3(t,i.path,n),N3(t,i.route,n))),hr(i=>i!==!0,!0))}function P3(t,e){return t!==null&&e&&e(new OI(t)),le(!0)}function R3(t,e){return t!==null&&e&&e(new NI(t)),le(!0)}function N3(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let i=r.map(o=>zf(()=>{let s=rh(e)??n,a=qu(o,s),c=C3(a)?a.canActivate(e,t):Wi(s,()=>a(e,t));return ps(c).pipe(hr())}));return le(i).pipe($u())}function k3(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>w3(s)).filter(s=>s!==null).map(s=>zf(()=>{let a=s.guards.map(c=>{let l=rh(s.node)??n,h=qu(c,l),g=D3(h)?h.canActivateChild(r,t):Wi(l,()=>h(r,t));return ps(g).pipe(hr())});return le(a).pipe($u())}));return le(o).pipe($u())}function O3(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return le(!0);let s=o.map(a=>{let c=rh(e)??i,l=qu(a,c),h=T3(l)?l.canDeactivate(t,e,n,r):Wi(c,()=>l(t,e,n,r));return ps(h).pipe(hr())});return le(s).pipe($u())}function F3(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return le(!0);let o=i.map(s=>{let a=qu(s,t),c=I3(a)?a.canLoad(e,n):Wi(t,()=>a(e,n));return ps(c)});return le(o).pipe($u(),d1(r))}function d1(t){return ev(yt(e=>{if(Uu(e))throw a1(t,e)}),ae(e=>e===!0))}function V3(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return le(!0);let o=i.map(s=>{let a=qu(s,t),c=A3(a)?a.canMatch(e,n):Wi(t,()=>a(e,n));return ps(c)});return le(o).pipe($u(),d1(r))}var eh=class{constructor(e){this.segmentGroup=e||null}},Wm=class extends Error{constructor(e){super(),this.urlTree=e}};function Fu(t){return yc(new eh(t))}function L3(t){return yc(new fe(4e3,!1))}function j3(t){return yc(c1(!1,ar.GuardRejected))}var qI=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return le(r);if(i.numberOfChildren>1||!i.children[Ae])return L3(e.redirectTo);i=i.children[Ae]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Wm(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new ds(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Qe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},zI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B3(t,e,n,r,i){let o=JI(t,e,n);return o.matched?(r=g3(e,r),V3(r,e,n,i).pipe(ae(s=>s===!0?o:ne({},zI)))):le(o)}function JI(t,e,n){if(e.path==="**")return U3(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?ne({},zI):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Vq)(n,t,e);if(!i)return ne({},zI);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?ne(ne({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function U3(t){return{matched:!0,parameters:t.length>0?zR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function $R(t,e,n,r){return n.length>0&&z3(t,n,r)?{segmentGroup:new Qe(e,q3(r,new Qe(n,t.children))),slicedSegments:[]}:n.length===0&&H3(t,n,r)?{segmentGroup:new Qe(t.segments,$3(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Qe(t.segments,t.children),slicedSegments:n}}function $3(t,e,n,r){let i={};for(let o of n)if(Qm(t,e,o)&&!r[Ei(o)]){let s=new Qe([],{});i[Ei(o)]=s}return ne(ne({},r),i)}function q3(t,e){let n={};n[Ae]=e;for(let r of t)if(r.path===""&&Ei(r)!==Ae){let i=new Qe([],{});n[Ei(r)]=i}return n}function z3(t,e,n){return n.some(r=>Qm(t,e,r)&&Ei(r)!==Ae)}function H3(t,e,n){return n.some(r=>Qm(t,e,r))}function Qm(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function G3(t,e,n,r){return Ei(t)!==r&&(r===Ae||!Qm(e,n,t))?!1:JI(e,t,n).matched}function W3(t,e,n){return e.length===0&&!t.children[n]}var HI=class{};function K3(t,e,n,r,i,o,s="emptyOnly"){return new GI(t,e,n,r,i,s,o).recognize()}var Q3=31,GI=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new qI(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new fe(4002,`'${e.segmentGroup}'`)}recognize(){let e=$R(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(n=>{let r=new Xd([],Object.freeze({}),Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ae,this.rootComponentType,null,{}),i=new sr(r,n),o=new Hm("",i),s=n3(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Ae).pipe(xo(r=>{if(r instanceof Wm)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof eh?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=QI(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ae(o=>o instanceof sr?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return xe(i).pipe(Po(o=>{let s=r.children[o],a=m3(n,o);return this.processSegmentGroup(e,a,s,o)}),qs((o,s)=>(o.push(...s),o)),Ro(null),hv(),Wt(o=>{if(o===null)return Fu(r);let s=h1(o);return Y3(s),le(s)}))}processSegment(e,n,r,i,o,s){return xe(n).pipe(Po(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(xo(c=>{if(c instanceof eh)return le(null);throw c}))),hr(a=>!!a),xo(a=>{if(l1(a))return W3(r,i,o)?le(new HI):Fu(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return G3(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Fu(i):Fu(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:h}=JI(n,i,o);if(!a)return Fu(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Q3&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,g).pipe(Wt(w=>this.processSegment(e,r,n,w.concat(h),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=B3(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Xe(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Xe(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:g,parameters:w}=a,b=new Xd(h,w,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,X3(r),Ei(r),r.component??r._loadedComponent??null,r,J3(r)),{segmentGroup:A,slicedSegments:k}=$R(n,h,g,c);if(k.length===0&&A.hasChildren())return this.processChildren(l,c,A).pipe(ae(U=>U===null?null:new sr(b,U)));if(c.length===0&&k.length===0)return le(new sr(b,[]));let M=Ei(r)===o;return this.processSegment(l,c,A,k,M?Ae:o,!0).pipe(ae(U=>new sr(b,U instanceof sr?[U]:[])))}))):Fu(n)))}getChildConfig(e,n,r){return n.children?le({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?le({routes:n._loadedRoutes,injector:n._loadedInjector}):F3(e,n,r,this.urlSerializer).pipe(Wt(i=>i?this.configLoader.loadChildren(e,n).pipe(yt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):j3(n))):le({routes:[],injector:e})}};function Y3(t){t.sort((e,n)=>e.value.outlet===Ae?-1:n.value.outlet===Ae?1:e.value.outlet.localeCompare(n.value.outlet))}function Z3(t){let e=t.value.routeConfig;return e&&e.path===""}function h1(t){let e=[],n=new Set;for(let r of t){if(!Z3(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=h1(r.children);e.push(new sr(r.value,i))}return e.filter(r=>!n.has(r))}function X3(t){return t.data||{}}function J3(t){return t.resolve||{}}function e5(t,e,n,r,i,o){return Wt(s=>K3(t,e,n,r,s.extractedUrl,i,o).pipe(ae(({state:a,tree:c})=>qe(ne({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function t5(t,e){return Wt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return le(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of f1(c))s.add(l);let a=0;return xe(s).pipe(Po(c=>o.has(c)?n5(c,r,t,e):(c.data=QI(c,c.parent,t).resolve,le(void 0))),yt(()=>a++),wc(1),Wt(c=>a===s.size?le(n):Tn))})}function f1(t){let e=t.children.map(n=>f1(n)).flat();return[t,...e]}function n5(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!o1(i)&&(o[th]=i.title),r5(o,t,e,r).pipe(ae(s=>(t._resolvedData=s,t.data=QI(t,t.parent,n).resolve,null)))}function r5(t,e,n,r){let i=EI(t);if(i.length===0)return le({});let o={};return xe(i).pipe(Wt(s=>i5(t[s],e,n,r).pipe(hr(),yt(a=>{o[s]=a}))),wc(1),lv(o),xo(s=>l1(s)?Tn:yc(s)))}function i5(t,e,n,r){let i=rh(e)??r,o=qu(t,i),s=o.resolve?o.resolve(e,n):Wi(i,()=>o(e,n));return ps(s)}function _I(t){return Xe(e=>{let n=t(e);return n?xe(n).pipe(ae(()=>e)):le(e)})}var p1=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===Ae);return i}getResolvedTitleForRoute(r){return r.data[th]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:()=>ie(o5),providedIn:"root"});let t=e;return t})(),o5=(()=>{let e=class e extends p1{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(K(iM))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eC=new X("",{providedIn:"root",factory:()=>({})}),tC=new X(""),s5=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ie(Jw)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return le(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ps(r.loadComponent()).pipe(ae(g1),yt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),xr(()=>{this.componentLoaders.delete(r)})),o=new fc(i,()=>new Ct).pipe(hc());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return le({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=a5(i,this.compiler,r,this.onLoadEndListener).pipe(xr(()=>{this.childrenLoaders.delete(i)})),a=new fc(s,()=>new Ct).pipe(hc());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function a5(t,e,n,r){return ps(t.loadChildren()).pipe(ae(g1),Wt(i=>i instanceof Nl||Array.isArray(i)?le(i):xe(e.compileModuleAsync(i))),ae(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(tC,[],{optional:!0,self:!0}).flat()),{routes:s.map(XI),injector:o}}))}function c5(t){return t&&typeof t=="object"&&"default"in t}function g1(t){return c5(t)?t.default:t}var nC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:()=>ie(u5),providedIn:"root"});let t=e;return t})(),u5=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),l5=new X("");var d5=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ct,this.transitionAbortSubject=new Ct,this.configLoader=ie(s5),this.environmentInjector=ie(Un),this.urlSerializer=ie(KI),this.rootContexts=ie(Km),this.location=ie(jl),this.inputBindingEnabled=ie(ZI,{optional:!0})!==null,this.titleStrategy=ie(p1),this.options=ie(eC,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ie(nC),this.createViewTransition=ie(l5,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>le(void 0),this.rootComponentType=null;let r=o=>this.events.next(new PI(o)),i=o=>this.events.next(new RI(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(qe(ne(ne({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Gt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hd,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xt(s=>s.id!==0),ae(s=>qe(ne({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Xe(s=>{let a=!1,c=!1;return le(s).pipe(Xe(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ar.SupersededByNewNavigation),Tn;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?qe(ne({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&g!=="reload"){let w="";return this.events.next(new Oa(l.id,this.urlSerializer.serialize(l.rawUrl),w,TI.IgnoredSameUrlNavigation)),l.resolve(null),Tn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return le(l).pipe(Xe(w=>{let b=this.transitions?.getValue();return this.events.next(new Kd(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),b!==this.transitions?.getValue()?Tn:Promise.resolve(w)}),e5(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),yt(w=>{s.targetSnapshot=w.targetSnapshot,s.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=qe(ne({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let b=new $m(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(b)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:w,extractedUrl:b,source:A,restoredState:k,extras:M}=l,U=new Kd(w,this.urlSerializer.serialize(b),A,k);this.events.next(U);let Y=r1(this.rootComponentType).snapshot;return this.currentTransition=s=qe(ne({},l),{targetSnapshot:Y,urlAfterRedirects:b,extras:qe(ne({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,le(s)}else{let w="";return this.events.next(new Oa(l.id,this.urlSerializer.serialize(l.extractedUrl),w,TI.IgnoredByUrlHandlingStrategy)),l.resolve(null),Tn}}),yt(l=>{let h=new AI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ae(l=>(this.currentTransition=s=qe(ne({},l),{guards:v3(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),S3(this.environmentInjector,l=>this.events.next(l)),yt(l=>{if(s.guardsResult=l.guardsResult,Uu(l.guardsResult))throw a1(this.urlSerializer,l.guardsResult);let h=new SI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Xt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ar.GuardRejected),!1)),_I(l=>{if(l.guards.canActivateChecks.length)return le(l).pipe(yt(h=>{let g=new MI(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}),Xe(h=>{let g=!1;return le(h).pipe(t5(this.paramsInheritanceStrategy,this.environmentInjector),yt({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(h,"",ar.NoDataFromResolver)}}))}),yt(h=>{let g=new xI(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}))}),_I(l=>{let h=g=>{let w=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(g.routeConfig).pipe(yt(b=>{g.component=b}),ae(()=>{})));for(let b of g.children)w.push(...h(b));return w};return qf(h(l.targetSnapshot.root)).pipe(Ro(null),qi(1))}),_I(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:l,targetSnapshot:h}=s,g=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return g?xe(g).pipe(ae(()=>s)):le(s)}),ae(l=>{let h=l3(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=qe(ne({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),yt(()=>{this.events.next(new Yd)}),y3(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),qi(1),yt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),pv(this.transitionAbortSubject.pipe(yt(l=>{throw l}))),xr(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",ar.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),xo(l=>{if(c=!0,u1(l))this.events.next(new fs(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),f3(l)?this.events.next(new Zd(l.url)):s.resolve(!1);else{this.events.next(new Qd(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Tn}))}))}cancelNavigationTransition(r,i,o){let s=new fs(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function h5(t){return t!==Hd}var f5=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:()=>ie(p5),providedIn:"root"});let t=e;return t})(),WI=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},p5=(()=>{let e=class e extends WI{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ai(e)))(o||e)}})(),e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),m1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:()=>ie(g5),providedIn:"root"});let t=e;return t})(),g5=(()=>{let e=class e extends m1{constructor(){super(...arguments),this.location=ie(jl),this.urlSerializer=ie(KI),this.options=ie(eC,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ie(nC),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ds,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=r1(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Kd)this.stateMemento=this.createStateMemento();else if(r instanceof Oa)this.rawUrlTree=i.initialUrl;else if(r instanceof $m){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Yd?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof fs&&(r.code===ar.GuardRejected||r.code===ar.NoDataFromResolver)?this.restoreHistory(i):r instanceof Qd?this.restoreHistory(i,!0):r instanceof hs&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=ne(ne({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=ne(ne({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ai(e)))(o||e)}})(),e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qd=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(qd||{});function m5(t,e){t.events.pipe(Xt(n=>n instanceof hs||n instanceof fs||n instanceof Qd||n instanceof Oa),ae(n=>n instanceof hs||n instanceof Oa?qd.COMPLETE:(n instanceof fs?n.code===ar.Redirect||n.code===ar.SupersededByNewNavigation:!1)?qd.REDIRECTING:qd.FAILED),Xt(n=>n!==qd.REDIRECTING),qi(1)).subscribe(()=>{e()})}function y5(t){throw t}var v5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},w5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},po=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ie($p),this.stateManager=ie(m1),this.options=ie(eC,{optional:!0})||{},this.pendingTasks=ie(ia),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ie(d5),this.urlSerializer=ie(KI),this.location=ie(jl),this.urlHandlingStrategy=ie(nC),this._events=new Ct,this.errorHandler=this.options.errorHandler||y5,this.navigated=!1,this.routeReuseStrategy=ie(f5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ie(tC,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ie(ZI,{optional:!0}),this.eventsSubscription=new Pt,this.isNgZoneEnabled=ie(Re)instanceof Re&&Re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof fs&&i.code!==ar.Redirect&&i.code!==ar.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof hs)this.navigated=!0;else if(i instanceof Zd){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||h5(o.source)};this.scheduleNavigation(a,Hd,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}b5(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=ne({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(XI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,g=null;switch(c){case"merge":g=ne(ne({},this.currentUrlTree.queryParams),s);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}g!==null&&(g=this.removeEmptyProps(g));let w;try{let b=o?o.snapshot:this.routerState.snapshot.root;w=JR(b)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),w=this.currentUrlTree.root}return e1(w,r,g,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Uu(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Hd,null,i)}navigate(r,i={skipLocationChange:!1}){return _5(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=ne({},v5):i===!1?o=ne({},w5):o=i,Uu(r))return LR(this.currentUrlTree,r,o);let s=this.parseUrl(r);return LR(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,h;a?(c=a.resolve,l=a.reject,h=a.promise):h=new Promise((w,b)=>{c=w,l=b});let g=this.pendingTasks.add();return m5(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(w=>Promise.reject(w))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _5(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new fe(4008,!1)}function b5(t){return!(t instanceof Yd)&&!(t instanceof Zd)}var Ym=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Ct,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof hs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:VA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(ee(po),ee(Fa),Nw("tabindex"),ee(Yi),ee(ci),ee(jc))},e.\u0275dir=vt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&ye("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Fc("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[pn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Bo],skipLocationChange:[pn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Bo],replaceUrl:[pn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Bo],routerLink:"routerLink"},standalone:!0,features:[Qw,Vo]});let t=e;return t})();var E5=new X("");function y1(t,...e){return $n([{provide:tC,multi:!0,useValue:t},[],{provide:Fa,useFactory:I5,deps:[po]},{provide:qp,multi:!0,useFactory:C5},e.map(n=>n.\u0275providers)])}function I5(t){return t.routerState.root}function C5(){let t=ie(Hn);return e=>{let n=t.get(Vc);if(e!==n.components[0])return;let r=t.get(po),i=t.get(D5);t.get(T5)===1&&r.initialNavigation(),t.get(A5,null,Pe.Optional)?.setUpPreloading(),t.get(E5,null,Pe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var D5=new X("",{factory:()=>new Ct}),T5=new X("",{providedIn:"root",factory:()=>1});var A5=new X("");var S5=new Map,M5={activated:!1,tokenObservers:[]},x5={initialized:!1,enabled:!1};function zr(t){return S5.get(t)||Object.assign({},M5)}function E1(){return x5}var P5="https://content-firebaseappcheck.googleapis.com/v1";var R5="exchangeDebugToken",v1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},gJ=24*60*60*1e3;var oC=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return O(this,null,function*(){this.stop();try{this.pending=new By,this.pending.promise.catch(n=>{}),yield N5(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new By,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function N5(t){return new Promise(e=>{setTimeout(e,t)})}var k5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},gs=new uD("appCheck","AppCheck",k5);function I1(t){if(!zr(t).activated)throw gs.create("use-before-activation",{appName:t.name})}function C1(r,i){return O(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let b=yield s.getHeartbeatsHeader();b&&(o["X-Firebase-Client"]=b)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(b){throw gs.create("fetch-network-error",{originalErrorMessage:b?.message})}if(c.status!==200)throw gs.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(b){throw gs.create("fetch-parse-error",{originalErrorMessage:b?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let g=Number(h[1])*1e3,w=Date.now();return{token:l.token,expireTimeMillis:w+g,issuedAtTimeMillis:w}})}function D1(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${P5}/projects/${n}/apps/${r}:${R5}?key=${i}`,body:{debug_token:e}}}var O5="firebase-app-check-database",F5=1,sC="firebase-app-check-store";var Zm=null;function V5(){return Zm||(Zm=new Promise((t,e)=>{try{let n=indexedDB.open(O5,F5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(gs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(sC,{keyPath:"compositeKey"})}}}catch(n){e(gs.create("storage-open",{originalErrorMessage:n?.message}))}}),Zm)}function L5(t,e){return j5(B5(t),e)}function j5(t,e){return O(this,null,function*(){let r=(yield V5()).transaction(sC,"readwrite"),o=r.objectStore(sC).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(gs.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function B5(t){return`${t.options.appId}-${t.name}`}var aC=new mf("@firebase/app-check");function iC(t,e){return pf()?L5(t,e).catch(n=>{aC.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function T1(){return E1().enabled}function A1(){return O(this,null,function*(){let t=E1();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var U5={error:"UNKNOWN_ERROR"};function $5(t){return cD.encodeString(JSON.stringify(t),!1)}function cC(t,e=!1){return O(this,null,function*(){let n=t.app;I1(n);let r=zr(n),i=r.token,o;if(i&&!oh(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(oh(c)?i=c:yield iC(n,void 0))}if(!e&&i&&oh(i))return{token:i.token};let s=!1;if(T1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=C1(D1(n,yield A1()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield iC(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield zr(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?aC.warn(c.message):aC.error(c),o=c}let a;return i?o?oh(i)?a={token:i.token,internalError:o}:a=_1(o):(a={token:i.token},r.token=i,yield iC(n,i)):a=_1(o),s&&G5(n,a),a})}function q5(t){return O(this,null,function*(){let e=t.app;I1(e);let{provider:n}=zr(e);if(T1()){let r=yield A1(),{token:i}=yield C1(D1(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function z5(t,e,n,r){let{app:i}=t,o=zr(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&oh(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),w1(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>w1(t))}function S1(t,e){let n=zr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function w1(t){let{app:e}=t,n=zr(e),r=n.tokenRefresher;r||(r=H5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function H5(t){let{app:e}=t;return new oC(()=>O(this,null,function*(){let n=zr(e),r;if(n.token?r=yield cC(t,!0):r=yield cC(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=zr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},v1.RETRIAL_MIN_WAIT,v1.RETRIAL_MAX_WAIT)}function G5(t,e){let n=zr(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function oh(t){return t.expireTimeMillis-Date.now()>0}function _1(t){return{token:$5(U5),error:t}}var uC=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=zr(this.app);for(let n of e)S1(this.app,n.next);return Promise.resolve()}};function W5(t,e){return new uC(t,e)}function K5(t){return{getToken:e=>cC(t,e),getLimitedUseToken:()=>q5(t),addTokenListener:e=>z5(t,"INTERNAL",e),removeTokenListener:e=>S1(t.app,e)}}var Q5="@firebase/app-check",Y5="0.8.4";var Z5="app-check",b1="app-check-internal";function X5(){Ls(new Sr(Z5,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return W5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(b1).initialize()})),Ls(new Sr(b1,t=>{let e=t.getProvider("app-check").getImmediate();return K5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),xt(Q5,Y5)}X5();var J5=["localhost","0.0.0.0","127.0.0.1"],AJ=typeof window<"u"&&J5.includes(window.location.hostname);var ez="firebase",tz="10.12.2";Jn.registerVersion(ez,tz,"app-compat");var nz=["ngOnDestroy"],x1=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(nz.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let g=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,g),g})})})});var dC=class{constructor(e){return e}},ms=new X("angularfire2.app.options"),zu=new X("angularfire2.app.name");function Hu(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=Jn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Jn.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;rz("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new dC(s)}var rz=(t,...e)=>{t_()&&typeof console<"u"&&console[t](...e)};function Gu(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return iz(i,s)||(M1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${oz?" You may need to reload as Firebase is not HMR aware.":""}`),M1("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function iz(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var oz=typeof module<"u"&&!!module.hot,M1=(t,...e)=>{t_()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var hC=new X("angularfire2.auth.use-emulator"),fC=new X("angularfire2.auth.settings"),pC=new X("angularfire2.auth.tenant-id"),gC=new X("angularfire2.auth.langugage-code"),mC=new X("angularfire2.auth.use-device-language"),yC=new X("angularfire.auth.persistence"),vC=(t,e,n,r,i,o,s,a)=>Gu(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),wn=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,h,g,w,b){let A=new Ct,k=le(void 0).pipe(jn(s.outsideAngular),Xe(()=>o.runOutsideAngular(()=>import("./chunk-CLOZ6WOG.js"))),ae(()=>Hu(n,o,r)),ae(M=>vC(M,o,a,l,h,g,c,w)),Gf({bufferSize:1,refCount:!1}));if(Uo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=le(null);else{k.pipe(hr()).subscribe();let M=k.pipe(Xe(q=>q.getRedirectResult().then(Q=>Q,()=>null)),Jt,Gf({bufferSize:1,refCount:!1})),U=k.pipe(Xe(q=>new ve(Q=>({unsubscribe:o.runOutsideAngular(()=>q.onAuthStateChanged(ue=>Q.next(ue),ue=>Q.error(ue),()=>Q.complete()))})))),Y=k.pipe(Xe(q=>new ve(Q=>({unsubscribe:o.runOutsideAngular(()=>q.onIdTokenChanged(ue=>Q.next(ue),ue=>Q.error(ue),()=>Q.complete()))}))));this.authState=M.pipe(Wf(U),dr(s.outsideAngular),jn(s.insideAngular)),this.user=M.pipe(Wf(Y),dr(s.outsideAngular),jn(s.insideAngular)),this.idToken=this.user.pipe(Xe(q=>q?xe(q.getIdToken()):le(null))),this.idTokenResult=this.user.pipe(Xe(q=>q?xe(q.getIdTokenResult()):le(null))),this.credential=cv(M,A,this.authState.pipe(Xt(q=>!q))).pipe(ae(q=>q?.user?q:null),dr(s.outsideAngular),jn(s.insideAngular))}return x1(this,k,o,{spy:{apply:(M,U,Y)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&Y.then(q=>A.next(q))}}})}static \u0275fac=function(r){return new(r||t)(K(ms),K(zu,8),K(nn),K(Re),K(Kn),K(hC,8),K(fC,8),K(pC,8),K(gC,8),K(mC,8),K(yC,8),K(Mn,8))};static \u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var P1=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.router=i}navigateToLogin(){return O(this,null,function*(){try{yield this.afAuth.signOut()}catch(r){console.error("Error al cerrar sesi\xF3n:",r)}finally{this.router.navigate(["/login"])}})}};e.\u0275fac=function(i){return new(i||e)(ee(wn),ee(po))},e.\u0275cmp=Je({type:e,selectors:[["app-bienvenida"]],standalone:!0,features:[et],decls:10,vars:0,consts:[[1,"container",2,"background-image","url('assets/onli.jpeg')","background-size","cover","background-position","center","height","100vh","margin","0","padding","0"],[1,"title","animated-title"],[1,"buttons"],[1,"login-btn","button",3,"click"],[1,"fas","fa-sign-in-alt"],["routerLink","/register",1,"register-btn","button"],[1,"fas","fa-user-plus"]],template:function(i,o){i&1&&(N(0,"div",0)(1,"h1",1),G(2,"\xA1Bienvenido a nuestra cl\xEDnica online Clinitech!"),P(),N(3,"div",2)(4,"button",3),ye("click",function(){return o.navigateToLogin()}),it(5,"i",4),G(6," Iniciar sesi\xF3n"),P(),N(7,"button",5),it(8,"i",6),G(9," Registrarse"),P()()())},dependencies:[Ym],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin:0;padding:0;background-size:cover;background-position:center;position:relative}.title[_ngcontent-%COMP%]{font-size:3em;color:#3498db;text-align:center;animation:_ngcontent-%COMP%_fadeIn 2s}.buttons[_ngcontent-%COMP%]{display:flex;gap:20px;animation:_ngcontent-%COMP%_slideUp 2s}.button[_ngcontent-%COMP%]{padding:15px 25px;font-size:1.2em;border:none;border-radius:5px;cursor:pointer;transition:all .3s ease;color:#fff;box-shadow:0 8px 15px #0000001a}.button[_ngcontent-%COMP%]:hover{opacity:.8;transform:translateY(-2px)}.login-btn[_ngcontent-%COMP%]{background-color:#3498db}.register-btn[_ngcontent-%COMP%]{background-color:#2ecc71}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"]});let t=e;return t})();var U1=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ee(Yi),ee(ci))},e.\u0275dir=vt({type:e});let t=e;return t})(),iy=(()=>{let e=class e extends U1{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ai(e)))(o||e)}})(),e.\u0275dir=vt({type:e,features:[nr]});let t=e;return t})(),lh=new X("");var sz={provide:lh,useExisting:Fr(()=>_n),multi:!0};function az(){let t=to()?to().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var cz=new X(""),_n=(()=>{let e=class e extends U1{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!az())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ee(Yi),ee(ci),ee(cz,8))},e.\u0275dir=vt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&ye("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Zi([sz]),nr]});let t=e;return t})();function wC(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var oy=new X(""),$1=new X("");function uz(t){return e=>{if(wC(e.value)||wC(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function lz(t){return wC(t.value)?{required:!0}:null}function R1(t){return null}function q1(t){return t!=null}function z1(t){return jo(t)?xe(t):t}function H1(t){let e={};return t.forEach(n=>{e=n!=null?ne(ne({},e),n):e}),Object.keys(e).length===0?null:e}function G1(t,e){return e.map(n=>n(t))}function dz(t){return!t.validate}function W1(t){return t.map(e=>dz(e)?e:n=>e.validate(n))}function hz(t){if(!t)return null;let e=t.filter(q1);return e.length==0?null:function(n){return H1(G1(n,e))}}function bC(t){return t!=null?hz(W1(t)):null}function fz(t){if(!t)return null;let e=t.filter(q1);return e.length==0?null:function(n){let r=G1(n,e).map(z1);return av(r).pipe(ae(H1))}}function EC(t){return t!=null?fz(W1(t)):null}function N1(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function pz(t){return t._rawValidators}function gz(t){return t._rawAsyncValidators}function _C(t){return t?Array.isArray(t)?t:[t]:[]}function Jm(t,e){return Array.isArray(t)?t.includes(e):t===e}function k1(t,e){let n=_C(e);return _C(t).forEach(i=>{Jm(n,i)||n.push(i)}),n}function O1(t,e){return _C(e).filter(n=>!Jm(t,n))}var ey=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=EC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ku=class extends ey{get formDirective(){return null}get path(){return null}},uh=class extends ey{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ty=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},mz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},gee=qe(ne({},mz),{"[class.ng-submitted]":"isSubmitted"}),Yn=(()=>{let e=class e extends ty{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ee(uh,2))},e.\u0275dir=vt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Up("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[nr]});let t=e;return t})(),vs=(()=>{let e=class e extends ty{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ee(Ku,10))},e.\u0275dir=vt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Up("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[nr]});let t=e;return t})();var sh="VALID",Xm="INVALID",Wu="PENDING",ah="DISABLED";function K1(t){return(sy(t)?t.validators:t)||null}function yz(t){return Array.isArray(t)?bC(t):t||null}function Q1(t,e){return(sy(e)?e.asyncValidators:t)||null}function vz(t){return Array.isArray(t)?EC(t):t||null}function sy(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function wz(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new fe(1e3,"");if(!r[n])throw new fe(1001,"")}function _z(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new fe(1002,"")})}var ny=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===sh}get invalid(){return this.status===Xm}get pending(){return this.status==Wu}get disabled(){return this.status===ah}get enabled(){return this.status!==ah}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(k1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(k1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O1(e,this._rawAsyncValidators))}hasValidator(e){return Jm(this._rawValidators,e)}hasAsyncValidator(e){return Jm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wu,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ah,this.errors=null,this._forEachChild(r=>{r.disable(qe(ne({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(qe(ne({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=sh,this._forEachChild(r=>{r.enable(qe(ne({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(qe(ne({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sh||this.status===Wu)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ah:sh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wu,this._hasOwnPendingAsyncValidator=!0;let n=z1(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new fn,this.statusChanges=new fn}_calculateStatus(){return this._allControlsDisabled()?ah:this.errors?Xm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wu)?Wu:this._anyControlsHaveStatus(Xm)?Xm:sh}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=yz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=vz(this._rawAsyncValidators)}},ry=class extends ny{constructor(e,n,r){super(K1(n),Q1(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){_z(this,!0,e),Object.keys(e).forEach(r=>{wz(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ay=new X("CallSetDisabledState",{providedIn:"root",factory:()=>cy}),cy="always";function bz(t,e){return[...e.path,t]}function Y1(t,e,n=cy){Z1(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Iz(t,e),Dz(t,e),Cz(t,e),Ez(t,e)}function F1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Ez(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Z1(t,e){let n=pz(t);e.validator!==null?t.setValidators(N1(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=gz(t);e.asyncValidator!==null?t.setAsyncValidators(N1(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();F1(e._rawValidators,i),F1(e._rawAsyncValidators,i)}function Iz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&X1(t,e)})}function Cz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&X1(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function X1(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Dz(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Tz(t,e){t==null,Z1(t,e)}function Az(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Sz(t){return Object.getPrototypeOf(t.constructor)===iy}function Mz(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function xz(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===_n?n=o:Sz(o)?r=o:i=o}),i||r||n||null}var Pz={provide:Ku,useExisting:Fr(()=>go)},ch=Promise.resolve(),go=(()=>{let e=class e extends Ku{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new fn,this.form=new ry({},bC(r),EC(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){ch.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Y1(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){ch.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){ch.then(()=>{let i=this._findContainer(r.path),o=new ry({});Tz(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){ch.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){ch.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,Mz(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(ee(oy,10),ee($1,10),ee(ay,8))},e.\u0275dir=vt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&ye("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[pn.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Zi([Pz]),nr]});let t=e;return t})();function V1(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function L1(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Rz=class extends ny{constructor(e=null,n,r){super(K1(n),Q1(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(L1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){V1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){V1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){L1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Nz={provide:uh,useExisting:Fr(()=>Nn)},j1=Promise.resolve(),Nn=(()=>{let e=class e extends uh{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Rz,this._registered=!1,this.name="",this.update=new fn,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=xz(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Az(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Y1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){j1.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Bo(i);j1.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?bz(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(ee(Ku,9),ee(oy,10),ee($1,10),ee(lh,10),ee(eo,8),ee(ay,8))},e.\u0275dir=vt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[pn.None,"disabled","isDisabled"],model:[pn.None,"ngModel","model"],options:[pn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Zi([Nz]),nr,Vo]});let t=e;return t})(),ws=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=vt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),kz={provide:lh,useExisting:Fr(()=>dh),multi:!0},dh=(()=>{let e=class e extends iy{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ai(e)))(o||e)}})(),e.\u0275dir=vt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&ye("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[Zi([kz]),nr]});let t=e;return t})();var Oz=new X("");var Fz={provide:lh,useExisting:Fr(()=>uy),multi:!0};function J1(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Vz(t){return t.split(":")[0]}var uy=(()=>{let e=class e extends iy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=J1(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=Vz(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ai(e)))(o||e)}})(),e.\u0275dir=vt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&ye("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Zi([Fz]),nr]});let t=e;return t})(),eN=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(J1(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(ee(ci),ee(Yi),ee(uy,9))},e.\u0275dir=vt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Lz={provide:lh,useExisting:Fr(()=>tN),multi:!0};function B1(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function jz(t){return t.split(":")[0]}var tN=(()=>{let e=class e extends iy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],h=this._getOptionValue(l.value);o.push(h)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let h=this._getOptionValue(l.value);o.push(h)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=jz(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ai(e)))(o||e)}})(),e.\u0275dir=vt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&ye("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Zi([Lz]),nr]});let t=e;return t})(),nN=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(B1(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(B1(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(ee(ci),ee(Yi),ee(tN,9))},e.\u0275dir=vt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();function Bz(t){return typeof t=="number"?t:parseFloat(t)}var rN=(()=>{let e=class e{constructor(){this._validator=R1}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):R1,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=vt({type:e,features:[Vo]});let t=e;return t})();var Uz={provide:oy,useExisting:Fr(()=>hh),multi:!0},hh=(()=>{let e=class e extends rN{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=r=>Bz(r),this.createValidator=r=>uz(r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ai(e)))(o||e)}})(),e.\u0275dir=vt({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,o){i&2&&Fc("min",o._enabled?o.min:null)},inputs:{min:"min"},features:[Zi([Uz]),nr]});let t=e;return t})(),$z={provide:oy,useExisting:Fr(()=>mo),multi:!0};var mo=(()=>{let e=class e extends rN{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Bo,this.createValidator=r=>lz}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ai(e)))(o||e)}})(),e.\u0275dir=vt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Fc("required",o._enabled?"":null)},inputs:{required:"required"},features:[Zi([$z]),nr]});let t=e;return t})();var iN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=er({});let t=e;return t})();var bn=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ay,useValue:r.callSetDisabledState??cy}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=er({imports:[iN]});let t=e;return t})(),Ii=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Oz,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:ay,useValue:r.callSetDisabledState??cy}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=er({imports:[iN]});let t=e;return t})();var yN=Bi(Di());var qz="@firebase/firestore-compat",zz="0.3.32";function MC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new H("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function oN(){if(typeof Uint8Array>"u")throw new H("unimplemented","Uint8Arrays are not available in this environment.")}function sN(){if(!Dx())throw new H("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ly=class t{constructor(e){this._delegate=e}static fromBase64String(e){return sN(),new t(yi.fromBase64String(e))}static fromUint8Array(e){return oN(),new t(yi.fromUint8Array(e))}toBase64(){return sN(),this._delegate.toBase64()}toUint8Array(){return oN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function CC(t){return Hz(t,["next","error","complete"])}function Hz(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var DC=class{enableIndexedDbPersistence(e,n){return uE(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return lE(e._delegate)}clearIndexedDbPersistence(e){return dE(e._delegate)}},dy=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof es||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&wr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){gm(this._delegate,e,n,r)}enableNetwork(){return fE(this._delegate)}disableNetwork(){return pE(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,aE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hE(this._delegate)}onSnapshotsInSync(e){return VE(this._delegate,e)}get app(){if(!this._appCompat)throw new H("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zu(this,mm(this._delegate,e))}catch(n){throw kn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ti(this,Au(this._delegate,e))}catch(n){throw kn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ua(this,cE(this._delegate,e))}catch(n){throw kn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return jE(this._delegate,n=>e(new hy(this,n)))}batch(){return Yt(this._delegate),new fy(new um(this._delegate,e=>Su(this._delegate,e)))}loadBundle(e){return gE(this._delegate,e)}namedQuery(e){return mE(this._delegate,e).then(n=>n?new Ua(this,n):null)}},Qu=class extends _u{constructor(e){super(),this.firestore=e}convertBytes(e){return new ly(new yi(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Ti.forKey(n,this.firestore,null)}};function Gz(t){kb(t)}var hy=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Qu(e)}get(e){let n=La(e);return this._delegate.get(n).then(r=>new ja(this._firestore,new br(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=La(e);return r?(MC("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=La(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=La(e);return this._delegate.delete(n),this}},fy=class{constructor(e){this._delegate=e}set(e,n,r){let i=La(e);return r?(MC("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=La(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=La(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Yu=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Yo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ba(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Qu(e),n),i.set(n,o)),o}};Yu.INSTANCES=new WeakMap;var Ti=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Qu(e)}static forPath(e,n,r){if(e.length%2!==0)throw new H("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new at(n._delegate,r,new J(e)))}static forKey(e,n,r){return new t(n,new at(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zu(this.firestore,mm(this._delegate,e))}catch(n){throw kn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ze(e),e instanceof at?ym(this._delegate,e):!1}set(e,n){n=MC("DocumentReference.set",n);try{return n?Im(this._delegate,e,n):Im(this._delegate,e)}catch(r){throw kn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Cm(this._delegate,e):Cm(this._delegate,e,n,...r)}catch(i){throw kn(i,"updateDoc()","DocumentReference.update()")}}delete(){return OE(this._delegate)}onSnapshot(...e){let n=aN(e),r=cN(e,i=>new ja(this.firestore,new br(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Dm(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=xE(this._delegate):e?.source==="server"?n=PE(this._delegate):n=ME(this._delegate),n.then(r=>new ja(this.firestore,new br(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function kn(t,e,n){return t.message=t.message.replace(e,n),t}function aN(t){for(let e of t)if(typeof e=="object"&&!CC(e))return e;return{}}function cN(t,e){var n,r;let i;return CC(t[0])?i=t[0]:CC(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ja=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ti(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Em(this._delegate,e._delegate)}},Ba=class extends ja{data(e){let n=this._delegate.data(e);return this._delegate._converter||hx(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ua=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Qu(e)}where(e,n,r){try{return new t(this.firestore,vi(this._delegate,bE(e,n,r)))}catch(i){throw kn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,vi(this._delegate,EE(e,n)))}catch(r){throw kn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,vi(this._delegate,IE(e)))}catch(n){throw kn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,vi(this._delegate,CE(e)))}catch(n){throw kn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,vi(this._delegate,DE(...e)))}catch(n){throw kn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,vi(this._delegate,TE(...e)))}catch(n){throw kn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,vi(this._delegate,AE(...e)))}catch(n){throw kn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,vi(this._delegate,SE(...e)))}catch(n){throw kn(n,"endAt()","Query.endAt()")}}isEqual(e){return vm(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=NE(this._delegate):e?.source==="server"?n=kE(this._delegate):n=RE(this._delegate),n.then(r=>new fh(this.firestore,new $r(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=aN(e),r=cN(e,i=>new fh(this.firestore,new $r(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Dm(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},TC=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ba(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},fh=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ua(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ba(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new TC(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Ba(this._firestore,r))})}isEqual(e){return Em(this._delegate,e._delegate)}},Zu=class t extends Ua{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ti(this.firestore,e):null}doc(e){try{return e===void 0?new Ti(this.firestore,Au(this._delegate)):new Ti(this.firestore,Au(this._delegate,e))}catch(n){throw kn(n,"doc()","CollectionReference.doc()")}}add(e){return FE(this._delegate,e).then(n=>new Ti(this.firestore,n))}isEqual(e){return ym(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function La(t){return $e(t,at)}var AC=class t{constructor(...e){this._delegate=new Ur(...e)}static documentId(){return new t(kt.keyField().canonicalString())}isEqual(e){return e=ze(e),e instanceof Ur?this._delegate._internalPath.isEqual(e._internalPath):!1}};var SC=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=UE();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=BE();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=$E(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=qE(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=zE(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Wz={Firestore:dy,GeoPoint:Ta,Timestamp:bt,Blob:ly,Transaction:hy,WriteBatch:fy,DocumentReference:Ti,DocumentSnapshot:ja,Query:Ua,QueryDocumentSnapshot:Ba,QuerySnapshot:fh,CollectionReference:Zu,FieldPath:AC,FieldValue:SC,setLogLevel:Gz,CACHE_SIZE_UNLIMITED:$P};function Kz(t,e){t.INTERNAL.registerComponent(new Sr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Wz)))}function Qz(t){Kz(t,(e,n)=>new dy(e,n,new DC)),t.registerVersion(qz,zz)}Qz(Jn);function Yz(t,e=$s){return new ve(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function uN(t,e){return Yz(t,e)}function Zz(t,e){return uN(t,e).pipe(zs(void 0),El(),ae(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function RC(t,e){return uN(t,e).pipe(ae(n=>({payload:n,type:"query"})))}var py=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=hN(r,n);return new my(i,o,this.afs)}snapshotChanges(){return Zz(this.ref,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return this.snapshotChanges().pipe(ae(({payload:n})=>e.idField?qe(ne({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return xe(this.ref.get(e)).pipe(Jt)}};function gy(t,e){return RC(t,e).pipe(zs(void 0),El(),ae(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function lN(t,e,n){return gy(t,n).pipe(qs((r,i)=>Xz(r,i.map(o=>o.payload),e),[]),dv(),ae(r=>r.map(i=>({type:i.type,payload:i}))))}function Xz(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=Jz(t,r))}),t}function xC(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function Jz(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return xC(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return xC(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xC(t,e.oldIndex,1);break}return t}function dN(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var my=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=gy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ae(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(zs(void 0),El(),Xt(([r,i])=>i.length>0||!r),ae(([,r])=>r),Jt)}auditTrail(e){return this.stateChanges(e).pipe(qs((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=dN(e);return lN(this.query,n,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return RC(this.query,this.afs.schedulers.outsideAngular).pipe(ae(n=>n.payload.docs.map(r=>e.idField?qe(ne({},r.data()),{[e.idField]:r.id}):r.data())),Jt)}get(e){return xe(this.query.get(e)).pipe(Jt)}add(e){return this.ref.add(e)}doc(e){return new py(this.ref.doc(e),this.afs)}},PC=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?gy(this.query,this.afs.schedulers.outsideAngular).pipe(Jt):gy(this.query,this.afs.schedulers.outsideAngular).pipe(ae(n=>n.filter(r=>e.indexOf(r.type)>-1)),Xt(n=>n.length>0),Jt)}auditTrail(e){return this.stateChanges(e).pipe(qs((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=dN(e);return lN(this.query,n,this.afs.schedulers.outsideAngular).pipe(Jt)}valueChanges(e={}){return RC(this.query,this.afs.schedulers.outsideAngular).pipe(ae(r=>r.payload.docs.map(i=>e.idField?ne({[e.idField]:i.id},i.data()):i.data())),Jt)}get(e){return xe(this.query.get(e)).pipe(Jt)}},eH=new X("angularfire2.enableFirestorePersistence"),tH=new X("angularfire2.firestore.persistenceSettings"),nH=new X("angularfire2.firestore.settings"),rH=new X("angularfire2.firestore.use-emulator");function hN(t,e=n=>n){return{query:e(t),ref:t}}var Ut=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,l,h,g,w,b,A,k,M,U,Y){this.schedulers=c;let q=Hu(n,a,r),Q=h;g&&vC(q,a,w,A,k,M,b,U),[this.firestore,this.persistenceEnabled$]=Gu(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{let ue=a.runOutsideAngular(()=>q.firestore());if(o&&ue.settings(o),Q&&ue.useEmulator(...Q),i&&!Uo(s)){let se=()=>{try{return xe(ue.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(T){return typeof console<"u"&&console.warn(T),le(!1)}};return[ue,a.runOutsideAngular(se)]}else return[ue,le(!1)]},[o,Q,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=hN(i,r),a=this.schedulers.ngZone.run(()=>o);return new my(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new PC(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new py(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(K(ms),K(zu,8),K(eH,8),K(nH,8),K(nn),K(Re),K(Kn),K(tH,8),K(rH,8),K(wn,8),K(hC,8),K(fC,8),K(pC,8),K(gC,8),K(mC,8),K(yC,8),K(Mn,8))};static \u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Xu=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var yy=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xu(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Xu(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new Xu(s,this,this._ref)):o={next:n.next?s=>n.next(new Xu(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},vy=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new $a(e,this._service))}get items(){return this._delegate.items.map(e=>new $a(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var $a=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=NR(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new yy(cI(this._delegate,e,n),this)}putString(e,n=or.RAW,r){this._throwIfRoot("putString");let i=iI(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new yy(new Ld(this._delegate,new Ru(i.data,!0),o),this)}listAll(){return hI(this._delegate).then(e=>new vy(e,this.storage))}list(e){return dI(this._delegate,e||void 0).then(n=>new vy(n,this.storage))}getMetadata(){return uI(this._delegate)}updateMetadata(e){return lI(this._delegate,e)}getDownloadURL(){return fI(this._delegate)}delete(){return this._throwIfRoot("delete"),pI(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw nI(e)}};var wy=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(fN(e))throw Ra("ref() expected a child path but got a URL, use refFromURL instead.");return new $a(Rm(this._delegate,e),this)}refFromURL(e){if(!fN(e))throw Ra("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rn.makeFromUrl(e,this._delegate.host)}catch{throw Ra("refFromUrl() expected a valid full URL but got an invalid one.")}return new $a(Rm(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){Nm(this._delegate,e,n,r)}};function fN(t){return/^[A-Za-z]+:\/\//.test(t)}var iH="@firebase/storage-compat",oH="0.3.8";var sH="storage-compat";function aH(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new wy(n,r)}function cH(t){let e={TaskState:vn,TaskEvent:AR,StringFormat:or,Storage:wy,Reference:$a};t.INTERNAL.registerComponent(new Sr(sH,aH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(iH,oH)}cH(Jn);function uH(t){return new ve(e=>{let n=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();n(t.snapshot);let o=t.on("state_changed",n);return t.then(s=>{n(s),i()},s=>{n(t.snapshot),r(s)}),function(){o()}}).pipe(uv(0))}function pN(t){let e=uH(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ae(n=>n.bytesTransferred/n.totalBytes*100))}}function _y(t){return{getDownloadURL:()=>le(void 0).pipe(b_,Xe(()=>t.getDownloadURL()),Jt),getMetadata:()=>le(void 0).pipe(b_,Xe(()=>t.getMetadata()),Jt),delete:()=>xe(t.delete()),child:e=>_y(t.child(e)),updateMetadata:e=>xe(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return pN(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return pN(i)},list:e=>xe(t.list(e)),listAll:()=>xe(t.listAll())}}var lH=new X("angularfire2.storageBucket"),dH=new X("angularfire2.storage.maxUploadRetryTime"),hH=new X("angularfire2.storage.maxOperationRetryTime"),fH=new X("angularfire2.storage.use-emulator"),gN=(()=>{class t{storage;constructor(n,r,i,o,s,a,c,l,h,g){let w=Hu(n,s,r);this.storage=Gu(`${w.name}.storage.${i}`,"AngularFireStorage",w.name,()=>{let b=s.runOutsideAngular(()=>w.storage(i||void 0)),A=h;return A&&b.useEmulator(...A),c&&b.setMaxUploadRetryTime(c),l&&b.setMaxOperationRetryTime(l),b},[c,l])}ref(n){return _y(this.storage.ref(n))}refFromURL(n){return _y(this.storage.refFromURL(n))}upload(n,r,i){let o=this.storage.ref(n);return _y(o).put(r,i)}static \u0275fac=function(r){return new(r||t)(K(ms),K(zu,8),K(lH,8),K(nn),K(Re),K(Kn),K(dH,8),K(hH,8),K(fH,8),K(Mn,8))};static \u0275prov=ce({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Si=(()=>{let e=class e{getUsers(){throw new Error("Method not implemented.")}constructor(r,i,o){this.afAuth=r,this.firestore=i,this.storage=o}login(r,i){return O(this,null,function*(){try{let o=yield this.afAuth.signInWithEmailAndPassword(r,i);if(o.user){let s=o.user.uid;if(this.getUserType(s)==="especialistas"){let c=yield this.getEspecialista(s);if(c&&c.habilitado)console.log("Usuario especialista habilitado, permitiendo acceso...");else throw console.error("El usuario especialista no est\xE1 habilitado."),new Error("El usuario especialista no est\xE1 habilitado.")}else console.log("El usuario no es un especialista, permitiendo acceso...")}}catch(o){throw console.error("Error al iniciar sesi\xF3n:",o),o}})}getUserType(r){return"especialistas"}getEspecialista(r){return O(this,null,function*(){try{let i=yield this.firestore.collection("especialistas").doc(r).get().toPromise();return i&&i.exists?i.data():null}catch(i){return console.error("Error al obtener datos del especialista:",i),null}})}logout(){return O(this,null,function*(){try{yield this.afAuth.signOut()}catch(r){console.error("Error al cerrar sesi\xF3n:",r)}})}getCurrentUser(){return this.afAuth.currentUser}registerUser(r,i,o){return O(this,null,function*(){try{let s=yield this.afAuth.createUserWithEmailAndPassword(r.email,r.password);if(!s.user)throw new Error("User creation failed");let a=s.user.uid,c=i[0],l=i[1],h=`images/${a}/image1.jpg`,g=`images/${a}/image2.jpg`,w=this.storage.ref(h),b=this.storage.ref(g);yield this.storage.upload(h,c).snapshotChanges().pipe(xr(()=>O(this,null,function*(){let A=yield w.getDownloadURL().toPromise();r.imageUrl1=A}))).toPromise(),yield this.storage.upload(g,l).snapshotChanges().pipe(xr(()=>O(this,null,function*(){let A=yield b.getDownloadURL().toPromise();r.imageUrl2=A}))).toPromise(),yield this.firestore.collection(o).doc(a).set(r)}catch(s){console.error(`Error al registrar ${o}:`,s)}})}registerPatient(r,i,o){return this.registerUser(r,[i,o],"pacientes")}getAdministrators(){return this.firestore.collection("administradores").valueChanges({idField:"id"})}registerEspecialista(r,i){return this.registerUser(r,[i],"especialistas")}habilitarUsuario(r,i,o){return O(this,null,function*(){try{yield this.firestore.collection(o).doc(r).update({habilitado:i})}catch(s){throw console.error(`Error al habilitar/deshabilitar usuario ${r} (${o}):`,s),s}})}};e.\u0275fac=function(i){return new(i||e)(K(wn),K(Ut),K(gN))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var by=(()=>{let e=class e{constructor(){this.loadingSubject=new Gt(!1),this.loading$=this.loadingSubject.asObservable()}show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gH(t,e){if(t&1&&(N(0,"p",11),G(1),P()),t&2){let n=ke();z(),ut(n.errorMessage)}}function mH(t,e){t&1&&(N(0,"div",12),it(1,"div",13),P())}var vN=(()=>{let e=class e{constructor(r,i,o,s,a){this.afAuth=r,this.router=i,this.firestore=o,this.firebaseService=s,this.loadingService=a,this.email="",this.password="",this.errorMessage="",this.successMessage="",this.loading$=this.loadingService.loading$}login(){return O(this,null,function*(){this.loadingService.show();try{let{user:r}=yield this.afAuth.signInWithEmailAndPassword(this.email,this.password);if(r){let i=yield this.getUserType(r.uid);if(!i)throw new Error("El usuario no tiene un tipo definido");if(i==="especialistas"){let o=yield this.getEspecialista(r.uid);if(o&&o.habilitado===!0)this.successMessage="Inicio de sesi\xF3n exitoso",this.errorMessage="",this.router.navigate(["/home"]);else throw yield this.afAuth.signOut(),new Error("La cuenta de especialista ha sido deshabilitada")}else i==="administradores"?(this.successMessage="Inicio de sesi\xF3n exitoso",this.errorMessage="",this.router.navigate(["/home"])):(this.successMessage="Inicio de sesi\xF3n exitoso",this.errorMessage="",this.router.navigate(["/home"]))}}catch(r){this.errorMessage=this.getErrorMessage(r),yN.default.fire({icon:"error",title:"ERROR",text:this.errorMessage})}finally{this.loadingService.hide()}})}setQuickAccess(r){switch(r){case"admin":this.email="juan@juann.com",this.password="123456";break;case"especialista":this.email="rosario@rosario.com",this.password="123456";break;case"paciente":this.email="maria@maria.com",this.password="123456";break;default:break}}getErrorMessage(r){let i="";switch(r.code){case"auth/user-not-found":i="No hay ning\xFAn usuario con ese correo";break;case"auth/invalid-email":i="El formato del correo electr\xF3nico es inv\xE1lido";break;case"auth/wrong-password":i="La contrase\xF1a es incorrecta";break;case"auth/user-disabled":i="La cuenta de usuario ha sido deshabilitada";break;case"auth/invalid-credential":i="La credencial suministrada es incorrecta, est\xE1 malformada o ha caducado";break;default:i="Error al iniciar sesi\xF3n: "+r.message;break}return i}getUserType(r){return O(this,null,function*(){try{let i=yield this.firestore.collection("administradores").doc(r).get().toPromise();if(i&&i.exists)return"administradores";let o=yield this.firestore.collection("especialistas").doc(r).get().toPromise();if(o&&o.exists)return"especialistas";let s=yield this.firestore.collection("pacientes").doc(r).get().toPromise();return s&&s.exists?"pacientes":null}catch(i){return console.error("Error al determinar el tipo de usuario:",i),null}})}getEspecialista(r){return O(this,null,function*(){try{return(yield this.firestore.collection("especialistas").doc(r).get().toPromise())?.data()||null}catch(i){return console.error("Error al obtener datos del especialista:",i),null}})}};e.\u0275fac=function(i){return new(i||e)(ee(wn),ee(po),ee(Ut),ee(Si),ee(by))},e.\u0275cmp=Je({type:e,selectors:[["app-login"]],standalone:!0,features:[et],decls:25,vars:6,consts:[[1,"login-container"],[3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"],["class","error-message",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"quick-access-buttons"],[3,"click"],[1,"error-message"],[1,"loading-overlay"],[1,"spinner"]],template:function(i,o){i&1&&(N(0,"body")(1,"div",0)(2,"h2"),G(3,"Inicio de Sesi\xF3n"),P(),N(4,"form",1),ye("ngSubmit",function(){return o.login()}),N(5,"div")(6,"label",2),G(7,"Email:"),P(),N(8,"input",3),_e("ngModelChange",function(a){return Ce(o.email,a)||(o.email=a),a}),P()(),N(9,"div")(10,"label",4),G(11,"Password:"),P(),N(12,"input",5),_e("ngModelChange",function(a){return Ce(o.password,a)||(o.password=a),a}),P()(),N(13,"button",6),G(14,"Iniciar Sesi\xF3n"),P()(),Ke(15,gH,2,1,"p",7)(16,mH,2,0,"div",8),Xi(17,"async"),N(18,"div",9)(19,"button",10),ye("click",function(){return o.setQuickAccess("admin")}),G(20,"Admin"),P(),N(21,"button",10),ye("click",function(){return o.setQuickAccess("especialista")}),G(22,"Especialista"),P(),N(23,"button",10),ye("click",function(){return o.setQuickAccess("paciente")}),G(24,"Paciente"),P()()()()),i&2&&(z(8),we("ngModel",o.email),z(4),we("ngModel",o.password),z(3),me("ngIf",o.errorMessage),z(),me("ngIf",Ji(17,4,o.loading$)))},dependencies:[Ii,ws,_n,Yn,vs,mo,Wn,Bc,bn,Nn,go],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#349cb6;display:flex;background-attachment:fixed;overflow-y:hidden;justify-content:center;align-items:center;height:100vh;margin:0;background-image:linear-gradient(45deg,#349cb6,#1a5575,#669bbc);animation:_ngcontent-%COMP%_gradientAnimation 10s infinite alternate}@keyframes _ngcontent-%COMP%_gradientAnimation{0%{background-position:0% 50%}to{background-position:100% 50%}}.login-container[_ngcontent-%COMP%]{background-color:#ede7e4;padding:40px;border-radius:8px;overflow:hidden;box-shadow:0 0 10px #0000001a;width:100%;max-width:400px;margin:0 auto}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px;text-align:center}label[_ngcontent-%COMP%]{color:#0a0a0a;display:block;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #dddddd;border-radius:4px;margin-bottom:15px}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#0056b3;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#003d82}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:10px;text-align:center}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-top:16px solid #3498db;border-radius:50%;width:120px;height:120px;animation:spin 1s linear infinite}.quick-access-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:20px}.quick-access-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer}.quick-access-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;width:20px;height:20px;background-color:#ffffff4d;border-radius:50%;animation:_ngcontent-%COMP%_floatBubble 5s infinite alternate;top:20%;left:10%}@keyframes _ngcontent-%COMP%_floatBubble{12%{transform:translateY(0)}to{transform:translateY(-20px)}}']});let t=e;return t})();var gh=Bi(Di());function yH(t,e){t&1&&(N(0,"div",16),it(1,"div",17),P())}function vH(t,e){t&1&&(N(0,"div",16),it(1,"div",17),P())}var wN=(()=>{let e=class e{constructor(r,i){this.firebaseService=r,this.loadingService=i,this.paciente={nombre:"",apellido:"",edad:null,dni:null,obraSocial:"",email:"",password:""},this.especialista={nombre:"",apellido:"",edad:null,dni:null,especialidad:"",email:"",password:""},this.errorMessage="",this.successMessage="",this.loading$=this.loadingService.loading$}onFileSelected(r,i){let o=r.target.files;i==="paciente"&&o.length>1?this.selectedPacienteFiles=o:i==="especialista"&&o.length>0&&(this.selectedEspecialistaFile=o[0])}registerPatient(r){return O(this,null,function*(){if(r.preventDefault(),this.selectedPacienteFiles&&this.selectedPacienteFiles.length>=2){this.loadingService.show();try{let i=this.selectedPacienteFiles.item(0),o=this.selectedPacienteFiles.item(1);yield this.firebaseService.registerPatient(this.paciente,i,o),this.successMessage="Paciente registrado con \xE9xito",gh.default.fire({icon:"success",title:"\xC9xito",text:this.successMessage}),this.resetForm("paciente")}catch(i){console.error("Error al registrar paciente:",i),this.errorMessage="Error al registrar paciente: "+i,gh.default.fire({icon:"error",title:"Error",text:this.errorMessage})}finally{this.loadingService.hide()}}else console.error("Error: Se requieren al menos dos im\xE1genes para el perfil del paciente.")})}registerEspecialista(r){return O(this,null,function*(){if(r.preventDefault(),this.selectedEspecialistaFile){this.loadingService.show();try{yield this.firebaseService.registerEspecialista(this.especialista,this.selectedEspecialistaFile),this.successMessage="Especialista registrado con \xE9xito",gh.default.fire({icon:"success",title:"\xC9xito",text:this.successMessage}),this.resetForm("especialista")}catch(i){console.error("Error al registrar especialista:",i),this.errorMessage="Error al registrar especialista: "+i,gh.default.fire({icon:"error",title:"Error",text:this.errorMessage})}finally{this.loadingService.hide()}}else console.error("Error: Se requiere una imagen para el perfil del especialista.")})}resetForm(r){r==="paciente"?(this.paciente={nombre:"",apellido:"",edad:null,dni:null,obraSocial:"",email:"",password:""},this.selectedPacienteFiles=void 0):r==="especialista"&&(this.especialista={nombre:"",apellido:"",edad:null,dni:null,especialidad:"",email:"",password:""},this.selectedEspecialistaFile=void 0),this.errorMessage="",this.successMessage=""}};e.\u0275fac=function(i){return new(i||e)(ee(Si),ee(by))},e.\u0275cmp=Je({type:e,selectors:[["app-registro"]],standalone:!0,features:[et],decls:33,vars:20,consts:[["src","assets/paciente.gif","alt","GIF de paciente",1,"img-paciente"],[1,"container"],[3,"submit"],["type","text","name","nombre","placeholder","Nombre","required","",3,"ngModelChange","ngModel"],["type","text","name","apellido","placeholder","Apellido","required","",3,"ngModelChange","ngModel"],["type","number","name","edad","placeholder","Edad","required","","min","0",3,"ngModelChange","ngModel"],["type","number","name","dni","placeholder","DNI","required","",3,"ngModelChange","ngModel"],["type","text","name","obraSocial","placeholder","Obra Social","required","",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Mail","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["type","file","required","","multiple","",3,"change"],["type","submit","value","Registrar"],["class","loading-overlay",4,"ngIf"],["type","text","name","especialidad","placeholder","Especialidad","required","",3,"ngModelChange","ngModel"],["type","file","required","",3,"change"],["src","assets/especialista.gif","alt","GIF de especialista",1,"img-especialista"],[1,"loading-overlay"],[1,"spinner"]],template:function(i,o){i&1&&(N(0,"body"),it(1,"img",0),N(2,"div",1)(3,"h2"),G(4,"Registro de Pacientes"),P(),N(5,"form",2),ye("submit",function(a){return o.registerPatient(a)}),N(6,"input",3),_e("ngModelChange",function(a){return Ce(o.paciente.nombre,a)||(o.paciente.nombre=a),a}),P(),N(7,"input",4),_e("ngModelChange",function(a){return Ce(o.paciente.apellido,a)||(o.paciente.apellido=a),a}),P(),N(8,"input",5),_e("ngModelChange",function(a){return Ce(o.paciente.edad,a)||(o.paciente.edad=a),a}),P(),N(9,"input",6),_e("ngModelChange",function(a){return Ce(o.paciente.dni,a)||(o.paciente.dni=a),a}),P(),N(10,"input",7),_e("ngModelChange",function(a){return Ce(o.paciente.obraSocial,a)||(o.paciente.obraSocial=a),a}),P(),N(11,"input",8),_e("ngModelChange",function(a){return Ce(o.paciente.email,a)||(o.paciente.email=a),a}),P(),N(12,"input",9),_e("ngModelChange",function(a){return Ce(o.paciente.password,a)||(o.paciente.password=a),a}),P(),N(13,"input",10),ye("change",function(a){return o.onFileSelected(a,"paciente")}),P(),it(14,"input",11),P(),Ke(15,yH,2,0,"div",12),Xi(16,"async"),P(),N(17,"div",1)(18,"h2"),G(19,"Registro de Especialistas"),P(),N(20,"form",2),ye("submit",function(a){return o.registerEspecialista(a)}),N(21,"input",3),_e("ngModelChange",function(a){return Ce(o.especialista.nombre,a)||(o.especialista.nombre=a),a}),P(),N(22,"input",4),_e("ngModelChange",function(a){return Ce(o.especialista.apellido,a)||(o.especialista.apellido=a),a}),P(),N(23,"input",5),_e("ngModelChange",function(a){return Ce(o.especialista.edad,a)||(o.especialista.edad=a),a}),P(),N(24,"input",6),_e("ngModelChange",function(a){return Ce(o.especialista.dni,a)||(o.especialista.dni=a),a}),P(),N(25,"input",13),_e("ngModelChange",function(a){return Ce(o.especialista.especialidad,a)||(o.especialista.especialidad=a),a}),P(),N(26,"input",8),_e("ngModelChange",function(a){return Ce(o.especialista.email,a)||(o.especialista.email=a),a}),P(),N(27,"input",9),_e("ngModelChange",function(a){return Ce(o.especialista.password,a)||(o.especialista.password=a),a}),P(),N(28,"input",14),ye("change",function(a){return o.onFileSelected(a,"especialista")}),P(),it(29,"input",11),P(),Ke(30,vH,2,0,"div",12),Xi(31,"async"),P(),it(32,"img",15),P()),i&2&&(z(6),we("ngModel",o.paciente.nombre),z(),we("ngModel",o.paciente.apellido),z(),we("ngModel",o.paciente.edad),z(),we("ngModel",o.paciente.dni),z(),we("ngModel",o.paciente.obraSocial),z(),we("ngModel",o.paciente.email),z(),we("ngModel",o.paciente.password),z(3),me("ngIf",Ji(16,16,o.loading$)),z(6),we("ngModel",o.especialista.nombre),z(),we("ngModel",o.especialista.apellido),z(),we("ngModel",o.especialista.edad),z(),we("ngModel",o.especialista.dni),z(),we("ngModel",o.especialista.especialidad),z(),we("ngModel",o.especialista.email),z(),we("ngModel",o.especialista.password),z(3),me("ngIf",Ji(31,18,o.loading$)))},dependencies:[Wn,bn,ws,_n,dh,Yn,vs,mo,hh,Nn,go,Bc],styles:["body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;background-color:#ede7e4;display:flex;justify-content:center;align-items:center;height:100vh;margin:0 0 20px;padding:0;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:1600px;padding:60px;background-color:#349cb6;box-shadow:0 0 10px #0000001a;border-radius:40px;margin:80px}.img-paciente[_ngcontent-%COMP%]{float:left;margin-right:50px;max-width:15%}.img-especialista[_ngcontent-%COMP%]{float:right;margin-right:50px;max-width:15%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:20px}.registro-paciente[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .registro-especialista[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:40%}.registro-especialista[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex:1;margin-right:180px}h2[_ngcontent-%COMP%]{color:#333;border-bottom:1px solid #ddd;padding-bottom:10px;text-align:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:4px;transition:all .3s ease;width:100%}input[type=submit][_ngcontent-%COMP%]{background-color:#56ab2f;color:#fff;border:none;border-radius:4px;padding:10px;cursor:pointer;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#449c24}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-top:16px solid #3498db;border-radius:50%;width:120px;height:120px;animation:spin 1s linear infinite}"]});let t=e;return t})();var mh=Bi(Di());var _N=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.firebaseService=i,this.pacientes=[],this.usuarios=[],this.especialistas=[],this.administradores=[],this.admin={nombre:"",apellido:"",edad:null,dni:null,email:"",password:"",imagen:null}}ngOnInit(){this.cargarPacientes(),this.cargarEspecialistas(),this.cargarAdministradores()}cargarPacientes(){this.firestore.collection("pacientes").valueChanges({idField:"index"}).subscribe(r=>{this.pacientes=r})}cargarEspecialistas(){this.firestore.collection("especialistas").valueChanges({idField:"index"}).subscribe(r=>{this.especialistas=r})}cargarAdministradores(){this.firestore.collection("administradores").valueChanges({idField:"id"}).subscribe(r=>{this.administradores=r})}habilitarUsuario(r,i,o){let s=o==="paciente"?"pacientes":o==="especialista"?"especialistas":"administradores";this.firestore.collection(s).doc(r).update({habilitado:i}).then(()=>{mh.default.fire({icon:"success",title:"Actualizado",text:`El usuario ha sido ${i?"habilitado":"inhabilitado"}.`})}).catch(a=>{console.error("Error al actualizar el usuario:",a),mh.default.fire({icon:"error",title:"Error",text:"Hubo un problema al actualizar el usuario."})})}onFileSelected(r){this.selectedFile=r.target.files[0]}registrarAdmin(){return O(this,null,function*(){try{yield this.firebaseService.registerUser(this.admin,[this.selectedFile],"administradores"),mh.default.fire({icon:"success",title:"Registro exitoso",text:"El administrador ha sido registrado con \xE9xito."}),this.cargarAdministradores()}catch(r){console.error("Error al registrar administrador:",r),mh.default.fire({icon:"error",title:"Error",text:"Hubo un problema al registrar el administrador."})}})}};e.\u0275fac=function(i){return new(i||e)(ee(Ut),ee(Si))},e.\u0275cmp=Je({type:e,selectors:[["app-usuarios"]],standalone:!0,features:[et],decls:13,vars:6,consts:[[3,"submit"],["type","text","name","nombre","placeholder","Nombre","required","",3,"ngModelChange","ngModel"],["type","text","name","apellido","placeholder","Apellido","required","",3,"ngModelChange","ngModel"],["type","number","name","edad","placeholder","Edad","required","","min","0",3,"ngModelChange","ngModel"],["type","number","name","dni","placeholder","DNI","required","",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["type","file","required","",3,"change"],["type","submit"]],template:function(i,o){i&1&&(N(0,"div")(1,"h2"),G(2,"Registrar Administrador"),P(),N(3,"form",0),ye("submit",function(){return o.registrarAdmin()}),N(4,"input",1),_e("ngModelChange",function(a){return Ce(o.admin.nombre,a)||(o.admin.nombre=a),a}),P(),N(5,"input",2),_e("ngModelChange",function(a){return Ce(o.admin.apellido,a)||(o.admin.apellido=a),a}),P(),N(6,"input",3),_e("ngModelChange",function(a){return Ce(o.admin.edad,a)||(o.admin.edad=a),a}),P(),N(7,"input",4),_e("ngModelChange",function(a){return Ce(o.admin.dni,a)||(o.admin.dni=a),a}),P(),N(8,"input",5),_e("ngModelChange",function(a){return Ce(o.admin.email,a)||(o.admin.email=a),a}),P(),N(9,"input",6),_e("ngModelChange",function(a){return Ce(o.admin.password,a)||(o.admin.password=a),a}),P(),N(10,"input",7),ye("change",function(a){return o.onFileSelected(a)}),P(),N(11,"button",8),G(12,"Registrar"),P()()()),i&2&&(z(4),we("ngModel",o.admin.nombre),z(),we("ngModel",o.admin.apellido),z(),we("ngModel",o.admin.edad),z(),we("ngModel",o.admin.dni),z(),we("ngModel",o.admin.email),z(),we("ngModel",o.admin.password))},dependencies:[bn,ws,_n,dh,Yn,vs,mo,hh,Nn,go,rn],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f9f9f9;border:1px solid #ccc;border-radius:5px}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{font-weight:700}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:3px;padding:8px 12px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}input[_ngcontent-%COMP%]{padding:8px;margin-bottom:10px;border:1px solid #ccc;border-radius:3px}input[type=file][_ngcontent-%COMP%]{margin-bottom:20px}button[type=submit][_ngcontent-%COMP%]{background-color:#28a745}"]});let t=e;return t})();var NC=Bi(Di());function wH(t,e){if(t&1&&(N(0,"tr")(1,"td"),G(2),P(),N(3,"td"),G(4),P(),N(5,"td"),G(6),P(),N(7,"td"),G(8),P(),it(9,"td"),P()),t&2){let n=e.$implicit;z(2),ut(n.nombre),z(2),ut(n.apellido),z(2),ut(n.email),z(2),ut(n.perfil)}}function _H(t,e){if(t&1&&(N(0,"tr")(1,"td"),G(2),P(),N(3,"td"),G(4),P(),N(5,"td"),G(6),P(),N(7,"td"),G(8),P(),it(9,"td"),P()),t&2){let n=e.$implicit;z(2),ut(n.nombre),z(2),ut(n.apellido),z(2),ut(n.email),z(2),ut(n.perfil)}}function bH(t,e){if(t&1&&(N(0,"tr")(1,"td"),G(2),P(),N(3,"td"),G(4),P(),N(5,"td"),G(6),P(),N(7,"td"),G(8),P(),it(9,"td"),P()),t&2){let n=e.$implicit;z(2),ut(n.nombre),z(2),ut(n.apellido),z(2),ut(n.email),z(2),ut(n.perfil)}}var bN=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.firebaseService=i,this.pacientes=[],this.usuarios=[],this.especialistas=[],this.administradores=[],this.admin={nombre:"",apellido:"",edad:null,dni:null,email:"",password:"",imagen:null,perfil:""}}ngOnInit(){this.cargarPacientes(),this.cargarEspecialistas(),this.cargarAdministradores()}cargarPacientes(){this.firestore.collection("pacientes").valueChanges({idField:"index"}).subscribe(r=>{this.pacientes=r.map(i=>qe(ne({},i),{perfil:"paciente"}))})}cargarEspecialistas(){this.firestore.collection("especialistas").valueChanges({idField:"index"}).subscribe(r=>{this.especialistas=r.map(i=>qe(ne({},i),{perfil:"especialista"}))})}cargarAdministradores(){this.firestore.collection("administradores").valueChanges({idField:"index"}).subscribe(r=>{this.administradores=r.map(i=>qe(ne({},i),{perfil:"administrador"}))})}habilitarUsuario(r,i,o){let s=o==="paciente"?"pacientes":o==="especialista"?"especialistas":"administradores";this.firestore.collection(s).doc(r).update({habilitado:i}).then(()=>{NC.default.fire({icon:"success",title:"Actualizado",text:`El usuario ha sido ${i?"habilitado":"inhabilitado"}.`})}).catch(a=>{console.error("Error al actualizar el usuario:",a),NC.default.fire({icon:"error",title:"Error",text:"Hubo un problema al actualizar el usuario."})})}onFileSelected(r){this.selectedFile=r.target.files[0]}};e.\u0275fac=function(i){return new(i||e)(ee(Ut),ee(Si))},e.\u0275cmp=Je({type:e,selectors:[["app-gestion"]],standalone:!0,features:[et],decls:17,vars:3,consts:[[4,"ngFor","ngForOf"]],template:function(i,o){i&1&&(N(0,"h2"),G(1,"Gesti\xF3n de Usuarios"),P(),N(2,"table")(3,"thead")(4,"tr")(5,"th"),G(6,"Nombre"),P(),N(7,"th"),G(8,"Apellido"),P(),N(9,"th"),G(10,"Email"),P(),N(11,"th"),G(12,"Perfil"),P()()(),N(13,"tbody"),Ke(14,wH,10,4,"tr",0)(15,_H,10,4,"tr",0)(16,bH,10,4,"tr",0),P()()),i&2&&(z(14),me("ngForOf",o.pacientes),z(),me("ngForOf",o.especialistas),z(),me("ngForOf",o.administradores))},dependencies:[rn,mr],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd}table[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:14px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left}"]});let t=e;return t})();var kC=Bi(Di());function EH(t,e){if(t&1){let n=Qt();N(0,"tr")(1,"td"),G(2),P(),N(3,"td"),G(4),P(),N(5,"td"),G(6),P(),N(7,"td"),G(8),P(),N(9,"td")(10,"button",1),ye("click",function(){let i=wt(n).$implicit,o=ke();return _t(o.habilitarUsuario(i.id,!i.habilitado))}),G(11),P()()()}if(t&2){let n=e.$implicit;z(2),ut(n.nombre),z(2),ut(n.apellido),z(2),ut(n.email),z(2),ut(n.perfil),z(3),Dt(" ",n.habilitado?"Deshabilitar":"Habilitar"," ")}}var EN=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.firebaseService=i,this.especialistas=[]}ngOnInit(){this.cargarEspecialistas()}cargarEspecialistas(){this.firestore.collection("especialistas").valueChanges({idField:"id"}).subscribe(r=>{this.especialistas=r})}habilitarUsuario(r,i){this.firestore.collection("especialistas").doc(r).update({habilitado:i}).then(()=>{kC.default.fire({icon:"success",title:"Actualizado",text:`El especialista ha sido ${i?"habilitado":"deshabilitado"}.`})}).catch(o=>{console.error("Error al actualizar el especialista:",o),kC.default.fire({icon:"error",title:"Error",text:"Hubo un problema al actualizar el especialista."})})}};e.\u0275fac=function(i){return new(i||e)(ee(Ut),ee(Si))},e.\u0275cmp=Je({type:e,selectors:[["app-especialistas"]],standalone:!0,features:[et],decls:15,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"click"]],template:function(i,o){i&1&&(N(0,"h2"),G(1,"Gesti\xF3n de Especialistas"),P(),N(2,"table")(3,"thead")(4,"tr")(5,"th"),G(6,"Nombre"),P(),N(7,"th"),G(8,"Apellido"),P(),N(9,"th"),G(10,"Email"),P(),N(11,"th"),G(12,"Acciones"),P()()(),N(13,"tbody"),Ke(14,EH,12,5,"tr",0),P()()),i&2&&(z(14),me("ngForOf",o.especialistas))},dependencies:[rn,mr],styles:["table[_ngcontent-%COMP%]{width:80%;border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:5px;border:1px solid #ddd}table[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:14px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}"]});let t=e;return t})();var IN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Je({type:e,selectors:[["app-vistausuarios"]],standalone:!0,features:[et],decls:5,vars:0,consts:[[1,"container"],[1,"row"]],template:function(i,o){i&1&&(N(0,"div",0)(1,"div",1),it(2,"app-gestion")(3,"app-especialistas")(4,"app-usuarios"),P()())},dependencies:[_N,bN,EN],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;padding:20px;background-color:#ecdcd4;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 4px #0000001a}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}app-especialistas[_ngcontent-%COMP%]{width:50%;padding:20px;background-color:#349cb6;border:1px solid #ecdcd4;border-radius:8px;transition:transform .2s ease;cursor:pointer}app-gestion[_ngcontent-%COMP%], app-usuarios[_ngcontent-%COMP%]{width:50%;padding:20px;background-color:#349cb6;border:1px solid #ecdcd4;border-radius:8px;transition:transform .2s ease;cursor:pointer}app-gestion[_ngcontent-%COMP%]:hover, app-usuarios[_ngcontent-%COMP%]:hover, app-especialistas[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a}.app-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.app-description[_ngcontent-%COMP%]{font-size:14px;color:#777}.app-gestion.minimized[_ngcontent-%COMP%]{width:0;padding:0;overflow:hidden;transition:width .2s ease}.app-gestion[_ngcontent-%COMP%]   .app-action-icon[_ngcontent-%COMP%]:before{content:"u25b2"}.app-gestion.minimized[_ngcontent-%COMP%]   .app-action-icon[_ngcontent-%COMP%]:before{content:"u25bc"}.loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s infinite linear}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']});let t=e;return t})();var CN=Bi(Di());var DN=(()=>{let e=class e{constructor(r,i,o){this.afAuth=r,this.firestore=i,this.router=o}canActivate(){return this.afAuth.authState.pipe(Xe(r=>(console.log("User:",r),r?this.firestore.collection("administradores").doc(r.uid).get().pipe(ae(i=>i.exists),yt(i=>{console.log("Is Admin:",i),i?console.log("Admin access granted"):CN.default.fire("","Usuario no autorizado","error").then(()=>{console.log("Navigating to login"),this.router.navigate(["/login"])})})):(console.log("No user logged in"),this.router.navigate(["/login"]),le(!1)))),ae(r=>(console.log("Final admin check:",r),r)))}};e.\u0275fac=function(i){return new(i||e)(K(wn),K(Ut),K(po))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var TN=Bi(Di());var Ju=(()=>{let e=class e{constructor(r){this.firestore=r}getTurnosPaciente(r){return this.firestore.collection("turnos",i=>i.where("pacienteId","==",r)).snapshotChanges().pipe(ae(i=>i.map(o=>{let s=o.payload.doc.data(),a=o.payload.doc.id;return ne({id:a},s)})))}getTurnos(){return this.firestore.collection("turnos").valueChanges()}getTurnosEspecialista(r){return this.firestore.collection("turnos",i=>i.where("especialistaId","==",r)).valueChanges()}getTurnosAdmin(){return this.firestore.collection("turnos").valueChanges()}buscarTurnos(r,i){let o=this.firestore.collection("turnos");return r&&(o=o.where("especialidadId","==",r)),i&&(o=o.where("especialistaId","==",i)),o.valueChanges()}cancelarTurno(r,i){return this.firestore.collection("turnos").doc(r).update({estado:"Cancelado",comentarioCancelacion:i})}rechazarTurno(r,i){return this.firestore.collection("turnos").doc(r).update({estado:"Rechazado",comentarioRechazo:i})}aceptarTurno(r){return this.firestore.collection("turnos").doc(r).update({estado:"Aceptado"})}finalizarTurno(r,i){return this.firestore.collection("turnos").doc(r).update({estado:"Realizado",resena:i})}};e.\u0275fac=function(i){return new(i||e)(K(Ut))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IH(t,e){if(t&1){let n=Qt();N(0,"button",3),ye("click",function(){wt(n);let i=ke().$implicit,o=ke(2);return _t(o.cancelarTurno(i.id))}),G(1,"Cancelar Turno"),P()}}function CH(t,e){if(t&1&&(N(0,"div")(1,"p"),G(2),P(),N(3,"p"),G(4),P(),N(5,"p"),G(6),P(),N(7,"p"),G(8),P(),N(9,"p"),G(10),P(),Ke(11,IH,2,0,"button",6),P()),t&2){let n=e.$implicit,r=ke(2);z(2),Dt("Especialidad: ",n.especialidadId,""),z(2),Dt("Especialista: ",n.especialistaId,""),z(2),Dt("Fecha: ",n.fecha,""),z(2),Dt("Hora: ",n.hora,""),z(2),Dt("Estado: ",n.estado,""),z(),me("ngIf",r.mostrarCancelar(n.estado))}}function DH(t,e){if(t&1&&(N(0,"div"),Ke(1,CH,12,6,"div",5),P()),t&2){let n=ke();z(),me("ngForOf",n.turnosFiltrados)}}var AN=(()=>{let e=class e{constructor(r){this.turnosService=r,this.turnos=[],this.turnosFiltrados=[],this.filtroEspecialidad="",this.filtroEspecialista=""}ngOnInit(){this.obtenerTurnos()}obtenerTurnos(){this.turnosService.getTurnos().subscribe(r=>{this.turnos=r})}filtrarTurnos(){this.turnosFiltrados=this.turnos.filter(r=>{let i=r.especialidadId.toLowerCase(),o=r.especialistaId.toLowerCase(),s=this.filtroEspecialidad.toLowerCase(),a=this.filtroEspecialista.toLowerCase();return r.estado.toLowerCase()==="cancelado"?!1:i.includes(s)&&o.includes(a)})}mostrarCancelar(r){return r!=="Aceptado"&&r!=="Realizado"&&r!=="Rechazado"}cancelarTurno(r){let i=prompt("Ingrese el motivo de la cancelaci\xF3n:");i&&this.turnosService.cancelarTurno(r,i).then(()=>{this.obtenerTurnos()}).catch(o=>{console.error("Error al cancelar turno:",o),TN.default.fire("Error","Ocurri\xF3 un error al cancelar el turno. Por favor, int\xE9ntalo nuevamente.","error")})}buscarTurnos(){this.filtrarTurnos()}};e.\u0275fac=function(i){return new(i||e)(ee(Ju))},e.\u0275cmp=Je({type:e,selectors:[["app-turnos"]],standalone:!0,features:[et],decls:8,vars:3,consts:[["for","filtro"],["type","text","id","filtro","placeholder","Especialidad",3,"ngModelChange","ngModel"],["type","text","id","filtro","placeholder","Especialista",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"]],template:function(i,o){i&1&&(N(0,"div")(1,"label",0),G(2,"Filtrar por:"),P(),N(3,"input",1),_e("ngModelChange",function(a){return Ce(o.filtroEspecialidad,a)||(o.filtroEspecialidad=a),a}),P(),N(4,"input",2),_e("ngModelChange",function(a){return Ce(o.filtroEspecialista,a)||(o.filtroEspecialista=a),a}),P(),N(5,"button",3),ye("click",function(){return o.buscarTurnos()}),G(6,"Buscar"),P()(),Ke(7,DH,2,1,"div",4)),i&2&&(z(3),we("ngModel",o.filtroEspecialidad),z(),we("ngModel",o.filtroEspecialista),z(3),me("ngIf",o.turnosFiltrados&&o.turnosFiltrados.length>0))},dependencies:[rn,mr,Wn,Ii,_n,Yn,bn,Nn],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#f8f8f8}label[_ngcontent-%COMP%]{font-weight:700}input[type=text][_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;margin-right:10px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:10px 20px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{background-color:#349cb6;border:1px solid #ddd;border-radius:4px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}p[_ngcontent-%COMP%]{margin:0}button.cancelar[_ngcontent-%COMP%]{background-color:#dc3545}div[_ngcontent-%COMP%]{transition:transform .3s ease}div[_ngcontent-%COMP%]:hover{transform:scale(1.02)}"]});let t=e;return t})();function TH(t,e){if(t&1){let n=Qt();N(0,"div",4)(1,"label",15),G(2,"Paciente"),P(),N(3,"input",16),_e("ngModelChange",function(i){wt(n);let o=ke();return Ce(o.pacienteNombre,i)||(o.pacienteNombre=i),_t(i)}),P()()}if(t&2){let n=ke();z(3),we("ngModel",n.pacienteNombre)}}function AH(t,e){if(t&1&&(N(0,"option",18),G(1),P()),t&2){let n=e.$implicit;me("value",n.id),z(),ut(n.nombre)}}function SH(t,e){if(t&1){let n=Qt();N(0,"div",4)(1,"label",15),G(2,"Paciente"),P(),N(3,"select",17),_e("ngModelChange",function(i){wt(n);let o=ke();return Ce(o.pacienteSeleccionado,i)||(o.pacienteSeleccionado=i),_t(i)}),Ke(4,AH,2,2,"option",7),Xi(5,"async"),P()()}if(t&2){let n=ke();z(3),we("ngModel",n.pacienteSeleccionado),z(),me("ngForOf",Ji(5,2,n.pacientes$))}}function MH(t,e){if(t&1&&(N(0,"option",18),G(1),P()),t&2){let n=e.$implicit;me("value",n.especialidad),z(),ut(n.especialidad)}}function xH(t,e){if(t&1&&(N(0,"option",18),G(1),P()),t&2){let n=e.$implicit;me("value",n.nombre),z(),ut(n.nombre)}}var SN=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.afAuth=i,this.pacientes$=null,this.especialidades$=null,this.especialistas$=le([]),this.pacienteNombre=null,this.pacienteSeleccionado="",this.especialidadSeleccionada="",this.especialistaSeleccionado="",this.fechaSeleccionada="",this.horaSeleccionada="",this.isAdmin=!1}ngOnInit(){this.afAuth.authState.subscribe(r=>{r?(this.firestore.collection("pacientes").doc(r.uid).valueChanges().subscribe(i=>{i&&(this.pacienteNombre=i.nombre)}),this.isAdmin=!1,this.especialidades$=this.firestore.collection("especialidades").valueChanges().pipe(ae(i=>i.map(o=>o.nombre))),this.especialistas$=this.firestore.collection("especialistas").valueChanges()):(this.pacienteNombre=null,this.isAdmin=!1)})}solicitarTurno(){if(!this.especialidadSeleccionada||!this.especialistaSeleccionado||!this.fechaSeleccionada||!this.horaSeleccionada){console.error("Todos los campos son requeridos.");return}if(!this.especialistas$){console.error("No se encontraron especialistas.");return}this.afAuth.authState.subscribe(r=>{if(r){let i=r.uid;this.especialistas$.pipe(ae(s=>{let a=s.find(c=>c.nombre===this.especialistaSeleccionado);return console.log("Especialista seleccionado:",a),a?a.nombre:null})).subscribe(s=>{s?this.firestore.collection("turnos").add({pacienteId:i,especialidadId:this.especialidadSeleccionada,especialistaId:s,fecha:this.fechaSeleccionada,hora:this.horaSeleccionada,estado:"Pendiente"}).then(()=>{console.log("Turno solicitado con \xE9xito")}).catch(a=>{console.error("Error al solicitar turno:",a)}):console.error("No se encontr\xF3 el nombre del especialista seleccionado.")})}else console.error("Usuario no autenticado.")})}};e.\u0275fac=function(i){return new(i||e)(ee(Ut),ee(wn))},e.\u0275cmp=Je({type:e,selectors:[["app-solicitar-turnos"]],standalone:!0,features:[et],decls:29,vars:13,consts:[["solicitudForm","ngForm"],[1,"solicitud-turno-container"],[3,"ngSubmit"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","especialidad"],["id","especialidad","name","especialidad","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","especialista"],["id","especialista","name","especialista","required","",3,"ngModelChange","ngModel"],["for","fecha"],["type","date","id","fecha","name","fecha","required","",3,"ngModelChange","ngModel"],["for","hora"],["type","time","id","hora","name","hora","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],["for","paciente"],["type","text","id","paciente","name","paciente","disabled","",3,"ngModelChange","ngModel"],["id","paciente","name","paciente","required","",3,"ngModelChange","ngModel"],[3,"value"]],template:function(i,o){if(i&1){let s=Qt();N(0,"div",1)(1,"h2"),G(2,"Solicitar Turno"),P(),N(3,"form",2,0),ye("ngSubmit",function(){return wt(s),_t(o.solicitarTurno())}),Ke(5,TH,4,1,"div",3)(6,SH,6,4,"div",3),N(7,"div",4)(8,"label",5),G(9,"Especialidad"),P(),N(10,"select",6),_e("ngModelChange",function(c){return wt(s),Ce(o.especialidadSeleccionada,c)||(o.especialidadSeleccionada=c),_t(c)}),Ke(11,MH,2,2,"option",7),Xi(12,"async"),P()(),N(13,"div",4)(14,"label",8),G(15,"Especialista"),P(),N(16,"select",9),_e("ngModelChange",function(c){return wt(s),Ce(o.especialistaSeleccionado,c)||(o.especialistaSeleccionado=c),_t(c)}),Ke(17,xH,2,2,"option",7),Xi(18,"async"),P()(),N(19,"div",4)(20,"label",10),G(21,"Fecha del turno"),P(),N(22,"input",11),_e("ngModelChange",function(c){return wt(s),Ce(o.fechaSeleccionada,c)||(o.fechaSeleccionada=c),_t(c)}),P()(),N(23,"div",4)(24,"label",12),G(25,"Hora del turno"),P(),N(26,"input",13),_e("ngModelChange",function(c){return wt(s),Ce(o.horaSeleccionada,c)||(o.horaSeleccionada=c),_t(c)}),P()(),N(27,"button",14),G(28,"Solicitar Turno"),P()()()}if(i&2){let s=_S(4);z(5),me("ngIf",!o.isAdmin),z(),me("ngIf",o.isAdmin),z(4),we("ngModel",o.especialidadSeleccionada),z(),me("ngForOf",Ji(12,9,o.especialistas$)),z(5),we("ngModel",o.especialistaSeleccionado),z(),me("ngForOf",Ji(18,11,o.especialistas$)),z(5),we("ngModel",o.fechaSeleccionada),z(4),we("ngModel",o.horaSeleccionada),z(),me("disabled",!s.form.valid)}},dependencies:[rn,mr,Wn,Bc,Ii,ws,eN,nN,_n,uy,Yn,vs,mo,bn,Nn,go],styles:[".solicitud-turno-container[_ngcontent-%COMP%]{background-color:#349cb6;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-weight:700}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:14px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:10px 20px;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}.solicitud-turno-container[_ngcontent-%COMP%]{transition:transform .3s ease}.solicitud-turno-container[_ngcontent-%COMP%]:hover{transform:scale(1.02)}"]});let t=e;return t})();var yh=Bi(Di());function PH(t,e){if(t&1){let n=Qt();N(0,"button",4),ye("click",function(){wt(n);let i=ke().$implicit,o=ke(2);return _t(o.verResena(i))}),G(1,"Ver Rese\xF1a"),P()}}function RH(t,e){if(t&1){let n=Qt();N(0,"button",4),ye("click",function(){wt(n);let i=ke().$implicit,o=ke(2);return _t(o.completarEncuesta(i))}),G(1,"Completar Encuesta"),P()}}function NH(t,e){if(t&1){let n=Qt();N(0,"button",4),ye("click",function(){wt(n);let i=ke().$implicit,o=ke(2);return _t(o.calificarAtencion(i))}),G(1,"Calificar Atenci\xF3n"),P()}}function kH(t,e){if(t&1){let n=Qt();N(0,"button",4),ye("click",function(){wt(n);let i=ke().$implicit,o=ke(2);return _t(o.cancelarTurno(i.id))}),G(1,"Cancelar Turno"),P()}}function OH(t,e){if(t&1&&(N(0,"div")(1,"p"),G(2),P(),N(3,"p"),G(4),P(),N(5,"p"),G(6),P(),N(7,"p"),G(8),P(),N(9,"p"),G(10),P(),Ke(11,PH,2,0,"button",7)(12,RH,2,0,"button",7)(13,NH,2,0,"button",7)(14,kH,2,0,"button",7),P()),t&2){let n=e.$implicit,r=ke(2);z(2),Dt("Especialidad: ",n.especialidadId,""),z(2),Dt("Especialista: ",n.especialistaId,""),z(2),Dt("Fecha: ",n.fecha,""),z(2),Dt("Hora: ",n.hora,""),z(2),Dt("Estado: ",n.estado,""),z(),me("ngIf",n.resena),z(),me("ngIf",n.estado==="Realizado"&&!n.encuestaCompleta),z(),me("ngIf",n.estado==="Realizado"&&n.encuestaCompleta),z(),me("ngIf",r.mostrarCancelar(n.estado)&&n.estado!=="Cancelado")}}function FH(t,e){if(t&1&&(N(0,"div"),Ke(1,OH,15,9,"div",6),P()),t&2){let n=ke();z(),me("ngForOf",n.turnosFiltrados)}}var MN=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.turnosService=i,this.turnos=[],this.turnosFiltrados=[],this.turnoBuscado=null,this.filtroEspecialidad="",this.filtroEspecialista="",this.pacienteUid="",this.busquedaRealizada=!1,this.mostrarListaTurnos=!1}ngOnInit(){this.afAuth.authState.subscribe(r=>{r&&r.uid&&(this.pacienteUid=r.uid,console.log("UID del paciente:",this.pacienteUid),this.obtenerTurnos())})}obtenerTurnos(){this.turnosService.getTurnosPaciente(this.pacienteUid).subscribe(r=>{console.log("Turnos del paciente:",r),this.turnos=r,this.turnosFiltrados=r})}buscarTurnos(){if(this.filtroEspecialidad&&this.filtroEspecialista){let r=this.filtroEspecialidad.trim().toLowerCase(),i=this.filtroEspecialista.trim().toLowerCase();console.log("Especialidad filtrada:",r),console.log("Especialista filtrado:",i),this.turnosFiltrados=this.turnos.filter(o=>{if(o.especialidadId&&o.especialistaId){let s=o.especialidadId.trim().toLowerCase(),a=o.especialistaId.trim().toLowerCase();return console.log("Especialidad del turno:",s),console.log("Especialista del turno:",a),s===r&&a===i}else return!1}),console.log("Turnos filtrados:",this.turnosFiltrados),this.mostrarListaTurnos=this.turnosFiltrados.length>0,this.turnosFiltrados.length===0&&yh.default.fire({icon:"info",title:"No hay turnos",text:"No se encontraron turnos para el especialista y especialidad seleccionados."}),this.busquedaRealizada=!0}else yh.default.fire({icon:"error",title:"Error",text:"Debes ingresar la especialidad y el especialista para buscar turnos."})}mostrarCancelar(r){return r!=="Realizado"}cancelarTurno(r){let i=prompt("Ingrese el motivo de la cancelaci\xF3n:");i&&this.turnosService.cancelarTurno(r,i).then(()=>{this.turnos=this.turnos.filter(o=>o.id!==r),this.buscarTurnos()}).catch(o=>{console.error("Error al cancelar turno:",o)})}verResena(r){yh.default.fire("Rese\xF1a",r.resena||"No hay rese\xF1a disponible","info")}completarEncuesta(r){yh.default.fire("Encuesta","Aqu\xED puedes completar la encuesta.","info")}calificarAtencion(r){}};e.\u0275fac=function(i){return new(i||e)(ee(wn),ee(Ju))},e.\u0275cmp=Je({type:e,selectors:[["app-misturnos"]],standalone:!0,features:[et],decls:12,vars:3,consts:[["for","especialidad"],["type","text","id","especialidad","placeholder","Ingrese la especialidad",3,"ngModelChange","ngModel"],["for","especialista"],["type","text","id","especialista","placeholder","Ingrese el especialista",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"]],template:function(i,o){i&1&&(N(0,"h2"),G(1,"Mis Turnos"),P(),N(2,"div")(3,"label",0),G(4,"Especialidad:"),P(),N(5,"input",1),_e("ngModelChange",function(a){return Ce(o.filtroEspecialidad,a)||(o.filtroEspecialidad=a),a}),P(),N(6,"label",2),G(7,"Especialista:"),P(),N(8,"input",3),_e("ngModelChange",function(a){return Ce(o.filtroEspecialista,a)||(o.filtroEspecialista=a),a}),P(),N(9,"button",4),ye("click",function(){return o.buscarTurnos()}),G(10,"Buscar"),P()(),Ke(11,FH,2,1,"div",5)),i&2&&(z(5),we("ngModel",o.filtroEspecialidad),z(3),we("ngModel",o.filtroEspecialista),z(3),me("ngIf",o.busquedaRealizada&&o.turnosFiltrados.length>0))},dependencies:[rn,mr,Wn,bn,_n,Yn,Nn]});let t=e;return t})();var vh=Bi(Di());var xN=(()=>{let e=class e{constructor(r){this.firestore=r}buscarPacientePorNombreYApellido(r,i){return this.firestore.collection("pacientes",o=>o.where("nombre","==",r).where("apellido","==",i)).valueChanges({idField:"uid"})}};e.\u0275fac=function(i){return new(i||e)(K(Ut))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LH(t,e){if(t&1){let n=Qt();N(0,"div")(1,"button",1),ye("click",function(){wt(n);let i=ke().$implicit,o=ke();return _t(o.cancelarTurno(i.id))}),G(2,"Cancelar turno"),P()()}}function jH(t,e){if(t&1){let n=Qt();N(0,"div")(1,"button",1),ye("click",function(){wt(n);let i=ke().$implicit,o=ke();return _t(o.rechazarTurno(i.id))}),G(2,"Rechazar turno"),P()()}}function BH(t,e){if(t&1){let n=Qt();N(0,"div")(1,"button",1),ye("click",function(){wt(n);let i=ke().$implicit,o=ke();return _t(o.aceptarTurno(i.id))}),G(2,"Aceptar turno"),P()()}}function UH(t,e){if(t&1){let n=Qt();N(0,"div")(1,"button",1),ye("click",function(){wt(n);let i=ke().$implicit,o=ke();return _t(o.finalizarTurno(i.id))}),G(2,"Finalizar turno"),P()()}}function $H(t,e){if(t&1){let n=Qt();N(0,"div")(1,"button",1),ye("click",function(){wt(n);let i=ke().$implicit,o=ke();return _t(o.verResena(i))}),G(2,"Ver Rese\xF1a"),P()()}}function qH(t,e){if(t&1&&(N(0,"div")(1,"p"),G(2),P(),N(3,"p"),G(4),P(),N(5,"p"),G(6),P(),N(7,"p"),G(8),P(),N(9,"p"),G(10),P(),Ke(11,LH,3,0,"div",3)(12,jH,3,0,"div",3)(13,BH,3,0,"div",3)(14,UH,3,0,"div",3)(15,$H,3,0,"div",3),P()),t&2){let n=e.$implicit,r=ke();z(2),Dt("Especialidad: ",n.especialidadId,""),z(2),Dt("Paciente ID: ",n.pacienteId,""),z(2),Dt("Fecha: ",n.fecha,""),z(2),Dt("Hora: ",n.hora,""),z(2),Dt("Estado: ",n.estado,""),z(),me("ngIf",r.puedeCancelar(n)),z(),me("ngIf",r.puedeRechazar(n)),z(),me("ngIf",r.puedeAceptar(n)),z(),me("ngIf",r.puedeFinalizar(n)),z(),me("ngIf",r.tieneResena(n))}}var PN=(()=>{let e=class e{constructor(r,i){this.turnosService=r,this.pacienteService=i,this.turnos=[],this.turnosFiltrados=[],this.filtroEspecialidad="",this.filtroPaciente="",this.especialistaId="",this.filtroPacienteNombre="",this.filtroPacienteApellido=""}ngOnInit(){this.obtenerTurnos()}obtenerTurnosEspecialista(){this.turnosService.getTurnosEspecialista(this.especialistaId).subscribe(r=>{this.turnos=r,this.filtrarTurnos()})}filtrarTurnos(){this.turnosFiltrados=this.turnos.filter(r=>r.especialidadId.toLowerCase().includes(this.filtroEspecialidad.toLowerCase())&&(r.paciente?r.paciente.toLowerCase().includes(this.filtroPaciente.toLowerCase()):!1))}cancelarTurno(r){let i=prompt("Ingrese el motivo de la cancelaci\xF3n:");i&&this.turnosService.cancelarTurno(r,i).then(()=>{this.turnos=this.turnos.filter(o=>o.id!==r),this.buscarTurnos()}).catch(o=>{console.error("Error al cancelar turno:",o)})}rechazarTurno(r){let i=prompt("Ingrese el motivo del rechazo:");i&&this.turnosService.rechazarTurno(r,i).then(()=>{this.obtenerTurnosEspecialista(),vh.default.fire("Turno rechazado","","success")}).catch(o=>{console.error("Error al rechazar turno:",o),vh.default.fire("Error","Ocurri\xF3 un error al rechazar el turno. Por favor, int\xE9ntalo nuevamente.","error")})}aceptarTurno(r){this.turnosService.aceptarTurno(r).then(()=>{console.log("Turno aceptado con \xE9xito.")}).catch(i=>{console.error("Error al aceptar turno:",i)})}finalizarTurno(r){let i=prompt("Ingrese la rese\xF1a o comentario del turno:");i&&this.turnosService.finalizarTurno(r,i).then(()=>{this.obtenerTurnosEspecialista(),vh.default.fire("Turno finalizado","","success")}).catch(o=>{console.error("Error al finalizar turno:",o),vh.default.fire("Error","Ocurri\xF3 un error al finalizar el turno. Por favor, int\xE9ntalo nuevamente.","error")})}verResena(r){alert(r.resena||"No hay rese\xF1a disponible")}puedeCancelar(r){return r.estado!=="Aceptado"&&r.estado!=="Realizado"&&r.estado!=="Rechazado"}puedeRechazar(r){return r.estado!=="Aceptado"&&r.estado!=="Realizado"&&r.estado!=="Cancelado"}puedeAceptar(r){return r.estado!=="Realizado"&&r.estado!=="Cancelado"&&r.estado!=="Rechazado"}puedeFinalizar(r){return r.estado==="Aceptado"}tieneResena(r){return!!r.resena}obtenerTurnos(){this.turnosService.getTurnos().subscribe(r=>{this.turnos=r})}buscarTurnos(){if(this.filtroPacienteNombre.trim()===""||this.filtroPacienteApellido.trim()===""){console.log("Por favor, ingrese el nombre y el apellido del paciente.");return}console.log("Buscando turnos para el paciente:",this.filtroPacienteNombre,this.filtroPacienteApellido),this.pacienteService.buscarPacientePorNombreYApellido(this.filtroPacienteNombre,this.filtroPacienteApellido).subscribe(r=>{if(console.log("Paciente encontrado:",r),r.length>0){let i=r[0].uid;console.log("UID del paciente encontrado:",i),this.turnosFiltrados=this.turnos.filter(o=>o.especialidadId.toLowerCase().includes(this.filtroEspecialidad.toLowerCase())&&o.pacienteId===i),console.log("Turnos filtrados para el paciente:",this.turnosFiltrados),this.turnosFiltrados.length===0&&console.log("No se encontraron turnos para el paciente.")}else console.log("No se encontr\xF3 ning\xFAn paciente con el nombre y apellido proporcionados.")})}};e.\u0275fac=function(i){return new(i||e)(ee(Ju),ee(xN))},e.\u0275cmp=Je({type:e,selectors:[["app-turnos-especialista"]],standalone:!0,features:[et],decls:16,vars:4,consts:[["type","text",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(i,o){i&1&&(N(0,"div")(1,"h2"),G(2,"Mis Turnos como Especialista"),P(),N(3,"div")(4,"label"),G(5,"Especialidad:"),P(),N(6,"input",0),_e("ngModelChange",function(a){return Ce(o.filtroEspecialidad,a)||(o.filtroEspecialidad=a),a}),P(),N(7,"label"),G(8,"Nombre del paciente:"),P(),N(9,"input",0),_e("ngModelChange",function(a){return Ce(o.filtroPacienteNombre,a)||(o.filtroPacienteNombre=a),a}),P(),N(10,"label"),G(11,"Apellido del paciente:"),P(),N(12,"input",0),_e("ngModelChange",function(a){return Ce(o.filtroPacienteApellido,a)||(o.filtroPacienteApellido=a),a}),P(),N(13,"button",1),ye("click",function(){return o.buscarTurnos()}),G(14,"Buscar"),P()(),Ke(15,qH,16,10,"div",2),P()),i&2&&(z(6),we("ngModel",o.filtroEspecialidad),z(3),we("ngModel",o.filtroPacienteNombre),z(3),we("ngModel",o.filtroPacienteApellido),z(3),me("ngForOf",o.turnosFiltrados))},dependencies:[rn,mr,Wn,Ii,_n,Yn,bn,Nn]});let t=e;return t})();var RN=[{path:"home",component:P1},{path:"solicitud",component:SN},{path:"EspecialistaTurno",component:PN},{path:"misturnos",component:MN},{path:"Turnos",component:AN},{path:"login",component:vN},{path:"gestion",component:IN,canActivate:[DN]},{path:"register",component:wN},{path:"",redirectTo:"/home",pathMatch:"full"}];var NN={apiKey:"AIzaSyDNLikYsZRPri9E24kHAdcwHDgdmDqql_s",authDomain:"clinica-efd25.firebaseapp.com",projectId:"clinica-efd25",storageBucket:"clinica-efd25.appspot.com",messagingSenderId:"445632815623",appId:"1:445632815623:web:5be72d4431af83a61080a2"},kN={providers:[y1(RN),oM(()=>sM(NN)),cM(()=>uM(tg())),rR(()=>iR(tg())),FR(()=>VR(tg())),rn,bn,Ii,QS,{provide:ms,useValue:NN}]};function zH(t,e){t&1&&(N(0,"li",6)(1,"a",11),G(2,"Usuarios"),P()())}function HH(t,e){t&1&&(N(0,"a",12),G(1," Solicitar Turnos"),P())}function GH(t,e){t&1&&(N(0,"li",6)(1,"a",13),G(2,"Mis Turnos"),P()())}var ON=(()=>{let e=class e{constructor(r,i){this.afAuth=r,this.firestore=i,this.isPaciente=!1,this.isAdministrador=!1}ngOnInit(){this.isPaciente=!1,this.isAdministrador=!1,this.afAuth.authState.subscribe(r=>{r?(this.firestore.collection("pacientes").doc(r.uid).get().subscribe(i=>{this.isPaciente=i.exists}),this.firestore.collection("administradores").doc(r.uid).get().subscribe(i=>{this.isAdministrador=i.exists})):(this.isPaciente=!1,this.isAdministrador=!1)})}};e.\u0275fac=function(i){return new(i||e)(ee(wn),ee(Ut))},e.\u0275cmp=Je({type:e,selectors:[["app-menu"]],standalone:!0,features:[et],decls:17,vars:3,consts:[[1,"navbar","navbar-expand-md","bg-body-tertiary","fixed-top"],[1,"container-fluid","d-flex","justify-content-between","align-items-center"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbar-toggler","aria-controls","navbar-toggler","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbar-toggler",1,"collapse","navbar-collapse"],[1,"navbar-nav","justify-content-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link","active"],["class","nav-item",4,"ngIf"],["routerLink","/solicitud","class","nav-link",4,"ngIfIsPaciente","ngIf"],["routerLink","/Turnos",1,"nav-link"],["routerLink","/gestion",1,"nav-link"],["routerLink","/solicitud",1,"nav-link"],["routerLink","/misturnos",1,"nav-link"]],template:function(i,o){i&1&&(N(0,"nav",0)(1,"div",1)(2,"button",2),it(3,"span",3),P(),N(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),G(8,"Home"),P()(),Ke(9,zH,3,0,"li",8),N(10,"li",6),Ke(11,HH,2,0,"a",9),P(),N(12,"li",6)(13,"a",10),G(14,"Turnos"),P()(),Ke(15,GH,3,0,"li",8),P()()()(),it(16,"router-outlet")),i&2&&(z(9),me("ngIf",o.isAdministrador),z(2),me("ngIf",o.isAdministrador),z(4),me("ngIf",o.isPaciente))},dependencies:[nh,Ym,Wn],styles:['body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#95abce}a[_ngcontent-%COMP%]{color:#428bca;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#6aa3d5;text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}.logged-in-user[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:16px;margin-right:20px}.logged-in-user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;color:#fff}.logged-in-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3b58b9;color:#fff;border:none;font-size:29;padding:4px 20px;border-radius:4px;cursor:pointer}.logged-in-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#8988a0}.navbar[_ngcontent-%COMP%]{padding:0}.navbar[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;font-weight:1600;text-align:center}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#fff;padding:10px 30px;font-size:18px;text-transform:uppercase;transition:.3s}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%]{font-size:18px;line-height:0;margin-left:5px}.navbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#428bca;color:#fff;border:none;border-radius:30px;padding:10px 20px;font-size:15px;text-transform:uppercase;transition:background-color .3s}.navbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#629fd3}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;list-style:none;align-items:center}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;position:relative;margin-right:20px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{display:flex;align-items:center;padding:10px 30px;text-transform:uppercase;font-size:12px;font-weight:600;color:#fff;white-space:nowrap;transition:.3s}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%]{font-size:12px;line-height:0;margin-left:5px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{color:#5697d0}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;position:absolute;left:14px;top:calc(100% + 30px);margin:0;padding:10px 0;z-index:99;opacity:0;visibility:hidden;background:#fff;box-shadow:0 0 30px #435c9740;transition:.3s}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-width:200px}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px;font-weight:500;text-transform:none;color:#193c5a}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{color:#428bca}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]:hover > ul[_ngcontent-%COMP%]{opacity:1;top:100%;visibility:visible}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{top:0;left:calc(100% - 30px);visibility:hidden}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]:hover > ul[_ngcontent-%COMP%]{opacity:1;top:0;left:100%;visibility:visible}*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600}.navbar[_ngcontent-%COMP%]{background:#486e8de6}.btn[_ngcontent-%COMP%]{background:#428bca;border-radius:30px;color:#ffe5d9!important}@media (max-width: 1366px){.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{left:-90%}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]:hover > ul[_ngcontent-%COMP%]{left:-100%}}#hero[_ngcontent-%COMP%]{width:100%;height:100vh;background-color:#9fc3e0cc;overflow:hidden;position:relative}.custom-img[_ngcontent-%COMP%]{width:120%;height:auto}#hero[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]:before{background-size:cover;background-position:center;background-repeat:no-repeat;position:absolute;inset:0}#hero[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]:before{content:"";background-color:#0c0d0ecc}#hero[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:absolute;inset:70px 50px 0}.logged-in-user[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-left:10px}.logged-in-user-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:20px}.logged-in-user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:20px;color:#f8f8f8;font-weight:700}.logged-in-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3b58b9;color:#fff;border:none;padding:4px 10px;border-radius:4px;cursor:pointer}.logged-in-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4f4e99}.card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out;margin:15px;min-width:251px;background-color:#7579b9;color:#fff;border-radius:15px 15px 15px 0}#hero[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{text-align:center}#hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px;font-size:48px;font-weight:700}#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{animation-delay:.4s;margin:0 auto 30px;color:#fff}#hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{transition-property:opacity;background-position:center top}#hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .active.carousel-item-start[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .active.carousel-item-end[_ngcontent-%COMP%]{opacity:0}#hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .carousel-item-next.carousel-item-start[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .carousel-item-prev.carousel-item-end[_ngcontent-%COMP%]{opacity:1;transition:.5s}']});let t=e;return t})();var FN=(()=>{let e=class e{constructor(){this.title="Miclinica"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Je({type:e,selectors:[["app-root"]],standalone:!0,features:[et],decls:6,vars:0,consts:[[1,"row"],[1,"col-12"]],template:function(i,o){i&1&&(N(0,"div",0)(1,"div",1),it(2,"app-menu"),P(),N(3,"div",1),it(4,"br")(5,"router-outlet"),P()())},dependencies:[nh,ON],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#ede7e4;overflow:hidden;border:none}.container[_ngcontent-%COMP%]{margin:0 auto;display:flex;flex-direction:column;justify-content:center;align-items:center}.navbar[_ngcontent-%COMP%]{background-color:#343a40}.navbar-brand[_ngcontent-%COMP%], .navbar-brand[_ngcontent-%COMP%]:hover, .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff}.navbar-toggler[_ngcontent-%COMP%]{border-color:transparent}.navbar-toggler-icon[_ngcontent-%COMP%]{background-color:#fff}.dropdown-menu[_ngcontent-%COMP%]{background-color:#343a40}.dropdown-item[_ngcontent-%COMP%]{color:#fff}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#495057;color:#fff}"]});let t=e;return t})();var VN={firebase:{apiKey:"AIzaSyDNLikYsZRPri9E24kHAdcwHDgdmDqql_s",authDomain:"clinica-efd25.firebaseapp.com",projectId:"clinica-efd25",storageBucket:"clinica-efd25.appspot.com",messagingSenderId:"445632815623",appId:"1:445632815623:web:5be72d4431af83a61080a2"},production:!0,firebaseConfig:{apiKey:"AIzaSyDNLikYsZRPri9E24kHAdcwHDgdmDqql_s",authDomain:"clinica-efd25.firebaseapp.com",projectId:"clinica-efd25",storageBucket:"clinica-efd25.appspot.com",messagingSenderId:"445632815623",appId:"1:445632815623:web:5be72d4431af83a61080a2"}};VN.production&&void 0;rM(FN,kN).catch(t=>console.error(t));
