import{A as sm,B as Dx,C as ys,D as am,E as Gt,F as rw,G as bi,a as K,b as be,c as FV,d as wi,e as ew,f as N,g as wx,h as em,i as bx,j as Ex,k as Cx,l as tm,m as tw,n as nm,o as Ld,p as nw,q as im,r as rm,s as Ix,t as iw,u as st,v as ir,w as Or,x as om,y as Oa,z as Vd}from"./chunk-YYW5CVZ2.js";var vi=FV((ho,OS)=>{"use strict";(function(t,e){typeof ho=="object"&&typeof OS<"u"?OS.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(ho,function(){"use strict";function t(y,d){(d==null||d>y.length)&&(d=y.length);for(var f=0,v=Array(d);f<d;f++)v[f]=y[f];return v}function e(y){if(Array.isArray(y))return y}function n(y){if(Array.isArray(y))return t(y)}function i(y,d,f){if(typeof y=="function"?y===d:y.has(d))return arguments.length<3?d:f;throw new TypeError("Private element is not present on this object")}function r(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function o(y,d,f){return d=k(d),de(y,q()?Reflect.construct(d,f||[],k(y).constructor):d.apply(y,f))}function s(y,d){if(d.has(y))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}function c(y,d){return y.get(i(y,d))}function u(y,d,f){s(y,d),d.set(y,f)}function h(y,d,f){return y.set(i(y,d),f),f}function m(y,d,f){if(q())return Reflect.construct.apply(null,arguments);var v=[null];v.push.apply(v,d);var D=new(y.bind.apply(y,v));return D}function _(y,d){for(var f=0;f<d.length;f++){var v=d[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,j(v.key),v)}}function w(y,d,f){return d&&_(y.prototype,d),Object.defineProperty(y,"prototype",{writable:!1}),y}function S(){return S=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(y,d,f){var v=x(y,d);if(v){var D=Object.getOwnPropertyDescriptor(v,d);return D.get?D.get.call(arguments.length<3?y:f):D.value}},S.apply(null,arguments)}function k(y){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},k(y)}function R(y,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(d&&d.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),d&&A(y,d)}function q(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q=function(){return!!y})()}function ne(y){if(typeof Symbol<"u"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}function W(y,d){var f=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(f!=null){var v,D,G,he,qe=[],Ye=!0,Vt=!1;try{if(G=(f=f.call(y)).next,d!==0)for(;!(Ye=(v=G.call(f)).done)&&(qe.push(v.value),qe.length!==d);Ye=!0);}catch(Fd){Vt=!0,D=Fd}finally{try{if(!Ye&&f.return!=null&&(he=f.return(),Object(he)!==he))return}finally{if(Vt)throw D}}return qe}}function ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(y,d){if(d&&(typeof d=="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(y)}function A(y,d){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,v){return f.__proto__=v,f},A(y,d)}function I(y,d){return e(y)||W(y,d)||Pi(y,d)||ee()}function x(y,d){for(;!{}.hasOwnProperty.call(y,d)&&(y=k(y))!==null;);return y}function O(y){return n(y)||ne(y)||Pi(y)||me()}function L(y,d){if(typeof y!="object"||!y)return y;var f=y[Symbol.toPrimitive];if(f!==void 0){var v=f.call(y,d);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}function j(y){var d=L(y,"string");return typeof d=="symbol"?d:d+""}function T(y){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},T(y)}function Pi(y,d){if(y){if(typeof y=="string")return t(y,d);var f={}.toString.call(y).slice(8,-1);return f==="Object"&&y.constructor&&(f=y.constructor.name),f==="Map"||f==="Set"?Array.from(y):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?t(y,d):void 0}}var ga=100,Ne={},va=function(){Ne.previousActiveElement instanceof HTMLElement?(Ne.previousActiveElement.focus(),Ne.previousActiveElement=null):document.body&&document.body.focus()},ya=function(d){return new Promise(function(f){if(!d)return f();var v=window.scrollX,D=window.scrollY;Ne.restoreFocusTimeout=setTimeout(function(){va(),f()},ga),window.scrollTo(v,D)})},$c="swal2-",lp=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],H=lp.reduce(function(y,d){return y[d]=$c+d,y},{}),Dr=["success","warning","info","question","error"],Ht=Dr.reduce(function(y,d){return y[d]=$c+d,y},{}),up="SweetAlert2:",go=function(d){return d.charAt(0).toUpperCase()+d.slice(1)},Mn=function(d){console.warn("".concat(up," ").concat(T(d)==="object"?d.join(" "):d))},yi=function(d){console.error("".concat(up," ").concat(d))},dp=[],L_=function(d){dp.includes(d)||(dp.push(d),Mn(d))},zc=function(d,f){L_('"'.concat(d,'" is deprecated and will be removed in the next major release. Please use "').concat(f,'" instead.'))},vo=function(d){return typeof d=="function"?d():d},_a=function(d){return d&&typeof d.toPromise=="function"},yo=function(d){return _a(d)?d.toPromise():Promise.resolve(d)},wa=function(d){return d&&Promise.resolve(d)===d},gn=function(){return document.body.querySelector(".".concat(H.container))},ss=function(d){var f=gn();return f?f.querySelector(d):null},Rn=function(d){return ss(".".concat(d))},lt=function(){return Rn(H.popup)},as=function(){return Rn(H.icon)},hp=function(){return Rn(H["icon-content"])},Hc=function(){return Rn(H.title)},qc=function(){return Rn(H["html-container"])},fp=function(){return Rn(H.image)},ba=function(){return Rn(H["progress-steps"])},cs=function(){return Rn(H["validation-message"])},ei=function(){return ss(".".concat(H.actions," .").concat(H.confirm))},Ot=function(){return ss(".".concat(H.actions," .").concat(H.cancel))},Nt=function(){return ss(".".concat(H.actions," .").concat(H.deny))},Gc=function(){return Rn(H["input-label"])},_o=function(){return ss(".".concat(H.loader))},ls=function(){return Rn(H.actions)},pp=function(){return Rn(H.footer)},Tr=function(){return Rn(H["timer-progress-bar"])},Wc=function(){return Rn(H.close)},mp=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Ea=function(){var d=lt();if(!d)return[];var f=d.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),v=Array.from(f).sort(function(he,qe){var Ye=parseInt(he.getAttribute("tabindex")||"0"),Vt=parseInt(qe.getAttribute("tabindex")||"0");return Ye>Vt?1:Ye<Vt?-1:0}),D=d.querySelectorAll(mp),G=Array.from(D).filter(function(he){return he.getAttribute("tabindex")!=="-1"});return O(new Set(v.concat(G))).filter(function(he){return jn(he)})},bd=function(){return ki(document.body,H.shown)&&!ki(document.body,H["toast-shown"])&&!ki(document.body,H["no-backdrop"])},Kc=function(){var d=lt();return d?ki(d,H.toast):!1},Ed=function(){var d=lt();return d?d.hasAttribute("data-loading"):!1},Pn=function(d,f){if(d.textContent="",f){var v=new DOMParser,D=v.parseFromString(f,"text/html"),G=D.querySelector("head");G&&Array.from(G.childNodes).forEach(function(qe){d.appendChild(qe)});var he=D.querySelector("body");he&&Array.from(he.childNodes).forEach(function(qe){qe instanceof HTMLVideoElement||qe instanceof HTMLAudioElement?d.appendChild(qe.cloneNode(!0)):d.appendChild(qe)})}},ki=function(d,f){if(!f)return!1;for(var v=f.split(/\s+/),D=0;D<v.length;D++)if(!d.classList.contains(v[D]))return!1;return!0},Ca=function(d,f){Array.from(d.classList).forEach(function(v){!Object.values(H).includes(v)&&!Object.values(Ht).includes(v)&&!Object.values(f.showClass||{}).includes(v)&&d.classList.remove(v)})},kn=function(d,f,v){if(Ca(d,f),f.customClass&&f.customClass[v]){if(typeof f.customClass[v]!="string"&&!f.customClass[v].forEach){Mn("Invalid type of customClass.".concat(v,'! Expected string or iterable object, got "').concat(T(f.customClass[v]),'"'));return}He(d,f.customClass[v])}},us=function(d,f){if(!f)return null;switch(f){case"select":case"textarea":case"file":return d.querySelector(".".concat(H.popup," > .").concat(H[f]));case"checkbox":return d.querySelector(".".concat(H.popup," > .").concat(H.checkbox," input"));case"radio":return d.querySelector(".".concat(H.popup," > .").concat(H.radio," input:checked"))||d.querySelector(".".concat(H.popup," > .").concat(H.radio," input:first-child"));case"range":return d.querySelector(".".concat(H.popup," > .").concat(H.range," input"));default:return d.querySelector(".".concat(H.popup," > .").concat(H.input))}},Sr=function(d){if(d.focus(),d.type!=="file"){var f=d.value;d.value="",d.value=f}},Cd=function(d,f,v){!d||!f||(typeof f=="string"&&(f=f.split(/\s+/).filter(Boolean)),f.forEach(function(D){Array.isArray(d)?d.forEach(function(G){v?G.classList.add(D):G.classList.remove(D)}):v?d.classList.add(D):d.classList.remove(D)}))},He=function(d,f){Cd(d,f,!0)},_i=function(d,f){Cd(d,f,!1)},ti=function(d,f){for(var v=Array.from(d.children),D=0;D<v.length;D++){var G=v[D];if(G instanceof HTMLElement&&ki(G,f))return G}},xr=function(d,f,v){v==="".concat(parseInt(v))&&(v=parseInt(v)),v||parseInt(v)===0?d.style.setProperty(f,typeof v=="number"?"".concat(v,"px"):v):d.style.removeProperty(f)},tt=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";d&&(d.style.display=f)},ln=function(d){d&&(d.style.display="none")},wo=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";d&&new MutationObserver(function(){Ia(d,d.innerHTML,f)}).observe(d,{childList:!0,subtree:!0})},ds=function(d,f,v,D){var G=d.querySelector(f);G&&G.style.setProperty(v,D)},Ia=function(d,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";f?tt(d,v):ln(d)},jn=function(d){return!!(d&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length))},hs=function(){return!jn(ei())&&!jn(Nt())&&!jn(Ot())},gp=function(d){return d.scrollHeight>d.clientHeight},vp=function(d){var f=window.getComputedStyle(d),v=parseFloat(f.getPropertyValue("animation-duration")||"0"),D=parseFloat(f.getPropertyValue("transition-duration")||"0");return v>0||D>0},fs=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=Tr();v&&jn(v)&&(f&&(v.style.transition="none",v.style.width="100%"),setTimeout(function(){v.style.transition="width ".concat(d/1e3,"s linear"),v.style.width="0%"},10))},yp=function(){var d=Tr();if(d){var f=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";var v=parseInt(window.getComputedStyle(d).width),D=f/v*100;d.style.width="".concat(D,"%")}},Qc=function(){return typeof window>"u"||typeof document>"u"},Yc=`
 <div aria-labelledby="`.concat(H.title,'" aria-describedby="').concat(H["html-container"],'" class="').concat(H.popup,`" tabindex="-1">
   <button type="button" class="`).concat(H.close,`"></button>
   <ul class="`).concat(H["progress-steps"],`"></ul>
   <div class="`).concat(H.icon,`"></div>
   <img class="`).concat(H.image,`" />
   <h2 class="`).concat(H.title,'" id="').concat(H.title,`"></h2>
   <div class="`).concat(H["html-container"],'" id="').concat(H["html-container"],`"></div>
   <input class="`).concat(H.input,'" id="').concat(H.input,`" />
   <input type="file" class="`).concat(H.file,`" />
   <div class="`).concat(H.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(H.select,'" id="').concat(H.select,`"></select>
   <div class="`).concat(H.radio,`"></div>
   <label class="`).concat(H.checkbox,`">
     <input type="checkbox" id="`).concat(H.checkbox,`" />
     <span class="`).concat(H.label,`"></span>
   </label>
   <textarea class="`).concat(H.textarea,'" id="').concat(H.textarea,`"></textarea>
   <div class="`).concat(H["validation-message"],'" id="').concat(H["validation-message"],`"></div>
   <div class="`).concat(H.actions,`">
     <div class="`).concat(H.loader,`"></div>
     <button type="button" class="`).concat(H.confirm,`"></button>
     <button type="button" class="`).concat(H.deny,`"></button>
     <button type="button" class="`).concat(H.cancel,`"></button>
   </div>
   <div class="`).concat(H.footer,`"></div>
   <div class="`).concat(H["timer-progress-bar-container"],`">
     <div class="`).concat(H["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),Ar=function(){var d=gn();return d?(d.remove(),_i([document.documentElement,document.body],[H["no-backdrop"],H["toast-shown"],H["has-column"]]),!0):!1},Mr=function(){Ne.currentInstance.resetValidationMessage()},_p=function(){var d=lt(),f=ti(d,H.input),v=ti(d,H.file),D=d.querySelector(".".concat(H.range," input")),G=d.querySelector(".".concat(H.range," output")),he=ti(d,H.select),qe=d.querySelector(".".concat(H.checkbox," input")),Ye=ti(d,H.textarea);f.oninput=Mr,v.onchange=Mr,he.onchange=Mr,qe.onchange=Mr,Ye.oninput=Mr,D.oninput=function(){Mr(),G.value=D.value},D.onchange=function(){Mr(),G.value=D.value}},Id=function(d){return typeof d=="string"?document.querySelector(d):d},Dd=function(d){var f=lt();f.setAttribute("role",d.toast?"alert":"dialog"),f.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||f.setAttribute("aria-modal","true")},wp=function(d){window.getComputedStyle(d).direction==="rtl"&&He(gn(),H.rtl)},bp=function(d){var f=Ar();if(Qc()){yi("SweetAlert2 requires document to initialize");return}var v=document.createElement("div");v.className=H.container,f&&He(v,H["no-transition"]),Pn(v,Yc);var D=Id(d.target);D.appendChild(v),Dd(d),wp(D),_p()},Td=function(d,f){d instanceof HTMLElement?f.appendChild(d):T(d)==="object"?Zc(d,f):d&&Pn(f,d)},Zc=function(d,f){d.jquery?Ep(f,d):Pn(f,d.toString())},Ep=function(d,f){if(d.textContent="",0 in f)for(var v=0;v in f;v++)d.appendChild(f[v].cloneNode(!0));else d.appendChild(f.cloneNode(!0))},Xi=function(){if(Qc())return!1;var y=document.createElement("div");return typeof y.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof y.style.animation<"u"?"animationend":!1}(),Da=function(d,f){var v=ls(),D=_o();!v||!D||(!f.showConfirmButton&&!f.showDenyButton&&!f.showCancelButton?ln(v):tt(v),kn(v,f,"actions"),bo(v,D,f),Pn(D,f.loaderHtml||""),kn(D,f,"loader"))};function bo(y,d,f){var v=ei(),D=Nt(),G=Ot();!v||!D||!G||(xd(v,"confirm",f),xd(D,"deny",f),xd(G,"cancel",f),Sd(v,D,G,f),f.reverseButtons&&(f.toast?(y.insertBefore(G,v),y.insertBefore(D,v)):(y.insertBefore(G,d),y.insertBefore(D,d),y.insertBefore(v,d))))}function Sd(y,d,f,v){if(!v.buttonsStyling){_i([y,d,f],H.styled);return}He([y,d,f],H.styled),v.confirmButtonColor&&(y.style.backgroundColor=v.confirmButtonColor,He(y,H["default-outline"])),v.denyButtonColor&&(d.style.backgroundColor=v.denyButtonColor,He(d,H["default-outline"])),v.cancelButtonColor&&(f.style.backgroundColor=v.cancelButtonColor,He(f,H["default-outline"]))}function xd(y,d,f){var v=go(d);Ia(y,f["show".concat(v,"Button")],"inline-block"),Pn(y,f["".concat(d,"ButtonText")]||""),y.setAttribute("aria-label",f["".concat(d,"ButtonAriaLabel")]||""),y.className=H[d],kn(y,f,"".concat(d,"Button"))}var Cp=function(d,f){var v=Wc();v&&(Pn(v,f.closeButtonHtml||""),kn(v,f,"closeButton"),Ia(v,f.showCloseButton),v.setAttribute("aria-label",f.closeButtonAriaLabel||""))},Ip=function(d,f){var v=gn();v&&(Dp(v,f.backdrop),Ad(v,f.position),Md(v,f.grow),kn(v,f,"container"))};function Dp(y,d){typeof d=="string"?y.style.background=d:d||He([document.documentElement,document.body],H["no-backdrop"])}function Ad(y,d){d&&(d in H?He(y,H[d]):(Mn('The "position" parameter is not valid, defaulting to "center"'),He(y,H.center)))}function Md(y,d){d&&He(y,H["grow-".concat(d)])}var mt={innerParams:new WeakMap,domCache:new WeakMap},Tp=["input","file","range","select","radio","checkbox","textarea"],V_=function(d,f){var v=lt();if(v){var D=mt.innerParams.get(d),G=!D||f.input!==D.input;Tp.forEach(function(he){var qe=ti(v,H[he]);qe&&(xp(he,f.inputAttributes),qe.className=H[he],G&&ln(qe))}),f.input&&(G&&j_(f),B_(f))}},j_=function(d){if(d.input){if(!xt[d.input]){yi("Unexpected type of input! Expected ".concat(Object.keys(xt).join(" | "),', got "').concat(d.input,'"'));return}var f=Ta(d.input),v=xt[d.input](f,d);tt(f),d.inputAutoFocus&&setTimeout(function(){Sr(v)})}},Sp=function(d){for(var f=0;f<d.attributes.length;f++){var v=d.attributes[f].name;["id","type","value","style"].includes(v)||d.removeAttribute(v)}},xp=function(d,f){var v=us(lt(),d);if(v){Sp(v);for(var D in f)v.setAttribute(D,f[D])}},B_=function(d){var f=Ta(d.input);T(d.customClass)==="object"&&He(f,d.customClass.input)},Ji=function(d,f){(!d.placeholder||f.inputPlaceholder)&&(d.placeholder=f.inputPlaceholder)},Bn=function(d,f,v){if(v.inputLabel){var D=document.createElement("label"),G=H["input-label"];D.setAttribute("for",d.id),D.className=G,T(v.customClass)==="object"&&He(D,v.customClass.inputLabel),D.innerText=v.inputLabel,f.insertAdjacentElement("beforebegin",D)}},Ta=function(d){return ti(lt(),H[d]||H.input)},Eo=function(d,f){["string","number"].includes(T(f))?d.value="".concat(f):wa(f)||Mn('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(T(f),'"'))},xt={};xt.text=xt.email=xt.password=xt.number=xt.tel=xt.url=xt.search=xt.date=xt["datetime-local"]=xt.time=xt.week=xt.month=function(y,d){return Eo(y,d.inputValue),Bn(y,y,d),Ji(y,d),y.type=d.input,y},xt.file=function(y,d){return Bn(y,y,d),Ji(y,d),y},xt.range=function(y,d){var f=y.querySelector("input"),v=y.querySelector("output");return Eo(f,d.inputValue),f.type=d.input,Eo(v,d.inputValue),Bn(f,y,d),y},xt.select=function(y,d){if(y.textContent="",d.inputPlaceholder){var f=document.createElement("option");Pn(f,d.inputPlaceholder),f.value="",f.disabled=!0,f.selected=!0,y.appendChild(f)}return Bn(y,y,d),y},xt.radio=function(y){return y.textContent="",y},xt.checkbox=function(y,d){var f=us(lt(),"checkbox");f.value="1",f.checked=!!d.inputValue;var v=y.querySelector("span");return Pn(v,d.inputPlaceholder),f},xt.textarea=function(y,d){Eo(y,d.inputValue),Ji(y,d),Bn(y,y,d);var f=function(D){return parseInt(window.getComputedStyle(D).marginLeft)+parseInt(window.getComputedStyle(D).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var v=parseInt(window.getComputedStyle(lt()).width),D=function(){if(document.body.contains(y)){var he=y.offsetWidth+f(y);he>v?lt().style.width="".concat(he,"px"):xr(lt(),"width",d.width)}};new MutationObserver(D).observe(y,{attributes:!0,attributeFilter:["style"]})}}),y};var _t=function(d,f){var v=qc();v&&(wo(v),kn(v,f,"htmlContainer"),f.html?(Td(f.html,v),tt(v,"block")):f.text?(v.textContent=f.text,tt(v,"block")):ln(v),V_(d,f))},Xc=function(d,f){var v=pp();v&&(wo(v),Ia(v,f.footer,"block"),f.footer&&Td(f.footer,v),kn(v,f,"footer"))},Sa=function(d,f){var v=mt.innerParams.get(d),D=as();if(D){if(v&&f.icon===v.icon){Mp(D,f),ps(D,f);return}if(!f.icon&&!f.iconHtml){ln(D);return}if(f.icon&&Object.keys(Ht).indexOf(f.icon)===-1){yi('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(f.icon,'"')),ln(D);return}tt(D),Mp(D,f),ps(D,f),He(D,f.showClass&&f.showClass.icon)}},ps=function(d,f){for(var v=0,D=Object.entries(Ht);v<D.length;v++){var G=I(D[v],2),he=G[0],qe=G[1];f.icon!==he&&_i(d,qe)}He(d,f.icon&&Ht[f.icon]),z_(d,f),U_(),kn(d,f,"icon")},U_=function(){var d=lt();if(d)for(var f=window.getComputedStyle(d).getPropertyValue("background-color"),v=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),D=0;D<v.length;D++)v[D].style.backgroundColor=f},Ap=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,$_=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Mp=function(d,f){if(!(!f.icon&&!f.iconHtml)){var v=d.innerHTML,D="";if(f.iconHtml)D=Rp(f.iconHtml);else if(f.icon==="success")D=Ap,v=v.replace(/ style=".*?"/g,"");else if(f.icon==="error")D=$_;else if(f.icon){var G={question:"?",warning:"!",info:"i"};D=Rp(G[f.icon])}v.trim()!==D.trim()&&Pn(d,D)}},z_=function(d,f){if(f.iconColor){d.style.color=f.iconColor,d.style.borderColor=f.iconColor;for(var v=0,D=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];v<D.length;v++){var G=D[v];ds(d,G,"background-color",f.iconColor)}ds(d,".swal2-success-ring","border-color",f.iconColor)}},Rp=function(d){return'<div class="'.concat(H["icon-content"],'">').concat(d,"</div>")},xa=function(d,f){var v=fp();if(v){if(!f.imageUrl){ln(v);return}tt(v,""),v.setAttribute("src",f.imageUrl),v.setAttribute("alt",f.imageAlt||""),xr(v,"width",f.imageWidth),xr(v,"height",f.imageHeight),v.className=H.image,kn(v,f,"image")}},Rr=function(d,f){var v=gn(),D=lt();if(!(!v||!D)){if(f.toast){xr(v,"width",f.width),D.style.width="100%";var G=_o();G&&D.insertBefore(G,as())}else xr(D,"width",f.width);xr(D,"padding",f.padding),f.color&&(D.style.color=f.color),f.background&&(D.style.background=f.background),ln(cs()),Pp(D,f)}},Pp=function(d,f){var v=f.showClass||{};d.className="".concat(H.popup," ").concat(jn(d)?v.popup:""),f.toast?(He([document.documentElement,document.body],H["toast-shown"]),He(d,H.toast)):He(d,H.modal),kn(d,f,"popup"),typeof f.customClass=="string"&&He(d,f.customClass),f.icon&&He(d,H["icon-".concat(f.icon)])},kp=function(d,f){var v=ba();if(v){var D=f.progressSteps,G=f.currentProgressStep;if(!D||D.length===0||G===void 0){ln(v);return}tt(v),v.textContent="",G>=D.length&&Mn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),D.forEach(function(he,qe){var Ye=Op(he);if(v.appendChild(Ye),qe===G&&He(Ye,H["active-progress-step"]),qe!==D.length-1){var Vt=ms(f);v.appendChild(Vt)}})}},Op=function(d){var f=document.createElement("li");return He(f,H["progress-step"]),Pn(f,d),f},ms=function(d){var f=document.createElement("li");return He(f,H["progress-step-line"]),d.progressStepsDistance&&xr(f,"width",d.progressStepsDistance),f},H_=function(d,f){var v=Hc();v&&(wo(v),Ia(v,f.title||f.titleText,"block"),f.title&&Td(f.title,v),f.titleText&&(v.innerText=f.titleText),kn(v,f,"title"))},Np=function(d,f){Rr(d,f),Ip(d,f),kp(d,f),Sa(d,f),xa(d,f),H_(d,f),Cp(d,f),_t(d,f),Da(d,f),Xc(d,f);var v=lt();typeof f.didRender=="function"&&v&&f.didRender(v)},q_=function(){return jn(lt())},er=function(){var d;return(d=ei())===null||d===void 0?void 0:d.click()},G_=function(){var d;return(d=Nt())===null||d===void 0?void 0:d.click()},W_=function(){var d;return(d=Ot())===null||d===void 0?void 0:d.click()},Oi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Aa=function(d){d.keydownTarget&&d.keydownHandlerAdded&&(d.keydownTarget.removeEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!1)},Fp=function(d,f,v){Aa(d),f.toast||(d.keydownHandler=function(D){return Rd(f,D,v)},d.keydownTarget=f.keydownListenerCapture?window:lt(),d.keydownListenerCapture=f.keydownListenerCapture,d.keydownTarget.addEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!0)},Co=function(d,f){var v,D=Ea();if(D.length){d=d+f,d===D.length?d=0:d===-1&&(d=D.length-1),D[d].focus();return}(v=lt())===null||v===void 0||v.focus()},gs=["ArrowRight","ArrowDown"],Lp=["ArrowLeft","ArrowUp"],Rd=function(d,f,v){d&&(f.isComposing||f.keyCode===229||(d.stopKeydownPropagation&&f.stopPropagation(),f.key==="Enter"?At(f,d):f.key==="Tab"?K_(f):[].concat(gs,Lp).includes(f.key)?Q_(f.key):f.key==="Escape"&&Vp(f,d,v)))},At=function(d,f){if(vo(f.allowEnterKey)){var v=us(lt(),f.input);if(d.target&&v&&d.target instanceof HTMLElement&&d.target.outerHTML===v.outerHTML){if(["textarea","file"].includes(f.input))return;er(),d.preventDefault()}}},K_=function(d){for(var f=d.target,v=Ea(),D=-1,G=0;G<v.length;G++)if(f===v[G]){D=G;break}d.shiftKey?Co(D,-1):Co(D,1),d.stopPropagation(),d.preventDefault()},Q_=function(d){var f=ls(),v=ei(),D=Nt(),G=Ot();if(!(!f||!v||!D||!G)){var he=[v,D,G];if(!(document.activeElement instanceof HTMLElement&&!he.includes(document.activeElement))){var qe=gs.includes(d)?"nextElementSibling":"previousElementSibling",Ye=document.activeElement;if(Ye){for(var Vt=0;Vt<f.children.length;Vt++){if(Ye=Ye[qe],!Ye)return;if(Ye instanceof HTMLButtonElement&&jn(Ye))break}Ye instanceof HTMLButtonElement&&Ye.focus()}}}},Vp=function(d,f,v){vo(f.allowEscapeKey)&&(d.preventDefault(),v(Oi.esc))},Io={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},jp=function(){var d=gn(),f=Array.from(document.body.children);f.forEach(function(v){v.contains(d)||(v.hasAttribute("aria-hidden")&&v.setAttribute("data-previous-aria-hidden",v.getAttribute("aria-hidden")||""),v.setAttribute("aria-hidden","true"))})},Ma=function(){var d=Array.from(document.body.children);d.forEach(function(f){f.hasAttribute("data-previous-aria-hidden")?(f.setAttribute("aria-hidden",f.getAttribute("data-previous-aria-hidden")||""),f.removeAttribute("data-previous-aria-hidden")):f.removeAttribute("aria-hidden")})},Pd=typeof window<"u"&&!!window.GestureEvent,tr=function(){if(Pd&&!ki(document.body,H.iosfix)){var d=document.body.scrollTop;document.body.style.top="".concat(d*-1,"px"),He(document.body,H.iosfix),Bp()}},Bp=function(){var d=gn();if(d){var f;d.ontouchstart=function(v){f=Y_(v)},d.ontouchmove=function(v){f&&(v.preventDefault(),v.stopPropagation())}}},Y_=function(d){var f=d.target,v=gn(),D=qc();return!v||!D||Ra(d)||Up(d)?!1:f===v||!gp(v)&&f instanceof HTMLElement&&f.tagName!=="INPUT"&&f.tagName!=="TEXTAREA"&&!(gp(D)&&D.contains(f))},Ra=function(d){return d.touches&&d.touches.length&&d.touches[0].touchType==="stylus"},Up=function(d){return d.touches&&d.touches.length>1},kd=function(){if(ki(document.body,H.iosfix)){var d=parseInt(document.body.style.top,10);_i(document.body,H.iosfix),document.body.style.top="",document.body.scrollTop=d*-1}},Jc=function(){var d=document.createElement("div");d.className=H["scrollbar-measure"],document.body.appendChild(d);var f=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),f},Do=null,el=function(d){Do===null&&(document.body.scrollHeight>window.innerHeight||d==="scroll")&&(Do=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Do+Jc(),"px"))},Z_=function(){Do!==null&&(document.body.style.paddingRight="".concat(Do,"px"),Do=null)};function Od(y,d,f,v){Kc()?Nd(y,v):(ya(f).then(function(){return Nd(y,v)}),Aa(Ne)),Pd?(d.setAttribute("style","display:none !important"),d.removeAttribute("class"),d.innerHTML=""):d.remove(),bd()&&(Z_(),kd(),Ma()),Pa()}function Pa(){_i([document.documentElement,document.body],[H.shown,H["height-auto"],H["no-backdrop"],H["toast-shown"]])}function nr(y){y=zp(y);var d=Io.swalPromiseResolve.get(this),f=$p(this);this.isAwaitingPromise?y.isDismissed||(To(this),d(y)):f&&d(y)}var $p=function(d){var f=lt();if(!f)return!1;var v=mt.innerParams.get(d);if(!v||ki(f,v.hideClass.popup))return!1;_i(f,v.showClass.popup),He(f,v.hideClass.popup);var D=gn();return _i(D,v.showClass.backdrop),He(D,v.hideClass.backdrop),nl(d,f,v),!0};function tl(y){var d=Io.swalPromiseReject.get(this);To(this),d&&d(y)}var To=function(d){d.isAwaitingPromise&&(delete d.isAwaitingPromise,mt.innerParams.get(d)||d._destroy())},zp=function(d){return typeof d>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d)},nl=function(d,f,v){var D=gn(),G=Xi&&vp(f);typeof v.willClose=="function"&&v.willClose(f),G?Hp(d,f,D,v.returnFocus,v.didClose):Od(d,D,v.returnFocus,v.didClose)},Hp=function(d,f,v,D,G){Xi&&(Ne.swalCloseEventFinishedCallback=Od.bind(null,d,v,D,G),f.addEventListener(Xi,function(he){he.target===f&&(Ne.swalCloseEventFinishedCallback(),delete Ne.swalCloseEventFinishedCallback)}))},Nd=function(d,f){setTimeout(function(){typeof f=="function"&&f.bind(d.params)(),d._destroy&&d._destroy()})},ni=function(d){var f=lt();if(f||new Jp,f=lt(),!!f){var v=_o();Kc()?ln(as()):qp(f,d),tt(v),f.setAttribute("data-loading","true"),f.setAttribute("aria-busy","true"),f.focus()}},qp=function(d,f){var v=ls(),D=_o();!v||!D||(!f&&jn(ei())&&(f=ei()),tt(v),f&&(ln(f),D.setAttribute("data-button-to-replace",f.className),v.insertBefore(D,f)),He([d,v],H.loading))},Gp=function(d,f){f.input==="select"||f.input==="radio"?Qp(d,f):["text","email","number","tel","textarea"].some(function(v){return v===f.input})&&(_a(f.inputValue)||wa(f.inputValue))&&(ni(ei()),Yp(d,f))},Wp=function(d,f){var v=d.getInput();if(!v)return null;switch(f.input){case"checkbox":return Kp(v);case"radio":return il(v);case"file":return Un(v);default:return f.inputAutoTrim?v.value.trim():v.value}},Kp=function(d){return d.checked?1:0},il=function(d){return d.checked?d.value:null},Un=function(d){return d.files&&d.files.length?d.getAttribute("multiple")!==null?d.files:d.files[0]:null},Qp=function(d,f){var v=lt();if(v){var D=function(he){f.input==="select"?vs(v,p(he),f):f.input==="radio"&&l(v,p(he),f)};_a(f.inputOptions)||wa(f.inputOptions)?(ni(ei()),yo(f.inputOptions).then(function(G){d.hideLoading(),D(G)})):T(f.inputOptions)==="object"?D(f.inputOptions):yi("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(T(f.inputOptions)))}},Yp=function(d,f){var v=d.getInput();v&&(ln(v),yo(f.inputValue).then(function(D){v.value=f.input==="number"?"".concat(parseFloat(D)||0):"".concat(D),tt(v),v.focus(),d.hideLoading()}).catch(function(D){yi("Error in inputValue promise: ".concat(D)),v.value="",tt(v),v.focus(),d.hideLoading()}))};function vs(y,d,f){var v=ti(y,H.select);if(v){var D=function(he,qe,Ye){var Vt=document.createElement("option");Vt.value=Ye,Pn(Vt,qe),Vt.selected=g(Ye,f.inputValue),he.appendChild(Vt)};d.forEach(function(G){var he=G[0],qe=G[1];if(Array.isArray(qe)){var Ye=document.createElement("optgroup");Ye.label=he,Ye.disabled=!1,v.appendChild(Ye),qe.forEach(function(Vt){return D(Ye,Vt[1],Vt[0])})}else D(v,qe,he)}),v.focus()}}function l(y,d,f){var v=ti(y,H.radio);if(v){d.forEach(function(G){var he=G[0],qe=G[1],Ye=document.createElement("input"),Vt=document.createElement("label");Ye.type="radio",Ye.name=H.radio,Ye.value=he,g(he,f.inputValue)&&(Ye.checked=!0);var Fd=document.createElement("span");Pn(Fd,qe),Fd.className=H.label,Vt.appendChild(Ye),Vt.appendChild(Fd),v.appendChild(Vt)});var D=v.querySelectorAll("input");D.length&&D[0].focus()}}var p=function y(d){var f=[];return d instanceof Map?d.forEach(function(v,D){var G=v;T(G)==="object"&&(G=y(G)),f.push([D,G])}):Object.keys(d).forEach(function(v){var D=d[v];T(D)==="object"&&(D=y(D)),f.push([v,D])}),f},g=function(d,f){return!!f&&f.toString()===d.toString()},b=void 0,V=function(d){var f=mt.innerParams.get(d);d.disableButtons(),f.input?ut(d,"confirm"):Pr(d,!0)},$=function(d){var f=mt.innerParams.get(d);d.disableButtons(),f.returnInputValueOnDeny?ut(d,"deny"):Qe(d,!1)},ie=function(d,f){d.disableButtons(),f(Oi.cancel)},ut=function(d,f){var v=mt.innerParams.get(d);if(!v.input){yi('The "input" parameter is needed to be set when using returnInputValueOn'.concat(go(f)));return}var D=d.getInput(),G=Wp(d,v);v.inputValidator?un(d,G,f):D&&!D.checkValidity()?(d.enableButtons(),d.showValidationMessage(v.validationMessage||D.validationMessage)):f==="deny"?Qe(d,G):Pr(d,G)},un=function(d,f,v){var D=mt.innerParams.get(d);d.disableInput();var G=Promise.resolve().then(function(){return yo(D.inputValidator(f,D.validationMessage))});G.then(function(he){d.enableButtons(),d.enableInput(),he?d.showValidationMessage(he):v==="deny"?Qe(d,f):Pr(d,f)})},Qe=function(d,f){var v=mt.innerParams.get(d||b);if(v.showLoaderOnDeny&&ni(Nt()),v.preDeny){d.isAwaitingPromise=!0;var D=Promise.resolve().then(function(){return yo(v.preDeny(f,v.validationMessage))});D.then(function(G){G===!1?(d.hideLoading(),To(d)):d.close({isDenied:!0,value:typeof G>"u"?f:G})}).catch(function(G){return hn(d||b,G)})}else d.close({isDenied:!0,value:f})},dn=function(d,f){d.close({isConfirmed:!0,value:f})},hn=function(d,f){d.rejectPromise(f)},Pr=function(d,f){var v=mt.innerParams.get(d||b);if(v.showLoaderOnConfirm&&ni(),v.preConfirm){d.resetValidationMessage(),d.isAwaitingPromise=!0;var D=Promise.resolve().then(function(){return yo(v.preConfirm(f,v.validationMessage))});D.then(function(G){jn(cs())||G===!1?(d.hideLoading(),To(d)):dn(d,typeof G>"u"?f:G)}).catch(function(G){return hn(d||b,G)})}else dn(d,f)};function On(){var y=mt.innerParams.get(this);if(y){var d=mt.domCache.get(this);ln(d.loader),Kc()?y.icon&&tt(as()):rl(d),_i([d.popup,d.actions],H.loading),d.popup.removeAttribute("aria-busy"),d.popup.removeAttribute("data-loading"),d.confirmButton.disabled=!1,d.denyButton.disabled=!1,d.cancelButton.disabled=!1}}var rl=function(d){var f=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));f.length?tt(f[0],"inline-block"):hs()&&ln(d.actions)};function ol(){var y=mt.innerParams.get(this),d=mt.domCache.get(this);return d?us(d.popup,y.input):null}function ZS(y,d,f){var v=mt.domCache.get(y);d.forEach(function(D){v[D].disabled=f})}function XS(y,d){var f=lt();if(!(!f||!y))if(y.type==="radio")for(var v=f.querySelectorAll('[name="'.concat(H.radio,'"]')),D=0;D<v.length;D++)v[D].disabled=d;else y.disabled=d}function JS(){ZS(this,["confirmButton","denyButton","cancelButton"],!1)}function ex(){ZS(this,["confirmButton","denyButton","cancelButton"],!0)}function tx(){XS(this.getInput(),!1)}function nx(){XS(this.getInput(),!0)}function ix(y){var d=mt.domCache.get(this),f=mt.innerParams.get(this);Pn(d.validationMessage,y),d.validationMessage.className=H["validation-message"],f.customClass&&f.customClass.validationMessage&&He(d.validationMessage,f.customClass.validationMessage),tt(d.validationMessage);var v=this.getInput();v&&(v.setAttribute("aria-invalid","true"),v.setAttribute("aria-describedby",H["validation-message"]),Sr(v),He(v,H.inputerror))}function rx(){var y=mt.domCache.get(this);y.validationMessage&&ln(y.validationMessage);var d=this.getInput();d&&(d.removeAttribute("aria-invalid"),d.removeAttribute("aria-describedby"),_i(d,H.inputerror))}var sl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},VL=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],jL={},BL=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ox=function(d){return Object.prototype.hasOwnProperty.call(sl,d)},sx=function(d){return VL.indexOf(d)!==-1},ax=function(d){return jL[d]},UL=function(d){ox(d)||Mn('Unknown parameter "'.concat(d,'"'))},$L=function(d){BL.includes(d)&&Mn('The parameter "'.concat(d,'" is incompatible with toasts'))},zL=function(d){var f=ax(d);f&&zc(d,f)},HL=function(d){d.backdrop===!1&&d.allowOutsideClick&&Mn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var f in d)UL(f),d.toast&&$L(f),zL(f)};function cx(y){var d=lt(),f=mt.innerParams.get(this);if(!d||ki(d,f.hideClass.popup)){Mn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var v=qL(y),D=Object.assign({},f,v);Np(this,D),mt.innerParams.set(this,D),Object.defineProperties(this,{params:{value:Object.assign({},this.params,y),writable:!1,enumerable:!0}})}var qL=function(d){var f={};return Object.keys(d).forEach(function(v){sx(v)?f[v]=d[v]:Mn("Invalid parameter to update: ".concat(v))}),f};function lx(){var y=mt.domCache.get(this),d=mt.innerParams.get(this);if(!d){ux(this);return}y.popup&&Ne.swalCloseEventFinishedCallback&&(Ne.swalCloseEventFinishedCallback(),delete Ne.swalCloseEventFinishedCallback),typeof d.didDestroy=="function"&&d.didDestroy(),GL(this)}var GL=function(d){ux(d),delete d.params,delete Ne.keydownHandler,delete Ne.keydownTarget,delete Ne.currentInstance},ux=function(d){d.isAwaitingPromise?(X_(mt,d),d.isAwaitingPromise=!0):(X_(Io,d),X_(mt,d),delete d.isAwaitingPromise,delete d.disableButtons,delete d.enableButtons,delete d.getInput,delete d.disableInput,delete d.enableInput,delete d.hideLoading,delete d.disableLoading,delete d.showValidationMessage,delete d.resetValidationMessage,delete d.close,delete d.closePopup,delete d.closeModal,delete d.closeToast,delete d.rejectPromise,delete d.update,delete d._destroy)},X_=function(d,f){for(var v in d)d[v].delete(f)},WL=Object.freeze({__proto__:null,_destroy:lx,close:nr,closeModal:nr,closePopup:nr,closeToast:nr,disableButtons:ex,disableInput:nx,disableLoading:On,enableButtons:JS,enableInput:tx,getInput:ol,handleAwaitingPromise:To,hideLoading:On,rejectPromise:tl,resetValidationMessage:rx,showValidationMessage:ix,update:cx}),KL=function(d,f,v){d.toast?QL(d,f,v):(ZL(f),XL(f),JL(d,f,v))},QL=function(d,f,v){f.popup.onclick=function(){d&&(YL(d)||d.timer||d.input)||v(Oi.close)}},YL=function(d){return!!(d.showConfirmButton||d.showDenyButton||d.showCancelButton||d.showCloseButton)},Zp=!1,ZL=function(d){d.popup.onmousedown=function(){d.container.onmouseup=function(f){d.container.onmouseup=function(){},f.target===d.container&&(Zp=!0)}}},XL=function(d){d.container.onmousedown=function(f){f.target===d.container&&f.preventDefault(),d.popup.onmouseup=function(v){d.popup.onmouseup=function(){},(v.target===d.popup||v.target instanceof HTMLElement&&d.popup.contains(v.target))&&(Zp=!0)}}},JL=function(d,f,v){f.container.onclick=function(D){if(Zp){Zp=!1;return}D.target===f.container&&vo(d.allowOutsideClick)&&v(Oi.backdrop)}},eV=function(d){return T(d)==="object"&&d.jquery},dx=function(d){return d instanceof Element||eV(d)},tV=function(d){var f={};return T(d[0])==="object"&&!dx(d[0])?Object.assign(f,d[0]):["title","html","icon"].forEach(function(v,D){var G=d[D];typeof G=="string"||dx(G)?f[v]=G:G!==void 0&&yi("Unexpected type of ".concat(v,'! Expected "string" or "Element", got ').concat(T(G)))}),f};function nV(){for(var y=this,d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];return m(y,f)}function iV(y){var d=function(f){function v(){return a(this,v),o(this,v,arguments)}return R(v,f),w(v,[{key:"_main",value:function(G,he){return S(k(v.prototype),"_main",this).call(this,G,Object.assign({},y,he))}}])}(this);return d}var rV=function(){return Ne.timeout&&Ne.timeout.getTimerLeft()},hx=function(){if(Ne.timeout)return yp(),Ne.timeout.stop()},fx=function(){if(Ne.timeout){var d=Ne.timeout.start();return fs(d),d}},oV=function(){var d=Ne.timeout;return d&&(d.running?hx():fx())},sV=function(d){if(Ne.timeout){var f=Ne.timeout.increase(d);return fs(f,!0),f}},aV=function(){return!!(Ne.timeout&&Ne.timeout.isRunning())},px=!1,J_={};function cV(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";J_[y]=this,px||(document.body.addEventListener("click",lV),px=!0)}var lV=function(d){for(var f=d.target;f&&f!==document;f=f.parentNode)for(var v in J_){var D=f.getAttribute(v);if(D){J_[v].fire({template:D});return}}},uV=Object.freeze({__proto__:null,argsToParams:tV,bindClickHandler:cV,clickCancel:W_,clickConfirm:er,clickDeny:G_,enableLoading:ni,fire:nV,getActions:ls,getCancelButton:Ot,getCloseButton:Wc,getConfirmButton:ei,getContainer:gn,getDenyButton:Nt,getFocusableElements:Ea,getFooter:pp,getHtmlContainer:qc,getIcon:as,getIconContent:hp,getImage:fp,getInputLabel:Gc,getLoader:_o,getPopup:lt,getProgressSteps:ba,getTimerLeft:rV,getTimerProgressBar:Tr,getTitle:Hc,getValidationMessage:cs,increaseTimer:sV,isDeprecatedParameter:ax,isLoading:Ed,isTimerRunning:aV,isUpdatableParameter:sx,isValidParameter:ox,isVisible:q_,mixin:iV,resumeTimer:fx,showLoading:ni,stopTimer:hx,toggleTimer:oV}),dV=function(){function y(d,f){a(this,y),this.callback=d,this.remaining=f,this.running=!1,this.start()}return w(y,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(f){var v=this.running;return v&&this.stop(),this.remaining+=f,v&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),mx=["swal-title","swal-html","swal-footer"],hV=function(d){var f=typeof d.template=="string"?document.querySelector(d.template):d.template;if(!f)return{};var v=f.content;wV(v);var D=Object.assign(fV(v),pV(v),mV(v),gV(v),vV(v),yV(v),_V(v,mx));return D},fV=function(d){var f={},v=Array.from(d.querySelectorAll("swal-param"));return v.forEach(function(D){ka(D,["name","value"]);var G=D.getAttribute("name"),he=D.getAttribute("value");typeof sl[G]=="boolean"?f[G]=he!=="false":T(sl[G])==="object"?f[G]=JSON.parse(he):f[G]=he}),f},pV=function(d){var f={},v=Array.from(d.querySelectorAll("swal-function-param"));return v.forEach(function(D){var G=D.getAttribute("name"),he=D.getAttribute("value");f[G]=new Function("return ".concat(he))()}),f},mV=function(d){var f={},v=Array.from(d.querySelectorAll("swal-button"));return v.forEach(function(D){ka(D,["type","color","aria-label"]);var G=D.getAttribute("type");f["".concat(G,"ButtonText")]=D.innerHTML,f["show".concat(go(G),"Button")]=!0,D.hasAttribute("color")&&(f["".concat(G,"ButtonColor")]=D.getAttribute("color")),D.hasAttribute("aria-label")&&(f["".concat(G,"ButtonAriaLabel")]=D.getAttribute("aria-label"))}),f},gV=function(d){var f={},v=d.querySelector("swal-image");return v&&(ka(v,["src","width","height","alt"]),v.hasAttribute("src")&&(f.imageUrl=v.getAttribute("src")||void 0),v.hasAttribute("width")&&(f.imageWidth=v.getAttribute("width")||void 0),v.hasAttribute("height")&&(f.imageHeight=v.getAttribute("height")||void 0),v.hasAttribute("alt")&&(f.imageAlt=v.getAttribute("alt")||void 0)),f},vV=function(d){var f={},v=d.querySelector("swal-icon");return v&&(ka(v,["type","color"]),v.hasAttribute("type")&&(f.icon=v.getAttribute("type")),v.hasAttribute("color")&&(f.iconColor=v.getAttribute("color")),f.iconHtml=v.innerHTML),f},yV=function(d){var f={},v=d.querySelector("swal-input");v&&(ka(v,["type","label","placeholder","value"]),f.input=v.getAttribute("type")||"text",v.hasAttribute("label")&&(f.inputLabel=v.getAttribute("label")),v.hasAttribute("placeholder")&&(f.inputPlaceholder=v.getAttribute("placeholder")),v.hasAttribute("value")&&(f.inputValue=v.getAttribute("value")));var D=Array.from(d.querySelectorAll("swal-input-option"));return D.length&&(f.inputOptions={},D.forEach(function(G){ka(G,["value"]);var he=G.getAttribute("value"),qe=G.innerHTML;f.inputOptions[he]=qe})),f},_V=function(d,f){var v={};for(var D in f){var G=f[D],he=d.querySelector(G);he&&(ka(he,[]),v[G.replace(/^swal-/,"")]=he.innerHTML.trim())}return v},wV=function(d){var f=mx.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(d.children).forEach(function(v){var D=v.tagName.toLowerCase();f.includes(D)||Mn("Unrecognized element <".concat(D,">"))})},ka=function(d,f){Array.from(d.attributes).forEach(function(v){f.indexOf(v.name)===-1&&Mn(['Unrecognized attribute "'.concat(v.name,'" on <').concat(d.tagName.toLowerCase(),">."),"".concat(f.length?"Allowed attributes are: ".concat(f.join(", ")):"To set the value, use HTML within the element.")])})},gx=10,bV=function(d){var f=gn(),v=lt();typeof d.willOpen=="function"&&d.willOpen(v);var D=window.getComputedStyle(document.body),G=D.overflowY;DV(f,v,d),setTimeout(function(){CV(f,v)},gx),bd()&&(IV(f,d.scrollbarPadding,G),jp()),!Kc()&&!Ne.previousActiveElement&&(Ne.previousActiveElement=document.activeElement),typeof d.didOpen=="function"&&setTimeout(function(){return d.didOpen(v)}),_i(f,H["no-transition"])},EV=function y(d){var f=lt();if(!(d.target!==f||!Xi)){var v=gn();f.removeEventListener(Xi,y),v.style.overflowY="auto"}},CV=function(d,f){Xi&&vp(f)?(d.style.overflowY="hidden",f.addEventListener(Xi,EV)):d.style.overflowY="auto"},IV=function(d,f,v){tr(),f&&v!=="hidden"&&el(v),setTimeout(function(){d.scrollTop=0})},DV=function(d,f,v){He(d,v.showClass.backdrop),v.animation?(f.style.setProperty("opacity","0","important"),tt(f,"grid"),setTimeout(function(){He(f,v.showClass.popup),f.style.removeProperty("opacity")},gx)):tt(f,"grid"),He([document.documentElement,document.body],H.shown),v.heightAuto&&v.backdrop&&!v.toast&&He([document.documentElement,document.body],H["height-auto"])},vx={email:function(d,f){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(d)?Promise.resolve():Promise.resolve(f||"Invalid email address")},url:function(d,f){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(f||"Invalid URL")}};function TV(y){y.inputValidator||(y.input==="email"&&(y.inputValidator=vx.email),y.input==="url"&&(y.inputValidator=vx.url))}function SV(y){(!y.target||typeof y.target=="string"&&!document.querySelector(y.target)||typeof y.target!="string"&&!y.target.appendChild)&&(Mn('Target parameter is not valid, defaulting to "body"'),y.target="body")}function xV(y){TV(y),y.showLoaderOnConfirm&&!y.preConfirm&&Mn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),SV(y),typeof y.title=="string"&&(y.title=y.title.split(`
`).join("<br />")),bp(y)}var kr,Xp=new WeakMap,qt=function(){function y(){if(a(this,y),u(this,Xp,void 0),!(typeof window>"u")){kr=this;for(var d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];var D=Object.freeze(this.constructor.argsToParams(f));this.params=D,this.isAwaitingPromise=!1,h(Xp,this,this._main(kr.params))}}return w(y,[{key:"_main",value:function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(HL(Object.assign({},v,f)),Ne.currentInstance){var D=Io.swalPromiseResolve.get(Ne.currentInstance),G=Ne.currentInstance.isAwaitingPromise;Ne.currentInstance._destroy(),G||D({isDismissed:!0}),bd()&&Ma()}Ne.currentInstance=kr;var he=MV(f,v);xV(he),Object.freeze(he),Ne.timeout&&(Ne.timeout.stop(),delete Ne.timeout),clearTimeout(Ne.restoreFocusTimeout);var qe=RV(kr);return Np(kr,he),mt.innerParams.set(kr,he),AV(kr,qe,he)}},{key:"then",value:function(f){return c(Xp,this).then(f)}},{key:"finally",value:function(f){return c(Xp,this).finally(f)}}])}(),AV=function(d,f,v){return new Promise(function(D,G){var he=function(Ye){d.close({isDismissed:!0,dismiss:Ye})};Io.swalPromiseResolve.set(d,D),Io.swalPromiseReject.set(d,G),f.confirmButton.onclick=function(){V(d)},f.denyButton.onclick=function(){$(d)},f.cancelButton.onclick=function(){ie(d,he)},f.closeButton.onclick=function(){he(Oi.close)},KL(v,f,he),Fp(Ne,v,he),Gp(d,v),bV(v),PV(Ne,v,he),kV(f,v),setTimeout(function(){f.container.scrollTop=0})})},MV=function(d,f){var v=hV(d),D=Object.assign({},sl,f,v,d);return D.showClass=Object.assign({},sl.showClass,D.showClass),D.hideClass=Object.assign({},sl.hideClass,D.hideClass),D.animation===!1&&(D.showClass={backdrop:"swal2-noanimation"},D.hideClass={}),D},RV=function(d){var f={popup:lt(),container:gn(),actions:ls(),confirmButton:ei(),denyButton:Nt(),cancelButton:Ot(),loader:_o(),closeButton:Wc(),validationMessage:cs(),progressSteps:ba()};return mt.domCache.set(d,f),f},PV=function(d,f,v){var D=Tr();ln(D),f.timer&&(d.timeout=new dV(function(){v("timer"),delete d.timeout},f.timer),f.timerProgressBar&&(tt(D),kn(D,f,"timerProgressBar"),setTimeout(function(){d.timeout&&d.timeout.running&&fs(f.timer)})))},kV=function(d,f){if(!f.toast){if(!vo(f.allowEnterKey)){NV();return}OV(d,f)||Co(-1,1)}},OV=function(d,f){return f.focusDeny&&jn(d.denyButton)?(d.denyButton.focus(),!0):f.focusCancel&&jn(d.cancelButton)?(d.cancelButton.focus(),!0):f.focusConfirm&&jn(d.confirmButton)?(d.confirmButton.focus(),!0):!1},NV=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var yx=new Date,_x=localStorage.getItem("swal-initiation");_x?(yx.getTime()-Date.parse(_x))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var y=document.createElement("audio");y.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",y.loop=!0,document.body.appendChild(y),setTimeout(function(){y.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(yx))}qt.prototype.disableButtons=ex,qt.prototype.enableButtons=JS,qt.prototype.getInput=ol,qt.prototype.disableInput=nx,qt.prototype.enableInput=tx,qt.prototype.hideLoading=On,qt.prototype.disableLoading=On,qt.prototype.showValidationMessage=ix,qt.prototype.resetValidationMessage=rx,qt.prototype.close=nr,qt.prototype.closePopup=nr,qt.prototype.closeModal=nr,qt.prototype.closeToast=nr,qt.prototype.rejectPromise=tl,qt.prototype.update=cx,qt.prototype._destroy=lx,Object.assign(qt,uV),Object.keys(WL).forEach(function(y){qt[y]=function(){if(kr&&kr[y]){var d;return(d=kr)[y].apply(d,arguments)}return null}}),qt.DismissReason=Oi,qt.version="11.11.1";var Jp=qt;return Jp.default=Jp,Jp});typeof ho<"u"&&ho.Sweetalert2&&(ho.swal=ho.sweetAlert=ho.Swal=ho.SweetAlert=ho.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var sw=null;var ow=1,aw=Symbol("SIGNAL");function at(t){let e=sw;return sw=t,e}function Tx(){return sw}var cw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function LV(t){if(!(fw(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ow)){if(!t.producerMustRecompute(t)&&!uw(t)){t.dirty=!1,t.lastCleanEpoch=ow;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ow}}function lw(t){return t&&(t.nextProducerIndex=0),at(t)}function Sx(t,e){if(at(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(fw(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)hw(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function uw(t){pw(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(LV(n),i!==n.version))return!0}return!1}function dw(t){if(pw(t),fw(t))for(let e=0;e<t.producerNode.length;e++)hw(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function hw(t,e){if(VV(t),t.liveConsumerNode.length===1&&jV(t))for(let i=0;i<t.producerNode.length;i++)hw(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];pw(r),r.producerIndexOfThis[i]=e}}function fw(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function pw(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function VV(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function jV(t){return t.producerNode!==void 0}function BV(){throw new Error}var UV=BV;function xx(t){UV=t}function we(t){return typeof t=="function"}function al(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var cm=al(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Na(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var wt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(we(i))try{i()}catch(o){e=o instanceof cm?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{Ax(o)}catch(s){e=e??[],s instanceof cm?e=[...e,...s.errors]:e.push(s)}}if(e)throw new cm(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ax(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Na(n,e)}remove(e){let{_finalizers:n}=this;n&&Na(n,e),e instanceof t&&e._removeParent(this)}};wt.EMPTY=(()=>{let t=new wt;return t.closed=!0,t})();var mw=wt.EMPTY;function lm(t){return t instanceof wt||t&&"closed"in t&&we(t.remove)&&we(t.add)&&we(t.unsubscribe)}function Ax(t){we(t)?t():t.unsubscribe()}var rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var cl={setTimeout(t,e,...n){let{delegate:i}=cl;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=cl;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function um(t){cl.setTimeout(()=>{let{onUnhandledError:e}=rr;if(e)e(t);else throw t})}function jd(){}var Mx=gw("C",void 0,void 0);function Rx(t){return gw("E",void 0,t)}function Px(t){return gw("N",t,void 0)}function gw(t,e,n){return{kind:t,value:e,error:n}}var Fa=null;function ll(t){if(rr.useDeprecatedSynchronousErrorHandling){let e=!Fa;if(e&&(Fa={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Fa;if(Fa=null,n)throw i}}else t()}function kx(t){rr.useDeprecatedSynchronousErrorHandling&&Fa&&(Fa.errorThrown=!0,Fa.error=t)}var La=class extends wt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lm(e)&&e.add(this)):this.destination=HV}static create(e,n,i){return new So(e,n,i)}next(e){this.isStopped?yw(Px(e),this):this._next(e)}error(e){this.isStopped?yw(Rx(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?yw(Mx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$V=Function.prototype.bind;function vw(t,e){return $V.call(t,e)}var _w=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){dm(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){dm(i)}else dm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){dm(n)}}},So=class extends La{constructor(e,n,i){super();let r;if(we(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&rr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&vw(e.next,o),error:e.error&&vw(e.error,o),complete:e.complete&&vw(e.complete,o)}):r=e}this.destination=new _w(r)}};function dm(t){rr.useDeprecatedSynchronousErrorHandling?kx(t):um(t)}function zV(t){throw t}function yw(t,e){let{onStoppedNotification:n}=rr;n&&cl.setTimeout(()=>n(t,e))}var HV={closed:!0,next:jd,error:zV,complete:jd};var ul=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $n(t){return t}function ww(...t){return bw(t)}function bw(t){return t.length===0?$n:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Ee=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=GV(n)?n:new So(n,i,r);return ll(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=Ox(i),new i((r,o)=>{let s=new So({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[ul](){return this}pipe(...n){return bw(n)(this)}toPromise(n){return n=Ox(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function Ox(t){var e;return(e=t??rr.Promise)!==null&&e!==void 0?e:Promise}function qV(t){return t&&we(t.next)&&we(t.error)&&we(t.complete)}function GV(t){return t&&t instanceof La||qV(t)&&lm(t)}function Ew(t){return we(t?.lift)}function xe(t){return e=>{if(Ew(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Se(t,e,n,i,r){return new Cw(t,e,n,i,r)}var Cw=class extends La{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function dl(){return xe((t,e)=>{let n=null;t._refCount++;let i=Se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var hl=class extends Ee{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ew(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wt;let n=this.getSubject();e.add(this.source.subscribe(Se(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wt.EMPTY)}return e}refCount(){return dl()(this)}};var Nx=al(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=(()=>{class t extends Ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new hm(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Nx}next(n){ll(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){ll(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){ll(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?mw:(this.currentObservers=null,o.push(n),new wt(()=>{this.currentObservers=null,Na(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Ee;return n.source=this,n}}return t.create=(e,n)=>new hm(e,n),t})(),hm=class extends Ce{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:mw}};var Wt=class extends Ce{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Bd={now(){return(Bd.delegate||Date).now()},delegate:void 0};var fm=class extends Ce{constructor(e=1/0,n=1/0,i=Bd){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var pm=class extends wt{constructor(e,n){super()}schedule(e,n=0){return this}};var Ud={setInterval(t,e,...n){let{delegate:i}=Ud;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ud;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var fl=class extends pm{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Ud.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Ud.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Na(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var pl=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};pl.now=Bd.now;var ml=class extends pl{constructor(e,n=pl.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var Nr=new ml(fl),Iw=Nr;var mm=class extends fl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var gm=class extends ml{};var Dw=new gm(mm);var zn=new Ee(t=>t.complete());function vm(t){return t&&we(t.schedule)}function Tw(t){return t[t.length-1]}function ym(t){return we(Tw(t))?t.pop():void 0}function Fr(t){return vm(Tw(t))?t.pop():void 0}function Fx(t,e){return typeof Tw(t)=="number"?t.pop():e}var gl=t=>t&&typeof t.length=="number"&&typeof t!="function";function _m(t){return we(t?.then)}function wm(t){return we(t[ul])}function bm(t){return Symbol.asyncIterator&&we(t?.[Symbol.asyncIterator])}function Em(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function WV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cm=WV();function Im(t){return we(t?.[Cm])}function Dm(t){return bx(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield em(n.read());if(r)return yield em(void 0);yield yield em(i)}}finally{n.releaseLock()}})}function Tm(t){return we(t?.getReader)}function gt(t){if(t instanceof Ee)return t;if(t!=null){if(wm(t))return KV(t);if(gl(t))return QV(t);if(_m(t))return YV(t);if(bm(t))return Lx(t);if(Im(t))return ZV(t);if(Tm(t))return XV(t)}throw Em(t)}function KV(t){return new Ee(e=>{let n=t[ul]();if(we(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QV(t){return new Ee(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function YV(t){return new Ee(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,um)})}function ZV(t){return new Ee(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Lx(t){return new Ee(e=>{JV(t,e).catch(n=>e.error(n))})}function XV(t){return Lx(Dm(t))}function JV(t,e){var n,i,r,o;return wx(this,void 0,void 0,function*(){try{for(n=Ex(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function ii(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function ri(t,e=0){return xe((n,i)=>{n.subscribe(Se(i,r=>ii(i,t,()=>i.next(r),e),()=>ii(i,t,()=>i.complete(),e),r=>ii(i,t,()=>i.error(r),e)))})}function Ni(t,e=0){return xe((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function Vx(t,e){return gt(t).pipe(Ni(e),ri(e))}function jx(t,e){return gt(t).pipe(Ni(e),ri(e))}function Bx(t,e){return new Ee(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function Ux(t,e){return new Ee(n=>{let i;return ii(n,e,()=>{i=t[Cm](),ii(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>we(i?.return)&&i.return()})}function Sm(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ee(n=>{ii(n,e,()=>{let i=t[Symbol.asyncIterator]();ii(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function $x(t,e){return Sm(Dm(t),e)}function zx(t,e){if(t!=null){if(wm(t))return Vx(t,e);if(gl(t))return Bx(t,e);if(_m(t))return jx(t,e);if(bm(t))return Sm(t,e);if(Im(t))return Ux(t,e);if(Tm(t))return $x(t,e)}throw Em(t)}function je(t,e){return e?zx(t,e):gt(t)}function ue(...t){let e=Fr(t);return je(t,e)}function vl(t,e){let n=we(t)?t:()=>t,i=r=>r.error(n());return new Ee(e?r=>e.schedule(i,0,r):i)}function xm(t){return!!t&&(t instanceof Ee||we(t.lift)&&we(t.subscribe))}var xo=al(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Hx(t){return t instanceof Date&&!isNaN(t)}function oe(t,e){return xe((n,i)=>{let r=0;n.subscribe(Se(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:ej}=Array;function tj(t,e){return ej(e)?t(...e):t(e)}function yl(t){return oe(e=>tj(t,e))}var{isArray:nj}=Array,{getPrototypeOf:ij,prototype:rj,keys:oj}=Object;function Am(t){if(t.length===1){let e=t[0];if(nj(e))return{args:e,keys:null};if(sj(e)){let n=oj(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function sj(t){return t&&typeof t=="object"&&ij(t)===rj}function Mm(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function _l(...t){let e=Fr(t),n=ym(t),{args:i,keys:r}=Am(t);if(i.length===0)return je([],e);let o=new Ee(aj(i,e,r?s=>Mm(r,s):$n));return n?o.pipe(yl(n)):o}function aj(t,e,n=$n){return i=>{qx(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)qx(e,()=>{let u=je(t[c],e),h=!1;u.subscribe(Se(i,m=>{o[c]=m,h||(h=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function qx(t,e,n){t?ii(n,t,e):e()}function Gx(t,e,n,i,r,o,s,a){let c=[],u=0,h=0,m=!1,_=()=>{m&&!c.length&&!u&&e.complete()},w=k=>u<i?S(k):c.push(k),S=k=>{o&&e.next(k),u++;let R=!1;gt(n(k,h++)).subscribe(Se(e,q=>{r?.(q),o?w(q):e.next(q)},()=>{R=!0},void 0,()=>{if(R)try{for(u--;c.length&&u<i;){let q=c.shift();s?ii(e,s,()=>S(q)):S(q)}_()}catch(q){e.error(q)}}))};return t.subscribe(Se(e,w,()=>{m=!0,_()})),()=>{a?.()}}function Kt(t,e,n=1/0){return we(e)?Kt((i,r)=>oe((o,s)=>e(i,o,r,s))(gt(t(i,r))),n):(typeof e=="number"&&(n=e),xe((i,r)=>Gx(i,r,t,n)))}function $d(t=1/0){return Kt($n,t)}function Wx(){return $d(1)}function _s(...t){return Wx()(je(t,Fr(t)))}function ws(t){return new Ee(e=>{gt(t()).subscribe(e)})}function Sw(...t){let e=ym(t),{args:n,keys:i}=Am(t),r=new Ee(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let h=0;h<s;h++){let m=!1;gt(n[h]).subscribe(Se(o,_=>{m||(m=!0,u--),a[h]=_},()=>c--,void 0,()=>{(!c||!m)&&(u||o.next(i?Mm(i,a):a),o.complete())}))}});return e?r.pipe(yl(e)):r}var cj=["addListener","removeListener"],lj=["addEventListener","removeEventListener"],uj=["on","off"];function zd(t,e,n,i){if(we(n)&&(i=n,n=void 0),i)return zd(t,e,n).pipe(yl(i));let[r,o]=fj(t)?lj.map(s=>a=>t[s](e,a,n)):dj(t)?cj.map(Kx(t,e)):hj(t)?uj.map(Kx(t,e)):[];if(!r&&gl(t))return Kt(s=>zd(s,e,n))(gt(t));if(!r)throw new TypeError("Invalid event target");return new Ee(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function Kx(t,e){return n=>i=>t[n](e,i)}function dj(t){return we(t.addListener)&&we(t.removeListener)}function hj(t){return we(t.on)&&we(t.off)}function fj(t){return we(t.addEventListener)&&we(t.removeEventListener)}function Qx(t=0,e,n=Iw){let i=-1;return e!=null&&(vm(e)?n=e:i=e),new Ee(r=>{let o=Hx(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Va(...t){let e=Fr(t),n=Fx(t,1/0),i=t;return i.length?i.length===1?gt(i[0]):$d(n)(je(i,e)):zn}function dt(t,e){return xe((n,i)=>{let r=0;n.subscribe(Se(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Yx(t){return xe((e,n)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let u=r;r=null,n.next(u)}s&&n.complete()},c=()=>{o=null,s&&n.complete()};e.subscribe(Se(n,u=>{i=!0,r=u,o||gt(t(u)).subscribe(o=Se(n,a,c))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}function Rm(t,e=Nr){return Yx(()=>Qx(t,e))}function Hn(t){return xe((e,n)=>{let i=null,r=!1,o;i=e.subscribe(Se(n,void 0,void 0,s=>{o=gt(t(s,Hn(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function Zx(t,e,n,i,r){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Se(s,h=>{let m=u++;c=a?t(c,h,m):(a=!0,h),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function bs(t,e){return we(e)?Kt(t,e,1):Kt(t,1)}function wl(t,e=Nr){return xe((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let u=o;o=null,i.next(u)}};function c(){let u=s+t,h=e.now();if(h<u){r=this.schedule(void 0,u-h),i.add(r);return}a()}n.subscribe(Se(i,u=>{o=u,s=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function Es(t){return xe((e,n)=>{let i=!1;e.subscribe(Se(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Qt(t){return t<=0?()=>zn:xe((e,n)=>{let i=0;e.subscribe(Se(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function xw(t){return oe(()=>t)}function bl(t,e=$n){return t=t??pj,xe((n,i)=>{let r,o=!0;n.subscribe(Se(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function pj(t,e){return t===e}function Pm(t=mj){return xe((e,n)=>{let i=!1;e.subscribe(Se(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function mj(){return new xo}function or(t){return xe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Fi(t,e){let n=arguments.length>=2;return i=>i.pipe(t?dt((r,o)=>t(r,o,i)):$n,Qt(1),n?Es(e):Pm(()=>new xo))}function El(t){return t<=0?()=>zn:xe((e,n)=>{let i=[];e.subscribe(Se(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Aw(t,e){let n=arguments.length>=2;return i=>i.pipe(t?dt((r,o)=>t(r,o,i)):$n,El(1),n?Es(e):Pm(()=>new xo))}function Cl(){return xe((t,e)=>{let n,i=!1;t.subscribe(Se(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function ja(t,e){return xe(Zx(t,e,arguments.length>=2,!0))}function Xx(t={}){let{connector:e=()=>new Ce,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,c,u=0,h=!1,m=!1,_=()=>{a?.unsubscribe(),a=void 0},w=()=>{_(),s=c=void 0,h=m=!1},S=()=>{let k=s;w(),k?.unsubscribe()};return xe((k,R)=>{u++,!m&&!h&&_();let q=c=c??e();R.add(()=>{u--,u===0&&!m&&!h&&(a=Mw(S,r))}),q.subscribe(R),!s&&u>0&&(s=new So({next:ne=>q.next(ne),error:ne=>{m=!0,_(),a=Mw(w,n,ne),q.error(ne)},complete:()=>{h=!0,_(),a=Mw(w,i),q.complete()}}),gt(k).subscribe(s))})(o)}}function Mw(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new So({next:()=>{i.unsubscribe(),t()}});return gt(e(...n)).subscribe(i)}function Hd(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,Xx({connector:()=>new fm(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function qd(t){return dt((e,n)=>t<=n)}function oi(...t){let e=Fr(t);return xe((n,i)=>{(e?_s(t,n,e):_s(t,n)).subscribe(i)})}function ct(t,e){return xe((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(Se(i,c=>{r?.unsubscribe();let u=0,h=o++;gt(t(c,h)).subscribe(r=Se(i,m=>i.next(e?e(c,m,h,u++):m),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function km(t,e){return we(e)?ct(()=>t,e):ct(()=>t)}function si(t){return xe((e,n)=>{gt(t).subscribe(Se(n,()=>n.complete(),jd)),!n.closed&&e.subscribe(n)})}function Mt(t,e,n){let i=we(t)||e||n?{next:t,error:e,complete:n}:t;return i?xe((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Se(o,c=>{var u;(u=i.next)===null||u===void 0||u.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,c),o.error(c)},()=>{var c,u;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):$n}var $A="https://g.co/ng/security#xss",ve=class extends Error{constructor(e,n){super(pg(e,n)),this.code=e}};function pg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function nh(t){return{toString:t}.toString()}var Om="__parameters__";function gj(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function zA(t,e,n){return nh(()=>{let i=gj(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,u,h){let m=c.hasOwnProperty(Om)?c[Om]:Object.defineProperty(c,Om,{value:[]})[Om];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(s),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var ci=globalThis;function bt(t){for(let e in t)if(t[e]===bt)return e;throw Error("Could not find renamed property on target object.")}function vj(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Gn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Gn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Jx(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var yj=bt({__forward_ref__:bt});function In(t){return t.__forward_ref__=In,t.toString=function(){return Gn(this())},t}function qn(t){return HA(t)?t():t}function HA(t){return typeof t=="function"&&t.hasOwnProperty(yj)&&t.__forward_ref__===In}function Q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Je(t){return{providers:t.providers||[],imports:t.imports||[]}}function mg(t){return eA(t,GA)||eA(t,WA)}function qA(t){return mg(t)!==null}function eA(t,e){return t.hasOwnProperty(e)?t[e]:null}function _j(t){let e=t&&(t[GA]||t[WA]);return e||null}function tA(t){return t&&(t.hasOwnProperty(nA)||t.hasOwnProperty(wj))?t[nA]:null}var GA=bt({\u0275prov:bt}),nA=bt({\u0275inj:bt}),WA=bt({ngInjectableDef:bt}),wj=bt({ngInjectorDef:bt}),X=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KA(t){return t&&!!t.\u0275providers}var bj=bt({\u0275cmp:bt}),Ej=bt({\u0275dir:bt}),Cj=bt({\u0275pipe:bt}),Ij=bt({\u0275mod:bt}),Gm=bt({\u0275fac:bt}),Gd=bt({__NG_ELEMENT_ID__:bt}),iA=bt({__NG_ENV_ID__:bt});function Al(t){return typeof t=="string"?t:t==null?"":String(t)}function Dj(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Al(t)}function Tj(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ve(-200,t)}function q0(t,e){throw new ve(-201,!1)}var $e=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}($e||{}),qw;function QA(){return qw}function ai(t){let e=qw;return qw=t,e}function YA(t,e,n){let i=mg(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&$e.Optional)return null;if(e!==void 0)return e;q0(t,"Injector")}var Sj={},Wd=Sj,Gw="__NG_DI_FLAG__",Wm="ngTempTokenPath",xj="ngTokenPath",Aj=/\n/gm,Mj="\u0275",rA="__source",Sl;function Rj(){return Sl}function Cs(t){let e=Sl;return Sl=t,e}function Pj(t,e=$e.Default){if(Sl===void 0)throw new ve(-203,!1);return Sl===null?YA(t,void 0,e):Sl.get(t,e&$e.Optional?null:void 0,e)}function P(t,e=$e.Default){return(QA()||Pj)(qn(t),e)}function te(t,e=$e.Default){return P(t,gg(e))}function gg(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ww(t){let e=[];for(let n=0;n<t.length;n++){let i=qn(t[n]);if(Array.isArray(i)){if(i.length===0)throw new ve(900,!1);let r,o=$e.Default;for(let s=0;s<i.length;s++){let a=i[s],c=kj(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(P(r,o))}else e.push(P(i))}return e}function ZA(t,e){return t[Gw]=e,t.prototype[Gw]=e,t}function kj(t){return t[Gw]}function Oj(t,e,n,i){let r=t[Wm];throw e[rA]&&r.unshift(e[rA]),t.message=Nj(`
`+t.message,r,n,i),t[xj]=r,t[Wm]=null,t}function Nj(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Mj?t.slice(2):t;let r=Gn(e);if(Array.isArray(e))r=e.map(Gn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Gn(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Aj,`
  `)}`}var Zt=ZA(zA("Optional"),8);var XA=ZA(zA("SkipSelf"),4);function $a(t,e){let n=t.hasOwnProperty(Gm);return n?t[Gm]:null}function Fj(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function Lj(t){return t.flat(Number.POSITIVE_INFINITY)}function G0(t,e){t.forEach(n=>Array.isArray(n)?G0(n,e):e(n))}function JA(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Km(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Vj(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function jj(t,e,n){let i=ih(t,e);return i>=0?t[i|1]=n:(i=~i,Vj(t,i,e,n)),i}function Rw(t,e){let n=ih(t,e);if(n>=0)return t[n|1]}function ih(t,e){return Bj(t,e,1)}function Bj(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Ml={},Li=[],Rl=new X(""),eM=new X("",-1),tM=new X(""),Qm=class{get(e,n=Wd){if(n===Wd){let i=new Error(`NullInjectorError: No provider for ${Gn(e)}!`);throw i.name="NullInjectorError",i}return n}},nM=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(nM||{}),jr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(jr||{}),Pl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Pl||{});function Uj(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function Kw(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];$j(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function iM(t){return t===3||t===4||t===6}function $j(t){return t.charCodeAt(0)===64}function Kd(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?oA(t,n,r,null,e[++i]):oA(t,n,r,null,null))}}return t}function oA(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var rM="ng-template";function zj(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&Uj(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(W0(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function W0(t){return t.type===4&&t.value!==rM}function Hj(t,e,n){let i=t.type===4&&!n?rM:t.value;return e===i}function qj(t,e,n){let i=4,r=t.attrs,o=r!==null?Kj(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!sr(i)&&!sr(c))return!1;if(s&&sr(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!Hj(t,c,n)||c===""&&e.length===1){if(sr(i))return!1;s=!0}}else if(i&8){if(r===null||!zj(t,r,c,n)){if(sr(i))return!1;s=!0}}else{let u=e[++a],h=Gj(c,r,W0(t),n);if(h===-1){if(sr(i))return!1;s=!0;continue}if(u!==""){let m;if(h>o?m="":m=r[h+1].toLowerCase(),i&2&&u!==m){if(sr(i))return!1;s=!0}}}}return sr(i)||s}function sr(t){return(t&1)===0}function Gj(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Qj(e,t)}function Wj(t,e,n=!1){for(let i=0;i<e.length;i++)if(qj(t,e[i],n))return!0;return!1}function Kj(t){for(let e=0;e<t.length;e++){let n=t[e];if(iM(n))return e}return t.length}function Qj(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function sA(t,e){return t?":not("+e.trim()+")":e}function Yj(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!sr(s)&&(e+=sA(o,r),r=""),i=s,o=o||!sr(i);n++}return r!==""&&(e+=sA(o,r)),e}function Zj(t){return t.map(Yj).join(",")}function Xj(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!sr(r))break;r=o}i++}return{attrs:e,classes:n}}function Ae(t){return nh(()=>{let e=lM(t),n=be(K({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nM.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||jr.Emulated,styles:t.styles||Li,_:null,schemas:t.schemas||null,tView:null,id:""});uM(n);let i=t.dependencies;return n.directiveDefs=cA(i,!1),n.pipeDefs=cA(i,!0),n.id=tB(n),n})}function Jj(t){return za(t)||oM(t)}function eB(t){return t!==null}function et(t){return nh(()=>({type:t.type,bootstrap:t.bootstrap||Li,declarations:t.declarations||Li,imports:t.imports||Li,exports:t.exports||Li,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function aA(t,e){if(t==null)return Ml;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a=Pl.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=a!==Pl.None?[i,a]:i,e[o]=s):n[o]=i}return n}function ze(t){return nh(()=>{let e=lM(t);return uM(e),e})}function K0(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function za(t){return t[bj]||null}function oM(t){return t[Ej]||null}function sM(t){return t[Cj]||null}function aM(t){let e=za(t)||oM(t)||sM(t);return e!==null?e.standalone:!1}function cM(t,e){let n=t[Ij]||null;if(!n&&e===!0)throw new Error(`Type ${Gn(t)} does not have '\u0275mod' property.`);return n}function lM(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ml,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Li,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aA(t.inputs,e),outputs:aA(t.outputs),debugInfo:null}}function uM(t){t.features?.forEach(e=>e(t))}function cA(t,e){if(!t)return null;let n=e?sM:Jj;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(eB)}function tB(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ci(t){return{\u0275providers:t}}function nB(...t){return{\u0275providers:dM(!0,t),\u0275fromNgModule:!0}}function dM(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return G0(e,s=>{let a=s;Qw(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&hM(r,o),n}function hM(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Q0(r,o=>{e(o,i)})}}function Qw(t,e,n,i){if(t=qn(t),!t)return!1;let r=null,o=tA(t),s=!o&&za(t);if(!o&&!s){let c=t.ngModule;if(o=tA(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Qw(u,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{G0(o.imports,h=>{Qw(h,e,n,i)&&(u||=[],u.push(h))})}finally{}u!==void 0&&hM(u,e)}if(!a){let u=$a(r)||(()=>new r);e({provide:r,useFactory:u,deps:Li},r),e({provide:tM,useValue:r,multi:!0},r),e({provide:Rl,useValue:()=>P(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let u=t;Q0(c,h=>{e(h,u)})}}else return!1;return r!==t&&t.providers!==void 0}function Q0(t,e){for(let n of t)KA(n)&&(n=n.\u0275providers),Array.isArray(n)?Q0(n,e):e(n)}var iB=bt({provide:String,useValue:bt});function fM(t){return t!==null&&typeof t=="object"&&iB in t}function rB(t){return!!(t&&t.useExisting)}function oB(t){return!!(t&&t.useFactory)}function kl(t){return typeof t=="function"}function sB(t){return!!t.useClass}var vg=new X(""),Bm={},aB={},Pw;function Y0(){return Pw===void 0&&(Pw=new Qm),Pw}var li=class{},Qd=class extends li{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zw(e,s=>this.processProvider(s)),this.records.set(eM,Il(void 0,this)),r.has("environment")&&this.records.set(li,Il(void 0,this));let o=this.records.get(vg);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(tM,Li,$e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=at(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),at(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Cs(this),i=ai(void 0),r;try{return e()}finally{Cs(n),ai(i)}}get(e,n=Wd,i=$e.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(iA))return e[iA](this);i=gg(i);let r,o=Cs(this),s=ai(void 0);try{if(!(i&$e.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=hB(e)&&mg(e);u&&this.injectableDefInScope(u)?c=Il(Yw(e),Bm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&$e.Self?Y0():this.parent;return n=i&$e.Optional&&n===Wd?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Wm]=a[Wm]||[]).unshift(Gn(e)),o)throw a;return Oj(a,e,"R3InjectorError",this.source)}else throw a}finally{ai(s),Cs(o)}}resolveInjectorInitializers(){let e=at(null),n=Cs(this),i=ai(void 0),r;try{let o=this.get(Rl,Li,$e.Self);for(let s of o)s()}finally{Cs(n),ai(i),at(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Gn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ve(205,!1)}processProvider(e){e=qn(e);let n=kl(e)?e:qn(e&&e.provide),i=lB(e);if(!kl(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Il(void 0,Bm,!0),r.factory=()=>Ww(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=at(null);try{return n.value===Bm&&(n.value=aB,n.value=n.factory()),typeof n.value=="object"&&n.value&&dB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{at(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=qn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Yw(t){let e=mg(t),n=e!==null?e.factory:$a(t);if(n!==null)return n;if(t instanceof X)throw new ve(204,!1);if(t instanceof Function)return cB(t);throw new ve(204,!1)}function cB(t){if(t.length>0)throw new ve(204,!1);let n=_j(t);return n!==null?()=>n.factory(t):()=>new t}function lB(t){if(fM(t))return Il(void 0,t.useValue);{let e=pM(t);return Il(e,Bm)}}function pM(t,e,n){let i;if(kl(t)){let r=qn(t);return $a(r)||Yw(r)}else if(fM(t))i=()=>qn(t.useValue);else if(oB(t))i=()=>t.useFactory(...Ww(t.deps||[]));else if(rB(t))i=()=>P(qn(t.useExisting));else{let r=qn(t&&(t.useClass||t.provide));if(uB(t))i=()=>new r(...Ww(t.deps));else return $a(r)||Yw(r)}return i}function Il(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uB(t){return!!t.deps}function dB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function hB(t){return typeof t=="function"||typeof t=="object"&&t instanceof X}function Zw(t,e){for(let n of t)Array.isArray(n)?Zw(n,e):n&&KA(n)?Zw(n.\u0275providers,e):e(n)}function ur(t,e){t instanceof Qd&&t.assertNotDestroyed();let n,i=Cs(t),r=ai(void 0);try{return e()}finally{Cs(i),ai(r)}}function fB(){return QA()!==void 0||Rj()!=null}function pB(t){return typeof t=="function"}var Oo=0,Fe=1,Te=2,Nn=3,ar=4,dr=5,Ym=6,Zm=7,cr=8,Ol=9,Br=10,Yt=11,Yd=12,lA=13,Vl=14,Ur=15,Ha=16,Dl=17,Ao=18,yg=19,mM=20,Is=21,kw=22,Vi=23,lr=25,gM=1;var qa=7,Xm=8,Nl=9,Ei=10,Jm=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Jm||{});function Ds(t){return Array.isArray(t)&&typeof t[gM]=="object"}function No(t){return Array.isArray(t)&&t[gM]===!0}function vM(t){return(t.flags&4)!==0}function _g(t){return t.componentOffset>-1}function Z0(t){return(t.flags&1)===1}function Ts(t){return!!t.template}function Xw(t){return(t[Te]&512)!==0}var Jw=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function yM(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function ui(){return _M}function _M(t){return t.type.prototype.ngOnChanges&&(t.setInput=gB),mB}ui.ngInherit=!0;function mB(){let t=bM(this),e=t?.current;if(e){let n=t.previous;if(n===Ml)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function gB(t,e,n,i,r){let o=this.declaredInputs[i],s=bM(t)||vB(t,{previous:Ml,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Jw(u&&u.currentValue,n,c===Ml),yM(t,e,r,n)}var wM="__ngSimpleChanges__";function bM(t){return t[wM]||null}function vB(t,e){return t[wM]=e}var uA=null;var Lr=function(t,e,n){uA?.(t,e,n)},yB="svg",_B="math";function $r(t){for(;Array.isArray(t);)t=t[Oo];return t}function EM(t,e){return $r(e[t])}function Bi(t,e){return $r(e[t.index])}function CM(t,e){return t.data[e]}function IM(t,e){return t[e]}function xs(t,e){let n=e[t];return Ds(n)?n:n[Oo]}function wB(t){return(t[Te]&4)===4}function X0(t){return(t[Te]&128)===128}function bB(t){return No(t[Nn])}function eg(t,e){return e==null?null:t[e]}function DM(t){t[Dl]=0}function TM(t){t[Te]&1024||(t[Te]|=1024,X0(t)&&wg(t))}function EB(t,e){for(;t>0;)e=e[Vl],t--;return e}function Zd(t){return!!(t[Te]&9216||t[Vi]?.dirty)}function e0(t){t[Br].changeDetectionScheduler?.notify(7),t[Te]&64&&(t[Te]|=1024),Zd(t)&&wg(t)}function wg(t){t[Br].changeDetectionScheduler?.notify(0);let e=Ga(t);for(;e!==null&&!(e[Te]&8192||(e[Te]|=8192,!X0(e)));)e=Ga(e)}function SM(t,e){if((t[Te]&256)===256)throw new ve(911,!1);t[Is]===null&&(t[Is]=[]),t[Is].push(e)}function CB(t,e){if(t[Is]===null)return;let n=t[Is].indexOf(e);n!==-1&&t[Is].splice(n,1)}function Ga(t){let e=t[Nn];return No(e)?e[Nn]:e}var Be={lFrame:VM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var xM=!1;function IB(){return Be.lFrame.elementDepthCount}function DB(){Be.lFrame.elementDepthCount++}function TB(){Be.lFrame.elementDepthCount--}function AM(){return Be.bindingsEnabled}function SB(){return Be.skipHydrationRootTNode!==null}function xB(t){return Be.skipHydrationRootTNode===t}function AB(){Be.skipHydrationRootTNode=null}function nt(){return Be.lFrame.lView}function vn(){return Be.lFrame.tView}function Ie(t){return Be.lFrame.contextLView=t,t[cr]}function De(t){return Be.lFrame.contextLView=null,t}function Wn(){let t=MM();for(;t!==null&&t.type===64;)t=t.parent;return t}function MM(){return Be.lFrame.currentTNode}function MB(){let t=Be.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function rh(t,e){let n=Be.lFrame;n.currentTNode=t,n.isParent=e}function RM(){return Be.lFrame.isParent}function RB(){Be.lFrame.isParent=!1}function PB(){return Be.lFrame.contextLView}function PM(){return xM}function dA(t){xM=t}function kM(){let t=Be.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function kB(){return Be.lFrame.bindingIndex}function OB(t){return Be.lFrame.bindingIndex=t}function oh(){return Be.lFrame.bindingIndex++}function OM(t){let e=Be.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function NB(){return Be.lFrame.inI18n}function FB(t,e){let n=Be.lFrame;n.bindingIndex=n.bindingRootIndex=t,t0(e)}function LB(){return Be.lFrame.currentDirectiveIndex}function t0(t){Be.lFrame.currentDirectiveIndex=t}function VB(t){let e=Be.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function NM(){return Be.lFrame.currentQueryIndex}function J0(t){Be.lFrame.currentQueryIndex=t}function jB(t){let e=t[Fe];return e.type===2?e.declTNode:e.type===1?t[dr]:null}function FM(t,e,n){if(n&$e.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&$e.Host);)if(r=jB(o),r===null||(o=o[Vl],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=Be.lFrame=LM();return i.currentTNode=e,i.lView=t,!0}function eb(t){let e=LM(),n=t[Fe];Be.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function LM(){let t=Be.lFrame,e=t===null?null:t.child;return e===null?VM(t):e}function VM(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function jM(){let t=Be.lFrame;return Be.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var BM=jM;function tb(){let t=jM();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function BB(t){return(Be.lFrame.contextLView=EB(t,Be.lFrame.contextLView))[cr]}function Ja(){return Be.lFrame.selectedIndex}function Wa(t){Be.lFrame.selectedIndex=t}function sh(){let t=Be.lFrame;return CM(t.tView,t.selectedIndex)}function UB(){return Be.lFrame.currentNamespace}var UM=!0;function nb(){return UM}function ib(t){UM=t}function $B(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=_M(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function rb(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Um(t,e,n){$M(t,e,3,n)}function $m(t,e,n,i){(t[Te]&3)===n&&$M(t,e,n,i)}function Ow(t,e){let n=t[Te];(n&3)===e&&(n&=16383,n+=1,t[Te]=n)}function $M(t,e,n,i){let r=i!==void 0?t[Dl]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[Dl]+=65536),(a<o||o==-1)&&(zB(t,n,e,c),t[Dl]=(t[Dl]&4294901760)+c+2),c++}function hA(t,e){Lr(4,t,e);let n=at(null);try{e.call(t)}finally{at(n),Lr(5,t,e)}}function zB(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[Te]>>14<t[Dl]>>16&&(t[Te]&3)===e&&(t[Te]+=16384,hA(a,o)):hA(a,o)}var xl=-1,Ka=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function HB(t){return t instanceof Ka}function qB(t){return(t.flags&8)!==0}function GB(t){return(t.flags&16)!==0}function zM(t){return t!==xl}function tg(t){return t&32767}function WB(t){return t>>16}function ng(t,e){let n=WB(t),i=e;for(;n>0;)i=i[Vl],n--;return i}var n0=!0;function ig(t){let e=n0;return n0=t,e}var KB=256,HM=KB-1,qM=5,QB=0,Vr={};function YB(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Gd)&&(i=n[Gd]),i==null&&(i=n[Gd]=QB++);let r=i&HM,o=1<<r;e.data[t+(r>>qM)]|=o}function rg(t,e){let n=GM(t,e);if(n!==-1)return n;let i=e[Fe];i.firstCreatePass&&(t.injectorIndex=e.length,Nw(i.data,t),Nw(e,null),Nw(i.blueprint,null));let r=ob(t,e),o=t.injectorIndex;if(zM(r)){let s=tg(r),a=ng(r,e),c=a[Fe].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=r,o}function Nw(t,e){t.push(0,0,0,0,0,0,0,0,e)}function GM(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ob(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=ZM(r),i===null)return xl;if(n++,r=r[Vl],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return xl}function i0(t,e,n){YB(t,e,n)}function ZB(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let o=n[r];if(iM(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(o===e)return n[r+1];r=r+2}}}return null}function WM(t,e,n){if(n&$e.Optional||t!==void 0)return t;q0(e,"NodeInjector")}function KM(t,e,n,i){if(n&$e.Optional&&i===void 0&&(i=null),!(n&($e.Self|$e.Host))){let r=t[Ol],o=ai(void 0);try{return r?r.get(e,i,n&$e.Optional):YA(e,i,n&$e.Optional)}finally{ai(o)}}return WM(i,e,n)}function QM(t,e,n,i=$e.Default,r){if(t!==null){if(e[Te]&2048&&!(i&$e.Self)){let s=tU(t,e,n,i,Vr);if(s!==Vr)return s}let o=YM(t,e,n,i,Vr);if(o!==Vr)return o}return KM(e,n,i,r)}function YM(t,e,n,i,r){let o=JB(n);if(typeof o=="function"){if(!FM(e,t,i))return i&$e.Host?WM(r,n,i):KM(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&$e.Optional))q0(n);else return s}finally{BM()}}else if(typeof o=="number"){let s=null,a=GM(t,e),c=xl,u=i&$e.Host?e[Ur][dr]:null;for((a===-1||i&$e.SkipSelf)&&(c=a===-1?ob(t,e):e[a+8],c===xl||!pA(i,!1)?a=-1:(s=e[Fe],a=tg(c),e=ng(c,e)));a!==-1;){let h=e[Fe];if(fA(o,a,h.data)){let m=XB(a,e,n,s,i,u);if(m!==Vr)return m}c=e[a+8],c!==xl&&pA(i,e[Fe].data[a+8]===u)&&fA(o,a,e)?(s=h,a=tg(c),e=ng(c,e)):a=-1}}return r}function XB(t,e,n,i,r,o){let s=e[Fe],a=s.data[t+8],c=i==null?_g(a)&&n0:i!=s&&(a.type&3)!==0,u=r&$e.Host&&o===a,h=zm(a,s,n,c,u);return h!==null?Qa(e,s,h,a):Vr}function zm(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,h=o>>20,m=i?a:a+h,_=r?a+h:u;for(let w=m;w<_;w++){let S=s[w];if(w<c&&n===S||w>=c&&S.type===n)return w}if(r){let w=s[c];if(w&&Ts(w)&&w.type===n)return c}return null}function Qa(t,e,n,i){let r=t[n],o=e.data;if(HB(r)){let s=r;s.resolving&&Tj(Dj(o[n]));let a=ig(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?ai(s.injectImpl):null,h=FM(t,i,$e.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&$B(n,o[n],e)}finally{u!==null&&ai(u),ig(a),s.resolving=!1,BM()}}return r}function JB(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Gd)?t[Gd]:void 0;return typeof e=="number"?e>=0?e&HM:eU:e}function fA(t,e,n){let i=1<<t;return!!(n[e+(t>>qM)]&i)}function pA(t,e){return!(t&$e.Self)&&!(t&$e.Host&&e)}var Ua=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return QM(this._tNode,this._lView,e,gg(i),n)}};function eU(){return new Ua(Wn(),nt())}function di(t){return nh(()=>{let e=t.prototype.constructor,n=e[Gm]||r0(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Gm]||r0(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function r0(t){return HA(t)?()=>{let e=r0(qn(t));return e&&e()}:$a(t)}function tU(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[Te]&2048&&!(s[Te]&512);){let a=YM(o,s,n,i|$e.Self,Vr);if(a!==Vr)return a;let c=o.parent;if(!c){let u=s[mM];if(u){let h=u.get(n,Vr,i);if(h!==Vr)return h}c=ZM(s),s=s[Vl]}o=c}return r}function ZM(t){let e=t[Fe],n=e.type;return n===2?e.declTNode:n===1?t[dr]:null}function sb(t){return ZB(Wn(),t)}function mA(t,e=null,n=null,i){let r=XM(t,e,n,i);return r.resolveInjectorInitializers(),r}function XM(t,e=null,n=null,i,r=new Set){let o=[n||Li,nB(t)];return i=i||(typeof t=="object"?void 0:Gn(t)),new Qd(o,e||Y0(),i||null,r)}var Ba=class Ba{static create(e,n){if(Array.isArray(e))return mA({name:""},n,e,"");{let i=e.name??"";return mA({name:i},e.parent,e.providers,i)}}};Ba.THROW_IF_NOT_FOUND=Wd,Ba.NULL=new Qm,Ba.\u0275prov=Q({token:Ba,providedIn:"any",factory:()=>P(eM)}),Ba.__NG_ELEMENT_ID__=-1;var yt=Ba;var nU=new X("");nU.__NG_ELEMENT_ID__=t=>{let e=Wn();if(e===null)throw new ve(204,!1);if(e.type&2)return e.value;if(t&$e.Optional)return null;throw new ve(204,!1)};var iU="ngOriginalError";function Fw(t){return t[iU]}var Mo=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Fw(e);for(;n&&Fw(n);)n=Fw(n);return n||null}},JM=new X("",{providedIn:"root",factory:()=>te(Mo).handleError.bind(void 0)}),e1=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=rU,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),o0=class extends e1{constructor(e){super(),this._lView=e}onDestroy(e){return SM(this._lView,e),()=>CB(this._lView,e)}};function rU(){return new o0(nt())}function oU(){return jl(Wn(),nt())}function jl(t,e){return new ht(Bi(t,e))}var ht=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=oU;let t=e;return t})();function sU(t){return t instanceof ht?t.nativeElement:t}var Fo=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Wt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var s0=class extends Ce{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,fB()&&(this.destroyRef=te(e1,{optional:!0})??void 0,this.pendingTasks=te(Fo,{optional:!0})??void 0)}emit(e){let n=at(null);try{super.next(e)}finally{at(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof wt&&e.add(a),a}wrapInTimeout(e){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(n),i!==void 0&&this.pendingTasks?.remove(i)})}}},Ge=s0;function aU(){return this._results[Symbol.iterator]()}var og=class t{get changes(){return this._changes??=new Ge}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=aU)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=Lj(e);(this._changesDetected=!Fj(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function t1(t){return(t.flags&128)===128}var n1=new Map,cU=0;function lU(){return cU++}function uU(t){n1.set(t[yg],t)}function dU(t){n1.delete(t[yg])}var gA="__ngContext__";function Ya(t,e){Ds(e)?(t[gA]=e[yg],uU(e)):t[gA]=e}function i1(t){return o1(t[Yd])}function r1(t){return o1(t[ar])}function o1(t){for(;t!==null&&!No(t);)t=t[ar];return t}var a0;function s1(t){a0=t}function hU(){if(a0!==void 0)return a0;if(typeof document<"u")return document;throw new ve(210,!1)}var ah=new X("",{providedIn:"root",factory:()=>fU}),fU="ng",ab=new X(""),fn=new X("",{providedIn:"platform",factory:()=>"unknown"});var Bl=new X(""),ch=new X("",{providedIn:"root",factory:()=>hU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pU="h",mU="b";var gU=()=>null;function cb(t,e,n=!1){return gU(t,e,n)}var a1=!1,vU=new X("",{providedIn:"root",factory:()=>a1});var Nm;function yU(){if(Nm===void 0&&(Nm=null,ci.trustedTypes))try{Nm=ci.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Nm}function bg(t){return yU()?.createHTML(t)||t}var Fm;function _U(){if(Fm===void 0&&(Fm=null,ci.trustedTypes))try{Fm=ci.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Fm}function vA(t){return _U()?.createScriptURL(t)||t}var Ro=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$A})`}},c0=class extends Ro{getTypeName(){return"HTML"}},l0=class extends Ro{getTypeName(){return"Style"}},u0=class extends Ro{getTypeName(){return"Script"}},d0=class extends Ro{getTypeName(){return"URL"}},h0=class extends Ro{getTypeName(){return"ResourceURL"}};function qr(t){return t instanceof Ro?t.changingThisBreaksApplicationSecurity:t}function As(t,e){let n=wU(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${$A})`)}return n===e}function wU(t){return t instanceof Ro&&t.getTypeName()||null}function c1(t){return new c0(t)}function l1(t){return new l0(t)}function u1(t){return new u0(t)}function d1(t){return new d0(t)}function h1(t){return new h0(t)}function bU(t){let e=new p0(t);return EU()?new f0(e):e}var f0=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(bg(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},p0=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=bg(e),n}};function EU(){try{return!!new window.DOMParser().parseFromString(bg(""),"text/html")}catch{return!1}}var CU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Eg(t){return t=String(t),t.match(CU)?t:"unsafe:"+t}function Lo(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function lh(...t){let e={};for(let n of t)for(let i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}var f1=Lo("area,br,col,hr,img,wbr"),p1=Lo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m1=Lo("rp,rt"),IU=lh(m1,p1),DU=lh(p1,Lo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),TU=lh(m1,Lo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yA=lh(f1,DU,TU,IU),g1=Lo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),SU=Lo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xU=Lo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),AU=lh(g1,SU,xU),MU=Lo("script,style,template"),m0=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0,r=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){r.push(n),n=kU(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=PU(n);if(o){n=o;break}n=r.pop()}}return this.buf.join("")}startElement(e){let n=_A(e).toLowerCase();if(!yA.hasOwnProperty(n))return this.sanitizedSomething=!0,!MU.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!AU.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;g1[a]&&(c=Eg(c)),this.buf.push(" ",s,'="',wA(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=_A(e).toLowerCase();yA.hasOwnProperty(n)&&!f1.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(wA(e))}};function RU(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function PU(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw v1(e);return e}function kU(t){let e=t.firstChild;if(e&&RU(t,e))throw v1(e);return e}function _A(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function v1(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var OU=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NU=/([^\#-~ |!])/g;function wA(t){return t.replace(/&/g,"&amp;").replace(OU,function(e){let n=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(NU,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Lm;function y1(t,e){let n=null;try{Lm=Lm||bU(t);let i=e?String(e):"";n=Lm.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=Lm.getInertBodyElement(i)}while(i!==o);let a=new m0().sanitizeChildren(bA(n)||n);return bg(a)}finally{if(n){let i=bA(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function bA(t){return"content"in t&&FU(t)?t.content:null}function FU(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Gr||{});function Vo(t){let e=w1();return e?e.sanitize(Gr.URL,t)||"":As(t,"URL")?qr(t):Eg(Al(t))}function LU(t){let e=w1();if(e)return vA(e.sanitize(Gr.RESOURCE_URL,t)||"");if(As(t,"ResourceURL"))return vA(qr(t));throw new ve(904,!1)}function VU(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?LU:Vo}function _1(t,e,n){return VU(e,n)(t)}function w1(){let t=nt();return t&&t[Br].sanitizer}function b1(t){return t instanceof Function?t():t}var Po=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Po||{}),jU;function lb(t,e){return jU(t,e)}function Tl(t,e,n,i,r){if(i!=null){let o,s=!1;No(i)?o=i:Ds(i)&&(s=!0,i=i[Oo]);let a=$r(i);t===0&&n!==null?r==null?T1(e,n,a):sg(e,n,a,r||null,!0):t===1&&n!==null?sg(e,n,a,r||null,!0):t===2?t$(e,a,s):t===3&&e.destroyNode(a),o!=null&&i$(e,t,o,n,r)}}function BU(t,e){return t.createText(e)}function UU(t,e,n){t.setValue(e,n)}function E1(t,e,n){return t.createElement(e,n)}function $U(t,e){C1(t,e),e[Oo]=null,e[dr]=null}function zU(t,e,n,i,r,o){i[Oo]=r,i[dr]=e,Cg(t,i,n,1,r,o)}function C1(t,e){e[Br].changeDetectionScheduler?.notify(8),Cg(t,e,e[Yt],2,null,null)}function HU(t){let e=t[Yd];if(!e)return Lw(t[Fe],t);for(;e;){let n=null;if(Ds(e))n=e[Yd];else{let i=e[Ei];i&&(n=i)}if(!n){for(;e&&!e[ar]&&e!==t;)Ds(e)&&Lw(e[Fe],e),e=e[Nn];e===null&&(e=t),Ds(e)&&Lw(e[Fe],e),n=e&&e[ar]}e=n}}function qU(t,e,n,i){let r=Ei+i,o=n.length;i>0&&(n[r-1][ar]=e),i<o-Ei?(e[ar]=n[r],JA(n,Ei+i,e)):(n.push(e),e[ar]=null),e[Nn]=n;let s=e[Ha];s!==null&&n!==s&&I1(s,e);let a=e[Ao];a!==null&&a.insertView(t),e0(e),e[Te]|=128}function I1(t,e){let n=t[Nl],i=e[Nn];if(Ds(i))t[Te]|=Jm.HasTransplantedViews;else{let r=i[Nn][Ur];e[Ur]!==r&&(t[Te]|=Jm.HasTransplantedViews)}n===null?t[Nl]=[e]:n.push(e)}function ub(t,e){let n=t[Nl],i=n.indexOf(e);n.splice(i,1)}function g0(t,e){if(t.length<=Ei)return;let n=Ei+e,i=t[n];if(i){let r=i[Ha];r!==null&&r!==t&&ub(r,i),e>0&&(t[n-1][ar]=i[ar]);let o=Km(t,Ei+e);$U(i[Fe],i);let s=o[Ao];s!==null&&s.detachView(o[Fe]),i[Nn]=null,i[ar]=null,i[Te]&=-129}return i}function D1(t,e){if(!(e[Te]&256)){let n=e[Yt];n.destroyNode&&Cg(t,e,n,3,null,null),HU(e)}}function Lw(t,e){if(e[Te]&256)return;let n=at(null);try{e[Te]&=-129,e[Te]|=256,e[Vi]&&dw(e[Vi]),WU(t,e),GU(t,e),e[Fe].type===1&&e[Yt].destroy();let i=e[Ha];if(i!==null&&No(e[Nn])){i!==e[Nn]&&ub(i,e);let r=e[Ao];r!==null&&r.detachView(t)}dU(e)}finally{at(n)}}function GU(t,e){let n=t.cleanup,i=e[Zm];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[Zm]=null);let r=e[Is];if(r!==null){e[Is]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function WU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Ka)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];Lr(4,a,c);try{c.call(a)}finally{Lr(5,a,c)}}else{Lr(4,r,o);try{o.call(r)}finally{Lr(5,r,o)}}}}}function KU(t,e,n){return QU(t,e.parent,n)}function QU(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[Oo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===jr.None||o===jr.Emulated)return null}return Bi(i,n)}}function sg(t,e,n,i,r){t.insertBefore(e,n,i,r)}function T1(t,e,n){t.appendChild(e,n)}function EA(t,e,n,i,r){i!==null?sg(t,e,n,i,r):T1(t,e,n)}function YU(t,e,n,i){t.removeChild(e,n,i)}function db(t,e){return t.parentNode(e)}function ZU(t,e){return t.nextSibling(e)}function XU(t,e,n){return e$(t,e,n)}function JU(t,e,n){return t.type&40?Bi(t,n):null}var e$=JU,CA;function hb(t,e,n,i){let r=KU(t,i,e),o=e[Yt],s=i.parent||e[dr],a=XU(s,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)EA(o,r,n[c],a,!1);else EA(o,r,n,a,!1);CA!==void 0&&CA(o,i,e,n,r)}function Hm(t,e){if(e!==null){let n=e.type;if(n&3)return Bi(e,t);if(n&4)return v0(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Hm(t,i);{let r=t[e.index];return No(r)?v0(-1,r):$r(r)}}else{if(n&32)return lb(e,t)()||$r(t[e.index]);{let i=S1(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ga(t[Ur]);return Hm(r,i)}else return Hm(t,e.next)}}}return null}function S1(t,e){if(e!==null){let i=t[Ur][dr],r=e.projection;return i.projection[r]}return null}function v0(t,e){let n=Ei+t+1;if(n<e.length){let i=e[n],r=i[Fe].firstChild;if(r!==null)return Hm(i,r)}return e[qa]}function t$(t,e,n){let i=db(t,e);i&&YU(t,i,e,n)}function fb(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],c=n.type;if(s&&e===0&&(a&&Ya($r(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)fb(t,e,n.child,i,r,o,!1),Tl(e,t,r,a,o);else if(c&32){let u=lb(n,i),h;for(;h=u();)Tl(e,t,r,h,o);Tl(e,t,r,a,o)}else c&16?n$(t,e,i,n,r,o):Tl(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Cg(t,e,n,i,r,o){fb(n,i,t.firstChild,e,r,o,!1)}function n$(t,e,n,i,r,o){let s=n[Ur],c=s[dr].projection[i.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];Tl(e,t,r,h,o)}else{let u=c,h=s[Nn];t1(i)&&(u.flags|=128),fb(t,e,u,h,r,o,!0)}}function i$(t,e,n,i,r){let o=n[qa],s=$r(n);o!==s&&Tl(e,t,i,o,r);for(let a=Ei;a<n.length;a++){let c=n[a];Cg(c[Fe],c,t,e,i,o)}}function r$(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:Po.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Po.Important),t.setStyle(n,i,r,o))}}function o$(t,e,n){t.setAttribute(e,"style",n)}function x1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function A1(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&Kw(t,e,i),r!==null&&x1(t,e,r),o!==null&&o$(t,e,o)}var hr={};function F(t=1){M1(vn(),nt(),Ja()+t,!1)}function M1(t,e,n,i){if(!i)if((e[Te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Um(e,o,n)}else{let o=t.preOrderHooks;o!==null&&$m(e,o,0,n)}Wa(n)}function U(t,e=$e.Default){let n=nt();if(n===null)return P(t,e);let i=Wn();return QM(i,n,qn(t),e)}function R1(t,e,n,i,r,o){let s=at(null);try{let a=null;r&Pl.SignalBased&&(a=e[i][aw]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&Pl.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,i):yM(e,a,i,o)}finally{at(s)}}function s$(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Wa(~r);else{let o=r,s=n[++i],a=n[++i];FB(s,o);let c=e[o];a(2,c)}}}finally{Wa(-1)}}function Ig(t,e,n,i,r,o,s,a,c,u,h){let m=e.blueprint.slice();return m[Oo]=r,m[Te]=i|4|128|8|64,(u!==null||t&&t[Te]&2048)&&(m[Te]|=2048),DM(m),m[Nn]=m[Vl]=t,m[cr]=n,m[Br]=s||t&&t[Br],m[Yt]=a||t&&t[Yt],m[Ol]=c||t&&t[Ol]||null,m[dr]=o,m[yg]=lU(),m[Ym]=h,m[mM]=u,m[Ur]=e.type==2?t[Ur]:m,m}function Dg(t,e,n,i,r){let o=t.data[e];if(o===null)o=a$(t,e,n,i,r),NB()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=MB();o.injectorIndex=s===null?-1:s.injectorIndex}return rh(o,!0),o}function a$(t,e,n,i,r){let o=MM(),s=RM(),a=s?o:o&&o.parent,c=t.data[e]=f$(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function P1(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function k1(t,e,n,i,r){let o=Ja(),s=i&2;try{Wa(-1),s&&e.length>lr&&M1(t,e,lr,!1),Lr(s?2:0,r),n(i,r)}finally{Wa(o),Lr(s?3:1,r)}}function O1(t,e,n){if(vM(e)){let i=at(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{at(i)}}}function N1(t,e,n){AM()&&(_$(t,e,n,Bi(n,e)),(n.flags&64)===64&&B1(t,e,n))}function F1(t,e,n=Bi){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function L1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=pb(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function pb(t,e,n,i,r,o,s,a,c,u,h){let m=lr+i,_=m+r,w=c$(m,_),S=typeof u=="function"?u():u;return w[Fe]={type:t,blueprint:w,template:n,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:S,incompleteFirstPass:!1,ssrId:h}}function c$(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:hr);return n}function l$(t,e,n,i){let o=i.get(vU,a1)||n===jr.ShadowDom,s=t.selectRootElement(e,o);return u$(s),s}function u$(t){d$(t)}var d$=()=>null;function h$(t,e,n,i){let r=z1(e);r.push(n),t.firstCreatePass&&H1(t).push(i,r.length-1)}function f$(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return SB()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function IA(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,c=Pl.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}t===0?DA(i,n,u,a,c):DA(i,n,u,a)}return i}function DA(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function p$(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let h=i;h<r;h++){let m=o[h],_=n?n.get(m):null,w=_?_.inputs:null,S=_?_.outputs:null;c=IA(0,m.inputs,h,c,w),u=IA(1,m.outputs,h,u,S);let k=c!==null&&s!==null&&!W0(e)?M$(c,h,s):null;a.push(k)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function m$(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Tg(t,e,n,i,r,o,s,a){let c=Bi(e,n),u=e.inputs,h;!a&&u!=null&&(h=u[i])?(mb(t,n,h,i,r),_g(e)&&g$(n,e.index)):e.type&3?(i=m$(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)):e.type&12}function g$(t,e){let n=xs(e,t);n[Te]&16||(n[Te]|=64)}function V1(t,e,n,i){if(AM()){let r=i===null?null:{"":-1},o=b$(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&j1(t,e,n,s,r,a),r&&E$(n,i,r)}n.mergedAttrs=Kd(n.mergedAttrs,n.attrs)}function j1(t,e,n,i,r,o){for(let u=0;u<i.length;u++)i0(rg(n,e),t,i[u].type);I$(n,t.data.length,i.length);for(let u=0;u<i.length;u++){let h=i[u];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=P1(t,e,i.length,null);for(let u=0;u<i.length;u++){let h=i[u];n.mergedAttrs=Kd(n.mergedAttrs,h.hostAttrs),D$(t,n,e,c,h),C$(c,h,r),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let m=h.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}p$(t,n,o)}function v$(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;y$(s)!=a&&s.push(a),s.push(n,i,o)}}function y$(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _$(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;_g(n)&&T$(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||rg(n,e),Ya(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let c=t.data[a],u=Qa(e,t,a,n);if(Ya(u,e),s!==null&&A$(e,a-r,u,c,n,s),Ts(c)){let h=xs(n.index,e);h[cr]=Qa(e,t,a,n)}}}function B1(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=LB();try{Wa(o);for(let a=i;a<r;a++){let c=t.data[a],u=e[a];t0(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&w$(c,u)}}finally{Wa(-1),t0(s)}}function w$(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function b$(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Wj(e,s.selectors,!1))if(i||(i=[]),Ts(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;y0(t,e,c)}else i.unshift(s),y0(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function y0(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function E$(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new ve(-301,!1);i.push(e[r],o)}}}function C$(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Ts(e)&&(n[""]=t)}}function I$(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function D$(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=$a(r.type,!0)),s=new Ka(o,Ts(r),U);t.blueprint[i]=s,n[i]=s,v$(t,e,i,P1(t,n,r.hostVars,hr),r)}function T$(t,e,n){let i=Bi(e,t),r=L1(n),o=t[Br].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Sg(t,Ig(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function S$(t,e,n,i,r,o){let s=Bi(t,e);x$(e[Yt],s,o,t.value,n,i,r)}function x$(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?Al(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function A$(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],h=s[a++],m=s[a++];R1(i,n,c,u,h,m)}}function M$(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function U1(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function $1(t,e){let n=t.contentQueries;if(n!==null){let i=at(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];J0(o),a.contentQueries(2,e[s],s)}}}finally{at(i)}}}function Sg(t,e){return t[Yd]?t[lA][ar]=e:t[Yd]=e,t[lA]=e,e}function _0(t,e,n){J0(0);let i=at(null);try{e(t,n)}finally{at(i)}}function z1(t){return t[Zm]??=[]}function H1(t){return t.cleanup??=[]}function q1(t,e){let n=t[Ol],i=n?n.get(Mo,null):null;i&&i.handleError(e)}function mb(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],h=t.data[s];R1(h,u,i,a,c,r)}}function G1(t,e,n){let i=EM(e,t);UU(t[Yt],i,n)}function R$(t,e){let n=xs(e,t),i=n[Fe];P$(i,n);let r=n[Oo];r!==null&&n[Ym]===null&&(n[Ym]=cb(r,n[Ol])),gb(i,n,n[cr])}function P$(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function gb(t,e,n){eb(e);try{let i=t.viewQuery;i!==null&&_0(1,i,n);let r=t.template;r!==null&&k1(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ao]?.finishViewCreation(t),t.staticContentQueries&&$1(t,e),t.staticViewQueries&&_0(2,t.viewQuery,n);let o=t.components;o!==null&&k$(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[Te]&=-5,tb()}}function k$(t,e){for(let n=0;n<e.length;n++)R$(t,e[n])}function O$(t,e,n,i){let r=at(null);try{let o=e.tView,a=t[Te]&4096?4096:16,c=Ig(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[e.index];c[Ha]=u;let h=t[Ao];return h!==null&&(c[Ao]=h.createEmbeddedView(o)),gb(o,c,n),c}finally{at(r)}}function TA(t,e){return!e||e.firstChild===null||t1(t)}function N$(t,e,n,i=!0){let r=e[Fe];if(qU(r,e,t,n),i){let s=v0(n,t),a=e[Yt],c=db(a,t[qa]);c!==null&&zU(r,t[dr],a,e,c,s)}let o=e[Ym];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ag(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push($r(o)),No(o)&&F$(o,i);let s=n.type;if(s&8)ag(t,e,n.child,i);else if(s&32){let a=lb(n,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=S1(e,n);if(Array.isArray(a))i.push(...a);else{let c=Ga(e[Ur]);ag(c[Fe],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function F$(t,e){for(let n=Ei;n<t.length;n++){let i=t[n],r=i[Fe].firstChild;r!==null&&ag(i[Fe],i,r,e)}t[qa]!==t[Oo]&&e.push(t[qa])}var W1=[];function L$(t){return t[Vi]??V$(t)}function V$(t){let e=W1.pop()??Object.create(B$);return e.lView=t,e}function j$(t){t.lView[Vi]!==t&&(t.lView=null,W1.push(t))}var B$=be(K({},cw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{wg(t.lView)},consumerOnSignalRead(){this.lView[Vi]=this}});function U$(t){let e=t[Vi]??Object.create($$);return e.lView=t,e}var $$=be(K({},cw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ga(t.lView);for(;e&&!K1(e[Fe]);)e=Ga(e);e&&TM(e)},consumerOnSignalRead(){this.lView[Vi]=this}});function K1(t){return t.type!==2}var z$=100;function Q1(t,e=!0,n=0){let i=t[Br],r=i.rendererFactory,o=!1;o||r.begin?.();try{H$(t,n)}catch(s){throw e&&q1(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function H$(t,e){let n=PM();try{dA(!0),w0(t,e);let i=0;for(;Zd(t);){if(i===z$)throw new ve(103,!1);i++,w0(t,1)}}finally{dA(n)}}function q$(t,e,n,i){let r=e[Te];if((r&256)===256)return;let o=!1,s=!1;!o&&e[Br].inlineEffectRunner?.flush(),eb(e);let a=!0,c=null,u=null;o||(K1(t)?(u=L$(e),c=lw(u)):Tx()===null?(a=!1,u=U$(e),c=lw(u)):e[Vi]&&(dw(e[Vi]),e[Vi]=null));try{DM(e),OB(t.bindingStartIndex),n!==null&&k1(t,e,n,2,i);let h=(r&3)===3;if(!o)if(h){let w=t.preOrderCheckHooks;w!==null&&Um(e,w,null)}else{let w=t.preOrderHooks;w!==null&&$m(e,w,0,null),Ow(e,0)}if(s||G$(e),Y1(e,0),t.contentQueries!==null&&$1(t,e),!o)if(h){let w=t.contentCheckHooks;w!==null&&Um(e,w)}else{let w=t.contentHooks;w!==null&&$m(e,w,1),Ow(e,1)}s$(t,e);let m=t.components;m!==null&&X1(e,m,0);let _=t.viewQuery;if(_!==null&&_0(2,_,i),!o)if(h){let w=t.viewCheckHooks;w!==null&&Um(e,w)}else{let w=t.viewHooks;w!==null&&$m(e,w,2),Ow(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[kw]){for(let w of e[kw])w();e[kw]=null}o||(e[Te]&=-73)}catch(h){throw o||wg(e),h}finally{u!==null&&(Sx(u,c),a&&j$(u)),tb()}}function Y1(t,e){for(let n=i1(t);n!==null;n=r1(n))for(let i=Ei;i<n.length;i++){let r=n[i];Z1(r,e)}}function G$(t){for(let e=i1(t);e!==null;e=r1(e)){if(!(e[Te]&Jm.HasTransplantedViews))continue;let n=e[Nl];for(let i=0;i<n.length;i++){let r=n[i];TM(r)}}}function W$(t,e,n){let i=xs(e,t);Z1(i,n)}function Z1(t,e){X0(t)&&w0(t,e)}function w0(t,e){let i=t[Fe],r=t[Te],o=t[Vi],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&uw(o)),s||=!1,o&&(o.dirty=!1),t[Te]&=-9217,s)q$(i,t,i.template,t[cr]);else if(r&8192){Y1(t,1);let a=i.components;a!==null&&X1(t,a,1)}}function X1(t,e,n){for(let i=0;i<e.length;i++)W$(t,e[i],n)}function vb(t,e){let n=PM()?64:1088;for(t[Br].changeDetectionScheduler?.notify(e);t;){t[Te]|=n;let i=Ga(t);if(Xw(t)&&!i)return t;t=i}return null}var Za=class{get rootNodes(){let e=this._lView,n=e[Fe];return ag(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cr]}set context(e){this._lView[cr]=e}get destroyed(){return(this._lView[Te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nn];if(No(e)){let n=e[Xm],i=n?n.indexOf(this):-1;i>-1&&(g0(e,i),Km(n,i))}this._attachedToViewContainer=!1}D1(this._lView[Fe],this._lView)}onDestroy(e){SM(this._lView,e)}markForCheck(){vb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Te]&=-129}reattach(){e0(this._lView),this._lView[Te]|=128}detectChanges(){this._lView[Te]|=1024,Q1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Xw(this._lView),n=this._lView[Ha];n!==null&&!e&&ub(n,this._lView),C1(this._lView[Fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ve(902,!1);this._appRef=e;let n=Xw(this._lView),i=this._lView[Ha];i!==null&&!n&&I1(i,this._lView),e0(this._lView)}},ji=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Y$;let t=e;return t})(),K$=ji,Q$=class extends K${constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=O$(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Za(r)}};function Y$(){return xg(Wn(),nt())}function xg(t,e){return t.type&4?new Q$(e,t,jl(t,e)):null}var iie=new RegExp(`^(\\d+)*(${mU}|${pU})*(.*)`);var Z$=()=>null;function SA(t,e){return Z$(t,e)}var Xd=class{},J1=new X("",{providedIn:"root",factory:()=>!1});var eR=new X(""),b0=class{},cg=class{};function X$(t){let e=Error(`No component factory found for ${Gn(t)}.`);return e[J$]=t,e}var J$="ngComponent";var E0=class{resolveComponentFactory(e){throw X$(e)}},Mb=class Mb{};Mb.NULL=new E0;var zr=Mb,Fl=class{},Wr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>e4();let t=e;return t})();function e4(){let t=nt(),e=Wn(),n=xs(e.index,t);return(Ds(n)?n:t)[Yt]}var t4=(()=>{let e=class e{};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Vw={};var xA=new Set;function yb(t){xA.has(t)||(xA.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function tR(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof ci.requestAnimationFrame=="function"&&ci.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function AA(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function MA(...t){}var ge=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ge(!1),this.onMicrotaskEmpty=new Ge(!1),this.onStable=new Ge(!1),this.onError=new Ge(!1),typeof Zone>"u")throw new ve(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.callbackScheduled=!1,r4(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ve(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ve(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,n4,MA,MA);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},n4={};function _b(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function i4(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{tR(()=>{t.callbackScheduled=!1,C0(t),t.isCheckStableRunning=!0,_b(t),t.isCheckStableRunning=!1})}),C0(t))}function r4(t){let e=()=>{i4(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(o4(a))return n.invokeTask(r,o,s,a);try{return RA(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),PA(t)}},onInvoke:(n,i,r,o,s,a,c)=>{try{return RA(t),n.invoke(r,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!s4(a)&&e(),PA(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,C0(t),_b(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function C0(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function RA(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function PA(t){t._nesting--,_b(t)}var I0=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ge,this.onMicrotaskEmpty=new Ge,this.onStable=new Ge,this.onError=new Ge}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function o4(t){return nR(t,"__ignore_ng_zone__")}function s4(t){return nR(t,"__scheduler_tick__")}function nR(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var iR=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function D0(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Jx(r,a);else if(o==2){let c=a,u=e[++s];i=Jx(i,c+": "+u+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var lg=class extends zr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=za(e);return new Jd(n,this.ngModule)}};function kA(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function a4(t){let e=t.toLowerCase();return e==="svg"?yB:e==="math"?_B:null}var T0=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=gg(i);let r=this.injector.get(e,Vw,i);return r!==Vw||n===Vw?r:this.parentInjector.get(e,n,i)}},Jd=class extends cg{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=kA(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return kA(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Zj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=at(null);try{r=r||this.ngModule;let s=r instanceof li?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new T0(e,s):e,c=a.get(Fl,null);if(c===null)throw new ve(407,!1);let u=a.get(t4,null),h=a.get(iR,null),m=a.get(Xd,null),_={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:m},w=c.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",k=i?l$(w,i,this.componentDef.encapsulation,a):E1(w,S,a4(S)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let q=null;k!==null&&(q=cb(k,a,!0));let ne=pb(0,null,null,1,0,null,null,null,null,null,null),W=Ig(null,ne,null,R,null,null,_,w,a,null,q);eb(W);let ee,me;try{let de=this.componentDef,A,I=null;de.findHostDirectiveDefs?(A=[],I=new Map,de.findHostDirectiveDefs(de,A,I),A.push(de)):A=[de];let x=c4(W,k),O=l4(x,k,de,A,W,_,w);me=CM(ne,lr),k&&h4(w,de,k,i),n!==void 0&&f4(me,this.ngContentSelectors,n),ee=d4(O,de,A,I,W,[p4]),gb(ne,W,null)}finally{tb()}return new S0(this.componentType,ee,jl(me,W),W,me)}finally{at(o)}}},S0=class extends b0{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Za(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;mb(o[Fe],o,r,e,n),this.previousInputValues.set(e,n);let s=xs(this._tNode.index,o);vb(s,1)}}get injector(){return new Ua(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function c4(t,e){let n=t[Fe],i=lr;return t[i]=e,Dg(n,i,2,"#host",null)}function l4(t,e,n,i,r,o,s){let a=r[Fe];u4(i,t,e,s);let c=null;e!==null&&(c=cb(e,r[Ol]));let u=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let m=Ig(r,L1(n),null,h,r[t.index],t,o,u,null,null,c);return a.firstCreatePass&&y0(a,t,i.length-1),Sg(r,m),r[t.index]=m}function u4(t,e,n,i){for(let r of t)e.mergedAttrs=Kd(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(D0(e,e.mergedAttrs,!0),n!==null&&A1(i,n,e))}function d4(t,e,n,i,r,o){let s=Wn(),a=r[Fe],c=Bi(s,r);j1(a,r,s,n,null,i);for(let h=0;h<n.length;h++){let m=s.directiveStart+h,_=Qa(r,a,m,s);Ya(_,r)}B1(a,r,s),c&&Ya(c,r);let u=Qa(r,a,s.directiveStart+s.componentOffset,s);if(t[cr]=r[cr]=u,o!==null)for(let h of o)h(u,e);return O1(a,s,r),u}function h4(t,e,n,i){if(i)Kw(t,n,["ng-version","18.0.3"]);else{let{attrs:r,classes:o}=Xj(e.selectors[0]);r&&Kw(t,n,r),o&&o.length>0&&x1(t,n,o.join(" "))}}function f4(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function p4(){let t=Wn();rb(nt()[Fe],t)}var Ui=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=m4;let t=e;return t})();function m4(){let t=Wn();return oR(t,nt())}var g4=Ui,rR=class extends g4{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return jl(this._hostTNode,this._hostLView)}get injector(){return new Ua(this._hostTNode,this._hostLView)}get parentInjector(){let e=ob(this._hostTNode,this._hostLView);if(zM(e)){let n=ng(e,this._hostLView),i=tg(e),r=n[Fe].data[i+8];return new Ua(r,n)}else return new Ua(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=OA(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ei}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=SA(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,TA(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!pB(e),a;if(s)a=n;else{let S=n||{};a=S.index,i=S.injector,r=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let c=s?e:new Jd(za(e)),u=i||this.parentInjector;if(!o&&c.ngModule==null){let k=(s?u:this.parentInjector).get(li,null);k&&(o=k)}let h=za(c.componentType??{}),m=SA(this._lContainer,h?.id??null),_=m?.firstChild??null,w=c.create(u,r,_,o);return this.insertImpl(w.hostView,a,TA(this._hostTNode,m)),w}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(bB(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[Nn],u=new rR(c,c[dr],c[Nn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return N$(s,r,o,i),e.attachToViewContainerRef(),JA(jw(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=OA(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=g0(this._lContainer,n);i&&(Km(jw(this._lContainer),n),D1(i[Fe],i))}detach(e){let n=this._adjustIndex(e,-1),i=g0(this._lContainer,n);return i&&Km(jw(this._lContainer),n)!=null?new Za(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function OA(t){return t[Xm]}function jw(t){return t[Xm]||(t[Xm]=[])}function oR(t,e){let n,i=e[t.index];return No(i)?n=i:(n=U1(i,e,null,t),e[t.index]=n,Sg(e,n)),y4(n,e,t,i),new rR(n,t,e)}function v4(t,e){let n=t[Yt],i=n.createComment(""),r=Bi(e,t),o=db(n,r);return sg(n,o,i,ZU(n,r),!1),i}var y4=b4,_4=()=>!1;function w4(t,e,n){return _4(t,e,n)}function b4(t,e,n,i){if(t[qa])return;let r;n.type&8?r=$r(i):r=v4(e,n),t[qa]=r}var x0=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},A0=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)wb(e,n).matches!==null&&this.queries[n].setDirty()}},M0=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=A4(e):this.predicate=e}},R0=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},P0=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,E4(n,o)),this.matchTNodeWithReadOption(e,n,zm(n,e,o,!1,!1))}else i===ji?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,zm(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ht||r===Ui||r===ji&&n.type&4)this.addMatch(n.index,-2);else{let o=zm(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function E4(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function C4(t,e){return t.type&11?jl(t,e):t.type&4?xg(t,e):null}function I4(t,e,n,i){return n===-1?C4(e,t):n===-2?D4(t,e,i):Qa(t,t[Fe],n,e)}function D4(t,e,n){if(n===ht)return jl(e,t);if(n===ji)return xg(e,t);if(n===Ui)return oR(e,t)}function sR(t,e,n,i){let r=e[Ao].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let h=o[u];a.push(I4(e,h,s[c+1],n.metadata.read))}}r.matches=a}return r.matches}function k0(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=sR(t,e,r,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let u=o[a+1],h=e[-c];for(let m=Ei;m<h.length;m++){let _=h[m];_[Ha]===_[Nn]&&k0(_[Fe],_,u,i)}if(h[Nl]!==null){let m=h[Nl];for(let _=0;_<m.length;_++){let w=m[_];k0(w[Fe],w,u,i)}}}}}return i}function T4(t,e){return t[Ao].queries[e].queryList}function S4(t,e,n){let i=new og((n&4)===4);return h$(t,e,i,i.destroy),(e[Ao]??=new A0).queries.push(new x0(i))-1}function x4(t,e,n){let i=vn();return i.firstCreatePass&&(M4(i,new M0(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),S4(i,nt(),e)}function A4(t){return t.split(",").map(e=>e.trim())}function M4(t,e,n){t.queries===null&&(t.queries=new R0),t.queries.track(new P0(e,n))}function wb(t,e){return t.queries.getByIndex(e)}function R4(t,e){let n=t[Fe],i=wb(n,e);return i.crossesNgTemplate?k0(n,t,e,[]):sR(n,t,i,e)}function aR(t){return typeof t=="function"&&t[aw]!==void 0}function cR(t){return aR(t)&&typeof t.set=="function"}function P4(t){return Object.getPrototypeOf(t.prototype).constructor}function Et(t){let e=P4(t.type),n=!0,i=[t];for(;e;){let r;if(Ts(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ve(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=Vm(t.inputs),s.inputTransforms=Vm(t.inputTransforms),s.declaredInputs=Vm(t.declaredInputs),s.outputs=Vm(t.outputs);let a=r.hostBindings;a&&L4(t,a);let c=r.viewQuery,u=r.contentQueries;if(c&&N4(t,c),u&&F4(t,u),k4(t,r),vj(t.outputs,r.outputs),Ts(r)&&r.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Et&&(n=!1)}}e=Object.getPrototypeOf(e)}O4(i)}function k4(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function O4(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Kd(r.hostAttrs,n=Kd(n,r.hostAttrs))}}function Vm(t){return t===Ml?{}:t===Li?[]:t}function N4(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function F4(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function L4(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function Ms(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var Ss=class{},eh=class{};var O0=class extends Ss{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lg(this);let r=cM(e);this._bootstrapComponents=b1(r.bootstrap),this._r3Injector=XM(e,n,[{provide:Ss,useValue:this},{provide:zr,useValue:this.componentFactoryResolver},...i],Gn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},N0=class extends eh{constructor(e){super(),this.moduleType=e}create(e){return new O0(this.moduleType,e,[])}};var ug=class extends Ss{constructor(e){super(),this.componentFactoryResolver=new lg(this),this.instance=null;let n=new Qd([...e.providers,{provide:Ss,useValue:this},{provide:zr,useValue:this.componentFactoryResolver}],e.parent||Y0(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function bb(t,e,n=null){return new ug({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function lR(t){return j4(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function V4(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function j4(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function uR(t,e,n){return t[e]=n}function B4(t,e){return t[e]}function ko(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function U4(t,e,n,i){let r=ko(t,e,n);return ko(t,e+1,i)||r}function $4(t){return(t.flags&32)===32}function z4(t,e,n,i,r,o,s,a,c){let u=e.consts,h=Dg(e,t,4,s||null,a||null);V1(e,n,h,eg(u,c)),rb(e,h);let m=h.tView=pb(2,h,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),m.queries=e.queries.embeddedTView(h)),h}function H4(t,e,n,i,r,o,s,a,c,u){let h=n+lr,m=e.firstCreatePass?z4(h,e,t,i,r,o,s,a,c):e.data[h];rh(m,!1);let _=q4(e,t,m,n);nb()&&hb(e,t,_,m),Ya(_,t);let w=U1(_,t,_,m);return t[h]=w,Sg(t,w),w4(w,m,t),Z0(m)&&N1(e,t,m),c!=null&&F1(t,m,u),m}function pe(t,e,n,i,r,o,s,a){let c=nt(),u=vn(),h=eg(u.consts,o);return H4(c,u,t,e,n,i,r,h,s,a),pe}var q4=G4;function G4(t,e,n,i){return ib(!0),e[Yt].createComment("")}function $i(t,e,n,i){let r=nt(),o=oh();if(ko(r,o,e)){let s=vn(),a=sh();S$(a,r,t,e,n,i)}return $i}function dR(t,e,n,i){return ko(t,oh(),n)?e+Al(n)+i:hr}function W4(t,e,n,i,r,o){let s=kB(),a=U4(t,s,n,r);return OM(2),a?e+Al(n)+i+Al(r)+o:hr}function jm(t,e){return t<<17|e<<2}function Xa(t){return t>>17&32767}function K4(t){return(t&2)==2}function Q4(t,e){return t&131071|e<<17}function F0(t){return t|2}function Ll(t){return(t&131068)>>2}function Bw(t,e){return t&-131069|e<<2}function Y4(t){return(t&1)===1}function L0(t){return t|1}function Z4(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Xa(s),c=Ll(s);t[i]=n;let u=!1,h;if(Array.isArray(n)){let m=n;h=m[1],(h===null||ih(m,h)>0)&&(u=!0)}else h=n;if(r)if(c!==0){let _=Xa(t[a+1]);t[i+1]=jm(_,a),_!==0&&(t[_+1]=Bw(t[_+1],i)),t[a+1]=Q4(t[a+1],i)}else t[i+1]=jm(a,0),a!==0&&(t[a+1]=Bw(t[a+1],i)),a=i;else t[i+1]=jm(c,0),a===0?a=i:t[c+1]=Bw(t[c+1],i),c=i;u&&(t[i+1]=F0(t[i+1])),NA(t,h,i,!0),NA(t,h,i,!1),X4(e,h,t,i,o),s=jm(a,c),o?e.classBindings=s:e.styleBindings=s}function X4(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ih(o,e)>=0&&(n[i+1]=L0(n[i+1]))}function NA(t,e,n,i){let r=t[n+1],o=e===null,s=i?Xa(r):Ll(r),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];J4(c,e)&&(a=!0,t[s+1]=i?L0(u):F0(u)),s=i?Xa(u):Ll(u)}a&&(t[n+1]=i?F0(r):L0(r))}function J4(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ih(t,e)>=0:!1}function J(t,e,n){let i=nt(),r=oh();if(ko(i,r,e)){let o=vn(),s=sh();Tg(o,s,i,t,e,i[Yt],n,!1)}return J}function FA(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";mb(t,n,o[s],s,i)}function Rs(t,e){return e3(t,e,null,!0),Rs}function e3(t,e,n,i){let r=nt(),o=vn(),s=OM(2);if(o.firstUpdatePass&&n3(o,t,s,i),e!==hr&&ko(r,s,e)){let a=o.data[Ja()];a3(o,a,r,r[Yt],t,r[s+1]=c3(e,n),i,s)}}function t3(t,e){return e>=t.expandoStartIndex}function n3(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[Ja()],s=t3(t,n);l3(o,i)&&e===null&&!s&&(e=!1),e=i3(r,o,e,i),Z4(r,o,e,n,s,i)}}function i3(t,e,n,i){let r=VB(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Uw(null,t,e,n,i),n=th(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=Uw(r,t,e,n,i),o===null){let c=r3(t,e,i);c!==void 0&&Array.isArray(c)&&(c=Uw(null,t,e,c[1],i),c=th(c,e.attrs,i),o3(t,e,i,c))}else o=s3(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function r3(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Ll(i)!==0)return t[Xa(i)]}function o3(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Xa(r)]=i}function s3(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=th(i,s,n)}return th(i,e.attrs,n)}function Uw(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=th(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function th(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),jj(t,s,n?!0:e[++o]))}return t===void 0?null:t}function a3(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],h=Y4(u)?LA(c,e,n,r,Ll(u),s):void 0;if(!dg(h)){dg(o)||K4(u)&&(o=LA(c,null,n,r,a,s));let m=EM(Ja(),n);r$(i,s,m,r,o)}}function LA(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let c=t[r],u=Array.isArray(c),h=u?c[1]:c,m=h===null,_=n[r+1];_===hr&&(_=m?Li:void 0);let w=m?Rw(_,i):h===i?_:void 0;if(u&&!dg(w)&&(w=Rw(c,i)),dg(w)&&(a=w,s))return a;let S=t[r+1];r=s?Xa(S):Ll(S)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Rw(c,i))}return a}function dg(t){return t!==void 0}function c3(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Gn(qr(t)))),t}function l3(t,e){return(t.flags&(e?8:16))!==0}function u3(t,e,n,i,r,o){let s=e.consts,a=eg(s,r),c=Dg(e,t,2,i,a);return V1(e,n,c,eg(s,o)),c.attrs!==null&&D0(c,c.attrs,!1),c.mergedAttrs!==null&&D0(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function C(t,e,n,i){let r=nt(),o=vn(),s=lr+t,a=r[Yt],c=o.firstCreatePass?u3(s,o,r,e,n,i):o.data[s],u=d3(o,r,c,a,e,t);r[s]=u;let h=Z0(c);return rh(c,!0),A1(a,u,c),!$4(c)&&nb()&&hb(o,r,u,c),IB()===0&&Ya(u,r),DB(),h&&(N1(o,r,c),O1(o,c,r)),i!==null&&F1(r,c),C}function E(){let t=Wn();RM()?RB():(t=t.parent,rh(t,!1));let e=t;xB(e)&&AB(),TB();let n=vn();return n.firstCreatePass&&(rb(n,t),vM(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&qB(e)&&FA(n,e,nt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&GB(e)&&FA(n,e,nt(),e.stylesWithoutHost,!1),E}function ae(t,e,n,i){return C(t,e,n,i),E(),ae}var d3=(t,e,n,i,r,o)=>(ib(!0),E1(i,r,UB()));function Ue(){return nt()}function Ag(t,e,n){let i=nt(),r=oh();if(ko(i,r,e)){let o=vn(),s=sh();Tg(o,s,i,t,e,i[Yt],n,!0)}return Ag}var hg="en-US";var h3=hg;function f3(t){typeof t=="string"&&(h3=t.toLowerCase().replace(/_/g,"-"))}var p3=(t,e,n)=>{};function re(t,e,n,i){let r=nt(),o=vn(),s=Wn();return hR(o,r,r[Yt],s,t,e,i),re}function m3(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[Zm],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function hR(t,e,n,i,r,o,s){let a=Z0(i),u=t.firstCreatePass&&H1(t),h=e[cr],m=z1(e),_=!0;if(i.type&3||s){let k=Bi(i,e),R=s?s(k):k,q=m.length,ne=s?ee=>s($r(ee[i.index])):i.index,W=null;if(!s&&a&&(W=m3(t,e,r,i.index)),W!==null){let ee=W.__ngLastListenerFn__||W;ee.__ngNextListenerFn__=o,W.__ngLastListenerFn__=o,_=!1}else{o=jA(i,e,h,o),p3(k,r,o);let ee=n.listen(R,r,o);m.push(o,ee),u&&u.push(r,ne,q,q+1)}}else o=jA(i,e,h,o);let w=i.outputs,S;if(_&&w!==null&&(S=w[r])){let k=S.length;if(k)for(let R=0;R<k;R+=2){let q=S[R],ne=S[R+1],me=e[q][ne].subscribe(o),de=m.length;m.push(o,me),u&&u.push(r,i.index,de,-(de+1))}}}function VA(t,e,n,i){let r=at(null);try{return Lr(6,e,n),n(i)!==!1}catch(o){return q1(t,o),!1}finally{Lr(7,e,n),at(r)}}function jA(t,e,n,i){return function r(o){if(o===Function)return i;let s=t.componentOffset>-1?xs(t.index,e):e;vb(s,5);let a=VA(e,n,i,o),c=r.__ngNextListenerFn__;for(;c;)a=VA(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function se(t=1){return BB(t)}function Mg(t,e,n){return Rg(t,"",e,"",n),Mg}function Rg(t,e,n,i,r){let o=nt(),s=dR(o,e,n,i);if(s!==hr){let a=vn(),c=sh();Tg(a,c,o,t,s,o[Yt],r,!1)}return Rg}function Pg(t,e,n){x4(t,e,n)}function uh(t){let e=nt(),n=vn(),i=NM();J0(i+1);let r=wb(n,i);if(t.dirty&&wB(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=R4(e,i);t.reset(o,sU),t.notifyOnChanges()}return!0}return!1}function dh(){return T4(nt(),NM())}function g3(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function kg(t){let e=PB();return IM(e,lr+t)}function M(t,e=""){let n=nt(),i=vn(),r=t+lr,o=i.firstCreatePass?Dg(i,r,1,e,null):i.data[r],s=v3(i,n,o,e,t);n[r]=s,nb()&&hb(i,n,s,o),rh(o,!1)}var v3=(t,e,n,i,r)=>(ib(!0),BU(e[Yt],i));function ft(t){return ke("",t,""),ft}function ke(t,e,n){let i=nt(),r=dR(i,t,e,n);return r!==hr&&G1(i,Ja(),r),ke}function hh(t,e,n,i,r){let o=nt(),s=W4(o,t,e,n,i,r);return s!==hr&&G1(o,Ja(),s),hh}function We(t,e,n){cR(e)&&(e=e());let i=nt(),r=oh();if(ko(i,r,e)){let o=vn(),s=sh();Tg(o,s,i,t,e,i[Yt],n,!1)}return We}function Ze(t,e){let n=cR(t);return n&&t.set(e),n}function Ke(t,e){let n=nt(),i=vn(),r=Wn();return hR(i,n,n[Yt],r,t,e),Ke}function y3(t,e,n){let i=vn();if(i.firstCreatePass){let r=Ts(t);V0(n,i.data,i.blueprint,r,!0),V0(e,i.data,i.blueprint,r,!1)}}function V0(t,e,n,i,r){if(t=qn(t),Array.isArray(t))for(let o=0;o<t.length;o++)V0(t[o],e,n,i,r);else{let o=vn(),s=nt(),a=Wn(),c=kl(t)?t:qn(t.provide),u=pM(t),h=a.providerIndexes&1048575,m=a.directiveStart,_=a.providerIndexes>>20;if(kl(t)||!t.multi){let w=new Ka(u,r,U),S=zw(c,e,r?h:h+_,m);S===-1?(i0(rg(a,s),o,c),$w(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(w),s.push(w)):(n[S]=w,s[S]=w)}else{let w=zw(c,e,h+_,m),S=zw(c,e,h,h+_),k=w>=0&&n[w],R=S>=0&&n[S];if(r&&!R||!r&&!k){i0(rg(a,s),o,c);let q=b3(r?w3:_3,n.length,r,i,u);!r&&R&&(n[S].providerFactory=q),$w(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(q),s.push(q)}else{let q=fR(n[r?S:w],u,!r&&i);$w(o,t,w>-1?w:S,q)}!r&&i&&R&&n[S].componentProviders++}}}function $w(t,e,n,i){let r=kl(e),o=sB(e);if(r||o){let c=(o?qn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let h=u.indexOf(n);h===-1?u.push(n,[i,c]):u[h+1].push(i,c)}else u.push(n,c)}}}function fR(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function zw(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function _3(t,e,n,i){return j0(this.multi,[])}function w3(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Qa(n,n[Fe],this.providerFactory.index,i);o=a.slice(0,s),j0(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],j0(r,o);return o}function j0(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function b3(t,e,n,i,r){let o=new Ka(t,n,U);return o.multi=[],o.index=e,o.componentProviders=0,fR(o,r,i&&!n),o}function pn(t,e=[]){return n=>{n.providersResolver=(i,r)=>y3(i,r?r(t):t,e)}}var E3=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=dM(!1,i.type),o=r.length>0?bb([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Q({token:e,providedIn:"environment",factory:()=>new e(P(li))});let t=e;return t})();function Me(t){yb("NgStandalone"),t.getStandaloneInjector=e=>e.get(E3).getOrCreateStandaloneInjector(t)}function Eb(t,e,n){let i=kM()+t,r=nt();return r[i]===hr?uR(r,i,n?e.call(n):e()):B4(r,i)}function C3(t,e){let n=t[e];return n===hr?void 0:n}function I3(t,e,n,i,r,o){let s=e+n;return ko(t,s,r)?uR(t,s+1,o?i.call(o,r):i(r)):C3(t,s+1)}function jo(t,e){let n=vn(),i,r=t+lr;n.firstCreatePass?(i=D3(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=$a(i.type,!0)),s,a=ai(U);try{let c=ig(!1),u=o();return ig(c),g3(n,nt(),r,u),u}finally{ai(a)}}function D3(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function Bo(t,e,n){let i=t+lr,r=nt(),o=IM(r,i);return T3(r,i)?I3(r,kM(),e,o.transform,n,o):o.transform(n)}function T3(t,e){return t[Fe].data[e].pure}function pR(t,e){return xg(t,e)}var Hr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Cb=new Hr("18.0.3");var Og=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Ib=new X(""),fh=new X(""),Ng=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Db||(S3(o),o.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),i()},r)),this._callbacks.push({doneCb:i,timeoutId:s,updateCb:o})}whenStable(i,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,o),this._runCallbacksIfReady()}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,o){return[]}};e.\u0275fac=function(r){return new(r||e)(P(ge),P(Fg),P(fh))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Fg=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return Db?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function S3(t){Db=t}var Db;function Ps(t){return!!t&&typeof t.then=="function"}function Tb(t){return!!t&&typeof t.subscribe=="function"}var mR=new X(""),gR=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=te(mR,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(Ps(s))i.push(s);else if(Tb(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lg=new X("");function x3(){xx(()=>{throw new ve(600,!1)})}function A3(t){return t.isBoundToModule}var M3=10;function R3(t,e,n){try{let i=n();return Ps(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var Kr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=te(JM),this.afterRenderEffectManager=te(iR),this.zonelessEnabled=te(J1),this.externalTestViews=new Set,this.beforeRender=new Ce,this.afterTick=new Ce,this.componentTypes=[],this.components=[],this.isStable=te(Fo).hasPendingTasks.pipe(oe(i=>!i)),this._injector=te(li)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof cg;if(!this._injector.get(gR).done){let w=!o&&aM(i),S=!1;throw new ve(405,S)}let a;o?a=i:a=this._injector.get(zr).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=A3(a)?void 0:this._injector.get(Ss),u=r||a.selector,h=a.create(yt.NULL,[],u,c),m=h.location.nativeElement,_=h.injector.get(Ib,null);return _?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),Hw(this.components,h),_?.unregisterApplication(m)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new ve(101,!1);let r=at(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,at(r),this.afterTick.next()}}detectChangesInAttachedViews(i){let r=null;this._injector.destroyed||(r=this._injector.get(Fl,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<M3;){let a=o===0;if(i||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)P3(c,u,a,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>Zd(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>Zd(c))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Hw(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Lg,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Hw(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ve(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Hw(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function P3(t,e,n,i){if(!n&&!Zd(t))return;Q1(t,e,n&&!i?0:1)}var B0=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Sb=(()=>{let e=class e{compileModuleSync(i){return new N0(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=cM(i),s=b1(o.declarations).reduce((a,c)=>{let u=za(c);return u&&a.push(new Jd(u)),a},[]);return new B0(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var k3=(()=>{let e=class e{constructor(){this.zone=te(ge),this.changeDetectionScheduler=te(Xd),this.applicationRef=te(Kr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function O3({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new ge(F3()),[{provide:ge,useFactory:t},{provide:Rl,multi:!0,useFactory:()=>{let n=te(k3,{optional:!0});return()=>n.initialize()}},{provide:Rl,multi:!0,useFactory:()=>{let n=te(L3);return()=>{n.initialize()}}},{provide:JM,useFactory:N3},e===!0?{provide:eR,useValue:!0}:[]]}function N3(){let t=te(ge),e=te(Mo);return n=>t.runOutsideAngular(()=>e.handleError(n))}function F3(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var L3=(()=>{let e=class e{constructor(){this.subscription=new wt,this.initialized=!1,this.zone=te(ge),this.pendingTasks=te(Fo)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var V3=(()=>{let e=class e{constructor(){this.appRef=te(Kr),this.taskService=te(Fo),this.ngZone=te(ge),this.zonelessEnabled=te(J1),this.disableScheduling=te(eR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new wt,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof I0||!this.zoneIsDefined)}notify(i){if(!this.zonelessEnabled&&i===5)return;switch(i){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?AA:tR;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&ge.isInAngularZone())}tick(i){if(this.runningTick||this.appRef.destroyed)return;let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(i)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(r),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,AA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let i=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(i)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function j3(){return typeof $localize<"u"&&$localize.locale||hg}var Vg=new X("",{providedIn:"root",factory:()=>te(Vg,$e.Optional|$e.SkipSelf)||j3()});var vR=new X("");var qm=null;function B3(t=[],e){return yt.create({name:e,providers:[{provide:vg,useValue:"platform"},{provide:vR,useValue:new Set([()=>qm=null])},...t]})}function U3(t=[]){if(qm)return qm;let e=B3(t);return qm=e,x3(),$3(e),e}function $3(t){t.get(ab,null)?.forEach(n=>n())}function xb(){return!1}var Ii=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=z3;let t=e;return t})();function z3(t){return H3(Wn(),nt(),(t&16)===16)}function H3(t,e,n){if(_g(t)&&!n){let i=xs(t.index,e);return new Za(i,i)}else if(t.type&47){let i=e[Ur];return new Za(i,e)}return null}var U0=class{constructor(){}supports(e){return lR(e)}create(e){return new $0(e)}},q3=(t,e)=>e,$0=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||q3}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<BA(i,r,o)?n:i,a=BA(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,h=c-r;if(u!=h){for(let _=0;_<u;_++){let w=_<o.length?o[_]:o[_]=0,S=w+_;h<=S&&S<u&&(o[_]=w+1)}let m=s.previousIndex;o[m]=h-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!lR(e))throw new ve(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,V4(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new z0(n,i),o,r)),e}_verifyReinsertion(e,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new fg),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new fg),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},z0=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},H0=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},fg=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new H0,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function BA(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function UA(){return new jg([new U0])}var jg=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let o=r.factories.slice();i=i.concat(o)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||UA()),deps:[[e,new XA,new Zt]]}}find(i){let r=this.factories.find(o=>o.supports(i));if(r!=null)return r;throw new ve(901,!1)}};e.\u0275prov=Q({token:e,providedIn:"root",factory:UA});let t=e;return t})();var yR=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(P(Kr))},e.\u0275mod=et({type:e}),e.\u0275inj=Je({});let t=e;return t})();function _R(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=U3(i),o=[O3({}),{provide:Xd,useExisting:V3},...n||[]],a=new ug({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ge);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Mo,null),h;c.runOutsideAngular(()=>{h=c.onError.subscribe({next:w=>{u.handleError(w)}})});let m=()=>a.destroy(),_=r.get(vR);return _.add(m),a.onDestroy(()=>{h.unsubscribe(),_.delete(m)}),R3(u,c,()=>{let w=a.get(gR);return w.runInitializers(),w.donePromise.then(()=>{let S=a.get(Vg,hg);f3(S||hg);let k=a.get(Kr);return e!==void 0&&k.bootstrap(e),k})})})}catch(e){return Promise.reject(e)}}function fr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ab(t){let e=at(null);try{return t()}finally{at(e)}}var IR=null;function Qr(){return IR}function DR(t){IR??=t}var Bg=class{};var Le=new X(""),TR=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>te(W3),providedIn:"platform"});let t=e;return t})();var W3=(()=>{let e=class e extends TR{constructor(){super(),this._doc=te(Le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qr().getBaseHref(this._doc)}onPopState(i){let r=Qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function SR(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function wR(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function ec(t){return t&&t[0]!=="?"?"?"+t:t}var $l=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>te(xR),providedIn:"root"});let t=e;return t})(),K3=new X(""),xR=(()=>{let e=class e extends $l{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??te(Le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return SR(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+ec(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+ec(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+ec(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(P(TR),P(K3,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Uo=(()=>{let e=class e{constructor(i){this._subject=new Ge,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=Z3(wR(bR(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+ec(r))}normalize(i){return e.stripTrailingSlash(Y3(this._basePath,bR(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ec(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ec(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=ec,e.joinWithSlash=SR,e.stripTrailingSlash=wR,e.\u0275fac=function(r){return new(r||e)(P($l))},e.\u0275prov=Q({token:e,factory:()=>Q3(),providedIn:"root"});let t=e;return t})();function Q3(){return new Uo(P($l))}function Y3(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function bR(t){return t.replace(/\/index.html$/,"")}function Z3(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Ug(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Rb=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yn=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,o){this._viewContainer=i,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new Rb(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),ER(c,o)}});for(let o=0,s=r.length;o<s;o++){let c=r.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}i.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);ER(s,o)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(U(Ui),U(ji),U(jg))},e.\u0275dir=ze({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function ER(t,e){t.context.$implicit=e.item}var It=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new Pb,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){CR("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){CR("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(U(Ui),U(ji))},e.\u0275dir=ze({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Pb=class{constructor(){this.$implicit=null,this.ngIf=null}};function CR(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Gn(e)}'.`)}function X3(t,e){return new ve(2100,!1)}var kb=class{createSubscription(e,n){return Ab(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){Ab(()=>e.unsubscribe())}},Ob=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},J3=new Ob,ez=new kb,ks=(()=>{let e=class e{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(Ps(i))return J3;if(Tb(i))return ez;throw X3(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(U(Ii,16))},e.\u0275pipe=K0({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var _n=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({});let t=e;return t})(),Nb="browser",tz="server";function AR(t){return t===Nb}function Os(t){return t===tz}var Ul=class{};var mh=class{},zg=class{},$o=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Lb=class{encodeKey(e){return MR(e)}encodeValue(e){return MR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function rz(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var oz=/%(\d[a-f0-9])/gi,sz={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function MR(t){return encodeURIComponent(t).replace(oz,(e,n)=>sz[n]??e)}function $g(t){return`${t}`}var Fs=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Lb,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=rz(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map($g):[$g(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push($g(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf($g(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Vb=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function az(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function RR(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function PR(t){return typeof Blob<"u"&&t instanceof Blob}function kR(t){return typeof FormData<"u"&&t instanceof FormData}function cz(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ph=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(az(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new $o,this.context??=new Vb,!this.params)this.params=new Fs,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||RR(this.body)||PR(this.body)||kR(this.body)||cz(this.body)?this.body:this.body instanceof Fs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||kR(this.body)?null:PR(this.body)?this.body.type||null:RR(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Fs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,m=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((_,w)=>_.set(w,e.setHeaders[w]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((_,w)=>_.set(w,e.setParams[w]),h)),new t(n,i,s,{params:h,headers:u,context:m,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},Ls=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ls||{}),gh=class{constructor(e,n=200,i="OK"){this.headers=e.headers||new $o,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Hg=class t extends gh{constructor(e={}){super(e),this.type=Ls.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},vh=class t extends gh{constructor(e={}){super(e),this.type=Ls.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ns=class extends gh{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},VR=200,lz=204;function Fb(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var yh=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof ph)s=i;else{let u;o.headers instanceof $o?u=o.headers:u=new $o(o.headers);let h;o.params&&(o.params instanceof Fs?h=o.params:h=new Fs({fromObject:o.params})),s=new ph(i,r,o.body!==void 0?o.body:null,{headers:u,context:o.context,params:h,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=ue(s).pipe(bs(u=>this.handler.handle(u)));if(i instanceof ph||o.observe==="events")return a;let c=a.pipe(dt(u=>u instanceof vh));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(oe(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(oe(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(oe(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(oe(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Fs().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,Fb(o,r))}post(i,r,o={}){return this.request("POST",i,Fb(o,r))}put(i,r,o={}){return this.request("PUT",i,Fb(o,r))}};e.\u0275fac=function(r){return new(r||e)(P(mh))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),uz=/^\)\]\}',?\n/,dz="X-Request-URL";function OR(t){if(t.url)return t.url;let e=dz.toLocaleLowerCase();return t.headers.get(e)}var hz=(()=>{let e=class e{constructor(){this.fetchImpl=te(jb,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=te(ge)}handle(i){return new Ee(r=>{let o=new AbortController;return this.doRequest(i,o.signal,r).then(Bb,s=>r.error(new Ns({error:s}))),()=>o.abort()})}doRequest(i,r,o){return N(this,null,function*(){let s=this.createRequestInit(i),a;try{let S=this.fetchImpl(i.urlWithParams,K({signal:r},s));fz(S),o.next({type:Ls.Sent}),a=yield S}catch(S){o.error(new Ns({error:S,status:S.status??0,statusText:S.statusText,url:i.urlWithParams,headers:S.headers}));return}let c=new $o(a.headers),u=a.statusText,h=OR(a)??i.urlWithParams,m=a.status,_=null;if(i.reportProgress&&o.next(new Hg({headers:c,status:m,statusText:u,url:h})),a.body){let S=a.headers.get("content-length"),k=[],R=a.body.getReader(),q=0,ne,W,ee=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>N(this,null,function*(){for(;;){let{done:de,value:A}=yield R.read();if(de)break;if(k.push(A),q+=A.length,i.reportProgress){W=i.responseType==="text"?(W??"")+(ne??=new TextDecoder).decode(A,{stream:!0}):void 0;let I=()=>o.next({type:Ls.DownloadProgress,total:S?+S:void 0,loaded:q,partialText:W});ee?ee.run(I):I()}}}));let me=this.concatChunks(k,q);try{let de=a.headers.get("Content-Type")??"";_=this.parseBody(i,me,de)}catch(de){o.error(new Ns({error:de,headers:new $o(a.headers),status:a.status,statusText:a.statusText,url:OR(a)??i.urlWithParams}));return}}m===0&&(m=_?VR:0),m>=200&&m<300?(o.next(new vh({body:_,headers:c,status:m,statusText:u,url:h})),o.complete()):o.error(new Ns({error:_,headers:c,status:m,statusText:u,url:h}))})}parseBody(i,r,o){switch(i.responseType){case"json":let s=new TextDecoder().decode(r).replace(uz,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:o});case"arraybuffer":return r.buffer}}createRequestInit(i){let r={},o=i.withCredentials?"include":void 0;if(i.headers.forEach((s,a)=>r[s]=a.join(",")),r.Accept??="application/json, text/plain, */*",!r["Content-Type"]){let s=i.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:i.serializeBody(),method:i.method,headers:r,credentials:o}}concatChunks(i,r){let o=new Uint8Array(r),s=0;for(let a of i)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),jb=class{};function Bb(){}function fz(t){t.then(Bb,Bb)}function jR(t,e){return e(t)}function pz(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}function mz(t,e,n){return(i,r)=>ur(n,()=>e(i,o=>t(o,r)))}var gz=new X(""),Ub=new X(""),vz=new X(""),BR=new X("",{providedIn:"root",factory:()=>!0});function yz(){let t=null;return(e,n)=>{t===null&&(t=(te(gz,{optional:!0})??[]).reduceRight(pz,jR));let i=te(Fo);if(te(BR)){let o=i.add();return t(e,n).pipe(or(()=>i.remove(o)))}else return t(e,n)}}var NR=(()=>{let e=class e extends mh{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=te(Fo),this.contributeToStability=te(BR)}handle(i){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Ub),...this.injector.get(vz,[])]));this.chain=r.reduceRight((o,s)=>mz(o,s,this.injector),jR)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(i,o=>this.backend.handle(o)).pipe(or(()=>this.pendingTasks.remove(r)))}else return this.chain(i,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(P(zg),P(li))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();var _z=/^\)\]\}',?\n/;function wz(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var FR=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new ve(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?je(r.\u0275loadImpl()):ue(null)).pipe(ct(()=>new Ee(s=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((R,q)=>a.setRequestHeader(R,q.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let R=i.detectContentTypeHeader();R!==null&&a.setRequestHeader("Content-Type",R)}if(i.responseType){let R=i.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let c=i.serializeBody(),u=null,h=()=>{if(u!==null)return u;let R=a.statusText||"OK",q=new $o(a.getAllResponseHeaders()),ne=wz(a)||i.url;return u=new Hg({headers:q,status:a.status,statusText:R,url:ne}),u},m=()=>{let{headers:R,status:q,statusText:ne,url:W}=h(),ee=null;q!==lz&&(ee=typeof a.response>"u"?a.responseText:a.response),q===0&&(q=ee?VR:0);let me=q>=200&&q<300;if(i.responseType==="json"&&typeof ee=="string"){let de=ee;ee=ee.replace(_z,"");try{ee=ee!==""?JSON.parse(ee):null}catch(A){ee=de,me&&(me=!1,ee={error:A,text:ee})}}me?(s.next(new vh({body:ee,headers:R,status:q,statusText:ne,url:W||void 0})),s.complete()):s.error(new Ns({error:ee,headers:R,status:q,statusText:ne,url:W||void 0}))},_=R=>{let{url:q}=h(),ne=new Ns({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:q||void 0});s.error(ne)},w=!1,S=R=>{w||(s.next(h()),w=!0);let q={type:Ls.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(q.total=R.total),i.responseType==="text"&&a.responseText&&(q.partialText=a.responseText),s.next(q)},k=R=>{let q={type:Ls.UploadProgress,loaded:R.loaded};R.lengthComputable&&(q.total=R.total),s.next(q)};return a.addEventListener("load",m),a.addEventListener("error",_),a.addEventListener("timeout",_),a.addEventListener("abort",_),i.reportProgress&&(a.addEventListener("progress",S),c!==null&&a.upload&&a.upload.addEventListener("progress",k)),a.send(c),s.next({type:Ls.Sent}),()=>{a.removeEventListener("error",_),a.removeEventListener("abort",_),a.removeEventListener("load",m),a.removeEventListener("timeout",_),i.reportProgress&&(a.removeEventListener("progress",S),c!==null&&a.upload&&a.upload.removeEventListener("progress",k)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(P(Ul))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),UR=new X(""),bz="XSRF-TOKEN",Ez=new X("",{providedIn:"root",factory:()=>bz}),Cz="X-XSRF-TOKEN",Iz=new X("",{providedIn:"root",factory:()=>Cz}),qg=class{},Dz=(()=>{let e=class e{constructor(i,r,o){this.doc=i,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ug(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(P(Le),P(fn),P(Ez))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function Tz(t,e){let n=t.url.toLowerCase();if(!te(UR)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=te(qg).getToken(),r=te(Iz);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var $R=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}($R||{});function Sz(t,e){return{\u0275kind:t,\u0275providers:e}}function zR(...t){let e=[yh,FR,NR,{provide:mh,useExisting:NR},{provide:zg,useFactory:()=>te(hz,{optional:!0})??te(FR)},{provide:Ub,useValue:Tz,multi:!0},{provide:UR,useValue:!0},{provide:qg,useClass:Dz}];for(let n of t)e.push(...n.\u0275providers);return Ci(e)}var LR=new X("");function HR(){return Sz($R.LegacyInterceptors,[{provide:LR,useFactory:yz},{provide:Ub,useExisting:LR,multi:!0}])}var Hb=class extends Bg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},qb=class t extends Hb{static makeCurrent(){DR(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Az();return n==null?null:Mz(n)}resetBaseElement(){_h=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ug(document.cookie,e)}},_h=null;function Az(){return _h=_h||document.querySelector("base"),_h?_h.getAttribute("href"):null}function Mz(t){return new URL(t,document.baseURI).pathname}var Gb=class{addToWindow(e){ci.getAngularTestability=(i,r=!0)=>{let o=e.findTestabilityInTree(i,r);if(o==null)throw new ve(5103,!1);return o},ci.getAllAngularTestabilities=()=>e.getAllTestabilities(),ci.getAllAngularRootElements=()=>e.getAllRootElements();let n=i=>{let r=ci.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};ci.frameworkStabilizers||(ci.frameworkStabilizers=[]),ci.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,i){if(n==null)return null;let r=e.getTestability(n);return r??(i?Qr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},Rz=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Wb=new X(""),KR=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new ve(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(P(Wb),P(ge))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),Gg=class{constructor(e){this._doc=e}},$b="ng-app-id",QR=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Os(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${$b}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute($b),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute($b,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(P(Le),P(ah),P(ch,8),P(fn))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),zb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Qb=/%COMP%/g,YR="%COMP%",Pz=`_nghost-${YR}`,kz=`_ngcontent-${YR}`,Oz=!0,Nz=new X("",{providedIn:"root",factory:()=>Oz});function Fz(t){return kz.replace(Qb,t)}function Lz(t){return Pz.replace(Qb,t)}function ZR(t,e){return e.map(n=>n.replace(Qb,t))}var qR=(()=>{let e=class e{constructor(i,r,o,s,a,c,u,h=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Os(c),this.defaultRenderer=new wh(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===jr.ShadowDom&&(r=be(K({},r),{encapsulation:jr.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof Wg?o.applyToHost(i):o instanceof bh&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,_=this.platformIsServer;switch(r.encapsulation){case jr.Emulated:s=new Wg(u,h,r,this.appId,m,a,c,_);break;case jr.ShadowDom:return new Kb(u,h,i,r,a,c,this.nonce,_);default:s=new bh(u,h,r,m,a,c,_);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(P(KR),P(QR),P(ah),P(Nz),P(Le),P(fn),P(ge),P(ch))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),wh=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(zb[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(GR(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(GR(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ve(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=zb[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=zb[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Po.DashCase|Po.Important)?e.style.setProperty(n,i,r&Po.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Po.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Qr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function GR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Kb=class extends wh{constructor(e,n,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=ZR(r.id,r.styles);for(let h of u){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=h,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bh=class extends wh{constructor(e,n,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?ZR(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Wg=class extends bh{constructor(e,n,i,r,o,s,a,c){let u=r+"-"+i.id;super(e,n,i,o,s,a,c,u),this.contentAttr=Fz(u),this.hostAttr=Lz(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},Vz=(()=>{let e=class e extends Gg{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(P(Le))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})(),WR=["alt","control","meta","shift"],jz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Uz=(()=>{let e=class e extends Gg{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qr().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),WR.forEach(h=>{let m=r.indexOf(h);m>-1&&(r.splice(m,1),a+=h+".")}),a+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let o=jz[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),WR.forEach(a=>{if(a!==o){let c=Bz[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(P(Le))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();function XR(t,e){return _R(K({rootComponent:t},$z(e)))}function $z(t){return{appProviders:[...JR,...t?.providers??[]],platformProviders:Gz}}function zz(){qb.makeCurrent()}function Hz(){return new Mo}function qz(){return s1(document),document}var Gz=[{provide:fn,useValue:Nb},{provide:ab,useValue:zz,multi:!0},{provide:Le,useFactory:qz,deps:[]}];var Wz=new X(""),Kz=[{provide:fh,useClass:Gb,deps:[]},{provide:Ib,useClass:Ng,deps:[ge,Fg,fh]},{provide:Ng,useClass:Ng,deps:[ge,Fg,fh]}],JR=[{provide:vg,useValue:"root"},{provide:Mo,useFactory:Hz,deps:[]},{provide:Wb,useClass:Vz,multi:!0,deps:[Le,ge,fn]},{provide:Wb,useClass:Uz,multi:!0,deps:[Le]},qR,QR,KR,{provide:Fl,useExisting:qR},{provide:Ul,useClass:Rz,deps:[]},[]],eP=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:ah,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(P(Wz,12))},e.\u0275mod=et({type:e}),e.\u0275inj=Je({providers:[...JR,...Kz],imports:[_n,yR]});let t=e;return t})();var tP=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(P(Le))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Yb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=P(Qz),o},providedIn:"root"});let t=e;return t})(),Qz=(()=>{let e=class e extends Yb{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case Gr.NONE:return r;case Gr.HTML:return As(r,"HTML")?qr(r):y1(this._doc,String(r)).toString();case Gr.STYLE:return As(r,"Style")?qr(r):r;case Gr.SCRIPT:if(As(r,"Script"))return qr(r);throw new ve(5200,!1);case Gr.URL:return As(r,"URL")?qr(r):Eg(String(r));case Gr.RESOURCE_URL:if(As(r,"ResourceURL"))return qr(r);throw new ve(5201,!1);default:throw new ve(5202,!1)}}bypassSecurityTrustHtml(i){return c1(i)}bypassSecurityTrustStyle(i){return l1(i)}bypassSecurityTrustScript(i){return u1(i)}bypassSecurityTrustUrl(i){return d1(i)}bypassSecurityTrustResourceUrl(i){return h1(i)}};e.\u0275fac=function(r){return new(r||e)(P(Le))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Yz="firebase",Zz="10.12.2";Gt(Yz,Zz,"app");var zi=new Hr("ANGULARFIRE2_VERSION");function Hl(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var nc=(t,e)=>{let n=e?[e]:am(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Kn=class{constructor(){return nc(Xz)}},Xz="app-check";function zl(){}var Kg=class{zone;delegate;constructor(e,n=Dw){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},Zb=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zl,{},zl,zl)),n.pipe(Mt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},hi=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Kg(Zone.current)),this.insideAngular=n.run(()=>new Kg(Zone.current,Nr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(P(ge))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Eh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Jz(t){return Eh().ngZone.runOutsideAngular(()=>t())}function tc(t){return Eh().ngZone.run(()=>t())}function Xb(t){return t.pipe(ri(Eh().outsideAngular))}function wn(t){return e5(Eh())(t)}function e5(t){return function(n){return n=n.lift(new Zb(t.ngZone)),n.pipe(Ni(t.outsideAngular),ri(t.insideAngular))}}var t5=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),tc(()=>t.apply(void 0,i))},zo=(t,e)=>function(){let n,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(n||=tc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zl,{},zl,zl))),i[o]=t5(i[o],n));let r=Jz(()=>t.apply(this,i));if(!e)if(r instanceof Ee){let o=Eh();return r.pipe(Ni(o.outsideAngular),ri(o.insideAngular))}else return tc(()=>r);return r instanceof Ee?r.pipe(wn):r instanceof Promise?tc(()=>new Promise((o,s)=>r.then(a=>tc(()=>o(a)),a=>tc(()=>s(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:tc(()=>r)};var pr=class{constructor(e){return e}},Ho=class{constructor(){return am()}};function n5(t){return t&&t.length===1?t[0]:new pr(ys())}var eE=new X("angularfire2._apps"),i5={provide:pr,useFactory:n5,deps:[[new Zt,eE]]},r5={provide:Ho,deps:[[new Zt,eE]]};function o5(t){return(e,n)=>{let i=n.get(fn);Gt("angularfire",zi.full,"core"),Gt("angularfire",zi.full,"app"),Gt("angular",Cb.full,i.toString());let r=e.runOutsideAngular(()=>t(n));return new pr(r)}}function iP(t,...e){return Ci([i5,r5,{provide:eE,useFactory:o5(t),multi:!0,deps:[ge,yt,hi,...e]}])}var Qg=zo(ys,!0);var rP=zo(Dx,!0);var oP="auth",Ch=class{constructor(e){return e}},ic=class{constructor(){return nc(oP)}};var tE=new X("angularfire2.auth-instances");function oH(t,e){let n=Hl(oP,t,e);return n&&new Ch(n)}function sH(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ch(i)}}var aH={provide:ic,deps:[[new Zt,tE]]},cH={provide:Ch,useFactory:oH,deps:[[new Zt,tE],pr]};function sP(t,...e){return Gt("angularfire",zi.full,"auth"),Ci([cH,aH,{provide:tE,useFactory:sH(t),multi:!0,deps:[ge,yt,hi,Ho,[new Zt,Kn],...e]}])}var aP=zo(rw,!0);var cP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lP={};var Vs,nE;(function(){var t;function e(A,I){function x(){}x.prototype=I.prototype,A.D=I.prototype,A.prototype=new x,A.prototype.constructor=A,A.C=function(O,L,j){for(var T=Array(arguments.length-2),Pi=2;Pi<arguments.length;Pi++)T[Pi-2]=arguments[Pi];return I.prototype[L].apply(O,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,I,x){x||(x=0);var O=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)O[L]=I.charCodeAt(x++)|I.charCodeAt(x++)<<8|I.charCodeAt(x++)<<16|I.charCodeAt(x++)<<24;else for(L=0;16>L;++L)O[L]=I[x++]|I[x++]<<8|I[x++]<<16|I[x++]<<24;I=A.g[0],x=A.g[1],L=A.g[2];var j=A.g[3],T=I+(j^x&(L^j))+O[0]+3614090360&4294967295;I=x+(T<<7&4294967295|T>>>25),T=j+(L^I&(x^L))+O[1]+3905402710&4294967295,j=I+(T<<12&4294967295|T>>>20),T=L+(x^j&(I^x))+O[2]+606105819&4294967295,L=j+(T<<17&4294967295|T>>>15),T=x+(I^L&(j^I))+O[3]+3250441966&4294967295,x=L+(T<<22&4294967295|T>>>10),T=I+(j^x&(L^j))+O[4]+4118548399&4294967295,I=x+(T<<7&4294967295|T>>>25),T=j+(L^I&(x^L))+O[5]+1200080426&4294967295,j=I+(T<<12&4294967295|T>>>20),T=L+(x^j&(I^x))+O[6]+2821735955&4294967295,L=j+(T<<17&4294967295|T>>>15),T=x+(I^L&(j^I))+O[7]+4249261313&4294967295,x=L+(T<<22&4294967295|T>>>10),T=I+(j^x&(L^j))+O[8]+1770035416&4294967295,I=x+(T<<7&4294967295|T>>>25),T=j+(L^I&(x^L))+O[9]+2336552879&4294967295,j=I+(T<<12&4294967295|T>>>20),T=L+(x^j&(I^x))+O[10]+4294925233&4294967295,L=j+(T<<17&4294967295|T>>>15),T=x+(I^L&(j^I))+O[11]+2304563134&4294967295,x=L+(T<<22&4294967295|T>>>10),T=I+(j^x&(L^j))+O[12]+1804603682&4294967295,I=x+(T<<7&4294967295|T>>>25),T=j+(L^I&(x^L))+O[13]+4254626195&4294967295,j=I+(T<<12&4294967295|T>>>20),T=L+(x^j&(I^x))+O[14]+2792965006&4294967295,L=j+(T<<17&4294967295|T>>>15),T=x+(I^L&(j^I))+O[15]+1236535329&4294967295,x=L+(T<<22&4294967295|T>>>10),T=I+(L^j&(x^L))+O[1]+4129170786&4294967295,I=x+(T<<5&4294967295|T>>>27),T=j+(x^L&(I^x))+O[6]+3225465664&4294967295,j=I+(T<<9&4294967295|T>>>23),T=L+(I^x&(j^I))+O[11]+643717713&4294967295,L=j+(T<<14&4294967295|T>>>18),T=x+(j^I&(L^j))+O[0]+3921069994&4294967295,x=L+(T<<20&4294967295|T>>>12),T=I+(L^j&(x^L))+O[5]+3593408605&4294967295,I=x+(T<<5&4294967295|T>>>27),T=j+(x^L&(I^x))+O[10]+38016083&4294967295,j=I+(T<<9&4294967295|T>>>23),T=L+(I^x&(j^I))+O[15]+3634488961&4294967295,L=j+(T<<14&4294967295|T>>>18),T=x+(j^I&(L^j))+O[4]+3889429448&4294967295,x=L+(T<<20&4294967295|T>>>12),T=I+(L^j&(x^L))+O[9]+568446438&4294967295,I=x+(T<<5&4294967295|T>>>27),T=j+(x^L&(I^x))+O[14]+3275163606&4294967295,j=I+(T<<9&4294967295|T>>>23),T=L+(I^x&(j^I))+O[3]+4107603335&4294967295,L=j+(T<<14&4294967295|T>>>18),T=x+(j^I&(L^j))+O[8]+1163531501&4294967295,x=L+(T<<20&4294967295|T>>>12),T=I+(L^j&(x^L))+O[13]+2850285829&4294967295,I=x+(T<<5&4294967295|T>>>27),T=j+(x^L&(I^x))+O[2]+4243563512&4294967295,j=I+(T<<9&4294967295|T>>>23),T=L+(I^x&(j^I))+O[7]+1735328473&4294967295,L=j+(T<<14&4294967295|T>>>18),T=x+(j^I&(L^j))+O[12]+2368359562&4294967295,x=L+(T<<20&4294967295|T>>>12),T=I+(x^L^j)+O[5]+4294588738&4294967295,I=x+(T<<4&4294967295|T>>>28),T=j+(I^x^L)+O[8]+2272392833&4294967295,j=I+(T<<11&4294967295|T>>>21),T=L+(j^I^x)+O[11]+1839030562&4294967295,L=j+(T<<16&4294967295|T>>>16),T=x+(L^j^I)+O[14]+4259657740&4294967295,x=L+(T<<23&4294967295|T>>>9),T=I+(x^L^j)+O[1]+2763975236&4294967295,I=x+(T<<4&4294967295|T>>>28),T=j+(I^x^L)+O[4]+1272893353&4294967295,j=I+(T<<11&4294967295|T>>>21),T=L+(j^I^x)+O[7]+4139469664&4294967295,L=j+(T<<16&4294967295|T>>>16),T=x+(L^j^I)+O[10]+3200236656&4294967295,x=L+(T<<23&4294967295|T>>>9),T=I+(x^L^j)+O[13]+681279174&4294967295,I=x+(T<<4&4294967295|T>>>28),T=j+(I^x^L)+O[0]+3936430074&4294967295,j=I+(T<<11&4294967295|T>>>21),T=L+(j^I^x)+O[3]+3572445317&4294967295,L=j+(T<<16&4294967295|T>>>16),T=x+(L^j^I)+O[6]+76029189&4294967295,x=L+(T<<23&4294967295|T>>>9),T=I+(x^L^j)+O[9]+3654602809&4294967295,I=x+(T<<4&4294967295|T>>>28),T=j+(I^x^L)+O[12]+3873151461&4294967295,j=I+(T<<11&4294967295|T>>>21),T=L+(j^I^x)+O[15]+530742520&4294967295,L=j+(T<<16&4294967295|T>>>16),T=x+(L^j^I)+O[2]+3299628645&4294967295,x=L+(T<<23&4294967295|T>>>9),T=I+(L^(x|~j))+O[0]+4096336452&4294967295,I=x+(T<<6&4294967295|T>>>26),T=j+(x^(I|~L))+O[7]+1126891415&4294967295,j=I+(T<<10&4294967295|T>>>22),T=L+(I^(j|~x))+O[14]+2878612391&4294967295,L=j+(T<<15&4294967295|T>>>17),T=x+(j^(L|~I))+O[5]+4237533241&4294967295,x=L+(T<<21&4294967295|T>>>11),T=I+(L^(x|~j))+O[12]+1700485571&4294967295,I=x+(T<<6&4294967295|T>>>26),T=j+(x^(I|~L))+O[3]+2399980690&4294967295,j=I+(T<<10&4294967295|T>>>22),T=L+(I^(j|~x))+O[10]+4293915773&4294967295,L=j+(T<<15&4294967295|T>>>17),T=x+(j^(L|~I))+O[1]+2240044497&4294967295,x=L+(T<<21&4294967295|T>>>11),T=I+(L^(x|~j))+O[8]+1873313359&4294967295,I=x+(T<<6&4294967295|T>>>26),T=j+(x^(I|~L))+O[15]+4264355552&4294967295,j=I+(T<<10&4294967295|T>>>22),T=L+(I^(j|~x))+O[6]+2734768916&4294967295,L=j+(T<<15&4294967295|T>>>17),T=x+(j^(L|~I))+O[13]+1309151649&4294967295,x=L+(T<<21&4294967295|T>>>11),T=I+(L^(x|~j))+O[4]+4149444226&4294967295,I=x+(T<<6&4294967295|T>>>26),T=j+(x^(I|~L))+O[11]+3174756917&4294967295,j=I+(T<<10&4294967295|T>>>22),T=L+(I^(j|~x))+O[2]+718787259&4294967295,L=j+(T<<15&4294967295|T>>>17),T=x+(j^(L|~I))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(L+(T<<21&4294967295|T>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+j&4294967295}i.prototype.u=function(A,I){I===void 0&&(I=A.length);for(var x=I-this.blockSize,O=this.B,L=this.h,j=0;j<I;){if(L==0)for(;j<=x;)r(this,A,j),j+=this.blockSize;if(typeof A=="string"){for(;j<I;)if(O[L++]=A.charCodeAt(j++),L==this.blockSize){r(this,O),L=0;break}}else for(;j<I;)if(O[L++]=A[j++],L==this.blockSize){r(this,O),L=0;break}}this.h=L,this.o+=I},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;var x=8*this.o;for(I=A.length-8;I<A.length;++I)A[I]=x&255,x/=256;for(this.u(A),A=Array(16),I=x=0;4>I;++I)for(var O=0;32>O;O+=8)A[x++]=this.g[I]>>>O&255;return A};function o(A,I){var x=a;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=I(A)}function s(A,I){this.h=I;for(var x=[],O=!0,L=A.length-1;0<=L;L--){var j=A[L]|0;O&&j==I||(x[L]=j,O=!1)}this.g=x}var a={};function c(A){return-128<=A&&128>A?o(A,function(I){return new s([I|0],0>I?-1:0)}):new s([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return R(u(-A));for(var I=[],x=1,O=0;A>=x;O++)I[O]=A/x|0,x*=4294967296;return new s(I,0)}function h(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return R(h(A.substring(1),I));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=u(Math.pow(I,8)),O=m,L=0;L<A.length;L+=8){var j=Math.min(8,A.length-L),T=parseInt(A.substring(L,L+j),I);8>j?(j=u(Math.pow(I,j)),O=O.j(j).add(u(T))):(O=O.j(x),O=O.add(u(T)))}return O}var m=c(0),_=c(1),w=c(16777216);t=s.prototype,t.m=function(){if(k(this))return-R(this).m();for(var A=0,I=1,x=0;x<this.g.length;x++){var O=this.i(x);A+=(0<=O?O:4294967296+O)*I,I*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(k(this))return"-"+R(this).toString(A);for(var I=u(Math.pow(A,6)),x=this,O="";;){var L=ee(x,I).g;x=q(x,L.j(I));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(A);if(x=L,S(x))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function k(A){return A.h==-1}t.l=function(A){return A=q(this,A),k(A)?-1:S(A)?0:1};function R(A){for(var I=A.g.length,x=[],O=0;O<I;O++)x[O]=~A.g[O];return new s(x,~A.h).add(_)}t.abs=function(){return k(this)?R(this):this},t.add=function(A){for(var I=Math.max(this.g.length,A.g.length),x=[],O=0,L=0;L<=I;L++){var j=O+(this.i(L)&65535)+(A.i(L)&65535),T=(j>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);O=T>>>16,j&=65535,T&=65535,x[L]=T<<16|j}return new s(x,x[x.length-1]&-2147483648?-1:0)};function q(A,I){return A.add(R(I))}t.j=function(A){if(S(this)||S(A))return m;if(k(this))return k(A)?R(this).j(R(A)):R(R(this).j(A));if(k(A))return R(this.j(R(A)));if(0>this.l(w)&&0>A.l(w))return u(this.m()*A.m());for(var I=this.g.length+A.g.length,x=[],O=0;O<2*I;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<A.g.length;L++){var j=this.i(O)>>>16,T=this.i(O)&65535,Pi=A.i(L)>>>16,ga=A.i(L)&65535;x[2*O+2*L]+=T*ga,ne(x,2*O+2*L),x[2*O+2*L+1]+=j*ga,ne(x,2*O+2*L+1),x[2*O+2*L+1]+=T*Pi,ne(x,2*O+2*L+1),x[2*O+2*L+2]+=j*Pi,ne(x,2*O+2*L+2)}for(O=0;O<I;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=I;O<2*I;O++)x[O]=0;return new s(x,0)};function ne(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function W(A,I){this.g=A,this.h=I}function ee(A,I){if(S(I))throw Error("division by zero");if(S(A))return new W(m,m);if(k(A))return I=ee(R(A),I),new W(R(I.g),R(I.h));if(k(I))return I=ee(A,R(I)),new W(R(I.g),I.h);if(30<A.g.length){if(k(A)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var x=_,O=I;0>=O.l(A);)x=me(x),O=me(O);var L=de(x,1),j=de(O,1);for(O=de(O,2),x=de(x,2);!S(O);){var T=j.add(O);0>=T.l(A)&&(L=L.add(x),j=T),O=de(O,1),x=de(x,1)}return I=q(A,L.j(I)),new W(L,I)}for(L=m;0<=A.l(I);){for(x=Math.max(1,Math.floor(A.m()/I.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=u(x),T=j.j(I);k(T)||0<T.l(A);)x-=O,j=u(x),T=j.j(I);S(j)&&(j=_),L=L.add(j),A=q(A,T)}return new W(L,A)}t.A=function(A){return ee(this,A).h},t.and=function(A){for(var I=Math.max(this.g.length,A.g.length),x=[],O=0;O<I;O++)x[O]=this.i(O)&A.i(O);return new s(x,this.h&A.h)},t.or=function(A){for(var I=Math.max(this.g.length,A.g.length),x=[],O=0;O<I;O++)x[O]=this.i(O)|A.i(O);return new s(x,this.h|A.h)},t.xor=function(A){for(var I=Math.max(this.g.length,A.g.length),x=[],O=0;O<I;O++)x[O]=this.i(O)^A.i(O);return new s(x,this.h^A.h)};function me(A){for(var I=A.g.length+1,x=[],O=0;O<I;O++)x[O]=A.i(O)<<1|A.i(O-1)>>>31;return new s(x,A.h)}function de(A,I){var x=I>>5;I%=32;for(var O=A.g.length-x,L=[],j=0;j<O;j++)L[j]=0<I?A.i(j+x)>>>I|A.i(j+x+1)<<32-I:A.i(j+x);return new s(L,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,nE=lP.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Vs=lP.Integer=s}).apply(typeof cP<"u"?cP:typeof self<"u"?self:typeof window<"u"?window:{});var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qo={};var iE,rE,ql,oE,Ih,Zg,sE,aE,cE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,g){return l==Array.prototype||l==Object.prototype||(l[p]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yg=="object"&&Yg];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(l,p){if(p)e:{var g=i;l=l.split(".");for(var b=0;b<l.length-1;b++){var V=l[b];if(!(V in g))break e;g=g[V]}l=l[l.length-1],b=g[l],p=p(b),p!=b&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}function o(l,p){l instanceof String&&(l+="");var g=0,b=!1,V={next:function(){if(!b&&g<l.length){var $=g++;return{value:p($,l[$]),done:!1}}return b=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(l){return l||function(){return o(this,function(p,g){return g})}});var s=s||{},a=this||self;function c(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function u(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function h(l,p,g){return l.call.apply(l.bind,arguments)}function m(l,p,g){if(!l)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,b),l.apply(p,V)}}return function(){return l.apply(p,arguments)}}function _(l,p,g){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,_.apply(null,arguments)}function w(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function S(l,p){function g(){}g.prototype=p.prototype,l.aa=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(b,V,$){for(var ie=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ie[ut-2]=arguments[ut];return p.prototype[V].apply(b,ie)}}function k(l){let p=l.length;if(0<p){let g=Array(p);for(let b=0;b<p;b++)g[b]=l[b];return g}return[]}function R(l,p){for(let g=1;g<arguments.length;g++){let b=arguments[g];if(c(b)){let V=l.length||0,$=b.length||0;l.length=V+$;for(let ie=0;ie<$;ie++)l[V+ie]=b[ie]}else l.push(b)}}class q{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ne(l){return/^[\s\xa0]*$/.test(l)}function W(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function ee(l){return ee[" "](l),l}ee[" "]=function(){};var me=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function de(l,p,g){for(let b in l)p.call(g,l[b],b,l)}function A(l,p){for(let g in l)p.call(void 0,l[g],g,l)}function I(l){let p={};for(let g in l)p[g]=l[g];return p}let x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(l,p){let g,b;for(let V=1;V<arguments.length;V++){b=arguments[V];for(g in b)l[g]=b[g];for(let $=0;$<x.length;$++)g=x[$],Object.prototype.hasOwnProperty.call(b,g)&&(l[g]=b[g])}}function L(l){var p=1;l=l.split(":");let g=[];for(;0<p&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function j(l){a.setTimeout(()=>{throw l},0)}function T(){var l=$c;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class Pi{constructor(){this.h=this.g=null}add(p,g){let b=ga.get();b.set(p,g),this.h?this.h.next=b:this.g=b,this.h=b}}var ga=new q(()=>new Ne,l=>l.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let va,ya=!1,$c=new Pi,lp=()=>{let l=a.Promise.resolve(void 0);va=()=>{l.then(H)}};var H=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(g){j(g)}var p=ga;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}ya=!1};function Dr(){this.s=this.s,this.C=this.C}Dr.prototype.s=!1,Dr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Dr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ht(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var up=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return l}();function go(l,p){if(Ht.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(me){e:{try{ee(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Mn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&go.aa.h.call(this)}}S(go,Ht);var Mn={2:"touch",3:"pen",4:"mouse"};go.prototype.h=function(){go.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var yi="closure_listenable_"+(1e6*Math.random()|0),dp=0;function L_(l,p,g,b,V){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!b,this.ha=V,this.key=++dp,this.da=this.fa=!1}function zc(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function vo(l){this.src=l,this.g={},this.h=0}vo.prototype.add=function(l,p,g,b,V){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var ie=yo(l,p,b,V);return-1<ie?(p=l[ie],g||(p.fa=!1)):(p=new L_(p,this.src,$,!!b,V),p.fa=g,l.push(p)),p};function _a(l,p){var g=p.type;if(g in l.g){var b=l.g[g],V=Array.prototype.indexOf.call(b,p,void 0),$;($=0<=V)&&Array.prototype.splice.call(b,V,1),$&&(zc(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function yo(l,p,g,b){for(var V=0;V<l.length;++V){var $=l[V];if(!$.da&&$.listener==p&&$.capture==!!g&&$.ha==b)return V}return-1}var wa="closure_lm_"+(1e6*Math.random()|0),gn={};function ss(l,p,g,b,V){if(b&&b.once)return as(l,p,g,b,V);if(Array.isArray(p)){for(var $=0;$<p.length;$++)ss(l,p[$],g,b,V);return null}return g=ei(g),l&&l[yi]?l.K(p,g,u(b)?!!b.capture:!!b,V):Rn(l,p,g,!1,b,V)}function Rn(l,p,g,b,V,$){if(!p)throw Error("Invalid event type");var ie=u(V)?!!V.capture:!!V,ut=ba(l);if(ut||(l[wa]=ut=new vo(l)),g=ut.add(p,g,b,ie,$),g.proxy)return g;if(b=lt(),g.proxy=b,b.src=l,b.listener=g,l.addEventListener)up||(V=ie),V===void 0&&(V=!1),l.addEventListener(p.toString(),b,V);else if(l.attachEvent)l.attachEvent(qc(p.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return g}function lt(){function l(g){return p.call(l.src,l.listener,g)}let p=fp;return l}function as(l,p,g,b,V){if(Array.isArray(p)){for(var $=0;$<p.length;$++)as(l,p[$],g,b,V);return null}return g=ei(g),l&&l[yi]?l.L(p,g,u(b)?!!b.capture:!!b,V):Rn(l,p,g,!0,b,V)}function hp(l,p,g,b,V){if(Array.isArray(p))for(var $=0;$<p.length;$++)hp(l,p[$],g,b,V);else b=u(b)?!!b.capture:!!b,g=ei(g),l&&l[yi]?(l=l.i,p=String(p).toString(),p in l.g&&($=l.g[p],g=yo($,g,b,V),-1<g&&(zc($[g]),Array.prototype.splice.call($,g,1),$.length==0&&(delete l.g[p],l.h--)))):l&&(l=ba(l))&&(p=l.g[p.toString()],l=-1,p&&(l=yo(p,g,b,V)),(g=-1<l?p[l]:null)&&Hc(g))}function Hc(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[yi])_a(p.i,l);else{var g=l.type,b=l.proxy;p.removeEventListener?p.removeEventListener(g,b,l.capture):p.detachEvent?p.detachEvent(qc(g),b):p.addListener&&p.removeListener&&p.removeListener(b),(g=ba(p))?(_a(g,l),g.h==0&&(g.src=null,p[wa]=null)):zc(l)}}}function qc(l){return l in gn?gn[l]:gn[l]="on"+l}function fp(l,p){if(l.da)l=!0;else{p=new go(p,this);var g=l.listener,b=l.ha||l.src;l.fa&&Hc(l),l=g.call(b,p)}return l}function ba(l){return l=l[wa],l instanceof vo?l:null}var cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ei(l){return typeof l=="function"?l:(l[cs]||(l[cs]=function(p){return l.handleEvent(p)}),l[cs])}function Ot(){Dr.call(this),this.i=new vo(this),this.M=this,this.F=null}S(Ot,Dr),Ot.prototype[yi]=!0,Ot.prototype.removeEventListener=function(l,p,g,b){hp(this,l,p,g,b)};function Nt(l,p){var g,b=l.F;if(b)for(g=[];b;b=b.F)g.push(b);if(l=l.M,b=p.type||p,typeof p=="string")p=new Ht(p,l);else if(p instanceof Ht)p.target=p.target||l;else{var V=p;p=new Ht(b,l),O(p,V)}if(V=!0,g)for(var $=g.length-1;0<=$;$--){var ie=p.g=g[$];V=Gc(ie,b,!0,p)&&V}if(ie=p.g=l,V=Gc(ie,b,!0,p)&&V,V=Gc(ie,b,!1,p)&&V,g)for($=0;$<g.length;$++)ie=p.g=g[$],V=Gc(ie,b,!1,p)&&V}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var g=l.g[p],b=0;b<g.length;b++)zc(g[b]);delete l.g[p],l.h--}}this.F=null},Ot.prototype.K=function(l,p,g,b){return this.i.add(String(l),p,!1,g,b)},Ot.prototype.L=function(l,p,g,b){return this.i.add(String(l),p,!0,g,b)};function Gc(l,p,g,b){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,$=0;$<p.length;++$){var ie=p[$];if(ie&&!ie.da&&ie.capture==g){var ut=ie.listener,un=ie.ha||ie.src;ie.fa&&_a(l.i,ie),V=ut.call(un,b)!==!1&&V}}return V&&!b.defaultPrevented}function _o(l,p,g){if(typeof l=="function")g&&(l=_(l,g));else if(l&&typeof l.handleEvent=="function")l=_(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function ls(l){l.g=_o(()=>{l.g=null,l.i&&(l.i=!1,ls(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class pp extends Dr{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ls(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(l){Dr.call(this),this.h=l,this.g={}}S(Tr,Dr);var Wc=[];function mp(l){de(l.g,function(p,g){this.g.hasOwnProperty(g)&&Hc(p)},l),l.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),mp(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ea=a.JSON.stringify,bd=a.JSON.parse,Kc=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ed(){}Ed.prototype.h=null;function Pn(l){return l.h||(l.h=l.i())}function ki(){}var Ca={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){Ht.call(this,"d")}S(kn,Ht);function us(){Ht.call(this,"c")}S(us,Ht);var Sr={},Cd=null;function He(){return Cd=Cd||new Ot}Sr.La="serverreachability";function _i(l){Ht.call(this,Sr.La,l)}S(_i,Ht);function ti(l){let p=He();Nt(p,new _i(p))}Sr.STAT_EVENT="statevent";function xr(l,p){Ht.call(this,Sr.STAT_EVENT,l),this.stat=p}S(xr,Ht);function tt(l){let p=He();Nt(p,new xr(p,l))}Sr.Ma="timingevent";function ln(l,p){Ht.call(this,Sr.Ma,l),this.size=p}S(ln,Ht);function wo(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function ds(){this.g=!0}ds.prototype.xa=function(){this.g=!1};function Ia(l,p,g,b,V,$){l.info(function(){if(l.g)if($)for(var ie="",ut=$.split("&"),un=0;un<ut.length;un++){var Qe=ut[un].split("=");if(1<Qe.length){var dn=Qe[0];Qe=Qe[1];var hn=dn.split("_");ie=2<=hn.length&&hn[1]=="type"?ie+(dn+"="+Qe+"&"):ie+(dn+"=redacted&")}}else ie=null;else ie=$;return"XMLHTTP REQ ("+b+") [attempt "+V+"]: "+p+`
`+g+`
`+ie})}function jn(l,p,g,b,V,$,ie){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+V+"]: "+p+`
`+g+`
`+$+" "+ie})}function hs(l,p,g,b){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+vp(l,g)+(b?" "+b:"")})}function gp(l,p){l.info(function(){return"TIMEOUT: "+p})}ds.prototype.info=function(){};function vp(l,p){if(!l.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var b=g[l];if(!(2>b.length)){var V=b[1];if(Array.isArray(V)&&!(1>V.length)){var $=V[0];if($!="noop"&&$!="stop"&&$!="close")for(var ie=1;ie<V.length;ie++)V[ie]=""}}}}return Ea(g)}catch{return p}}var fs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qc;function Yc(){}S(Yc,Ed),Yc.prototype.g=function(){return new XMLHttpRequest},Yc.prototype.i=function(){return{}},Qc=new Yc;function Ar(l,p,g,b){this.j=l,this.i=p,this.l=g,this.R=b||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mr}function Mr(){this.i=null,this.g="",this.h=!1}var _p={},Id={};function Dd(l,p,g){l.L=1,l.v=Xc(Bn(p)),l.m=g,l.P=!0,wp(l,null)}function wp(l,p){l.F=Date.now(),Zc(l),l.A=Bn(l.v);var g=l.A,b=l.R;Array.isArray(b)||(b=[String(b)]),Op(g.i,"t",b),l.C=0,g=l.j.J,l.h=new Mr,l.g=Wp(l.j,g?p:null,!l.m),0<l.O&&(l.M=new pp(_(l.Y,l,l.g),l.O)),p=l.U,g=l.g,b=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(Wc[0]=V.toString()),V=Wc);for(var $=0;$<V.length;$++){var ie=ss(g,V[$],b||p.handleEvent,!1,p.h||p);if(!ie)break;p.g[ie.key]=ie}p=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),ti(),Ia(l.i,l.u,l.A,l.l,l.R,l.m)}Ar.prototype.ca=function(l){l=l.target;let p=this.M;p&&tr(l)==3?p.j():this.Y(l)},Ar.prototype.Y=function(l){try{if(l==this.g)e:{let hn=tr(this.g);var p=this.g.Ba();let Pr=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||Bp(this.g)))){this.J||hn!=4||p==7||(p==8||0>=Pr?ti(3):ti(2)),Xi(this);var g=this.g.Z();this.X=g;t:if(bp(this)){var b=Bp(this.g);l="";var V=b.length,$=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bo(this),Da(this);var ie="";break t}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,l+=this.h.i.decode(b[p],{stream:!($&&p==V-1)});b.length=0,this.h.g+=l,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=g==200,jn(this.i,this.u,this.A,this.l,this.R,hn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,un=this.g;if((ut=un.g?un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(ut)){var Qe=ut;break t}}Qe=null}if(g=Qe)hs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sd(this,g);else{this.o=!1,this.s=3,tt(12),bo(this),Da(this);break e}}if(this.P){g=!0;let On;for(;!this.J&&this.C<ie.length;)if(On=Td(this,ie),On==Id){hn==4&&(this.s=4,tt(14),g=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(On==_p){this.s=4,tt(15),hs(this.i,this.l,ie,"[Invalid Chunk]"),g=!1;break}else hs(this.i,this.l,On,null),Sd(this,On);if(bp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||ie.length!=0||this.h.h||(this.s=1,tt(16),g=!1),this.o=this.o&&g,!g)hs(this.i,this.l,ie,"[Invalid Chunked Response]"),bo(this),Da(this);else if(0<ie.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),To(dn),dn.M=!0,tt(11))}}else hs(this.i,this.l,ie,null),Sd(this,ie);hn==4&&bo(this),this.o&&!this.J&&(hn==4?Hp(this.j,this):(this.o=!1,Zc(this)))}else Y_(this.g),g==400&&0<ie.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),bo(this),Da(this)}}}catch{}finally{}};function bp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Td(l,p){var g=l.C,b=p.indexOf(`
`,g);return b==-1?Id:(g=Number(p.substring(g,b)),isNaN(g)?_p:(b+=1,b+g>p.length?Id:(p=p.slice(b,b+g),l.C=b+g,p)))}Ar.prototype.cancel=function(){this.J=!0,bo(this)};function Zc(l){l.S=Date.now()+l.I,Ep(l,l.I)}function Ep(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=wo(_(l.ba,l),p)}function Xi(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ar.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(gp(this.i,this.A),this.L!=2&&(ti(),tt(17)),bo(this),this.s=2,Da(this)):Ep(this,this.S-l)};function Da(l){l.j.G==0||l.J||Hp(l.j,l)}function bo(l){Xi(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,mp(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Sd(l,p){try{var g=l.j;if(g.G!=0&&(g.g==l||Ad(g.h,l))){if(!l.K&&Ad(g.h,l)&&g.G==3){try{var b=g.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var V=b;if(V[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)nl(g),Jc(g);else break e;tl(g),tt(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=wo(_(g.Za,g),6e3));if(1>=Dp(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ni(g,11)}else if((l.K||g.g==l)&&nl(g),!ne(p))for(V=g.Da.g.parse(p),p=0;p<V.length;p++){let Qe=V[p];if(g.T=Qe[0],Qe=Qe[1],g.G==2)if(Qe[0]=="c"){g.K=Qe[1],g.ia=Qe[2];let dn=Qe[3];dn!=null&&(g.la=dn,g.j.info("VER="+g.la));let hn=Qe[4];hn!=null&&(g.Aa=hn,g.j.info("SVER="+g.Aa));let Pr=Qe[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(b=1.5*Pr,g.L=b,g.j.info("backChannelRequestTimeoutMs_="+b)),b=g;let On=l.g;if(On){let rl=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var $=b.h;$.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Md($,$.h),$.h=null))}if(b.D){let ol=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;ol&&(b.ya=ol,_t(b.I,b.D,ol))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),b=g;var ie=l;if(b.qa=Gp(b,b.J?b.ia:null,b.W),ie.K){mt(b.h,ie);var ut=ie,un=b.L;un&&(ut.I=un),ut.B&&(Xi(ut),Zc(ut)),b.g=ie}else $p(b);0<g.i.length&&el(g)}else Qe[0]!="stop"&&Qe[0]!="close"||ni(g,7);else g.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?ni(g,7):kd(g):Qe[0]!="noop"&&g.l&&g.l.ta(Qe),g.v=0)}}ti(4)}catch{}}var xd=class{constructor(l,p){this.g=l,this.map=p}};function Cp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ip(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Dp(l){return l.h?1:l.g?l.g.size:0}function Ad(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Md(l,p){l.g?l.g.add(p):l.h=p}function mt(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Cp.prototype.cancel=function(){if(this.i=Tp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Tp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let g of l.g.values())p=p.concat(g.D);return p}return k(l.i)}function V_(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var p=[],g=l.length,b=0;b<g;b++)p.push(l[b]);return p}p=[],g=0;for(b in l)p[g++]=l[b];return p}function j_(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var p=[];l=l.length;for(var g=0;g<l;g++)p.push(g);return p}p=[],g=0;for(let b in l)p[g++]=b;return p}}}function Sp(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var g=j_(l),b=V_(l),V=b.length,$=0;$<V;$++)p.call(void 0,b[$],g&&g[$],l)}var xp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function B_(l,p){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var b=l[g].indexOf("="),V=null;if(0<=b){var $=l[g].substring(0,b);V=l[g].substring(b+1)}else $=l[g];p($,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ji(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ji){this.h=l.h,Ta(this,l.j),this.o=l.o,this.g=l.g,Eo(this,l.s),this.l=l.l;var p=l.i,g=new xa;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),xt(this,g),this.m=l.m}else l&&(p=String(l).match(xp))?(this.h=!1,Ta(this,p[1]||"",!0),this.o=Sa(p[2]||""),this.g=Sa(p[3]||"",!0),Eo(this,p[4]),this.l=Sa(p[5]||"",!0),xt(this,p[6]||"",!0),this.m=Sa(p[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}Ji.prototype.toString=function(){var l=[],p=this.j;p&&l.push(ps(p,Ap,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(ps(p,Ap,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ps(g,g.charAt(0)=="/"?Mp:$_,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ps(g,Rp)),l.join("")};function Bn(l){return new Ji(l)}function Ta(l,p,g){l.j=g?Sa(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Eo(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function xt(l,p,g){p instanceof xa?(l.i=p,H_(l.i,l.h)):(g||(p=ps(p,z_)),l.i=new xa(p,l.h))}function _t(l,p,g){l.i.set(p,g)}function Xc(l){return _t(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Sa(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ps(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,U_),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function U_(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ap=/[#\/\?@]/g,$_=/[#\?:]/g,Mp=/[#\?]/g,z_=/[#\?@]/g,Rp=/#/g;function xa(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Rr(l){l.g||(l.g=new Map,l.h=0,l.i&&B_(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=xa.prototype,t.add=function(l,p){Rr(this),this.i=null,l=ms(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function Pp(l,p){Rr(l),p=ms(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function kp(l,p){return Rr(l),p=ms(l,p),l.g.has(p)}t.forEach=function(l,p){Rr(this),this.g.forEach(function(g,b){g.forEach(function(V){l.call(p,V,b,this)},this)},this)},t.na=function(){Rr(this);let l=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let b=0;b<p.length;b++){let V=l[b];for(let $=0;$<V.length;$++)g.push(p[b])}return g},t.V=function(l){Rr(this);let p=[];if(typeof l=="string")kp(this,l)&&(p=p.concat(this.g.get(ms(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)p=p.concat(l[g])}return p},t.set=function(l,p){return Rr(this),this.i=null,l=ms(this,l),kp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Op(l,p,g){Pp(l,p),0<g.length&&(l.i=null,l.g.set(ms(l,p),k(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var b=p[g];let $=encodeURIComponent(String(b)),ie=this.V(b);for(b=0;b<ie.length;b++){var V=$;ie[b]!==""&&(V+="="+encodeURIComponent(String(ie[b]))),l.push(V)}}return this.i=l.join("&")};function ms(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function H_(l,p){p&&!l.j&&(Rr(l),l.i=null,l.g.forEach(function(g,b){var V=b.toLowerCase();b!=V&&(Pp(this,b),Op(this,V,g))},l)),l.j=p}function Np(l,p){let g=new ds;if(a.Image){let b=new Image;b.onload=w(er,g,"TestLoadImage: loaded",!0,p,b),b.onerror=w(er,g,"TestLoadImage: error",!1,p,b),b.onabort=w(er,g,"TestLoadImage: abort",!1,p,b),b.ontimeout=w(er,g,"TestLoadImage: timeout",!1,p,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else p(!1)}function q_(l,p){let g=new ds,b=new AbortController,V=setTimeout(()=>{b.abort(),er(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:b.signal}).then($=>{clearTimeout(V),$.ok?er(g,"TestPingServer: ok",!0,p):er(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),er(g,"TestPingServer: error",!1,p)})}function er(l,p,g,b,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),b(g)}catch{}}function G_(){this.g=new Kc}function W_(l,p,g){let b=g||"";try{Sp(l,function(V,$){let ie=V;u(V)&&(ie=Ea(V)),p.push(b+$+"="+encodeURIComponent(ie))})}catch(V){throw p.push(b+"type="+encodeURIComponent("_badmap")),V}}function Oi(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Oi,Ed),Oi.prototype.g=function(){return new Aa(this.l,this.j)},Oi.prototype.i=function(l){return function(){return l}}({});function Aa(l,p){Ot.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Aa,Ot),t=Aa.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,gs(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,gs(this)),this.g&&(this.readyState=3,gs(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Co(this):gs(this),this.readyState==3&&Fp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Co(this))},t.Qa=function(l){this.g&&(this.response=l,Co(this))},t.ga=function(){this.g&&Co(this)};function Co(l){l.readyState=4,l.l=null,l.j=null,l.v=null,gs(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function gs(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Lp(l){let p="";return de(l,function(g,b){p+=b,p+=":",p+=g,p+=`\r
`}),p}function Rd(l,p,g){e:{for(b in g){var b=!1;break e}b=!0}b||(g=Lp(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):_t(l,p,g))}function At(l){Ot.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(At,Ot);var K_=/^https?$/i,Q_=["POST","PUT"];t=At.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,g,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qc.g(),this.v=this.o?Pn(this.o):Pn(Qc),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch($){Vp(this,$);return}if(l=g||"",g=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var V in b)g.set(V,b[V]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(let $ of b.keys())g.set($,b.get($));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Q_,p,void 0))||b||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,ie]of g)this.g.setRequestHeader($,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pd(this),this.u=!0,this.g.send(l),this.u=!1}catch($){Vp(this,$)}};function Vp(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,Io(l),Ma(l)}function Io(l){l.A||(l.A=!0,Nt(l,"complete"),Nt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Nt(this,"complete"),Nt(this,"abort"),Ma(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jp(this):this.bb())},t.bb=function(){jp(this)};function jp(l){if(l.h&&typeof s<"u"&&(!l.v[1]||tr(l)!=4||l.Z()!=2)){if(l.u&&tr(l)==4)_o(l.Ea,0,l);else if(Nt(l,"readystatechange"),tr(l)==4){l.h=!1;try{let ie=l.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var b;if(b=ie===0){var V=String(l.D).match(xp)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),b=!K_.test(V?V.toLowerCase():"")}g=b}if(g)Nt(l,"complete"),Nt(l,"success");else{l.m=6;try{var $=2<tr(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",Io(l)}}finally{Ma(l)}}}}function Ma(l,p){if(l.g){Pd(l);let g=l.g,b=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Nt(l,"ready");try{g.onreadystatechange=b}catch{}}}function Pd(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function tr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),bd(p)}};function Bp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Y_(l){let p={};l=(l.g&&2<=tr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(ne(l[b]))continue;var g=L(l[b]);let V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let $=p[V]||[];p[V]=$,$.push(g)}A(p,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ra(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function Up(l){this.Aa=0,this.i=[],this.j=new ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ra("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ra("baseRetryDelayMs",5e3,l),this.cb=Ra("retryDelaySeedMs",1e4,l),this.Wa=Ra("forwardChannelMaxRetries",2,l),this.wa=Ra("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Cp(l&&l.concurrentRequestLimit),this.Da=new G_,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Up.prototype,t.la=8,t.G=1,t.connect=function(l,p,g,b){tt(0),this.W=l,this.H=p||{},g&&b!==void 0&&(this.H.OSID=g,this.H.OAID=b),this.F=this.X,this.I=Gp(this,null,this.W),el(this)};function kd(l){if(Do(l),l.G==3){var p=l.U++,g=Bn(l.I);if(_t(g,"SID",l.K),_t(g,"RID",p),_t(g,"TYPE","terminate"),Pa(l,g),p=new Ar(l,l.j,p),p.L=2,p.v=Xc(Bn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Wp(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Zc(p)}qp(l)}function Jc(l){l.g&&(To(l),l.g.cancel(),l.g=null)}function Do(l){Jc(l),l.u&&(a.clearTimeout(l.u),l.u=null),nl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function el(l){if(!Ip(l.h)&&!l.s){l.s=!0;var p=l.Ga;va||lp(),ya||(va(),ya=!0),$c.add(p,l),l.B=0}}function Z_(l,p){return Dp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=wo(_(l.Ga,l,p),Nd(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let V=new Ar(this,this.j,l),$=this.o;if(this.S&&($?($=I($),O($,this.S)):$=this.S),this.m!==null||this.O||(V.H=$,$=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var b=this.i[g];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=nr(this,V,p),g=Bn(this.I),_t(g,"RID",l),_t(g,"CVER",22),this.D&&_t(g,"X-HTTP-Session-Id",this.D),Pa(this,g),$&&(this.O?p="headers="+encodeURIComponent(String(Lp($)))+"&"+p:this.m&&Rd(g,this.m,$)),Md(this.h,V),this.Ua&&_t(g,"TYPE","init"),this.P?(_t(g,"$req",p),_t(g,"SID","null"),V.T=!0,Dd(V,g,null)):Dd(V,g,p),this.G=2}}else this.G==3&&(l?Od(this,l):this.i.length==0||Ip(this.h)||Od(this))};function Od(l,p){var g;p?g=p.l:g=l.U++;let b=Bn(l.I);_t(b,"SID",l.K),_t(b,"RID",g),_t(b,"AID",l.T),Pa(l,b),l.m&&l.o&&Rd(b,l.m,l.o),g=new Ar(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),p&&(l.i=p.D.concat(l.i)),p=nr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Md(l.h,g),Dd(g,b,p)}function Pa(l,p){l.H&&de(l.H,function(g,b){_t(p,b,g)}),l.l&&Sp({},function(g,b){_t(p,b,g)})}function nr(l,p,g){g=Math.min(l.i.length,g);var b=l.l?_(l.l.Na,l.l,l):null;e:{var V=l.i;let $=-1;for(;;){let ie=["count="+g];$==-1?0<g?($=V[0].g,ie.push("ofs="+$)):$=0:ie.push("ofs="+$);let ut=!0;for(let un=0;un<g;un++){let Qe=V[un].g,dn=V[un].map;if(Qe-=$,0>Qe)$=Math.max(0,V[un].g-100),ut=!1;else try{W_(dn,ie,"req"+Qe+"_")}catch{b&&b(dn)}}if(ut){b=ie.join("&");break e}}}return l=l.i.splice(0,g),p.D=l,b}function $p(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;va||lp(),ya||(va(),ya=!0),$c.add(p,l),l.v=0}}function tl(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=wo(_(l.Fa,l),Nd(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,zp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=wo(_(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),Jc(this),zp(this))};function To(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function zp(l){l.g=new Ar(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=Bn(l.qa);_t(p,"RID","rpc"),_t(p,"SID",l.K),_t(p,"AID",l.T),_t(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&_t(p,"TO",l.ja),_t(p,"TYPE","xmlhttp"),Pa(l,p),l.m&&l.o&&Rd(p,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Xc(Bn(p)),g.m=null,g.P=!0,wp(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Jc(this),tl(this),tt(19))};function nl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Hp(l,p){var g=null;if(l.g==p){nl(l),To(l),l.g=null;var b=2}else if(Ad(l.h,p))g=p.D,mt(l.h,p),b=1;else return;if(l.G!=0){if(p.o)if(b==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var V=l.B;b=He(),Nt(b,new ln(b,g)),el(l)}else $p(l);else if(V=p.s,V==3||V==0&&0<p.X||!(b==1&&Z_(l,p)||b==2&&tl(l)))switch(g&&0<g.length&&(p=l.h,p.i=p.i.concat(g)),V){case 1:ni(l,5);break;case 4:ni(l,10);break;case 3:ni(l,6);break;default:ni(l,2)}}}function Nd(l,p){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*p}function ni(l,p){if(l.j.info("Error code "+p),p==2){var g=_(l.fb,l),b=l.Xa;let V=!b;b=new Ji(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ta(b,"https"),Xc(b),V?Np(b.toString(),g):q_(b.toString(),g)}else tt(2);l.G=0,l.l&&l.l.sa(p),qp(l),Do(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function qp(l){if(l.G=0,l.ka=[],l.l){let p=Tp(l.h);(p.length!=0||l.i.length!=0)&&(R(l.ka,p),R(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function Gp(l,p,g){var b=g instanceof Ji?Bn(g):new Ji(g);if(b.g!="")p&&(b.g=p+"."+b.g),Eo(b,b.s);else{var V=a.location;b=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var $=new Ji(null);b&&Ta($,b),p&&($.g=p),V&&Eo($,V),g&&($.l=g),b=$}return g=l.D,p=l.ya,g&&p&&_t(b,g,p),_t(b,"VER",l.la),Pa(l,b),b}function Wp(l,p,g){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new At(new Oi({eb:g})):new At(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kp(){}t=Kp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function il(){}il.prototype.g=function(l,p){return new Un(l,p)};function Un(l,p){Ot.call(this),this.g=new Up(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!ne(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ne(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new vs(this)}S(Un,Ot),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){kd(this.g)},Un.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Ea(l),l=g);p.i.push(new xd(p.Ya++,l)),p.G==3&&el(p)},Un.prototype.N=function(){this.g.l=null,delete this.j,kd(this.g),delete this.g,Un.aa.N.call(this)};function Qp(l){kn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}S(Qp,kn);function Yp(){us.call(this),this.status=1}S(Yp,us);function vs(l){this.g=l}S(vs,Kp),vs.prototype.ua=function(){Nt(this.g,"a")},vs.prototype.ta=function(l){Nt(this.g,new Qp(l))},vs.prototype.sa=function(l){Nt(this.g,new Yp)},vs.prototype.ra=function(){Nt(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,cE=qo.createWebChannelTransport=function(){return new il},aE=qo.getStatEventTarget=function(){return He()},sE=qo.Event=Sr,Zg=qo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fs.NO_ERROR=0,fs.TIMEOUT=8,fs.HTTP_ERROR=6,Ih=qo.ErrorCode=fs,yp.COMPLETE="complete",oE=qo.EventType=yp,ki.EventType=Ca,Ca.OPEN="a",Ca.CLOSE="b",Ca.ERROR="c",Ca.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,ql=qo.WebChannel=ki,rE=qo.FetchXmlHttpFactory=Oi,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,iE=qo.XhrIo=At}).apply(typeof Yg<"u"?Yg:typeof self<"u"?self:typeof window<"u"?window:{});var uP="@firebase/firestore";var on=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");var Eu="10.12.1";var qs=new om("@firebase/firestore");function Yl(){return qs.logLevel}function dI(t){qs.setLogLevel(t)}function Z(t,...e){if(qs.logLevel<=Or.DEBUG){let n=e.map(hI);qs.debug(`Firestore (${Eu}): ${t}`,...n)}}function Xt(t,...e){if(qs.logLevel<=Or.ERROR){let n=e.map(hI);qs.error(`Firestore (${Eu}): ${t}`,...n)}}function qi(t,...e){if(qs.logLevel<=Or.WARN){let n=e.map(hI);qs.warn(`Firestore (${Eu}): ${t}`,...n)}}function hI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function fe(t="Unexpected state"){let e=`FIRESTORE (${Eu}) INTERNAL ASSERTION FAILED: `+t;throw Xt(e),new Error(e)}function ye(t,e){t||fe()}function uk(t,e){t||fe()}function le(t,e){return t}var z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends rm{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var cv=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}},pE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},mE=class{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),o=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sn,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ye(typeof i.accessToken=="string"),new cv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new on(e)}},gE=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},vE=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new gE(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}},yE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},_E=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,Z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new yE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function lH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var lv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=lH(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function Pe(t,e){return t<e?-1:t>e?1:0}function ou(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function dk(t){return t+"\0"}var Ft=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var _e=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ft(0,0))}static max(){return new t(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var uv=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&fe(),i===void 0?i=e.length-n:i>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},rt=class t extends uv{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},uH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Jt=class t extends uv{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return uH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ce=class t{constructor(e){this.path=e}static fromPath(e){return new t(rt.fromString(e))}static fromName(e){return new t(rt.fromString(e).popFirst(5))}static empty(){return new t(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new rt(e.slice()))}};var su=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function wE(t){return t.fields.find(e=>e.kind===2)}function oc(t){return t.fields.filter(e=>e.kind!==2)}su.UNKNOWN_ID=-1;var nu=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Fh=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Gi.min())}};function hk(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=_e.fromTimestamp(i===1e9?new Ft(n+1,0):new Ft(n,i));return new Gi(r,ce.empty(),e)}function fk(t){return new Gi(t.readTime,t.key,-1)}var Gi=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(_e.min(),ce.empty(),-1)}static max(){return new t(_e.max(),ce.empty(),-1)}};function fI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}var pk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ta(t){return N(this,null,function*(){if(t.code!==z.FAILED_PRECONDITION||t.message!==pk)throw t;Z("LocalStore","Unexpectedly lost primary lease")})}var B=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},c=>i(c))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(h=>{s[u]=h,++a,a===o&&i(s)},h=>r(h))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var hv=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new sn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new dc(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=pI(i.target.error);this.V.reject(new dc(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new dc(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new EE(n)}},Gs=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Ld())===12.2&&Xt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Z("SimpleDb","Removing database:",e),sc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!im())return!1;if(t.C())return!0;let e=Ld(),n=t.S(e),i=0<n&&n<10,r=mk(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return N(this,null,function*(){return this.db||(Z("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new dc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new Y(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new Y(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new dc(e,s))},r.onupgradeneeded=o=>{Z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{Z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return N(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=hv.open(this.db,e,o?"readonly":"readwrite",i),c=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),B.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(Z("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function mk(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var bE=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return sc(this.B.delete())}},dc=class extends Y{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function na(t){return t.name==="IndexedDbTransactionError"}var EE=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(Z("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(Z("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),sc(i)}add(e){return Z("SimpleDb","ADD",this.store.name,e,e),sc(this.store.add(e))}get(e){return sc(this.store.get(e)).next(n=>(n===void 0&&(n=null),Z("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Z("SimpleDb","DELETE",this.store.name,e),sc(this.store.delete(e))}count(){return Z("SimpleDb","COUNT",this.store.name),sc(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new B((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new B((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(e,n){Z("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new B((i,r)=>{n.onerror=o=>{let s=pI(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(e,n){let i=[];return new B((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new bE(a),u=n(a.primaryKey,a.value,c);if(u instanceof B){let h=u.catch(m=>(c.done(),B.reject(m)));i.push(h)}c.isDone?r():c.K===null?a.continue():a.continue(c.K)}}).next(()=>B.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function sc(t){return new B((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=pI(i.target.error);n(r)}})}var dP=!1;function pI(t){let e=Gs.S(Ld());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dP||(dP=!0,setTimeout(()=>{throw i},0)),i}}return t}var CE=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{Z("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){na(n)?Z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ta(n)}yield this.X(6e4)}))}},IE=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return B.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return Z("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,o)).next(a=>(Z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=fk(o);fI(s,i)>0&&(i=s)}),new Gi(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Di=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function of(t){return t==null}function Lh(t){return t===0&&1/t==-1/0}function gk(t){return typeof t=="number"&&Number.isInteger(t)&&!Lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Qn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hP(e)),e=dH(t.get(n),e);return hP(e)}function dH(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function hP(t){return t+""}function Zr(t){let e=t.length;if(ye(e>=2),e===2)return ye(t.charAt(0)===""&&t.charAt(1)===""),rt.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&fe(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:fe()}o=s+2}return new rt(i)}var fP=["userId","batchId"];function nv(t,e){return[t,Qn(e)]}function vk(t,e,n){return[t,Qn(e),n]}var hH={},fH=["prefixPath","collectionGroup","readTime","documentId"],pH=["prefixPath","collectionGroup","documentId"],mH=["collectionGroup","readTime","prefixPath","documentId"],gH=["canonicalId","targetId"],vH=["targetId","path"],yH=["path","targetId"],_H=["collectionId","parent"],wH=["indexId","uid"],bH=["uid","sequenceNumber"],EH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CH=["indexId","uid","orderedDocumentKey"],IH=["userId","collectionPath","documentId"],DH=["userId","collectionPath","largestBatchId"],TH=["userId","collectionGroup","largestBatchId"],yk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SH=[...yk,"documentOverlays"],_k=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wk=_k,bk=[...wk,"indexConfiguration","indexState","indexEntries"],xH=bk;var Vh=class extends dv{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function En(t,e){let n=le(t);return Gs.F(n._e,e)}function pP(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cc(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ek(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var St=class t{constructor(e,n){this.comparator=e,this.root=n||Jr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tu(this.root,e,this.comparator,!0)}},tu=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jr=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();let e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}};Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1;Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Jr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ct=class t{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},fv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Gl(t){return t.hasNext()?t.getNext():void 0}var Ti=class t{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ct(Jt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ou(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var pv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Ck(){return typeof atob<"u"}var bn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pv("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bn.EMPTY_BYTE_STRING=new bn("");var AH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(t){if(ye(!!t),typeof t=="string"){let e=0,n=AH.exec(t);if(ye(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:jt(t.seconds),nanos:jt(t.nanos)}}function jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ws(t){return typeof t=="string"?bn.fromBase64String(t):bn.fromUint8Array(t)}function ry(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mI(t){let e=t.mapValue.fields.__previous_value__;return ry(e)?mI(e):e}function jh(t){let e=Ko(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}var DE=class{constructor(e,n,i,r,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Ks=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var zs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iv={nullValue:"NULL_VALUE"};function hc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ry(t)?4:Ik(t)?9007199254740991:10:fe()}function no(t,e){if(t===e)return!0;let n=hc(t);if(n!==hc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jh(t).isEqual(jh(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Ko(r.timestampValue),a=Ko(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Ws(r.bytesValue).isEqual(Ws(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return jt(r.geoPointValue.latitude)===jt(o.geoPointValue.latitude)&&jt(r.geoPointValue.longitude)===jt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return jt(r.integerValue)===jt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=jt(r.doubleValue),a=jt(o.doubleValue);return s===a?Lh(s)===Lh(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ou(t.arrayValue.values||[],e.arrayValue.values||[],no);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(pP(s)!==pP(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!no(s[c],a[c])))return!1;return!0}(t,e);default:return fe()}}function Bh(t,e){return(t.values||[]).find(n=>no(n,e))!==void 0}function Qs(t,e){if(t===e)return 0;let n=hc(t),i=hc(e);if(n!==i)return Pe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=jt(o.integerValue||o.doubleValue),c=jt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return mP(t.timestampValue,e.timestampValue);case 4:return mP(jh(t),jh(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Ws(o),c=Ws(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=Pe(a[u],c[u]);if(h!==0)return h}return Pe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Pe(jt(o.latitude),jt(s.latitude));return a!==0?a:Pe(jt(o.longitude),jt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let h=Qs(a[u],c[u]);if(h)return h}return Pe(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===zs.mapValue&&s===zs.mapValue)return 0;if(o===zs.mapValue)return 1;if(s===zs.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){let _=Pe(c[m],h[m]);if(_!==0)return _;let w=Qs(a[c[m]],u[h[m]]);if(w!==0)return w}return Pe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw fe()}}function mP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);let n=Ko(t),i=Ko(e),r=Pe(n.seconds,i.seconds);return r!==0?r:Pe(n.nanos,i.nanos)}function au(t){return TE(t)}function TE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Ko(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ws(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=TE(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${TE(n.fields[s])}`;return r+"}"}(t.mapValue):fe()}function fc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function SE(t){return!!t&&"integerValue"in t}function Uh(t){return!!t&&"arrayValue"in t}function gP(t){return!!t&&"nullValue"in t}function vP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rv(t){return!!t&&"mapValue"in t}function Rh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Cc(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Rh(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Ik(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function MH(t){return"nullValue"in t?iv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?fc(Ks.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:fe()}function RH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?fc(Ks.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?zs:fe()}function yP(t,e){let n=Qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function _P(t,e){let n=Qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Ln=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!rv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rh(n)}setAll(e){let n=Jt.emptyPath(),i={},r=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=Rh(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());rv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return no(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];rv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Cc(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(Rh(this.value))}};function Dk(t){let e=[];return Cc(t.fields,(n,i)=>{let r=new Jt([n]);if(rv(i)){let o=Dk(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new Ti(e)}var an=class t{constructor(e,n,i,r,o,s,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,_e.min(),_e.min(),_e.min(),Ln.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,_e.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,_e.min(),_e.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,_e.min(),_e.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var io=class{constructor(e,n){this.position=e,this.inclusive=n}};function wP(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=ce.comparator(ce.fromName(s.referenceValue),n.key):i=Qs(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function bP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!no(t.position[n],e.position[n]))return!1;return!0}var pc=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function PH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var mv=class{},Xe=class t extends mv{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new ME(e,n,i):n==="array-contains"?new kE(e,i):n==="in"?new gv(e,i):n==="not-in"?new OE(e,i):n==="array-contains-any"?new NE(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new RE(e,i):new PE(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qs(n,this.value)):n!==null&&hc(this.value)===hc(n)&&this.matchesComparison(Qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vt=class t extends mv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return cu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function cu(t){return t.op==="and"}function xE(t){return t.op==="or"}function gI(t){return Tk(t)&&cu(t)}function Tk(t){for(let e of t.filters)if(e instanceof vt)return!1;return!0}function AE(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+au(t.value);if(gI(t))return t.filters.map(e=>AE(e)).join(",");{let e=t.filters.map(n=>AE(n)).join(",");return`${t.op}(${e})`}}function Sk(t,e){return t instanceof Xe?function(i,r){return r instanceof Xe&&i.op===r.op&&i.field.isEqual(r.field)&&no(i.value,r.value)}(t,e):t instanceof vt?function(i,r){return r instanceof vt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&Sk(s,r.filters[a]),!0):!1}(t,e):void fe()}function xk(t,e){let n=t.filters.concat(e);return vt.create(n,t.op)}function Ak(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${au(n.value)}`}(t):t instanceof vt?function(n){return n.op.toString()+" {"+n.getFilters().map(Ak).join(" ,")+"}"}(t):"Filter"}var ME=class extends Xe{constructor(e,n,i){super(e,n,i),this.key=ce.fromName(i.referenceValue)}matches(e){let n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}},RE=class extends Xe{constructor(e,n){super(e,"in",n),this.keys=Mk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},PE=class extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=Mk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Mk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ce.fromName(i.referenceValue))}var kE=class extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Uh(n)&&Bh(n.arrayValue,this.value)}},gv=class extends Xe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Bh(this.value.arrayValue,n)}},OE=class extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Bh(this.value.arrayValue,n)}},NE=class extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Uh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Bh(this.value.arrayValue,i))}};var FE=class{constructor(e,n=null,i=[],r=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function LE(t,e=null,n=[],i=[],r=null,o=null,s=null){return new FE(t,e,n,i,r,o,s)}function mc(t){let e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>AE(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>au(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>au(i)).join(",")),e.ue=n}return e.ue}function sf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Sk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bP(t.startAt,e.startAt)&&bP(t.endAt,e.endAt)}function vv(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function yv(t,e){return t.filters.filter(n=>n instanceof Xe&&n.field.isEqual(e))}function EP(t,e,n){let i=iv,r=!0;for(let o of yv(t,e)){let s=iv,a=!0;switch(o.op){case"<":case"<=":s=MH(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=iv}yP({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];yP({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function CP(t,e,n){let i=zs,r=!0;for(let o of yv(t,e)){let s=zs,a=!0;switch(o.op){case">=":case">":s=RH(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=zs}_P({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];_P({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var mr=class{constructor(e,n=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Rk(t,e,n,i,r,o,s,a){return new mr(t,e,n,i,r,o,s,a)}function Cu(t){return new mr(t)}function IP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vI(t){return t.collectionGroup!==null}function iu(t){let e=le(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ct(Jt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new pc(o,i))}),n.has(Jt.keyField().canonicalString())||e.ce.push(new pc(Jt.keyField(),i))}return e.ce}function Yn(t){let e=le(t);return e.le||(e.le=kH(e,iu(t))),e.le}function kH(t,e){if(t.limitType==="F")return LE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new pc(r.field,o)});let n=t.endAt?new io(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new io(t.startAt.position,t.startAt.inclusive):null;return LE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function VE(t,e){let n=t.filters.concat([e]);return new mr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _v(t,e,n){return new mr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function af(t,e){return sf(Yn(t),Yn(e))&&t.limitType===e.limitType}function Pk(t){return`${mc(Yn(t))}|lt:${t.limitType}`}function Zl(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Ak(r)).join(", ")}]`),of(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>au(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>au(r)).join(",")),`Target(${i})`}(Yn(t))}; limitType=${t.limitType})`}function cf(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ce.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of iu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,a,c){let u=wP(s,a,c);return s.inclusive?u<=0:u<0}(i.startAt,iu(i),r)||i.endAt&&!function(s,a,c){let u=wP(s,a,c);return s.inclusive?u>=0:u>0}(i.endAt,iu(i),r))}(t,e)}function kk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ok(t){return(e,n)=>{let i=!1;for(let r of iu(t)){let o=OH(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function OH(t,e,n){let i=t.field.isKeyField()?ce.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Qs(c,u):fe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return fe()}}var ro=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cc(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return Ek(this.inner)}size(){return this.innerSize}};var NH=new St(ce.comparator);function fi(){return NH}var Nk=new St(ce.comparator);function Ah(...t){let e=Nk;for(let n of t)e=e.insert(n.key,n);return e}function Fk(t){let e=Nk;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Xr(){return Ph()}function Lk(){return Ph()}function Ph(){return new ro(t=>t.toString(),(t,e)=>t.isEqual(e))}var FH=new St(ce.comparator),LH=new Ct(ce.comparator);function Oe(...t){let e=LH;for(let n of t)e=e.add(n);return e}var VH=new Ct(Pe);function yI(){return VH}function Vk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function jk(t){return{integerValue:""+t}}function Bk(t,e){return gk(e)?jk(e):Vk(t,e)}var lu=class{constructor(){this._=void 0}};function jH(t,e,n){return t instanceof Ys?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ry(o)&&(o=mI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Qo?$k(t,e):t instanceof Yo?zk(t,e):function(r,o){let s=Uk(r,o),a=DP(s)+DP(r.Pe);return SE(s)&&SE(r.Pe)?jk(a):Vk(r.serializer,a)}(t,e)}function BH(t,e,n){return t instanceof Qo?$k(t,e):t instanceof Yo?zk(t,e):n}function Uk(t,e){return t instanceof Zs?function(i){return SE(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Ys=class extends lu{},Qo=class extends lu{constructor(e){super(),this.elements=e}};function $k(t,e){let n=Hk(e);for(let i of t.elements)n.some(r=>no(r,i))||n.push(i);return{arrayValue:{values:n}}}var Yo=class extends lu{constructor(e){super(),this.elements=e}};function zk(t,e){let n=Hk(e);for(let i of t.elements)n=n.filter(r=>!no(r,i));return{arrayValue:{values:n}}}var Zs=class extends lu{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function DP(t){return jt(t.integerValue||t.doubleValue)}function Hk(t){return Uh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var gc=class{constructor(e,n){this.field=e,this.transform=n}};function UH(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Qo&&r instanceof Qo||i instanceof Yo&&r instanceof Yo?ou(i.elements,r.elements,no):i instanceof Zs&&r instanceof Zs?no(i.Pe,r.Pe):i instanceof Ys&&r instanceof Ys}(t.transform,e.transform)}var jE=class{constructor(e,n){this.version=e,this.transformResults=n}},Bt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ov(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var uu=class{};function qk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Js(t.key,Bt.none()):new Xs(t.key,t.data,Bt.none());{let n=t.data,i=Ln.empty(),r=new Ct(Jt.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new gr(t.key,i,new Ti(r.toArray()),Bt.none())}}function $H(t,e,n){t instanceof Xs?function(r,o,s){let a=r.value.clone(),c=SP(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gr?function(r,o,s){if(!ov(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=SP(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Gk(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function kh(t,e,n,i){return t instanceof Xs?function(o,s,a,c){if(!ov(o.precondition,s))return a;let u=o.value.clone(),h=xP(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof gr?function(o,s,a,c){if(!ov(o.precondition,s))return a;let u=xP(o.fieldTransforms,c,s),h=s.data;return h.setAll(Gk(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(o,s,a){return ov(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function zH(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=Uk(i.transform,r||null);o!=null&&(n===null&&(n=Ln.empty()),n.set(i.field,o))}return n||null}function TP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ou(i,r,(o,s)=>UH(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Xs=class extends uu{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},gr=class extends uu{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Gk(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function SP(t,e,n){let i=new Map;ye(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,a=e.data.field(o.field);i.set(o.field,BH(s,a,n[r]))}return i}function xP(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,jH(o,s,e))}return i}var Js=class extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$h=class extends uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var zh=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&$H(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=kh(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=kh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=Lk();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let c=qk(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(_e.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&ou(this.mutations,e.mutations,(n,i)=>TP(n,i))&&ou(this.baseMutations,e.baseMutations,(n,i)=>TP(n,i))}},BE=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ye(e.mutations.length===i.length);let r=function(){return FH}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var Hh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var UE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var nn,it;function Wk(t){switch(t){default:return fe();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function Kk(t){if(t===void 0)return Xt("GRPC error has no .code"),z.UNKNOWN;switch(t){case nn.OK:return z.OK;case nn.CANCELLED:return z.CANCELLED;case nn.UNKNOWN:return z.UNKNOWN;case nn.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case nn.INTERNAL:return z.INTERNAL;case nn.UNAVAILABLE:return z.UNAVAILABLE;case nn.UNAUTHENTICATED:return z.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case nn.NOT_FOUND:return z.NOT_FOUND;case nn.ALREADY_EXISTS:return z.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return z.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case nn.ABORTED:return z.ABORTED;case nn.OUT_OF_RANGE:return z.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return z.UNIMPLEMENTED;case nn.DATA_LOSS:return z.DATA_LOSS;default:return fe()}}(it=nn||(nn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";var AP=null;function Qk(){return new TextEncoder}var HH=new Vs([4294967295,4294967295],0);function MP(t){let e=Qk().encode(t),n=new nE;return n.update(e),new Uint8Array(n.digest())}function RP(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vs([n,i],0),new Vs([r,o],0)]}var $E=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new uc(`Invalid padding: ${n}`);if(i<0)throw new uc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new uc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new uc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Vs.fromNumber(i)));return r.compare(HH)===1&&(r=new Vs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=MP(e),[i,r]=RP(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=MP(e),[i,r]=RP(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},uc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qh=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Gh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(_e.min(),r,new St(Pe),fi(),Oe())}},Gh=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Oe(),Oe(),Oe())}};var ru=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},wv=class{constructor(e,n){this.targetId=e,this.me=n}},bv=class{constructor(e,n,i=bn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Ev=class{constructor(){this.fe=0,this.ge=kP(),this.pe=bn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Oe(),n=Oe(),i=Oe();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:fe()}}),new Gh(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=kP()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},zE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=fi(),this.qe=PP(),this.Qe=new St(Pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(vv(o))if(i===0){let s=new ce(o.path);this.Ue(n,s,an.newNoDocument(s,_e.min()))}else ye(i===1);else{let s=this.Ye(n);if(s!==i){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}AP?.et(function(h,m,_,w,S){var k,R,q,ne,W,ee;let me={localCacheCount:h,existenceFilterCount:m.count,databaseId:_.database,projectId:_.projectId},de=m.unchangedNames;return de&&(me.bloomFilter={applied:S===0,hashCount:(k=de?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(ne=(q=(R=de?.bits)===null||R===void 0?void 0:R.bitmap)===null||q===void 0?void 0:q.length)!==null&&ne!==void 0?ne:0,padding:(ee=(W=de?.bits)===null||W===void 0?void 0:W.padding)!==null&&ee!==void 0?ee:0,mightContain:A=>{var I;return(I=w?.mightContain(A))!==null&&I!==void 0&&I}}),me}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Ws(i).toUint8Array()}catch(c){if(c instanceof pv)return qi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new $E(s,r,o)}catch(c){return qi(c instanceof uc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&vv(a.target)){let c=new ce(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,an.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let i=Oe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new qh(e,n,this.Qe,this.ke,i);return this.ke=fi(),this.qe=PP(),this.Qe=new St(Pe),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ev,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ct(Pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ev),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function PP(){return new St(ce.comparator)}function kP(){return new St(ce.comparator)}var qH={asc:"ASCENDING",desc:"DESCENDING"},GH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WH={and:"AND",or:"OR"},HE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function qE(t,e){return t.useProto3Json||of(e)?e:{value:e}}function du(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KH(t,e){return du(t,e.toTimestamp())}function en(t){return ye(!!t),_e.fromTimestamp(function(n){let i=Ko(n);return new Ft(i.seconds,i.nanos)}(t))}function _I(t,e){return GE(t,e).canonicalString()}function GE(t,e){let n=function(r){return new rt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Zk(t){let e=rt.fromString(t);return ye(aO(e)),e}function Wh(t,e){return _I(t.databaseId,e.path)}function eo(t,e){let n=Zk(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(eO(n))}function Xk(t,e){return _I(t.databaseId,e)}function Jk(t){let e=Zk(t);return e.length===4?rt.emptyPath():eO(e)}function WE(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eO(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OP(t,e,n){return{name:Wh(t,e),fields:n.value.mapValue.fields}}function tO(t,e,n){let i=eo(t,e.name),r=en(e.updateTime),o=e.createTime?en(e.createTime):_e.min(),s=new Ln({mapValue:{fields:e.fields}}),a=an.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function QH(t,e){return"found"in e?function(i,r){ye(!!r.found),r.found.name,r.found.updateTime;let o=eo(i,r.found.name),s=en(r.found.updateTime),a=r.found.createTime?en(r.found.createTime):_e.min(),c=new Ln({mapValue:{fields:r.found.fields}});return an.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(i,r){ye(!!r.missing),ye(!!r.readTime);let o=eo(i,r.missing),s=en(r.readTime);return an.newNoDocument(o,s)}(t,e):fe()}function YH(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(ye(h===void 0||typeof h=="string"),bn.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array),bn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let h=u.code===void 0?z.UNKNOWN:Kk(u.code);return new Y(h,u.message||"")}(s);n=new bv(i,r,o,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=eo(t,i.document.name),o=en(i.document.updateTime),s=i.document.createTime?en(i.document.createTime):_e.min(),a=new Ln({mapValue:{fields:i.document.fields}}),c=an.newFoundDocument(r,o,s,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new ru(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=eo(t,i.document),o=i.readTime?en(i.readTime):_e.min(),s=an.newNoDocument(r,o),a=i.removedTargetIds||[];n=new ru([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=eo(t,i.document),o=i.removedTargetIds||[];n=new ru([],o,r,null)}else{if(!("filter"in e))return fe();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new UE(r,o),a=i.targetId;n=new wv(a,s)}}return n}function Kh(t,e){let n;if(e instanceof Xs)n={update:OP(t,e.key,e.value)};else if(e instanceof Js)n={delete:Wh(t,e.key)};else if(e instanceof gr)n={update:OP(t,e.key,e.data),updateMask:nq(e.fieldMask)};else{if(!(e instanceof $h))return fe();n={verify:Wh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof Ys)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zs)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw fe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:KH(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe()}(t,e.precondition)),n}function KE(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Bt.updateTime(en(o.updateTime)):o.exists!==void 0?Bt.exists(o.exists):Bt.none()}(e.currentDocument):Bt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)ye(a.setToServerValue==="REQUEST_TIME"),c=new Ys;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Qo(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Yo(h)}else"increment"in a?c=new Zs(s,a.increment):fe();let u=Jt.fromServerFormat(a.fieldPath);return new gc(u,c)}(t,r)):[];if(e.update){e.update.name;let r=eo(t,e.update.name),o=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let u=c.fieldPaths||[];return new Ti(u.map(h=>Jt.fromServerFormat(h)))}(e.updateMask);return new gr(r,o,s,n,i)}return new Xs(r,o,n,i)}if(e.delete){let r=eo(t,e.delete);return new Js(r,n)}if(e.verify){let r=eo(t,e.verify);return new $h(r,n)}return fe()}function ZH(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?en(r.updateTime):en(o);return s.isEqual(_e.min())&&(s=en(o)),new jE(s,r.transformResults||[])}(n,e))):[]}function nO(t,e){return{documents:[Xk(t,e.path)]}}function iO(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Xk(t,r);let o=function(u){if(u.length!==0)return sO(vt.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(h=>function(_){return{field:Xl(_.field),direction:JH(_.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=qE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function rO(t){let e=Jk(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ye(i===1);let h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(m){let _=oO(m);return _ instanceof vt&&gI(_)?_.getFilters():[_]}(n.where));let s=[];n.orderBy&&(s=function(m){return m.map(_=>function(S){return new pc(Jl(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(n.orderBy));let a=null;n.limit&&(a=function(m){let _;return _=typeof m=="object"?m.value:m,of(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(m){let _=!!m.before,w=m.values||[];return new io(w,_)}(n.startAt));let u=null;return n.endAt&&(u=function(m){let _=!m.before,w=m.values||[];return new io(w,_)}(n.endAt)),Rk(e,r,s,o,a,"F",c,u)}function XH(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Jl(n.unaryFilter.field);return Xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Jl(n.unaryFilter.field);return Xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Jl(n.unaryFilter.field);return Xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Jl(n.unaryFilter.field);return Xe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(Jl(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vt.create(n.compositeFilter.filters.map(i=>oO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function JH(t){return qH[t]}function eq(t){return GH[t]}function tq(t){return WH[t]}function Xl(t){return{fieldPath:t.canonicalString()}}function Jl(t){return Jt.fromServerFormat(t.fieldPath)}function sO(t){return t instanceof Xe?function(n){if(n.op==="=="){if(vP(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NAN"}};if(gP(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vP(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NOT_NAN"}};if(gP(n.value))return{unaryFilter:{field:Xl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(n.field),op:eq(n.op),value:n.value}}}(t):t instanceof vt?function(n){let i=n.getFilters().map(r=>sO(r));return i.length===1?i[0]:{compositeFilter:{op:tq(n.op),filters:i}}}(t):fe()}function nq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var hu=class t{constructor(e,n,i,r,o=_e.min(),s=_e.min(),a=bn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Cv=class{constructor(e){this.ct=e}};function iq(t,e){let n;if(e.document)n=tO(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=ce.fromSegments(e.noDocument.path),r=yc(e.noDocument.readTime);n=an.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return fe();{let i=ce.fromSegments(e.unknownDocument.path),r=yc(e.unknownDocument.version);n=an.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new Ft(r[0],r[1]);return _e.fromTimestamp(o)}(e.readTime)),n}function NP(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Iv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:Wh(o,s.key),fields:s.data.value.mapValue.fields,updateTime:du(o,s.version.toTimestamp()),createTime:du(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:vc(e.version)};else{if(!e.isUnknownDocument())return fe();i.unknownDocument={path:n.path.toArray(),version:vc(e.version)}}return i}function Iv(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function vc(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yc(t){let e=new Ft(t.seconds,t.nanoseconds);return _e.fromTimestamp(e)}function ac(t,e){let n=(e.baseMutations||[]).map(o=>KE(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>KE(t.ct,o)),r=Ft.fromMillis(e.localWriteTimeMs);return new zh(e.batchId,r,n,i)}function Mh(t){let e=yc(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?yc(t.lastLimboFreeSnapshotVersion):_e.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return ye(o.documents.length===1),Yn(Cu(Jk(o.documents[0])))}(t.query):function(o){return Yn(rO(o))}(t.query),new hu(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,bn.fromBase64String(t.resumeToken))}function cO(t,e){let n=vc(e.snapshotVersion),i=vc(e.lastLimboFreeSnapshotVersion),r;r=vv(e.target)?nO(t.ct,e.target):iO(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mc(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function wI(t){let e=rO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_v(e,e.limit,"L"):e}function lE(t,e){return new Hh(e.largestBatchId,KE(t.ct,e.overlayMutation))}function FP(t,e){let n=e.path.lastSegment();return[t,Qn(e.path.popLast()),n]}function LP(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:vc(i.readTime),documentKey:Qn(i.documentKey.path),largestBatchId:i.largestBatchId}}var QE=class{getBundleMetadata(e,n){return VP(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:yc(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return VP(e).put(function(r){return{bundleId:r.id,createTime:vc(en(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return jP(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:wI(o.bundledQuery),readTime:yc(o.readTime)}}(i)})}saveNamedQuery(e,n){return jP(e).put(function(r){return{name:r.name,readTime:vc(en(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function VP(t){return En(t,"bundles")}function jP(t){return En(t,"namedQueries")}var Dv=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Dh(e).get(FP(this.userId,n)).next(i=>i?lE(this.serializer,i):null)}getOverlays(e,n){let i=Xr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let a=new Hh(n,s);r.push(this.ht(e,a))}),B.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(Qn(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Dh(e).j("collectionPathOverlayIndex",a))}),B.waitFor(o)}getOverlaysForCollection(e,n,i){let r=Xr(),o=Qn(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Dh(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let u=lE(this.serializer,c);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=Xr(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Dh(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,h)=>{let m=lE(this.serializer,u);o.size()<r||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Dh(e).put(function(r,o,s){let[a,c,u]=FP(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Kh(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Dh(t){return En(t,"documentOverlays")}var Go=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(jt(e.integerValue));else if("doubleValue"in e){let i=jt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Lh(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Ko(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ws(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?Ik(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):fe()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),ce.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Go.bt=new Go;function rq(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function BP(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=rq(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var YE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=BP(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=BP(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},ZE=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},XE=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},cc=class{constructor(){this.Gt=new YE,this.zt=new ZE(this.Gt),this.jt=new XE(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var lc=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function js(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=UP(t.arrayValue,e.arrayValue),n!==0?n:(n=UP(t.directionalValue,e.directionalValue),n!==0?n:ce.comparator(t.documentKey,e.documentKey)))}function UP(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Tv=class{constructor(e){this.Yt=new Ct((n,i)=>Jt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(ye(e.collectionGroup===this.collectionId),this.en)return!1;let n=wE(e);if(n!==void 0&&!this.nn(n))return!1;let i=oc(e),r=new Set,o=0,s=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ct(Jt.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new nu(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new nu(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new nu(i.field,i.dir==="asc"?0:1)));return new su(su.UNKNOWN_ID,this.collectionId,n,Fh.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function lO(t){var e,n;if(ye(t instanceof Xe||t instanceof vt),t instanceof Xe){if(t instanceof gv){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Xe.create(t.field,"==",o)))||[];return vt.create(r,"or")}return t}let i=t.filters.map(r=>lO(r));return vt.create(i,t.op)}function oq(t){if(t.getFilters().length===0)return[];let e=tC(lO(t));return ye(uO(e)),JE(e)||eC(e)?[e]:e.getFilters()}function JE(t){return t instanceof Xe}function eC(t){return t instanceof vt&&gI(t)}function uO(t){return JE(t)||eC(t)||function(n){if(n instanceof vt&&xE(n)){for(let i of n.getFilters())if(!JE(i)&&!eC(i))return!1;return!0}return!1}(t)}function tC(t){if(ye(t instanceof Xe||t instanceof vt),t instanceof Xe)return t;if(t.filters.length===1)return tC(t.filters[0]);let e=t.filters.map(i=>tC(i)),n=vt.create(e,t.op);return n=Sv(n),uO(n)?n:(ye(n instanceof vt),ye(cu(n)),ye(n.filters.length>1),n.filters.reduce((i,r)=>bI(i,r)))}function bI(t,e){let n;return ye(t instanceof Xe||t instanceof vt),ye(e instanceof Xe||e instanceof vt),n=t instanceof Xe?e instanceof Xe?function(r,o){return vt.create([r,o],"and")}(t,e):$P(t,e):e instanceof Xe?$P(e,t):function(r,o){if(ye(r.filters.length>0&&o.filters.length>0),cu(r)&&cu(o))return xk(r,o.getFilters());let s=xE(r)?r:o,a=xE(r)?o:r,c=s.filters.map(u=>bI(u,a));return vt.create(c,"or")}(t,e),Sv(n)}function $P(t,e){if(cu(e))return xk(e,t.getFilters());{let n=e.filters.map(i=>bI(t,i));return vt.create(n,"or")}}function Sv(t){if(ye(t instanceof Xe||t instanceof vt),t instanceof Xe)return t;let e=t.getFilters();if(e.length===1)return Sv(e[0]);if(Tk(t))return t;let n=e.map(r=>Sv(r)),i=[];return n.forEach(r=>{r instanceof Xe?i.push(r):r instanceof vt&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:vt.create(i,t.op)}var nC=class{constructor(){this._n=new Qh}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Gi.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}},Qh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ct(rt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ct(rt.comparator)).toArray()}};var Xg=new Uint8Array(0),iC=class{constructor(e,n){this.databaseId=n,this.an=new Qh,this.un=new ro(i=>mc(i),(i,r)=>sf(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:Qn(r)};return zP(e).put(o)}return B.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[dk(n),""],!1,!0);return zP(e).U(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(Zr(s.parent))}return i})}addFieldIndex(e,n){let i=Th(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=Kl(e);return o.next(a=>{s.put(LP(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=Th(e),r=Kl(e),o=Wl(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Th(e),i=Wl(e),r=Kl(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return B.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new Tv(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=Wl(e),r=!0,o=new Map;return B.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=Oe(),a=[];return B.forEach(o,(c,u)=>{Z("IndexedDbIndexManager",`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(ee=>`${ee.fieldPath}:${ee.kind}`).join(",")}`}(c)} to execute ${mc(n)}`);let h=function(W,ee){let me=wE(ee);if(me===void 0)return null;for(let de of yv(W,me.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null}(u,c),m=function(W,ee){let me=new Map;for(let de of oc(ee))for(let A of yv(W,de.fieldPath))switch(A.op){case"==":case"in":me.set(de.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return me.set(de.fieldPath.canonicalString(),A.value),Array.from(me.values())}return null}(u,c),_=function(W,ee){let me=[],de=!0;for(let A of oc(ee)){let I=A.kind===0?EP(W,A.fieldPath,W.startAt):CP(W,A.fieldPath,W.startAt);me.push(I.value),de&&(de=I.inclusive)}return new io(me,de)}(u,c),w=function(W,ee){let me=[],de=!0;for(let A of oc(ee)){let I=A.kind===0?CP(W,A.fieldPath,W.endAt):EP(W,A.fieldPath,W.endAt);me.push(I.value),de&&(de=I.inclusive)}return new io(me,de)}(u,c),S=this.hn(c,u,_),k=this.hn(c,u,w),R=this.Pn(c,u,m),q=this.In(c.indexId,h,S,_.inclusive,k,w.inclusive,R);return B.forEach(q,ne=>i.G(ne,n.limit).next(W=>{W.forEach(ee=>{let me=ce.fromSegments(ee.documentKey);s.has(me)||(s=s.add(me),a.push(me))})}))}).next(()=>a)}return B.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=oq(vt.create(e.filters,"and")).map(i=>LE(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,s,a){let c=(n!=null?n.length:1)*Math.max(i.length,o.length),u=c/(n!=null?n.length:1),h=[];for(let m=0;m<c;++m){let _=n?this.Tn(n[m/u]):Xg,w=this.En(e,_,i[m%u],r),S=this.dn(e,_,o[m%u],s),k=a.map(R=>this.En(e,_,R,!0));h.push(...this.createRange(w,S,k))}return h}En(e,n,i,r){let o=new lc(e,ce.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new lc(e,ce.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new Tv(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let a of o)i.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let i=2,r=this.cn(n);return B.forEach(r,o=>this.ln(e,o).next(s=>{s?i!==0&&s.fields.length<function(c){let u=new Ct(Jt.comparator),h=!1;for(let m of c.filters)for(let _ of m.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?h=!0:u=u.add(_.field));for(let m of c.orderBy)m.field.isKeyField()||(u=u.add(m.field));return u.size+(h?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new cc;for(let r of oc(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Ht(r.kind);Go.bt.Pt(o,s)}return i.Wt()}Tn(e){let n=new cc;return Go.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new cc;return Go.bt.Pt(fc(this.databaseId,n),i.Ht(function(o){let s=oc(o);return s.length===0?0:s[s.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new cc);let o=0;for(let s of oc(e)){let a=i[o++];for(let c of r)if(this.Vn(n,s.fieldPath)&&Uh(a))r=this.mn(r,s,a);else{let u=c.Ht(s.kind);Go.bt.Pt(a,u)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let c=new cc;c.seed(a.Wt()),Go.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof Xe&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=Th(e),r=Kl(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let s=[];return B.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(h,m){let _=m?new Fh(m.sequenceNumber,new Gi(yc(m.readTime),new ce(Zr(m.documentKey)),m.largestBatchId)):Fh.empty(),w=h.fields.map(([S,k])=>new nu(Jt.fromServerFormat(S),k));return new su(h.indexId,h.collectionGroup,w,_)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Pe(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=Th(e),o=Kl(e);return this.gn(e).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>B.forEach(a,c=>o.put(LP(c.indexId,this.uid,s,i)))))}updateIndexEntries(e,n){let i=new Map;return B.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?B.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),B.forEach(a,c=>this.pn(e,r,c).next(u=>{let h=this.yn(o,c);return u.isEqual(h)?B.resolve():this.wn(e,o,c,u,h)}))))})}Sn(e,n,i,r){return Wl(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return Wl(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=Wl(e),o=new Ct(js);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(s,a)=>{o=o.add(new lc(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let i=new Ct(js),r=this.An(n,e);if(r==null)return i;let o=wE(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Uh(s))for(let a of s.arrayValue.values||[])i=i.add(new lc(n.indexId,e.key,this.Tn(a),r))}else i=i.add(new lc(n.indexId,e.key,Xg,r));return i}wn(e,n,i,r,o){Z("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,u,h,m,_){let w=c.getIterator(),S=u.getIterator(),k=Gl(w),R=Gl(S);for(;k||R;){let q=!1,ne=!1;if(k&&R){let W=h(k,R);W<0?ne=!0:W>0&&(q=!0)}else k!=null?ne=!0:q=!0;q?(m(R),R=Gl(S)):ne?(_(k),k=Gl(w)):(k=Gl(w),R=Gl(S))}}(r,o,js,a=>{s.push(this.Sn(e,n,i,a))},a=>{s.push(this.bn(e,n,i,a))}),B.waitFor(s)}gn(e){let n=1;return Kl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,a)=>js(s,a)).filter((s,a,c)=>!a||js(s,c[a-1])!==0);let r=[];r.push(e);for(let s of i){let a=js(s,e),c=js(s,n);if(a===0)r[0]=e.Jt();else if(a>0&&c<0)r.push(s),r.push(s.Jt());else if(c>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Xg,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Xg,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return js(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(HP)}getMinOffset(e,n){return B.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||fe())).next(HP)}};function zP(t){return En(t,"collectionParents")}function Wl(t){return En(t,"indexEntries")}function Th(t){return En(t,"indexConfiguration")}function Kl(t){return En(t,"indexState")}function HP(t){ye(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;fI(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Gi(e.readTime,e.documentKey,n)}var qP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hi=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function dO(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=i.J({range:s},(h,m,_)=>(a++,_.delete()));o.push(c.next(()=>{ye(a===1)}));let u=[];for(let h of n.mutations){let m=vk(e,h.key.path,n.batchId);o.push(r.delete(m)),u.push(h.key)}return B.waitFor(o).next(()=>u)}function xv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw fe();e=t.noDocument}return JSON.stringify(e).length}Hi.DEFAULT_COLLECTION_PERCENTILE=10,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hi.DEFAULT=new Hi(41943040,Hi.DEFAULT_COLLECTION_PERCENTILE,Hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hi.DISABLED=new Hi(-1,0,0);var Av=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){ye(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).J({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=eu(e),s=Bs(e);return s.add({}).next(a=>{ye(typeof a=="number");let c=new zh(a,n,i,r),u=function(w,S,k){let R=k.baseMutations.map(ne=>Kh(w.ct,ne)),q=k.mutations.map(ne=>Kh(w.ct,ne));return{userId:S,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:R,mutations:q}}(this.serializer,this.userId,c),h=[],m=new Ct((_,w)=>Pe(_.canonicalString(),w.canonicalString()));for(let _ of r){let w=vk(this.userId,_.key.path,a);m=m.add(_.key.path.popLast()),h.push(s.put(u)),h.push(o.put(w,hH))}return m.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),B.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return Bs(e).get(n).next(i=>i?(ye(i.userId===this.userId),ac(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?B.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Bs(e).J({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&(ye(a.batchId>=i),o=ac(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Bs(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).U("userMutationsIndex",n).next(i=>i.map(r=>ac(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=nv(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return eu(e).J({range:r},(s,a,c)=>{let[u,h,m]=s,_=Zr(h);if(u===this.userId&&n.path.isEqual(_))return Bs(e).get(m).next(w=>{if(!w)throw fe();ye(w.userId===this.userId),o.push(ac(this.serializer,w))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ct(Pe),r=[];return n.forEach(o=>{let s=nv(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=eu(e).J({range:a},(u,h,m)=>{let[_,w,S]=u,k=Zr(w);_===this.userId&&o.path.isEqual(k)?i=i.add(S):m.done()});r.push(c)}),B.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=nv(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new Ct(Pe);return eu(e).J({range:s},(c,u,h)=>{let[m,_,w]=c,S=Zr(_);m===this.userId&&i.isPrefixOf(S)?S.length===r&&(a=a.add(w)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Bs(e).get(o).next(s=>{if(s===null)throw fe();ye(s.userId===this.userId),i.push(ac(this.serializer,s))}))}),B.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return dO(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),B.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return eu(e).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let c=Zr(o[1]);r.push(c)}else a.done()}).next(()=>{ye(r.length===0)})})}containsKey(e,n){return hO(e,this.userId,n)}xn(e){return fO(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function hO(t,e,n){let i=nv(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return eu(t).J({range:o,H:!0},(a,c,u)=>{let[h,m,_]=a;h===e&&m===r&&(s=!0),u.done()}).next(()=>s)}function Bs(t){return En(t,"mutations")}function eu(t){return En(t,"documentMutations")}function fO(t){return En(t,"mutationQueues")}var fu=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var rC=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new fu(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>_e.fromTimestamp(new Ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ql(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(ye(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return Ql(e).J((s,a)=>{let c=Mh(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(e,c)))}).next(()=>B.waitFor(o)).next(()=>r)}forEachTarget(e,n){return Ql(e).J((i,r)=>{let o=Mh(r);n(o)})}Bn(e){return GP(e).get("targetGlobalKey").next(n=>(ye(n!==null),n))}kn(e,n){return GP(e).put("targetGlobalKey",n)}qn(e,n){return Ql(e).put(cO(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=mc(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return Ql(e).J({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let u=Mh(a);sf(n,u.target)&&(o=u,c.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Us(e);return n.forEach(s=>{let a=Qn(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,s))}),B.waitFor(r)}removeMatchingKeys(e,n,i){let r=Us(e);return B.forEach(n,o=>{let s=Qn(o.path);return B.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Us(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Us(e),o=Oe();return r.J({range:i,H:!0},(s,a,c)=>{let u=Zr(s[1]),h=new ce(u);o=o.add(h)}).next(()=>o)}containsKey(e,n){let i=Qn(n.path),r=IDBKeyRange.bound([i],[dk(i)],!1,!0),o=0;return Us(e).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],c,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return Ql(e).get(n).next(i=>i?Mh(i):null)}};function Ql(t){return En(t,"targets")}function GP(t){return En(t,"targetGlobal")}function Us(t){return En(t,"targetDocuments")}function WP([t,e],[n,i]){let r=Pe(t,n);return r===0?Pe(e,i):r}var oC=class{constructor(e){this.Kn=e,this.buffer=new Ct(WP),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();WP(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},sC=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){Z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){na(n)?Z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ta(n)}yield this.zn(3e5)}))}},aC=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Di.oe);let i=new oC(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(qP)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qP):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,s=Date.now(),this.nthSequenceNumber(e,r))).next(m=>(i=m,a=Date.now(),this.removeTargets(e,i,n))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(u=Date.now(),Yl()<=Or.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:m})))}};function sq(t,e){return new aC(t,e)}var cC=class{constructor(e,n){this.db=e,this.garbageCollector=sq(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return Jg(e,i)}removeReference(e,n,i){return Jg(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Jg(e,n)}er(e,n){return function(r,o){let s=!1;return fO(r).Y(a=>hO(r,a,o).next(c=>(c&&(s=!0),B.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(u=>{if(!u)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,_e.min()),Us(e).delete(function(m){return[0,Qn(m.path)]}(s))))});r.push(c)}}).next(()=>B.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Jg(e,n)}Xn(e,n){let i=Us(e),r,o=Di.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:u})=>{s===0?(o!==Di.oe&&n(new ce(Zr(r)),o),o=u,r=c):o=Di.oe}).next(()=>{o!==Di.oe&&n(new ce(Zr(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Jg(t,e){return Us(t).put(function(i,r){return{targetId:0,path:Qn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var Mv=class{constructor(){this.changes=new ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var lC=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return rc(e).put(i)}removeEntry(e,n,i){return rc(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Iv(s),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=an.newInvalidDocument(n);return rc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:an.newInvalidDocument(n)};return rc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Sh(n))},(r,o)=>{i={document:this.nr(n,o),size:xv(o)}}).next(()=>i)}getEntries(e,n){let i=fi();return this.ir(e,n,(r,o)=>{let s=this.nr(r,o);i=i.insert(r,s)}).next(()=>i)}sr(e,n){let i=fi(),r=new St(ce.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);i=i.insert(o,a),r=r.insert(o,xv(s))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return B.resolve();let r=new Ct(YP);n.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(Sh(r.first()),Sh(r.last())),s=r.getIterator(),a=s.getNext();return rc(e).J({index:"documentKeyIndex",range:o},(c,u,h)=>{let m=ce.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&YP(a,m)<0;)i(a,null),a=s.getNext();a&&a.isEqual(m)&&(i(a,u),a=s.hasNext()?s.getNext():null),a?h.$(Sh(a)):h.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Iv(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rc(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{o?.incrementDocumentReadCount(u.length);let h=fi();for(let m of u){let _=this.nr(ce.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(cf(n,_)||r.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,n,i,r){let o=fi(),s=QP(n,i),a=QP(n,Gi.max());return rc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,u,h)=>{let m=this.nr(ce.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(m.key,m),o.size===r&&h.done()}).next(()=>o)}newChangeBuffer(e){return new uC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return KP(e).get("remoteDocumentGlobalKey").next(n=>(ye(!!n),n))}tr(e,n){return KP(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=iq(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(_e.min())))return i}return an.newInvalidDocument(e)}};function pO(t){return new lC(t)}var uC=class extends Mv{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ro(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Ct((o,s)=>Pe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=NP(this.ar.serializer,s);r=r.add(o.path.popLast());let u=xv(c);i+=u-a.size,n.push(this.ar.addEntry(e,o,c))}else if(i-=a.size,this.trackRemovals){let c=NP(this.ar.serializer,s.convertToNoDocument(_e.min()));n.push(this.ar.addEntry(e,o,c))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),B.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function KP(t){return En(t,"remoteDocumentGlobal")}function rc(t){return En(t,"remoteDocumentsV14")}function Sh(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QP(t,e){let n=e.documentKey.path.toArray();return[t,Iv(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function YP(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Pe(n[o],i[o]),r)return r;return r=Pe(n.length,i.length),r||(r=Pe(n[n.length-2],i[i.length-2]),r||Pe(n[n.length-1],i[i.length-1]))}var dC=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Rv=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&kh(i.mutation,r,Ti.empty(),Ft.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Oe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Oe()){let r=Xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=Ah();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=Xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Oe()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,i,r){let o=fi(),s=Ph(),a=function(){return Ph()}();return n.forEach((c,u)=>{let h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof gr)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),kh(h.mutation,u,h.mutation.getFieldMask(),Ft.now())):s.set(u.key,Ti.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),n.forEach((u,h)=>{var m;return a.set(u,new dC(h,(m=s.get(u))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){let i=Ph(),r=new St((s,a)=>s-a),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let h=i.get(c)||Ti.empty();h=a.applyToLocalView(u,h),i.set(c,h);let m=(r.get(a.batchId)||Oe()).add(c);r=r.insert(a.batchId,m)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,m=Lk();h.forEach(_=>{if(!o.has(_)){let w=qk(n.get(_),i.get(_));w!==null&&m.set(_,w),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,m))}return B.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return ce.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):B.resolve(Xr()),a=-1,c=o;return s.next(u=>B.forEach(u,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Oe())).next(h=>({batchId:a,changes:Fk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(i=>{let r=Ah();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=Ah();return this.indexManager.getCollectionParents(e,o).next(a=>B.forEach(a,c=>{let u=function(m,_){return new mr(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((m,_)=>{s=s.insert(m,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,an.newInvalidDocument(h)))});let a=Ah();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&kh(h.mutation,u,Ti.empty(),Ft.now()),cf(n,u)&&(a=a.insert(c,u))}),a})}};var hC=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:en(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:wI(r.bundledQuery),readTime:en(r.readTime)}}(n)),B.resolve()}};var fC=class{constructor(){this.overlays=new St(ce.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Xr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){let r=Xr(),o=n.length+1,s=new ce(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new St((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=o.get(u.largestBatchId);h===null&&(h=Xr(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Xr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return B.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Hh(n,i));let o=this.hr.get(n);o===void 0&&(o=Oe(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var Yh=class{constructor(){this.Pr=new Ct(rn.Ir),this.Tr=new Ct(rn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new rn(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new rn(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new ce(new rt([])),i=new rn(n,e),r=new rn(n,e+1),o=[];return this.Tr.forEachInRange([i,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new ce(new rt([])),i=new rn(n,e),r=new rn(n,e+1),o=Oe();return this.Tr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new rn(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},rn=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ce.comparator(e.key,n.key)||Pe(e.pr,n.pr)}static Er(e,n){return Pe(e.pr,n.pr)||ce.comparator(e.key,n.key)}};var pC=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ct(rn.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new zh(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.wr=this.wr.add(new rn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new rn(n,0),r=new rn(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],s=>{let a=this.Sr(s.pr);o.push(a)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ct(Pe);return n.forEach(r=>{let o=new rn(r,0),s=new rn(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{i=i.add(a.pr)})}),B.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;ce.isDocumentKey(o)||(o=o.child(""));let s=new rn(new ce(o),0),a=new Ct(Pe);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.pr)),!0)},s),B.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ye(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return B.forEach(n.mutations,r=>{let o=new rn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new rn(n,0),r=this.wr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var mC=class{constructor(e){this.vr=e,this.docs=function(){return new St(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let i=fi();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():an.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=fi(),s=n.path,a=new ce(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||fI(fk(h),i)<=0||(r.has(h.key)||cf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,i,r){fe()}Fr(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new gC(this)}getSize(e){return B.resolve(this.size)}},gC=class extends Mv{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var vC=class{constructor(e){this.persistence=e,this.Mr=new ro(n=>mc(n),sf),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Yh,this.targetCount=0,this.Lr=fu.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new fu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),B.waitFor(o).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}};var Pv=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Di(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new vC(this),this.indexManager=new nC,this.remoteDocumentCache=function(r){return new mC(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Cv(n),this.$r=new hC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new pC(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){Z("MemoryPersistence","Starting transaction:",e);let r=new yC(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return B.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},yC=class extends dv{constructor(e){super(),this.currentSequenceNumber=e}},kv=class t{constructor(e){this.persistence=e,this.zr=new Yh,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw fe()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,i=>{let r=ce.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,_e.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var _C=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new hv("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fP,{unique:!0}),c.createObjectStore("documentMutations")}(e),ZP(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=B.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),ZP(e)),s=s.next(()=>function(c){let u=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_e.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(c,u){return u.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fP,{unique:!0});let m=u.store("mutations"),_=h.map(w=>m.put(w));return B.waitFor(_)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.Xr(o))),i<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(s=s.next(()=>this.ti(o))),i<8&&r>=8&&(s=s.next(()=>this.ni(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.ri(o))),i<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:IH});u.createIndex("collectionPathOverlayIndex",DH,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",TH,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:fH});u.createIndex("documentKeyIndex",pH),u.createIndex("collectionGroupIndex",mH)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.si(e,o))),i<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:wH}).createIndex("sequenceNumberIndex",bH,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:EH}).createIndex("documentKeyIndex",CH,{unique:!1})}(e))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=xv(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>B.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>B.forEach(a,c=>{ye(c.userId===o.userId);let u=ac(this.serializer,c);return dO(e,o.userId,u).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let c=new rt(s),u=function(m){return[0,Qn(m)]}(c);o.push(n.get(u).next(h=>h?B.resolve():(m=>n.put({targetId:0,path:Qn(m),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>B.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:_H});let i=n.store("collectionParents"),r=new Qh,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return i.put({collectionId:a,parent:Qn(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new rt(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],u)=>{let h=Zr(a);return o(h.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=Mh(r),s=cO(this.serializer,o);return n.put(s)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(m){return m.document?new ce(rt.fromString(m.document.name).popFirst(5)):m.noDocument?ce.fromSegments(m.noDocument.path):m.unknownDocument?ce.fromSegments(m.unknownDocument.path):fe()}(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(u))}).next(()=>B.waitFor(r))}si(e,n){let i=n.store("mutations"),r=pO(this.serializer),o=new Pv(kv.Hr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(c=>{var u;let h=(u=a.get(c.userId))!==null&&u!==void 0?u:Oe();ac(this.serializer,c).keys().forEach(m=>h=h.add(m)),a.set(c.userId,h)}),B.forEach(a,(c,u)=>{let h=new on(u),m=Dv.lt(this.serializer,h),_=o.getIndexManager(h),w=Av.lt(h,this.serializer,_,o.referenceDelegate);return new Rv(r,w,m,_).recalculateAndSaveOverlaysForDocumentKeys(new Vh(n,Di.oe),c).next()})})}};function ZP(t){t.createObjectStore("targetDocuments",{keyPath:vH}).createIndex("documentTargetsIndex",yH,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gH,{unique:!0}),t.createObjectStore("targetGlobal")}var uE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wC=class t{constructor(e,n,i,r,o,s,a,c,u,h,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=s,this.document=a,this._i=u,this.ai=h,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=_=>Promise.resolve(),!t.D())throw new Y(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cC(this,r),this.Ti=n+"main",this.serializer=new Cv(c),this.Ei=new Gs(this.Ti,this.ui,new _C(this.serializer)),this.Qr=new rC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pO(this.serializer),this.$r=new QE,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,h===!1&&Xt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(z.FAILED_PRECONDITION,uE);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Di(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>N(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>N(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ev(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(na(e))return Z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return xh(e).get("owner").next(n=>B.resolve(this.Si(n)))}bi(e){return ev(e).delete(this.clientId)}Di(){return N(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=En(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return B.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?B.resolve(!0):xh(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Y(z.FAILED_PRECONDITION,uE);return!1}}return!(!this.networkEnabled||!this.inForeground)||ev(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Z("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Vh(e,Di.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ev(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Av.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iC(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Dv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){Z("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?xH:c===15?bk:c===14?wk:c===13?_k:c===12?SH:c===11?yk:void fe()}(this.ui),s;return this.Ei.runTransaction(e,r,o,a=>(s=new Vh(a,this.kr?this.kr.next():Di.oe),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Xt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Y(z.FAILED_PRECONDITION,pk);return i(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return xh(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y(z.FAILED_PRECONDITION,uE)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xh(e).put("owner",n)}static D(){return Gs.D()}yi(e){let n=xh(e);return n.get("owner").next(i=>this.Si(i)?(Z("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):B.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Xt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;nw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return Z("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Xt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Xt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function xh(t){return En(t,"owner")}function ev(t){return En(t,"clientMetadata")}function EI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var bC=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Oe(),r=Oe();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var EC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ov=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return nw()?8:mk(Ld())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new EC;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Yl()<=Or.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(Yl()<=Or.DEBUG&&Z("QueryEngine","Query:",Zl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Yl()<=Or.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):B.resolve())}ji(e,n){if(IP(n))return B.resolve(null);let i=Yn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=_v(n,null,"F"),i=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=Oe(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,_v(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,i,r){return IP(n)||r.isEqual(_e.min())?B.resolve(null):this.zi.getDocuments(e,i).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,i,r)?B.resolve(null):(Yl()<=Or.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zl(n)),this.es(e,s,n,hk(r,-1)).next(a=>a))})}Zi(e,n){let i=new Ct(Ok(e));return n.forEach((r,o)=>{cf(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return Yl()<=Or.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Zl(n)),this.zi.getDocumentsMatchingQuery(e,n,Gi.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var CC=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new St(Pe),this.rs=new ro(o=>mc(o),sf),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rv(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function mO(t,e,n,i){return new CC(t,e,n,i)}function gO(t,e){return N(this,null,function*(){let n=le(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=Oe();for(let u of r){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(i,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function aq(t,e){let n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){let m=u.batch,_=m.keys(),w=B.resolve();return _.forEach(S=>{w=w.next(()=>h.getEntry(c,S)).next(k=>{let R=u.docVersions.get(S);ye(R!==null),k.version.compareTo(R)<0&&(m.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=Oe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function vO(t){let e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function cq(t,e){let n=le(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((h,m)=>{let _=r.get(m);if(!_)return;a.push(n.Qr.removeMatchingKeys(o,h.removedDocuments,m).next(()=>n.Qr.addMatchingKeys(o,h.addedDocuments,m)));let w=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(bn.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,i)),r=r.insert(m,w),function(k,R,q){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(_,w,h)&&a.push(n.Qr.updateTargetData(o,w))});let c=fi(),u=Oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(yO(o,s,e.documentUpdates).next(h=>{c=h.cs,u=h.ls})),!i.isEqual(_e.min())){let h=n.Qr.getLastRemoteSnapshotVersion(o).next(m=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(h)}return B.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=r,o))}function yO(t,e,n){let i=Oe(),r=Oe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=fi();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(_e.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:r}})}function lq(t,e){let n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function pu(t,e){let n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,B.resolve(r)):n.Qr.allocateTargetId(i).next(s=>(r=new hu(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function mu(t,e,n){return N(this,null,function*(){let i=le(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!na(s))throw s;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function Nv(t,e,n){let i=le(t),r=_e.min(),o=Oe();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,h){let m=le(c),_=m.rs.get(h);return _!==void 0?B.resolve(m.ns.get(_)):m.Qr.getTargetData(u,h)}(i,s,Yn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.ts.getDocumentsMatchingQuery(s,e,n?r:_e.min(),n?o:Oe())).next(a=>(bO(i,kk(e),a),{documents:a,hs:o})))}function _O(t,e){let n=le(t),i=le(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(s=>s?s.target:null))}function wO(t,e){let n=le(t),i=n.ss.get(e)||_e.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,hk(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(bO(n,e,r),r))}function bO(t,e,n){let i=t.ss.get(e)||_e.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function uq(t,e,n,i){return N(this,null,function*(){let r=le(t),o=Oe(),s=fi();for(let u of n){let h=e.Ps(u.metadata.name);u.document&&(o=o.add(h));let m=e.Is(u);m.setReadTime(e.Ts(u.metadata.readTime)),s=s.insert(h,m)}let a=r.os.newChangeBuffer({trackRemovals:!0}),c=yield pu(r,function(h){return Yn(Cu(rt.fromString(`__bundle__/docs/${h}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>yO(u,a,s).next(h=>(a.apply(u),h)).next(h=>r.Qr.removeMatchingKeysForTargetId(u,c.targetId).next(()=>r.Qr.addMatchingKeys(u,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,h.cs,h.ls)).next(()=>h.cs)))})}function dq(i,r){return N(this,arguments,function*(t,e,n=Oe()){let o=yield pu(t,Yn(wI(e.bundledQuery))),s=le(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=en(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let u=o.withResumeToken(bn.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(u.targetId,u),s.Qr.updateTargetData(a,u).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function XP(t,e){return`firestore_clients_${t}_${e}`}function JP(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function dE(t,e){return`firestore_targets_${t}_${e}`}var Fv=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new Y(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(Xt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Oh=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new Y(i.error.code,i.error.message))),o?new t(e,i.state,r):(Xt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Lv=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=yI();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=gk(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(Xt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},IC=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Xt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Zh=class{constructor(){this.activeTargetIds=yI()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Nh=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new St(Pe),this.started=!1,this.ys=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=XP(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Zh),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(XP(this.persistenceKey,i));if(r){let o=Lv.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(dE(this.persistenceKey,e));if(i){let r=Oh.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dE(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return Z("SharedClientState","READ",e,n),n}setItem(e,n){Z("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(Z("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Xt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let s=Di.oe;if(o!=null)try{let a=JSON.parse(o);ye(typeof a=="number"),s=a}catch(a){Xt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==Di.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new Fv(this.currentUser,e,n,i),o=JP(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=JP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=dE(this.persistenceKey,e),o=new Oh(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return Lv.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Fv.Es(new on(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return Oh.Es(r,n)}xs(e){return IC.Es(e)}Js(e){return JSON.parse(e)}zs(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=yI();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},Vv=class{constructor(){this.no=new Zh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Zh,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var DC=class{io(e){}shutdown(){}};var jv=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tv=null;function hE(){return tv===null?tv=function(){return 268435456+Math.round(2147483648*Math.random())}():tv++,"0x"+tv.toString(16)}var hq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var TC=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Fn="WebChannelConnection",SC=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,s){let a=hE(),c=this.vo(n,i.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,o,s),this.Mo(n,c,u,r).then(h=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw qi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",r),h})}xo(n,i,r,o,s,a){return this.Co(n,i,r,o,s)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}vo(n,i){let r=hq[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=hE();return new Promise((s,a)=>{let c=new iE;c.setWithCredentials(!0),c.listenOnce(oE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ih.NO_ERROR:let h=c.getResponseJson();Z(Fn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ih.TIMEOUT:Z(Fn,`RPC '${e}' ${o} timed out`),a(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:let m=c.getStatus();if(Z(Fn,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);let w=_?.error;if(w&&w.status&&w.message){let S=function(R){let q=R.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(q)>=0?q:z.UNKNOWN}(w.status);a(new Y(S,w.message))}else a(new Y(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Y(z.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{Z(Fn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(r);Z(Fn,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",u,i,15)})}Oo(e,n,i){let r=hE(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cE(),a=aE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new rE({})),this.Fo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let h=o.join("");Z(Fn,`Creating RPC '${e}' stream ${r}: ${h}`,c);let m=s.createWebChannel(h,c),_=!1,w=!1,S=new TC({lo:R=>{w?Z(Fn,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(_||(Z(Fn,`Opening RPC '${e}' stream ${r} transport.`),m.open(),_=!0),Z(Fn,`RPC '${e}' stream ${r} sending:`,R),m.send(R))},ho:()=>m.close()}),k=(R,q,ne)=>{R.listen(q,W=>{try{ne(W)}catch(ee){setTimeout(()=>{throw ee},0)}})};return k(m,ql.EventType.OPEN,()=>{w||(Z(Fn,`RPC '${e}' stream ${r} transport opened.`),S.mo())}),k(m,ql.EventType.CLOSE,()=>{w||(w=!0,Z(Fn,`RPC '${e}' stream ${r} transport closed`),S.po())}),k(m,ql.EventType.ERROR,R=>{w||(w=!0,qi(Fn,`RPC '${e}' stream ${r} transport errored:`,R),S.po(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),k(m,ql.EventType.MESSAGE,R=>{var q;if(!w){let ne=R.data[0];ye(!!ne);let W=ne,ee=W.error||((q=W[0])===null||q===void 0?void 0:q.error);if(ee){Z(Fn,`RPC '${e}' stream ${r} received error:`,ee);let me=ee.status,de=function(x){let O=nn[x];if(O!==void 0)return Kk(O)}(me),A=ee.message;de===void 0&&(de=z.INTERNAL,A="Unknown error status: "+me+" with message "+ee.message),w=!0,S.po(new Y(de,A)),m.close()}else Z(Fn,`RPC '${e}' stream ${r} received:`,ne),S.yo(ne)}}),k(a,sE.STAT_EVENT,R=>{R.stat===Zg.PROXY?Z(Fn,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===Zg.NOPROXY&&Z(Fn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.fo()},0),S}};function EO(){return typeof window<"u"?window:null}function sv(){return typeof document<"u"?document:null}function lf(t){return new HE(t,!0)}var Xh=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&Z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Bv=class{constructor(e,n,i,r,o,s,a,c){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Xh(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return N(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return N(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return N(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Xt(n.toString()),Xt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new Y(z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>N(this,null,function*(){this.state=0,this.start()}))}c_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},xC=class extends Bv{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=YH(this.serializer,e),i=function(o){if(!("targetChange"in o))return _e.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?_e.min():s.readTime?en(s.readTime):_e.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=WE(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=vv(c)?{documents:nO(o,c)}:{query:iO(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Yk(o,s.resumeToken);let u=qE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(_e.min())>0){a.readTime=du(o,s.snapshotVersion.toTimestamp());let u=qE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let i=XH(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=WE(this.serializer),n.removeTarget=e,this.i_(n)}},AC=class extends Bv{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=ZH(e.writeResults,e.commitTime),i=en(e.commitTime);return this.listener.A_(i,n)}return ye(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=WE(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Kh(this.serializer,i))};this.i_(n)}};var MC=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,GE(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,GE(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(z.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},RC=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Xt(n),this.y_=!1):Z("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var PC=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{i.enqueueAndForget(()=>N(this,null,function*(){ia(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let u=le(c);u.M_.add(4),yield Iu(u),u.N_.set("Unknown"),u.M_.delete(4),yield uf(u)})}(this))}))}),this.N_=new RC(i,r)}};function uf(t){return N(this,null,function*(){if(ia(t))for(let e of t.x_)yield e(!0)})}function Iu(t){return N(this,null,function*(){for(let e of t.x_)yield e(!1)})}function oy(t,e){let n=le(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),DI(n)?II(n):Tu(n).Xo()&&CI(n,e))}function gu(t,e){let n=le(t),i=Tu(n);n.F_.delete(e),i.Xo()&&CO(n,e),n.F_.size===0&&(i.Xo()?i.n_():ia(n)&&n.N_.set("Unknown"))}function CI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Tu(t).P_(e)}function CO(t,e){t.L_.xe(e),Tu(t).I_(e)}function II(t){t.L_=new zE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Tu(t).start(),t.N_.w_()}function DI(t){return ia(t)&&!Tu(t).Zo()&&t.F_.size>0}function ia(t){return le(t).M_.size===0}function IO(t){t.L_=void 0}function fq(t){return N(this,null,function*(){t.N_.set("Online")})}function pq(t){return N(this,null,function*(){t.F_.forEach((e,n)=>{CI(t,e)})})}function mq(t,e){return N(this,null,function*(){IO(t),DI(t)?(t.N_.D_(e),II(t)):t.N_.set("Unknown")})}function gq(t,e,n){return N(this,null,function*(){if(t.N_.set("Online"),e instanceof bv&&e.state===2&&e.cause)try{yield function(r,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.F_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.F_.delete(a),r.L_.removeTarget(a))})}(t,e)}catch(i){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Uv(t,i)}else if(e instanceof ru?t.L_.Ke(e):e instanceof wv?t.L_.He(e):t.L_.We(e),!n.isEqual(_e.min()))try{let i=yield vO(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.F_.get(u);h&&o.F_.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.F_.get(c);if(!h)return;o.F_.set(c,h.withResumeToken(bn.EMPTY_BYTE_STRING,h.snapshotVersion)),CO(o,c);let m=new hu(h.target,c,u,h.sequenceNumber);CI(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){Z("RemoteStore","Failed to raise snapshot:",i),yield Uv(t,i)}})}function Uv(t,e,n){return N(this,null,function*(){if(!na(e))throw e;t.M_.add(1),yield Iu(t),t.N_.set("Offline"),n||(n=()=>vO(t.localStore)),t.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){Z("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield uf(t)}))})}function DO(t,e){return e().catch(n=>Uv(t,n,e))}function Du(t){return N(this,null,function*(){let e=le(t),n=ea(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;vq(e);)try{let r=yield lq(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,yq(e,r)}catch(r){yield Uv(e,r)}TO(e)&&SO(e)})}function vq(t){return ia(t)&&t.v_.length<10}function yq(t,e){t.v_.push(e);let n=ea(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function TO(t){return ia(t)&&!ea(t).Zo()&&t.v_.length>0}function SO(t){ea(t).start()}function _q(t){return N(this,null,function*(){ea(t).V_()})}function wq(t){return N(this,null,function*(){let e=ea(t);for(let n of t.v_)e.d_(n.mutations)})}function bq(t,e,n){return N(this,null,function*(){let i=t.v_.shift(),r=BE.from(i,e,n);yield DO(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Du(t)})}function Eq(t,e){return N(this,null,function*(){e&&ea(t).E_&&(yield function(i,r){return N(this,null,function*(){if(function(s){return Wk(s)&&s!==z.ABORTED}(r.code)){let o=i.v_.shift();ea(i).t_(),yield DO(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Du(i)}})}(t,e)),TO(t)&&SO(t)})}function ek(t,e){return N(this,null,function*(){let n=le(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");let i=ia(n);n.M_.add(3),yield Iu(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield uf(n)})}function kC(t,e){return N(this,null,function*(){let n=le(t);e?(n.M_.delete(2),yield uf(n)):e||(n.M_.add(2),yield Iu(n),n.N_.set("Unknown"))})}function Tu(t){return t.B_||(t.B_=function(n,i,r){let o=le(n);return o.f_(),new xC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:fq.bind(null,t),To:pq.bind(null,t),Ao:mq.bind(null,t),h_:gq.bind(null,t)}),t.x_.push(e=>N(this,null,function*(){e?(t.B_.t_(),DI(t)?II(t):t.N_.set("Unknown")):(yield t.B_.stop(),IO(t))}))),t.B_}function ea(t){return t.k_||(t.k_=function(n,i,r){let o=le(n);return o.f_(),new AC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:_q.bind(null,t),Ao:Eq.bind(null,t),R_:wq.bind(null,t),A_:bq.bind(null,t)}),t.x_.push(e=>N(this,null,function*(){e?(t.k_.t_(),yield Du(t)):(yield t.k_.stop(),t.v_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var OC=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,a=new t(e,n,s,r,o);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Su(t,e){if(Xt("AsyncQueue",`${e}: ${t}`),na(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}var $v=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ce.comparator(n.key,i.key):(n,i)=>ce.comparator(n.key,i.key),this.keyedMap=Ah(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var zv=class{constructor(){this.q_=new St(ce.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):fe():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},vu=class t{constructor(e,n,i,r,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,$v.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var NC=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},FC=class{constructor(){this.queries=new ro(e=>Pk(e),af),this.onlineState="Unknown",this.z_=new Set}};function TI(t,e){return N(this,null,function*(){let n=le(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new NC,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=Su(s,`Initialization of query '${Zl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&xI(n)})}function SI(t,e){return N(this,null,function*(){let n=le(t),i=e.query,r=3,o=n.queries.get(i);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function Cq(t,e){let n=le(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(r)&&(i=!0);s.K_=r}}i&&xI(n)}function Iq(t,e,n){let i=le(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function xI(t){t.z_.forEach(e=>{e.next()})}var LC,tk;(tk=LC||(LC={})).J_="default",tk.Cache="cache";var Jh=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new vu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==LC.Cache}};var VC=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Hv=class{constructor(e){this.serializer=e}Ps(e){return eo(this.serializer,e)}Is(e){return e.metadata.exists?tO(this.serializer,e.document,!1):an.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return en(e)}},jC=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xO(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=rt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new Hv(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||Oe()).add(o);n.set(s,a)}}return n}complete(){return N(this,null,function*(){let e=yield uq(this.localStore,new Hv(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield dq(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function xO(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var qv=class{constructor(e){this.key=e}},Gv=class{constructor(e){this.key=e}},Wv=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Oe(),this.mutatedKeys=Oe(),this.Ia=Ok(e),this.Ta=new $v(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new zv,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,m)=>{let _=r.get(h),w=cf(this.query,m)?m:null,S=!!_&&this.mutatedKeys.has(_.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),R=!1;_&&w?_.data.isEqual(w.data)?S!==k&&(i.track({type:3,doc:w}),R=!0):this.Ra(_,w)||(i.track({type:2,doc:w}),R=!0,(c&&this.Ia(w,c)>0||u&&this.Ia(w,u)<0)&&(a=!0)):!_&&w?(i.track({type:0,doc:w}),R=!0):_&&!w&&(i.track({type:1,doc:_}),R=!0,(c||u)&&(a=!0)),R&&(w?(s=s.add(w),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{Ta:s,Aa:i,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((h,m)=>function(w,S){let k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return k(w)-k(S)}(h.type,m.type)||this.Ia(h.doc,m.doc)),this.Va(i),r=r!=null&&r;let a=n&&!r?this.ma():[],c=this.Pa.size===0&&this.current&&!r?1:0,u=c!==this.ha;return this.ha=c,s.length!==0||u?{snapshot:new vu(this.query,e.Ta,o,s,e.mutatedKeys,c===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new zv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Oe(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new Gv(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new qv(i))}),n}pa(e){this.la=e.hs,this.Pa=Oe();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return vu.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},BC=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},UC=class{constructor(e){this.key=e,this.wa=!1}},$C=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new ro(a=>Pk(a),af),this.Da=new Map,this.Ca=new Set,this.va=new St(ce.comparator),this.Fa=new Map,this.Ma=new Yh,this.xa={},this.Oa=new Map,this.Na=fu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function Dq(t,e,n=!0){return N(this,null,function*(){let i=sy(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield AO(i,e,n,!0),r})}function Tq(t,e){return N(this,null,function*(){let n=sy(t);yield AO(n,e,!0,!1)})}function AO(t,e,n,i){return N(this,null,function*(){let r=yield pu(t.localStore,Yn(e)),o=r.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield AI(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&oy(t.remoteStore,r),a})}function AI(t,e,n,i,r){return N(this,null,function*(){t.Ba=(m,_,w)=>function(k,R,q,ne){return N(this,null,function*(){let W=R.view.da(q);W.Xi&&(W=yield Nv(k.localStore,R.query,!1).then(({documents:A})=>R.view.da(A,W)));let ee=ne&&ne.targetChanges.get(R.targetId),me=ne&&ne.targetMismatches.get(R.targetId)!=null,de=R.view.applyChanges(W,k.isPrimaryClient,ee,me);return zC(k,R.targetId,de.fa),de.snapshot})}(t,m,_,w);let o=yield Nv(t.localStore,e,!0),s=new Wv(e,o.hs),a=s.da(o.documents),c=Gh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=s.applyChanges(a,t.isPrimaryClient,c);zC(t,n,u.fa);let h=new BC(e,n,s);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function Sq(t,e,n){return N(this,null,function*(){let i=le(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(s=>!af(s,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield mu(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&gu(i.remoteStore,r.targetId),yu(i,r.targetId)}).catch(ta))):(yu(i,r.targetId),yield mu(i.localStore,r.targetId,!0))})}function xq(t,e){return N(this,null,function*(){let n=le(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),gu(n.remoteStore,i.targetId))})}function Aq(t,e,n){return N(this,null,function*(){let i=kI(t);try{let r=yield function(s,a){let c=le(s),u=Ft.now(),h=a.reduce((w,S)=>w.add(S.key),Oe()),m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=fi(),k=Oe();return c.os.getEntries(w,h).next(R=>{S=R,S.forEach((q,ne)=>{ne.isValidDocument()||(k=k.add(q))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,S)).next(R=>{m=R;let q=[];for(let ne of a){let W=zH(ne,m.get(ne.key).overlayedDocument);W!=null&&q.push(new gr(ne.key,W,Dk(W.value.mapValue),Bt.exists(!0)))}return c.mutationQueue.addMutationBatch(w,u,q,a)}).next(R=>{_=R;let q=R.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(w,R.batchId,q)})}).then(()=>({batchId:_.batchId,changes:Fk(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let u=s.xa[s.currentUser.toKey()];u||(u=new St(Pe)),u=u.insert(a,c),s.xa[s.currentUser.toKey()]=u}(i,r.batchId,n),yield Jo(i,r.changes),yield Du(i.remoteStore)}catch(r){let o=Su(r,"Failed to persist write");n.reject(o)}})}function MO(t,e){return N(this,null,function*(){let n=le(t);try{let i=yield cq(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.Fa.get(o);s&&(ye(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.wa=!0:r.modifiedDocuments.size>0?ye(s.wa):r.removedDocuments.size>0&&(ye(s.wa),s.wa=!1))}),yield Jo(n,i,e)}catch(i){yield ta(i)}})}function nk(t,e,n){let i=le(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=le(s);c.onlineState=a;let u=!1;c.queries.forEach((h,m)=>{for(let _ of m.U_)_.j_(a)&&(u=!0)}),u&&xI(c)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Mq(t,e,n){return N(this,null,function*(){let i=le(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let s=new St(ce.comparator);s=s.insert(o,an.newNoDocument(o,_e.min()));let a=Oe().add(o),c=new qh(_e.min(),new Map,new St(Pe),s,a);yield MO(i,c),i.va=i.va.remove(o),i.Fa.delete(e),PI(i)}else yield mu(i.localStore,e,!1).then(()=>yu(i,e,n)).catch(ta)})}function Rq(t,e){return N(this,null,function*(){let n=le(t),i=e.batch.batchId;try{let r=yield aq(n.localStore,e);RI(n,i,null),MI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Jo(n,r)}catch(r){yield ta(r)}})}function Pq(t,e,n){return N(this,null,function*(){let i=le(t);try{let r=yield function(s,a){let c=le(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(ye(m!==null),h=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(i.localStore,e);RI(i,e,n),MI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Jo(i,r)}catch(r){yield ta(r)}})}function kq(t,e){return N(this,null,function*(){let n=le(t);ia(n.remoteStore)||Z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=le(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=Su(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function MI(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function RI(t,e,n){let i=le(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function yu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||RO(t,i)})}function RO(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(gu(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),PI(t))}function zC(t,e,n){for(let i of n)i instanceof qv?(t.Ma.addReference(i.key,e),Oq(t,i)):i instanceof Gv?(Z("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||RO(t,i.key)):fe()}function Oq(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(Z("SyncEngine","New document in limbo: "+n),t.Ca.add(i),PI(t))}function PI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new ce(rt.fromString(e)),i=t.Na.next();t.Fa.set(i,new UC(n)),t.va=t.va.insert(n,i),oy(t.remoteStore,new hu(Yn(Cu(n.path)),i,"TargetPurposeLimboResolution",Di.oe))}}function Jo(t,e,n){return N(this,null,function*(){let i=le(t),r=[],o=[],s=[];i.ba.isEmpty()||(i.ba.forEach((a,c)=>{s.push(i.Ba(c,e,n).then(u=>{if((u||n)&&i.isPrimaryClient){let h=u&&!u.fromCache;i.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){r.push(u);let h=bC.Ki(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),i.Sa.h_(r),yield function(c,u){return N(this,null,function*(){let h=le(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(u,_=>B.forEach(_.qi,w=>h.persistence.referenceDelegate.addReference(m,_.targetId,w)).next(()=>B.forEach(_.Qi,w=>h.persistence.referenceDelegate.removeReference(m,_.targetId,w)))))}catch(m){if(!na(m))throw m;Z("LocalStore","Failed to update sequence numbers: "+m)}for(let m of u){let _=m.targetId;if(!m.fromCache){let w=h.ns.get(_),S=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(S);h.ns=h.ns.insert(_,k)}}})}(i.localStore,o))})}function Nq(t,e){return N(this,null,function*(){let n=le(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());let i=yield gO(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new Y(z.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Jo(n,i.us)}})}function Fq(t,e){let n=le(t),i=n.Fa.get(e);if(i&&i.wa)return Oe().add(i.key);{let r=Oe(),o=n.Da.get(e);if(!o)return r;for(let s of o){let a=n.ba.get(s);r=r.unionWith(a.view.Ea)}return r}}function Lq(t,e){return N(this,null,function*(){let n=le(t),i=yield Nv(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&zC(n,e.targetId,r.fa),r})}function Vq(t,e){return N(this,null,function*(){let n=le(t);return wO(n.localStore,e).then(i=>Jo(n,i))})}function jq(t,e,n,i){return N(this,null,function*(){let r=le(t),o=yield function(a,c){let u=le(a),h=le(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.vn(m,c).next(_=>_?u.localDocuments.getDocuments(m,_):B.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Du(r.remoteStore):n==="acknowledged"||n==="rejected"?(RI(r,e,i||null),MI(r,e),function(a,c){le(le(a).mutationQueue).Mn(c)}(r.localStore,e)):fe(),yield Jo(r,o)):Z("SyncEngine","Cannot apply mutation batch with id: "+e)})}function Bq(t,e){return N(this,null,function*(){let n=le(t);if(sy(n),kI(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield ik(n,i.toArray());n.La=!0,yield kC(n.remoteStore,!0);for(let o of r)oy(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(yu(n,s),mu(n.localStore,s,!0))),gu(n.remoteStore,s)}),yield r,yield ik(n,i),function(s){let a=le(s);a.Fa.forEach((c,u)=>{gu(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new St(ce.comparator)}(n),n.La=!1,yield kC(n.remoteStore,!1)}})}function ik(t,e,n){return N(this,null,function*(){let i=le(t),r=[],o=[];for(let s of e){let a,c=i.Da.get(s);if(c&&c.length!==0){a=yield pu(i.localStore,Yn(c[0]));for(let u of c){let h=i.ba.get(u),m=yield Lq(i,h);m.snapshot&&o.push(m.snapshot)}}else{let u=yield _O(i.localStore,s);a=yield pu(i.localStore,u),yield AI(i,PO(u),s,!1,a.resumeToken)}r.push(a)}return i.Sa.h_(o),r})}function PO(t){return Rk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Uq(t){return function(n){return le(le(n).persistence).Bi()}(le(t).localStore)}function $q(t,e,n,i){return N(this,null,function*(){let r=le(t);if(r.La)return void Z("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield wO(r.localStore,kk(o[0])),a=qh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",bn.EMPTY_BYTE_STRING);yield Jo(r,s,a);break}case"rejected":yield mu(r.localStore,e,!0),yu(r,e,i);break;default:fe()}})}function zq(t,e,n){return N(this,null,function*(){let i=sy(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Z("SyncEngine","Adding an already active target "+r);continue}let o=yield _O(i.localStore,r),s=yield pu(i.localStore,o);yield AI(i,PO(o),s.targetId,!1,s.resumeToken),oy(i.remoteStore,s)}for(let r of n)i.Da.has(r)&&(yield mu(i.localStore,r,!1).then(()=>{gu(i.remoteStore,r),yu(i,r)}).catch(ta))}})}function sy(t){let e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mq.bind(null,e),e.Sa.h_=Cq.bind(null,e.eventManager),e.Sa.ka=Iq.bind(null,e.eventManager),e}function kI(t){let e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pq.bind(null,e),e}function Hq(t,e,n){let i=le(t);(function(o,s,a){return N(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(w,S){let k=le(w),R=en(S.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",q=>k.$r.getBundleMetadata(q,S.id)).then(q=>!!q&&q.createTime.compareTo(R)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(xO(c));let u=new jC(c,o.localStore,s.serializer),h=yield s.qa();for(;h;){let _=yield u._a(h);_&&a._updateProgress(_),h=yield s.qa()}let m=yield u.complete();return yield Jo(o,m.ca,void 0),yield function(w,S){let k=le(w);return k.persistence.runTransaction("Save bundle","readwrite",R=>k.$r.saveBundleMetadata(R,S))}(o.localStore,c),a._completeWith(m.progress),Promise.resolve(m.ua)}catch(c){return qi("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var ef=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return mO(this.persistence,new Ov,e.initialUser,this.serializer)}createPersistence(e){return new Pv(kv.Hr,this.serializer)}createSharedClientState(e){return new Vv}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Kv=class t extends ef{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield ew(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield kI(this.Qa.syncEngine),yield Du(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return mO(this.persistence,new Ov,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new sC(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new IE(n,this.persistence);return new CE(e.asyncQueue,i)}createPersistence(e){let n=EI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Hi.withCacheSize(this.cacheSizeBytes):Hi.DEFAULT;return new wC(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,EO(),sv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Vv}},HC=class t extends Kv{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield ew(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Nh&&(this.sharedClientState.syncEngine={Zs:jq.bind(null,n),Xs:$q.bind(null,n),eo:zq.bind(null,n),Bi:Uq.bind(null,n),Ys:Vq.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>N(this,null,function*(){yield Bq(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=EO();if(!Nh.D(n))throw new Y(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=EI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nh(n,e.asyncQueue,i,e.clientId,e.initialUser)}},tf=class{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nq.bind(null,this.syncEngine),yield kC(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new FC}()}createDatastore(e){let n=lf(e.databaseInfo.databaseId),i=function(o){return new SC(o)}(e.databaseInfo);return function(o,s,a,c){return new MC(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,a){return new PC(i,r,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>nk(this.syncEngine,n,0),function(){return jv.D()?new jv:new DC}())}createSyncEngine(e,n){return function(r,o,s,a,c,u,h){let m=new $C(r,o,s,a,c,u);return h&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e;yield function(i){return N(this,null,function*(){let r=le(i);Z("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Iu(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function rk(t,e=10240){let n=0;return{read(){return N(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var _u=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Xt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var qC=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new sn,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}qa(){return N(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return N(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new VC(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return N(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return N(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var GC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return N(this,null,function*(){let s=le(r),a={documents:o.map(m=>Wh(s.serializer,m))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,rt.emptyPath(),a,o.length),u=new Map;c.forEach(m=>{let _=QH(s.serializer,m);u.set(_.key.toString(),_)});let h=[];return o.forEach(m=>{let _=u.get(m.toString());ye(!!_),h.push(_)}),h})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Js(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=ce.fromPath(i);this.mutations.push(new $h(r,this.precondition(r)))}),yield function(i,r){return N(this,null,function*(){let o=le(i),s={writes:r.map(a=>Kh(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,rt.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw fe();n=_e.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new Y(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(_e.min())?Bt.exists(!1):Bt.updateTime(n):Bt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(_e.min()))throw new Y(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bt.updateTime(n)}return Bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var WC=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new Xh(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>N(this,null,function*(){let e=new GC(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!of(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Wk(n)}return!1}};var KC=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=on.UNAUTHENTICATED,this.clientId=lv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>N(this,null,function*(){Z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Su(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function av(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>N(this,null,function*(){i.isEqual(r)||(yield gO(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function QC(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield OI(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>ek(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>ek(e.remoteStore,r)),t._onlineComponents=e})}function kO(t){return t.name==="FirebaseError"?t.code===z.FAILED_PRECONDITION||t.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function OI(t){return N(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield av(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!kO(n))throw n;qi("Error using user provided cache. Falling back to memory cache: "+n),yield av(t,new ef)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),yield av(t,new ef);return t._offlineComponents})}function ay(t){return N(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),yield QC(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),yield QC(t,new tf))),t._onlineComponents})}function OO(t){return OI(t).then(e=>e.persistence)}function NI(t){return OI(t).then(e=>e.localStore)}function NO(t){return ay(t).then(e=>e.remoteStore)}function FI(t){return ay(t).then(e=>e.syncEngine)}function qq(t){return ay(t).then(e=>e.datastore)}function wu(t){return N(this,null,function*(){let e=yield ay(t),n=e.eventManager;return n.onListen=Dq.bind(null,e.syncEngine),n.onUnlisten=Sq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Tq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xq.bind(null,e.syncEngine),n})}function Gq(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield OO(t),n=yield NO(t);return e.setNetworkEnabled(!0),function(r){let o=le(r);return o.M_.delete(0),uf(o)}(n)}))}function Wq(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield OO(t),n=yield NO(t);return e.setNetworkEnabled(!1),function(r){return N(this,null,function*(){let o=le(r);o.M_.add(0),yield Iu(o),o.N_.set("Offline")})}(n)}))}function Kq(t,e){let n=new sn;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o,s){return N(this,null,function*(){try{let a=yield function(u,h){let m=le(u);return m.persistence.runTransaction("read document","readonly",_=>m.localDocuments.getDocument(_,h))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new Y(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Su(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield NI(t),e,n)})),n.promise}function FO(t,e,n={}){let i=new sn;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,u){let h=new _u({next:_=>{s.enqueueAndForget(()=>SI(o,m));let w=_.docs.has(a);!w&&_.fromCache?u.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&_.fromCache&&c&&c.source==="server"?u.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new Jh(Cu(a.path),h,{includeMetadataChanges:!0,ra:!0});return TI(o,m)}(yield wu(t),t.asyncQueue,e,n,i)})),i.promise}function Qq(t,e){let n=new sn;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o,s){return N(this,null,function*(){try{let a=yield Nv(r,o,!0),c=new Wv(o,a.hs),u=c.da(a.documents),h=c.applyChanges(u,!1);s.resolve(h.snapshot)}catch(a){let c=Su(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield NI(t),e,n)})),n.promise}function LO(t,e,n={}){let i=new sn;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,u){let h=new _u({next:_=>{s.enqueueAndForget(()=>SI(o,m)),_.fromCache&&c.source==="server"?u.reject(new Y(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new Jh(a,h,{includeMetadataChanges:!0,ra:!0});return TI(o,m)}(yield wu(t),t.asyncQueue,e,n,i)})),i.promise}function Yq(t,e){let n=new _u(e);return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o){le(r).z_.add(o),o.next()}(yield wu(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o){le(r).z_.delete(o)}(yield wu(t),n)}))}}function Zq(t,e,n,i){let r=function(s,a){let c;return c=typeof s=="string"?Qk().encode(s):s,function(h,m){return new qC(h,m)}(function(h,m){if(h instanceof Uint8Array)return rk(h,m);if(h instanceof ArrayBuffer)return rk(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,lf(e));t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){Hq(yield FI(t),r,i)}))}function Xq(t,e){return t.asyncQueue.enqueue(()=>N(this,null,function*(){return function(i,r){let o=le(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield NI(t),e)}))}function VO(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ok=new Map;function LI(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VI(t,e,n,i){if(e===!0&&i===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sk(t){if(!ce.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ak(t){if(ce.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=cy(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jO(t,e){if(e<=0)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Qv=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VO((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_c=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new fE;switch(i.type){case"firstParty":return new vE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=ok.get(n);i&&(Z("ComponentProvider","Removing Datastore"),ok.delete(n),i.terminate())}(this),Promise.resolve()}};function ly(t,e,n,i={}){var r;let o=(t=ot(t,_c))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=on.MOCK_USER;else{a=nm(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Y(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new on(u)}t._authCredentials=new pE(new cv(a,c))}}var Dn=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Dt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new to(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},to=class t extends Dn{constructor(e,n,i){super(e,n,Cu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new ce(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function uy(t,e,...n){if(t=st(t),LI("collection","path",e),t instanceof _c){let i=rt.fromString(e,...n);return ak(i),new to(t,null,i)}{if(!(t instanceof Dt||t instanceof to))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(rt.fromString(e,...n));return ak(i),new to(t.firestore,null,i)}}function jI(t,e){if(t=ot(t,_c),LI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dn(t,null,function(i){return new mr(rt.emptyPath(),i)}(e))}function xu(t,e,...n){if(t=st(t),arguments.length===1&&(e=lv.newId()),LI("doc","path",e),t instanceof _c){let i=rt.fromString(e,...n);return sk(i),new Dt(t,null,new ce(i))}{if(!(t instanceof Dt||t instanceof to))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(rt.fromString(e,...n));return sk(i),new Dt(t.firestore,t instanceof to?t.converter:null,new ce(i))}}function dy(t,e){return t=st(t),e=st(e),(t instanceof Dt||t instanceof to)&&(e instanceof Dt||e instanceof to)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function hy(t,e){return t=st(t),e=st(e),t instanceof Dn&&e instanceof Dn&&t.firestore===e.firestore&&af(t._query,e._query)&&t.converter===e.converter}var YC=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Xh(this,"async_queue_retry"),this.hu=()=>{let n=sv();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=sv();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=sv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new sn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return N(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!na(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw Xt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=OC.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&fe()}verifyOperationInProgress(){}du(){return N(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function ZC(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var XC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var BO=-1,Rt=class extends _c{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new YC}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$O(this),this._firestoreClient.terminate()}};function UO(t,e){let n=typeof t=="object"?t:ys(),i=typeof t=="string"?t:e||"(default)",r=Vd(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=tm("firestore");o&&ly(r,...o)}return r}function mn(t){return t._firestoreClient||$O(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $O(t){var e,n,i;let r=t._freezeSettings(),o=function(a,c,u,h){return new DE(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,VO(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new KC(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function BI(t,e){HO(t=ot(t,Rt));let n=mn(t);if(n._uninitializedComponentsProvider)throw new Y(z.FAILED_PRECONDITION,"SDK cache is already specified.");qi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new tf;return zO(n,r,new Kv(r,i.cacheSizeBytes,e?.forceOwnership))}function UI(t){HO(t=ot(t,Rt));let e=mn(t);if(e._uninitializedComponentsProvider)throw new Y(z.FAILED_PRECONDITION,"SDK cache is already specified.");qi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new tf;return zO(e,i,new HC(i,n.cacheSizeBytes))}function zO(t,e,n){let i=new sn;return t.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield av(t,n),yield QC(t,e),i.resolve()}catch(r){let o=r;if(!kO(o))throw o;qi("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function $I(t){if(t._initialized&&!t._terminated)throw new Y(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new sn;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(i){return N(this,null,function*(){if(!Gs.D())return Promise.resolve();let r=i+"main";yield Gs.delete(r)})}(EI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function zI(t){return function(n){let i=new sn;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return kq(yield FI(n),i)})),i.promise}(mn(t=ot(t,Rt)))}function HI(t){return Gq(mn(t=ot(t,Rt)))}function qI(t){return Wq(mn(t=ot(t,Rt)))}function GI(t,e){let n=mn(t=ot(t,Rt)),i=new XC;return Zq(n,t._databaseId,e,i),i}function WI(t,e){return Xq(mn(t=ot(t,Rt)),e).then(n=>n?new Dn(t,null,n.query):null)}function HO(t){if(t._initialized||t._terminated)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var oo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(bn.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zo=class{constructor(e){this._methodName=e}};var wc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}};var Jq=/^__.*__$/,JC=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xs(e,this.data,n,this.fieldTransforms)}},Yv=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function qO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}var Zv=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Xv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(qO(this.fu)&&Jq.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},eI=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||lf(e)}Fu(e,n,i,r=!1){return new Zv({fu:e,methodName:n,vu:i,path:Jt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ic(t){let e=t._freezeSettings(),n=lf(t._databaseId);return new eI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fy(t,e,n,i,r,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);YI("Data must be an object, but it was:",s,i);let a=KO(i,s),c,u;if(o.merge)c=new Ti(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let m of o.mergeFields){let _=oI(e,m,n);if(!s.contains(_))throw new Y(z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);YO(h,_)||h.push(_)}c=new Ti(h),u=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=s.fieldTransforms;return new JC(new Ln(a),c,u)}var nf=class t extends Zo{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function GO(t,e,n){return new Zv({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var tI=class t extends Zo{_toFieldTransform(e){return new gc(e.path,new Ys)}isEqual(e){return e instanceof t}},nI=class t extends Zo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=GO(this,e,!0),i=this.Mu.map(o=>Dc(o,n)),r=new Qo(i);return new gc(e.path,r)}isEqual(e){return e instanceof t&&iw(this.Mu,e.Mu)}},iI=class t extends Zo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=GO(this,e,!0),i=this.Mu.map(o=>Dc(o,n)),r=new Yo(i);return new gc(e.path,r)}isEqual(e){return e instanceof t&&iw(this.Mu,e.Mu)}},rI=class t extends Zo{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Zs(e.serializer,Bk(e.serializer,this.xu));return new gc(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function KI(t,e,n,i){let r=t.Fu(1,e,n);YI("Data must be an object, but it was:",r,i);let o=[],s=Ln.empty();Cc(i,(c,u)=>{let h=ZI(e,c,n);u=st(u);let m=r.Su(h);if(u instanceof nf)o.push(h);else{let _=Dc(u,m);_!=null&&(o.push(h),s.set(h,_))}});let a=new Ti(o);return new Yv(s,a,r.fieldTransforms)}function QI(t,e,n,i,r,o){let s=t.Fu(1,e,n),a=[oI(e,i,n)],c=[r];if(o.length%2!=0)throw new Y(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(oI(e,o[_])),c.push(o[_+1]);let u=[],h=Ln.empty();for(let _=a.length-1;_>=0;--_)if(!YO(u,a[_])){let w=a[_],S=c[_];S=st(S);let k=s.Su(w);if(S instanceof nf)u.push(w);else{let R=Dc(S,k);R!=null&&(u.push(w),h.set(w,R))}}let m=new Ti(u);return new Yv(h,m,s.fieldTransforms)}function WO(t,e,n,i=!1){return Dc(n,t.Fu(i?4:3,e))}function Dc(t,e){if(QO(t=st(t)))return YI("Unsupported field value:",e,t),KO(t,e);if(t instanceof Zo)return function(i,r){if(!qO(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=Dc(a,r.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=st(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Bk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Ft.fromDate(i);return{timestampValue:du(r.serializer,o)}}if(i instanceof Ft){let o=new Ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:du(r.serializer,o)}}if(i instanceof wc)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oo)return{bytesValue:Yk(r.serializer,i._byteString)};if(i instanceof Dt){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_I(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${cy(i)}`)}(t,e)}function KO(t,e){let n={};return Ek(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cc(t,(i,r)=>{let o=Dc(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function QO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof wc||t instanceof oo||t instanceof Dt||t instanceof Zo)}function YI(t,e,n){if(!QO(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=cy(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function oI(t,e,n){if((e=st(e))instanceof vr)return e._internalPath;if(typeof e=="string")return ZI(t,e);throw Xv("Field path arguments must be of type string or ",t,!1,void 0,n)}var e6=new RegExp("[~\\*/\\[\\]]");function ZI(t,e,n){if(e.search(e6)>=0)throw Xv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vr(...e.split("."))._internalPath}catch{throw Xv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xv(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new Y(z.INVALID_ARGUMENT,a+t+c)}function YO(t,e){return t.some(n=>n.isEqual(e))}var bc=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new sI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(py("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},sI=class extends bc{data(){return super.data()}};function py(t,e){return typeof e=="string"?ZI(t,e):e instanceof vr?e._internalPath:e._delegate._internalPath}function ZO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rf=class{},Ec=class extends rf{};function so(t,e,...n){let i=[];e instanceof rf&&i.push(e),i=i.concat(n),function(o){let s=o.filter(c=>c instanceof aI).length,a=o.filter(c=>c instanceof Jv).length;if(s>1||s>0&&a>0)throw new Y(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Jv=class t extends Ec{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return JO(e._query,n),new Dn(e.firestore,e.converter,VE(e._query,n))}_parse(e){let n=Ic(e.firestore);return function(o,s,a,c,u,h,m){let _;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){lk(m,h);let w=[];for(let S of m)w.push(ck(c,o,S));_={arrayValue:{values:w}}}else _=ck(c,o,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||lk(m,h),_=WO(a,s,m,h==="in"||h==="not-in");return Xe.create(u,h,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function XI(t,e,n){let i=e,r=py("where",t);return Jv._create(r,i,n)}var aI=class t extends rf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:vt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)JO(s,c),s=VE(s,c)}(e._query,n),new Dn(e.firestore,e.converter,VE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var cI=class t extends Ec{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new Y(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Y(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(o,s)}(e._query,this._field,this._direction);return new Dn(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new mr(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function JI(t,e="asc"){let n=e,i=py("orderBy",t);return cI._create(i,n)}var ey=class t extends Ec{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Dn(e.firestore,e.converter,_v(e._query,this._limit,this._limitType))}};function eD(t){return jO("limit",t),ey._create("limit",t,"F")}function tD(t){return jO("limitToLast",t),ey._create("limitToLast",t,"L")}var ty=class t extends Ec{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=XO(e,this.type,this._docOrFields,this._inclusive);return new Dn(e.firestore,e.converter,function(r,o){return new mr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function nD(...t){return ty._create("startAt",t,!0)}function iD(...t){return ty._create("startAfter",t,!1)}var ny=class t extends Ec{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=XO(e,this.type,this._docOrFields,this._inclusive);return new Dn(e.firestore,e.converter,function(r,o){return new mr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function rD(...t){return ny._create("endBefore",t,!1)}function oD(...t){return ny._create("endAt",t,!0)}function XO(t,e,n,i){if(n[0]=st(n[0]),n[0]instanceof bc)return function(o,s,a,c,u){if(!c)throw new Y(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let m of iu(o))if(m.field.isKeyField())h.push(fc(s,c.key));else{let _=c.data.field(m.field);if(ry(_))throw new Y(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){let w=m.field.canonicalString();throw new Y(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}h.push(_)}return new io(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=Ic(t.firestore);return function(s,a,c,u,h,m){let _=s.explicitOrderBy;if(h.length>_.length)throw new Y(z.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let w=[];for(let S=0;S<h.length;S++){let k=h[S];if(_[S].field.isKeyField()){if(typeof k!="string")throw new Y(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof k}`);if(!vI(s)&&k.indexOf("/")!==-1)throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${k}' contains a slash.`);let R=s.path.child(rt.fromString(k));if(!ce.isDocumentKey(R))throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let q=new ce(R);w.push(fc(a,q))}else{let R=WO(c,u,k);w.push(R)}}return new io(w,m)}(t._query,t.firestore._databaseId,r,e,n,i)}}function ck(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new Y(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vI(e)&&n.indexOf("/")!==-1)throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(rt.fromString(n));if(!ce.isDocumentKey(i))throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return fc(t,new ce(i))}if(n instanceof Dt)return fc(t,n._key);throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cy(n)}.`)}function lk(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JO(t,e){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var bu=class{convertValue(e,n="none"){switch(hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Cc(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new wc(jt(e.latitude),jt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=mI(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(jh(e));default:return null}}convertTimestamp(e){let n=Ko(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=rt.fromString(e);ye(aO(i));let r=new Ks(i.get(1),i.get(3)),o=new ce(i.popFirst(5));return r.isEqual(n)||Xt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function my(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var lI=class extends bu{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}};var Wo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wi=class extends bc{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Hs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(py("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Hs=class extends Wi{data(e={}){return super.data(e)}},yr=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Wo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Hs(this._firestore,this._userDataWriter,i.key,i,new Wo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new Hs(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Wo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Hs(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Wo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:t6(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function t6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}function gy(t,e){return t instanceof Wi&&e instanceof Wi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof yr&&e instanceof yr&&t._firestore===e._firestore&&hy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function sD(t){t=ot(t,Dt);let e=ot(t.firestore,Rt);return FO(mn(e),t._key).then(n=>mD(e,t,n))}var Xo=class extends bu{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}};function aD(t){t=ot(t,Dt);let e=ot(t.firestore,Rt),n=mn(e),i=new Xo(e);return Kq(n,t._key).then(r=>new Wi(e,i,t._key,r,new Wo(r!==null&&r.hasLocalMutations,!0),t.converter))}function cD(t){t=ot(t,Dt);let e=ot(t.firestore,Rt);return FO(mn(e),t._key,{source:"server"}).then(n=>mD(e,t,n))}function lD(t){t=ot(t,Dn);let e=ot(t.firestore,Rt),n=mn(e),i=new Xo(e);return ZO(t._query),LO(n,t._query).then(r=>new yr(e,i,t,r))}function uD(t){t=ot(t,Dn);let e=ot(t.firestore,Rt),n=mn(e),i=new Xo(e);return Qq(n,t._query).then(r=>new yr(e,i,t,r))}function dD(t){t=ot(t,Dn);let e=ot(t.firestore,Rt),n=mn(e),i=new Xo(e);return LO(n,t._query,{source:"server"}).then(r=>new yr(e,i,t,r))}function vy(t,e,n){t=ot(t,Dt);let i=ot(t.firestore,Rt),r=my(t.converter,e,n);return Au(i,[fy(Ic(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Bt.none())])}function yy(t,e,n,...i){t=ot(t,Dt);let r=ot(t.firestore,Rt),o=Ic(r),s;return s=typeof(e=st(e))=="string"||e instanceof vr?QI(o,"updateDoc",t._key,e,n,i):KI(o,"updateDoc",t._key,e),Au(r,[s.toMutation(t._key,Bt.exists(!0))])}function hD(t){return Au(ot(t.firestore,Rt),[new Js(t._key,Bt.none())])}function fD(t,e){let n=ot(t.firestore,Rt),i=xu(t),r=my(t.converter,e);return Au(n,[fy(Ic(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Bt.exists(!1))]).then(()=>i)}function _y(t,...e){var n,i,r;t=st(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ZC(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ZC(e[s])){let m=e[s];e[s]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[s+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),e[s+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let c,u,h;if(t instanceof Dt)u=ot(t.firestore,Rt),h=Cu(t._key.path),c={next:m=>{e[s]&&e[s](mD(u,t,m))},error:e[s+1],complete:e[s+2]};else{let m=ot(t,Dn);u=ot(m.firestore,Rt),h=m._query;let _=new Xo(u);c={next:w=>{e[s]&&e[s](new yr(u,_,m,w))},error:e[s+1],complete:e[s+2]},ZO(t._query)}return function(_,w,S,k){let R=new _u(k),q=new Jh(w,R,S);return _.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return TI(yield wu(_),q)})),()=>{R.$a(),_.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return SI(yield wu(_),q)}))}}(mn(u),h,a,c)}function pD(t,e){return Yq(mn(t=ot(t,Rt)),ZC(e)?e:{next:e})}function Au(t,e){return function(i,r){let o=new sn;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Aq(yield FI(i),r,o)})),o.promise}(mn(t),e)}function mD(t,e,n){let i=n.docs.get(e._key),r=new Xo(t);return new Wi(t,r,e._key,i,new Wo(n.hasPendingWrites,n.fromCache),e.converter)}var n6={maxAttempts:5};var iy=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ic(e)}set(e,n,i){this._verifyNotCommitted();let r=$s(e,this._firestore),o=my(r.converter,n,i),s=fy(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Bt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=$s(e,this._firestore),s;return s=typeof(n=st(n))=="string"||n instanceof vr?QI(this._dataReader,"WriteBatch.update",o._key,n,i,r):KI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Bt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=$s(e,this._firestore);return this._mutations=this._mutations.concat(new Js(n._key,Bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $s(t,e){if((t=st(t)).firestore!==e)throw new Y(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var uI=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Ic(n)}get(n){let i=$s(n,this._firestore),r=new lI(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return fe();let s=o[0];if(s.isFoundDocument())return new bc(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new bc(this._firestore,r,i._key,null,i.converter);throw fe()})}set(n,i,r){let o=$s(n,this._firestore),s=my(o.converter,i,r),a=fy(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=$s(n,this._firestore),a;return a=typeof(i=st(i))=="string"||i instanceof vr?QI(this._dataReader,"Transaction.update",s._key,i,r,o):KI(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=$s(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=$s(e,this._firestore),i=new Xo(this._firestore);return super.get(e).then(r=>new Wi(this._firestore,i,n._key,r._document,new Wo(!1,!1),n.converter))}};function gD(t,e,n){t=ot(t,Rt);let i=Object.assign(Object.assign({},n6),n);return function(o){if(o.maxAttempts<1)throw new Y(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let c=new sn;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let u=yield qq(o);new WC(o.asyncQueue,u,a,s,c).Xa()})),c.promise}(mn(t),r=>e(new uI(t,r)),i)}function vD(){return new nf("deleteField")}function yD(){return new tI("serverTimestamp")}function _D(...t){return new nI("arrayUnion",t)}function wD(...t){return new iI("arrayRemove",t)}function bD(t){return new rI("increment",t)}(function(e,n=!0){(function(r){Eu=r})(sm),Oa(new ir("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new Rt(new mE(i.getProvider("auth-internal")),new _E(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ks(u.options.projectId,h)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gt(uP,"4.6.3",e),Gt(uP,"4.6.3","esm2017")})();var df=class{constructor(e){return e}},eN="firestore",ED=class{constructor(){return nc(eN)}};var CD=new X("angularfire2.firestore-instances");function i6(t,e){let n=Hl(eN,t,e);return n&&new df(n)}function r6(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new df(i)}}var o6={provide:ED,deps:[[new Zt,CD]]},s6={provide:df,useFactory:i6,deps:[[new Zt,CD],pr]};function tN(t,...e){return Gt("angularfire",zi.full,"fst"),Ci([s6,o6,{provide:CD,useFactory:r6(t),multi:!0,deps:[ge,yt,hi,Ho,[new Zt,ic],[new Zt,Kn],...e]}])}var nN=zo(UO,!0);var dN="firebasestorage.googleapis.com",hN="storageBucket",a6=2*60*1e3,c6=10*60*1e3,l6=1e3;var Lt=class t extends rm{constructor(e,n,i=0){super(ID(e),`Firebase Storage: ${n} (${ID(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ID(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Pt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Pt||{});function ID(t){return"storage/"+t}function PD(){let t="An unknown error occurred, please check the error payload for server response.";return new Lt(Pt.UNKNOWN,t)}function u6(t){return new Lt(Pt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function d6(t){return new Lt(Pt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function h6(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Lt(Pt.UNAUTHENTICATED,t)}function f6(){return new Lt(Pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function p6(t){return new Lt(Pt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fN(){return new Lt(Pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pN(){return new Lt(Pt.CANCELED,"User canceled the upload/download.")}function m6(t){return new Lt(Pt.INVALID_URL,"Invalid URL '"+t+"'.")}function g6(t){return new Lt(Pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function v6(){return new Lt(Pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hN+"' property when initializing the app?")}function mN(){return new Lt(Pt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function y6(){return new Lt(Pt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function _6(){return new Lt(Pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function w6(t){return new Lt(Pt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tc(t){return new Lt(Pt.INVALID_ARGUMENT,t)}function gN(){return new Lt(Pt.APP_DELETED,"The Firebase app was deleted.")}function kD(t){return new Lt(Pt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ff(t,e){return new Lt(Pt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function hf(t){throw new Lt(Pt.INTERNAL_ERROR,"Internal error: "+t)}var Zn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(i.path==="")return i;throw g6(e)}static makeFromUrl(e,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+r+s,"i"),c={bucket:1,path:3};function u(ee){ee.path_=decodeURIComponent(ee.path)}let h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",w=new RegExp(`^https?://${m}/${h}/b/${r}/o${_}`,"i"),S={bucket:1,path:3},k=n===dN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",q=new RegExp(`^https?://${k}/${r}/${R}`,"i"),W=[{regex:a,indices:c,postModify:o},{regex:w,indices:S,postModify:u},{regex:q,indices:{bucket:1,path:2},postModify:u}];for(let ee=0;ee<W.length;ee++){let me=W[ee],de=me.regex.exec(e);if(de){let A=de[me.indices.bucket],I=de[me.indices.path];I||(I=""),i=new t(A,I),me.postModify(i);break}}if(i==null)throw m6(e);return i}},TD=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function b6(t,e,n){let i=1,r=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function h(...R){u||(u=!0,e.apply(null,R))}function m(R){r=setTimeout(()=>{r=null,t(w,c())},R)}function _(){o&&clearTimeout(o)}function w(R,...q){if(u){_();return}if(R){_(),h.call(null,R,...q);return}if(c()||s){_(),h.call(null,R,...q);return}i<64&&(i*=2);let W;a===1?(a=2,W=0):W=(i+Math.random())*1e3,m(W)}let S=!1;function k(R){S||(S=!0,_(),!u&&(r!==null?(R||(a=2),clearTimeout(r),m(0)):R||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,k(!0)},n),k}function E6(t){t(!1)}function C6(t){return t!==void 0}function I6(t){return typeof t=="function"}function D6(t){return typeof t=="object"&&!Array.isArray(t)}function Ey(t){return typeof t=="string"||t instanceof String}function iN(t){return OD()&&t instanceof Blob}function OD(){return typeof Blob<"u"}function SD(t,e,n,i){if(i<e)throw Tc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Tc(`Invalid value for '${t}'. Expected ${n} or less.`)}function ra(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function vN(t){let e=encodeURIComponent,n="?";for(let i in t)if(t.hasOwnProperty(i)){let r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Pu=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Pu||{});function yN(t,e){let n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}var xD=class{constructor(e,n,i,r,o,s,a,c,u,h,m,_=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=m,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,S)=>{this.resolve_=w,this.reject_=S,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new Ru(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Pu.NO_ERROR,c=o.getStatus();if(!a||yN(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===Pu.ABORT;i(!1,new Ru(!1,null,h));return}let u=this.successCodes_.indexOf(c)!==-1;i(!0,new Ru(u,o))})},n=(i,r)=>{let o=this.resolve_,s=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());C6(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=PD();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(r.canceled){let c=this.appDelete_?gN():pN();s(c)}else{let c=fN();s(c)}};this.canceled_?n(!1,new Ru(!1,null,!0)):this.backoffId_=b6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ru=class{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}};function T6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function S6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function x6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function A6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function M6(t,e,n,i,r,o,s=!0){let a=vN(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return x6(u,e),T6(u,n),S6(u,o),A6(u,i),new xD(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,s)}function R6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function P6(...t){let e=R6();if(e!==void 0){let n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(OD())return new Blob(t);throw new Lt(Pt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function k6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function O6(t){if(typeof atob>"u")throw w6("base-64");return atob(t)}var Si={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},pf=class{constructor(e,n){this.data=e,this.contentType=n||null}};function ND(t,e){switch(t){case Si.RAW:return new pf(_N(e));case Si.BASE64:case Si.BASE64URL:return new pf(wN(t,e));case Si.DATA_URL:return new pf(F6(e),L6(e))}throw PD()}function _N(t){let e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=i,s=t.charCodeAt(++n);i=65536|(o&1023)<<10|s&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function N6(t){let e;try{e=decodeURIComponent(t)}catch{throw ff(Si.DATA_URL,"Malformed data URL.")}return _N(e)}function wN(t,e){switch(t){case Si.BASE64:{let r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw ff(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Si.BASE64URL:{let r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw ff(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=O6(e)}catch(r){throw r.message.includes("polyfill")?r:ff(t,"Invalid character found")}let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var by=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw ff(Si.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=n[1]||null;i!=null&&(this.base64=V6(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function F6(t){let e=new by(t);return e.base64?wN(Si.BASE64,e.rest):N6(e.rest)}function L6(t){return new by(t).contentType}function V6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var ku=class t{constructor(e,n){let i=0,r="";iN(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(iN(this.data_)){let i=this.data_,r=k6(i,e,n);return r===null?null:new t(r)}else{let i=new Uint8Array(this.data_.buffer,e,n-e);return new t(i,!0)}}static getBlob(...e){if(OD()){let n=e.map(i=>i instanceof t?i.data_:i);return new t(P6.apply(null,n))}else{let n=e.map(s=>Ey(s)?ND(Si.RAW,s).data:s.data_),i=0;n.forEach(s=>{i+=s.byteLength});let r=new Uint8Array(i),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)r[o++]=s[a]}),new t(r,!0)}}uploadData(){return this.data_}};function FD(t){let e;try{e=JSON.parse(t)}catch{return null}return D6(e)?e:null}function j6(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B6(t,e){let n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function bN(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function U6(t,e){return e}var Tn=class{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||U6}},wy=null;function $6(t){return!Ey(t)||t.length<2?t:bN(t)}function Cy(){if(wy)return wy;let t=[];t.push(new Tn("bucket")),t.push(new Tn("generation")),t.push(new Tn("metageneration")),t.push(new Tn("name","fullPath",!0));function e(o,s){return $6(s)}let n=new Tn("name");n.xform=e,t.push(n);function i(o,s){return s!==void 0?Number(s):s}let r=new Tn("size");return r.xform=i,t.push(r),t.push(new Tn("timeCreated")),t.push(new Tn("updated")),t.push(new Tn("md5Hash",null,!0)),t.push(new Tn("cacheControl",null,!0)),t.push(new Tn("contentDisposition",null,!0)),t.push(new Tn("contentEncoding",null,!0)),t.push(new Tn("contentLanguage",null,!0)),t.push(new Tn("contentType",null,!0)),t.push(new Tn("metadata","customMetadata",!0)),wy=t,wy}function z6(t,e){function n(){let i=t.bucket,r=t.fullPath,o=new Zn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function H6(t,e,n){let i={};i.type="file";let r=n.length;for(let o=0;o<r;o++){let s=n[o];i[s.local]=s.xform(i,e[s.server])}return z6(i,t),i}function EN(t,e,n){let i=FD(e);return i===null?null:H6(t,i,n)}function q6(t,e,n,i){let r=FD(e);if(r===null||!Ey(r.downloadTokens))return null;let o=r.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let h=t.bucket,m=t.fullPath,_="/b/"+s(h)+"/o/"+s(m),w=ra(_,n,i),S=vN({alt:"media",token:u});return w+S})[0]}function LD(t,e){let n={},i=e.length;for(let r=0;r<i;r++){let o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var rN="prefixes",oN="items";function G6(t,e,n){let i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[rN])for(let r of n[rN]){let o=r.replace(/\/$/,""),s=t._makeStorageReference(new Zn(e,o));i.prefixes.push(s)}if(n[oN])for(let r of n[oN]){let o=t._makeStorageReference(new Zn(e,r.name));i.items.push(o)}return i}function W6(t,e,n){let i=FD(n);return i===null?null:G6(t,e,i)}var _r=class{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function co(t){if(!t)throw PD()}function Iy(t,e){function n(i,r){let o=EN(t,r,e);return co(o!==null),o}return n}function K6(t,e){function n(i,r){let o=W6(t,e,r);return co(o!==null),o}return n}function Q6(t,e){function n(i,r){let o=EN(t,r,e);return co(o!==null),q6(o,r,t.host,t._protocol)}return n}function Fu(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=f6():r=h6():n.getStatus()===402?r=d6(t.bucket):n.getStatus()===403?r=p6(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Dy(t){let e=Fu(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=u6(t.path)),o.serverResponse=r.serverResponse,o}return n}function CN(t,e,n){let i=e.fullServerUrl(),r=ra(i,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new _r(r,o,Iy(t,n),s);return a.errorHandler=Dy(e),a}function Y6(t,e,n,i,r){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),i&&(o.pageToken=i),r&&(o.maxResults=r);let s=e.bucketOnlyServerUrl(),a=ra(s,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,h=new _r(a,c,K6(t,e.bucket),u);return h.urlParams=o,h.errorHandler=Fu(e),h}function Z6(t,e,n){let i=e.fullServerUrl(),r=ra(i,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new _r(r,o,Q6(t,n),s);return a.errorHandler=Dy(e),a}function X6(t,e,n,i){let r=e.fullServerUrl(),o=ra(r,t.host,t._protocol),s="PATCH",a=LD(n,i),c={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,h=new _r(o,s,Iy(t,i),u);return h.headers=c,h.body=a,h.errorHandler=Dy(e),h}function J6(t,e){let n=e.fullServerUrl(),i=ra(n,t.host,t._protocol),r="DELETE",o=t.maxOperationRetryTime;function s(c,u){}let a=new _r(i,r,s,o);return a.successCodes=[200,204],a.errorHandler=Dy(e),a}function e8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function IN(t,e,n){let i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=e8(null,e)),i}function t8(t,e,n,i,r){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let W="";for(let ee=0;ee<2;ee++)W=W+Math.random().toString().slice(2);return W}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=IN(e,i,r),h=LD(u,n),m="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,_=`\r
--`+c+"--",w=ku.getBlob(m,i,_);if(w===null)throw mN();let S={name:u.fullPath},k=ra(o,t.host,t._protocol),R="POST",q=t.maxUploadRetryTime,ne=new _r(k,R,Iy(t,n),q);return ne.urlParams=S,ne.headers=s,ne.body=w.uploadData(),ne.errorHandler=Fu(e),ne}var Ou=class{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}};function VD(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{co(!1)}return co(!!n&&(e||["active"]).indexOf(n)!==-1),n}function n8(t,e,n,i,r){let o=e.bucketOnlyServerUrl(),s=IN(e,i,r),a={name:s.fullPath},c=ra(o,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},m=LD(s,n),_=t.maxUploadRetryTime;function w(k){VD(k);let R;try{R=k.getResponseHeader("X-Goog-Upload-URL")}catch{co(!1)}return co(Ey(R)),R}let S=new _r(c,u,w,_);return S.urlParams=a,S.headers=h,S.body=m,S.errorHandler=Fu(e),S}function i8(t,e,n,i){let r={"X-Goog-Upload-Command":"query"};function o(u){let h=VD(u,["active","final"]),m=null;try{m=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{co(!1)}m||co(!1);let _=Number(m);return co(!isNaN(_)),new Ou(_,i.size(),h==="final")}let s="POST",a=t.maxUploadRetryTime,c=new _r(n,s,o,a);return c.headers=r,c.errorHandler=Fu(e),c}var sN=256*1024;function r8(t,e,n,i,r,o,s,a){let c=new Ou(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=i.size()),i.size()!==c.total)throw y6();let u=c.total-c.current,h=u;r>0&&(h=Math.min(h,r));let m=c.current,_=m+h,w="";h===0?w="finalize":u===h?w="upload, finalize":w="upload";let S={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${c.current}`},k=i.slice(m,_);if(k===null)throw mN();function R(ee,me){let de=VD(ee,["active","final"]),A=c.current+h,I=i.size(),x;return de==="final"?x=Iy(e,o)(ee,me):x=null,new Ou(A,I,de==="final",x)}let q="POST",ne=e.maxUploadRetryTime,W=new _r(n,q,R,ne);return W.headers=S,W.body=k.uploadData(),W.progressCallback=a||null,W.errorHandler=Fu(t),W}var DN={STATE_CHANGED:"state_changed"},Vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function DD(t){switch(t){case"running":case"pausing":case"canceling":return Vn.RUNNING;case"paused":return Vn.PAUSED;case"success":return Vn.SUCCESS;case"canceled":return Vn.CANCELED;case"error":return Vn.ERROR;default:return Vn.ERROR}}var AD=class{constructor(e,n,i){if(I6(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Mu(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var aN=null,MD=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw hf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(let o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},RD=class extends MD{initXhr(){this.xhr_.responseType="text"}};function ao(){return aN?aN():new RD}var mf=class{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Cy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Pt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(yN(r.status,[]))if(o)r=fN();else{this.sleepTime=Math.max(this.sleepTime*2,l6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Pt.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let i=n8(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ao,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,i)=>{let r=i8(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,ao,n,i);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=sN*this._chunkMultiplier,n=new Ou(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let s;try{s=r8(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,ao,r,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){sN*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let i=CN(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ao,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let i=t8(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ao,e,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=pN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=DD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){let o=new AD(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(DD(this._state)){case Vn.SUCCESS:Mu(this._resolve.bind(null,this.snapshot))();break;case Vn.CANCELED:case Vn.ERROR:let n=this._reject;Mu(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(DD(this._state)){case Vn.RUNNING:case Vn.PAUSED:e.next&&Mu(e.next.bind(e,this.snapshot))();break;case Vn.SUCCESS:e.complete&&Mu(e.complete.bind(e))();break;case Vn.CANCELED:case Vn.ERROR:e.error&&Mu(e.error.bind(e,this._error))();break;default:e.error&&Mu(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Nu=class t{constructor(e,n){this._service=e,n instanceof Zn?this._location=n:this._location=Zn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bN(this._location.path)}get storage(){return this._service}get parent(){let e=j6(this._location.path);if(e===null)return null;let n=new Zn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kD(e)}};function o8(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new mf(t,new ku(e),n)}function s8(t){let e={prefixes:[],items:[]};return TN(t,e).then(()=>e)}function TN(t,e,n){return N(this,null,function*(){let r=yield SN(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&(yield TN(t,e,r.nextPageToken))})}function SN(t,e){e!=null&&typeof e.maxResults=="number"&&SD("options.maxResults",1,1e3,e.maxResults);let n=e||{},i=Y6(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,ao)}function a8(t){t._throwIfRoot("getMetadata");let e=CN(t.storage,t._location,Cy());return t.storage.makeRequestWithTokens(e,ao)}function c8(t,e){t._throwIfRoot("updateMetadata");let n=X6(t.storage,t._location,e,Cy());return t.storage.makeRequestWithTokens(n,ao)}function l8(t){t._throwIfRoot("getDownloadURL");let e=Z6(t.storage,t._location,Cy());return t.storage.makeRequestWithTokens(e,ao).then(n=>{if(n===null)throw _6();return n})}function u8(t){t._throwIfRoot("deleteObject");let e=J6(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ao)}function xN(t,e){let n=B6(t._location.path,e),i=new Zn(t._location.bucket,n);return new Nu(t.storage,i)}function d8(t){return/^[A-Za-z]+:\/\//.test(t)}function h8(t,e){return new Nu(t,e)}function AN(t,e){if(t instanceof gf){let n=t;if(n._bucket==null)throw v6();let i=new Nu(n,n._bucket);return e!=null?AN(i,e):i}else return e!==void 0?xN(t,e):t}function f8(t,e){if(e&&d8(e)){if(t instanceof gf)return h8(t,e);throw Tc("To use ref(service, url), the first argument must be a Storage instance.")}else return AN(t,e)}function cN(t,e){let n=e?.[hN];return n==null?null:Zn.makeFromBucketSpec(n,t)}function p8(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:nm(r,t.app.options.projectId))}var gf=class{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=dN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a6,this._maxUploadRetryTime=c6,this._requests=new Set,r!=null?this._bucket=Zn.makeFromBucketSpec(r,this._host):this._bucket=cN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zn.makeFromBucketSpec(this._url,e):this._bucket=cN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){SD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){SD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return N(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return N(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nu(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new TD(gN());{let s=M6(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return N(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()})}},lN="@firebase/storage",uN="0.12.5";var MN="storage";function jD(t,e,n){return t=st(t),o8(t,e,n)}function BD(t){return t=st(t),a8(t)}function UD(t,e){return t=st(t),c8(t,e)}function $D(t,e){return t=st(t),SN(t,e)}function zD(t){return t=st(t),s8(t)}function HD(t){return t=st(t),l8(t)}function qD(t){return t=st(t),u8(t)}function Ty(t,e){return t=st(t),f8(t,e)}function RN(t,e){return xN(t,e)}function PN(t=ys(),e){t=st(t);let i=Vd(t,MN).getImmediate({identifier:e}),r=tm("storage");return r&&Sy(i,...r),i}function Sy(t,e,n,i={}){p8(t,e,n,i)}function m8(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new gf(n,i,r,e,sm)}function g8(){Oa(new ir(MN,m8,"PUBLIC").setMultipleInstances(!0)),Gt(lN,uN,""),Gt(lN,uN,"esm2017")}g8();var vf=class{constructor(e){return e}},kN="storage",GD=class{constructor(){return nc(kN)}};var WD=new X("angularfire2.storage-instances");function v8(t,e){let n=Hl(kN,t,e);return n&&new vf(n)}function y8(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new vf(i)}}var _8={provide:GD,deps:[[new Zt,WD]]},w8={provide:vf,useFactory:v8,deps:[[new Zt,WD],pr]};function ON(t,...e){return Gt("angularfire",zi.full,"gcs"),Ci([w8,_8,{provide:WD,useFactory:y8(t),multi:!0,deps:[ge,yt,hi,Ho,[new Zt,ic],[new Zt,Kn],...e]}])}var NN=zo(PN,!0);var Ve="primary",Of=Symbol("RouteTitle"),XD=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function $u(t){return new XD(t)}function b8(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function E8(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!lo(t[n],e[n]))return!1;return!0}function lo(t,e){let n=t?JD(t):void 0,i=e?JD(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!zN(t[r],e[r]))return!1;return!0}function JD(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function zN(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function HN(t){return t.length>0?t[t.length-1]:null}function aa(t){return xm(t)?t:Ps(t)?je(Promise.resolve(t)):ue(t)}var C8={exact:GN,subset:WN},qN={exact:I8,subset:D8,ignored:()=>!0};function FN(t,e,n){return C8[n.paths](t.root,e.root,n.matrixParams)&&qN[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function I8(t,e){return lo(t,e)}function GN(t,e,n){if(!xc(t.segments,e.segments)||!My(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!GN(t.children[i],e.children[i],n))return!1;return!0}function D8(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>zN(t[n],e[n]))}function WN(t,e,n){return KN(t,e,e.segments,n)}function KN(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!xc(r,n)||e.hasChildren()||!My(r,n,i))}else if(t.segments.length===n.length){if(!xc(t.segments,n)||!My(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!WN(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!xc(t.segments,r)||!My(t.segments,r,i)||!t.children[Ve]?!1:KN(t.children[Ve],e,o,i)}}function My(t,e,n){return e.every((i,r)=>qN[n](t[r].parameters,i.parameters))}var oa=class{constructor(e=new pt([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=$u(this.queryParams),this._queryParamMap}toString(){return x8.serialize(this)}},pt=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ry(this)}},Sc=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=$u(this.parameters),this._parameterMap}toString(){return YN(this)}};function T8(t,e){return xc(t,e)&&t.every((n,i)=>lo(n.parameters,e[i].parameters))}function xc(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function S8(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===Ve&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Ve&&(n=n.concat(e(r,i)))}),n}var DT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>new If,providedIn:"root"});let t=e;return t})(),If=class{parse(e){let n=new tT(e);return new oa(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${yf(e.root,!0)}`,i=R8(e.queryParams),r=typeof e.fragment=="string"?`#${A8(e.fragment)}`:"";return`${n}${i}${r}`}},x8=new If;function Ry(t){return t.segments.map(e=>YN(e)).join("/")}function yf(t,e){if(!t.hasChildren())return Ry(t);if(e){let n=t.children[Ve]?yf(t.children[Ve],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Ve&&i.push(`${r}:${yf(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=S8(t,(i,r)=>r===Ve?[yf(t.children[Ve],!1)]:[`${r}:${yf(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ve]!=null?`${Ry(t)}/${n[0]}`:`${Ry(t)}/(${n.join("//")})`}}function QN(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xy(t){return QN(t).replace(/%3B/gi,";")}function A8(t){return encodeURI(t)}function eT(t){return QN(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Py(t){return decodeURIComponent(t)}function LN(t){return Py(t.replace(/\+/g,"%20"))}function YN(t){return`${eT(t.path)}${M8(t.parameters)}`}function M8(t){return Object.entries(t).map(([e,n])=>`;${eT(e)}=${eT(n)}`).join("")}function R8(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${xy(n)}=${xy(r)}`).join("&"):`${xy(n)}=${xy(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var P8=/^[^\/()?;#]+/;function KD(t){let e=t.match(P8);return e?e[0]:""}var k8=/^[^\/()?;=#]+/;function O8(t){let e=t.match(k8);return e?e[0]:""}var N8=/^[^=?&#]+/;function F8(t){let e=t.match(N8);return e?e[0]:""}var L8=/^[^&#]+/;function V8(t){let e=t.match(L8);return e?e[0]:""}var tT=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pt([],{}):new pt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[Ve]=new pt(e,n)),i}parseSegment(){let e=KD(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ve(4009,!1);return this.capture(e),new Sc(Py(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=O8(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=KD(this.remaining);r&&(i=r,this.capture(i))}e[Py(n)]=Py(i)}parseQueryParam(e){let n=F8(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=V8(this.remaining);s&&(i=s,this.capture(i))}let r=LN(n),o=LN(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=KD(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ve(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ve);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Ve]:new pt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ve(4011,!1)}};function ZN(t){return t.segments.length>0?new pt([],{[Ve]:t}):t}function XN(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=XN(r);if(i===Ve&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new pt(t.segments,e);return j8(n)}function j8(t){if(t.numberOfChildren===1&&t.children[Ve]){let e=t.children[Ve];return new pt(t.segments.concat(e.segments),e.children)}return t}function Df(t){return t instanceof oa}function B8(t,e,n=null,i=null){let r=JN(t);return eF(r,e,n,i)}function JN(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new pt(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=ZN(i);return e??r}function eF(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return QD(r,r,r,n,i);let o=U8(e);if(o.toRoot())return QD(r,r,new pt([],{}),n,i);let s=$8(o,r,t),a=s.processChildren?bf(s.segmentGroup,s.index,o.commands):nF(s.segmentGroup,s.index,o.commands);return QD(r,s.segmentGroup,a,n,i)}function ky(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Tf(t){return typeof t=="object"&&t!=null&&t.outlets}function QD(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;t===e?s=n:s=tF(t,e,n);let a=ZN(XN(s));return new oa(a,o,r)}function tF(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=tF(o,e,n)}),new pt(t.segments,i)}var Oy=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&ky(i[0]))throw new ve(4003,!1);let r=i.find(Tf);if(r&&r!==HN(i))throw new ve(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function U8(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Oy(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Oy(n,e,i)}var ju=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function $8(t,e,n){if(t.isAbsolute)return new ju(e,!0,0);if(!n)return new ju(e,!1,NaN);if(n.parent===null)return new ju(n,!0,0);let i=ky(t.commands[0])?0:1,r=n.segments.length-1+i;return z8(n,r,t.numberOfDoubleDots)}function z8(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ve(4005,!1);r=i.segments.length}return new ju(i,!1,r-o)}function H8(t){return Tf(t[0])?t[0].outlets:{[Ve]:t}}function nF(t,e,n){if(t??=new pt([],{}),t.segments.length===0&&t.hasChildren())return bf(t,e,n);let i=q8(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new pt(t.segments.slice(0,i.pathIndex),{});return o.children[Ve]=new pt(t.segments.slice(i.pathIndex),t.children),bf(o,0,r)}else return i.match&&r.length===0?new pt(t.segments,{}):i.match&&!t.hasChildren()?nT(t,e,n):i.match?bf(t,0,r):nT(t,e,n)}function bf(t,e,n){if(n.length===0)return new pt(t.segments,{});{let i=H8(n),r={};if(Object.keys(i).some(o=>o!==Ve)&&t.children[Ve]&&t.numberOfChildren===1&&t.children[Ve].segments.length===0){let o=bf(t.children[Ve],e,n);return new pt(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=nF(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new pt(t.segments,r)}}function q8(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(Tf(a))break;let c=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!jN(c,u,s))return o;i+=2}else{if(!jN(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function nT(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(Tf(o)){let c=G8(o.outlets);return new pt(i,c)}if(r===0&&ky(n[0])){let c=t.segments[e];i.push(new Sc(c.path,VN(n[0]))),r++;continue}let s=Tf(o)?o.outlets[Ve]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&ky(a)?(i.push(new Sc(s,VN(a))),r+=2):(i.push(new Sc(s,{})),r++)}return new pt(i,{})}function G8(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=nT(new pt([],{}),0,i))}),e}function VN(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function jN(t,e,n){return t==n.path&&lo(e,n.parameters)}var Ef="imperative",Sn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Sn||{}),Ki=class{constructor(e,n){this.id=e,this.url=n}},Sf=class extends Ki{constructor(e,n,i="imperative",r=null){super(e,n),this.type=Sn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sa=class extends Ki{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=Sn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ai=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ai||{}),iT=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(iT||{}),es=class extends Ki{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Sn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ac=class extends Ki{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Sn.NavigationSkipped}},xf=class extends Ki{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=Sn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ny=class extends Ki{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Sn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rT=class extends Ki{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Sn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oT=class extends Ki{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Sn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sT=class extends Ki{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Sn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},aT=class extends Ki{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Sn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cT=class{constructor(e){this.route=e,this.type=Sn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},lT=class{constructor(e){this.route=e,this.type=Sn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uT=class{constructor(e){this.snapshot=e,this.type=Sn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dT=class{constructor(e){this.snapshot=e,this.type=Sn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hT=class{constructor(e){this.snapshot=e,this.type=Sn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fT=class{constructor(e){this.snapshot=e,this.type=Sn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Af=class{},zu=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var pT=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new $y(this.injector),this.attachRef=null}},$y=(()=>{let e=class e{constructor(i){this.parentInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new pT(this.parentInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(P(li))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fy=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=mT(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=mT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=gT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return gT(e,this._root).map(n=>n.value)}};function mT(t,e){if(t===e.value)return e;for(let n of e.children){let i=mT(t,n);if(i)return i}return null}function gT(t,e){if(t===e.value)return[e];for(let n of e.children){let i=gT(t,n);if(i.length)return i.unshift(e),i}return[]}var xi=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Vu(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ly=class extends Fy{constructor(e,n){super(e),this.snapshot=n,TT(this,e)}toString(){return this.snapshot.toString()}};function iF(t){let e=W8(t),n=new Wt([new Sc("",{})]),i=new Wt({}),r=new Wt({}),o=new Wt({}),s=new Wt(""),a=new ts(n,i,o,s,r,Ve,t,e.root);return a.snapshot=e.root,new Ly(new xi(a,[]),e)}function W8(t){let e={},n={},i={},r="",o=new Bu([],e,i,r,n,Ve,t,null,{});return new jy("",new xi(o,[]))}var ts=class{constructor(e,n,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(u=>u[Of]))??ue(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>$u(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>$u(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vy(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:K(K({},e.params),t.params),data:K(K({},e.data),t.data),resolve:K(K(K(K({},t.data),e.data),r?.data),t._resolvedData)}:i={params:K({},t.params),data:K({},t.data),resolve:K(K({},t.data),t._resolvedData??{})},r&&oF(r)&&(i.resolve[Of]=r.title),i}var Bu=class{get title(){return this.data?.[Of]}constructor(e,n,i,r,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$u(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$u(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},jy=class extends Fy{constructor(e,n){super(n),this.url=e,TT(this,n)}toString(){return rF(this._root)}};function TT(t,e){e.value._routerState=t,e.children.forEach(n=>TT(t,n))}function rF(t){let e=t.children.length>0?` { ${t.children.map(rF).join(", ")} } `:"";return`${t.value}${e}`}function YD(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,lo(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),lo(e.params,n.params)||t.paramsSubject.next(n.params),E8(e.url,n.url)||t.urlSubject.next(n.url),lo(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function vT(t,e){let n=lo(t.params,e.params)&&T8(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||vT(t.parent,e.parent))}function oF(t){return typeof t.title=="string"||t.title===null}var Nf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ve,this.activateEvents=new Ge,this.deactivateEvents=new Ge,this.attachEvents=new Ge,this.detachEvents=new Ge,this.parentContexts=te($y),this.location=te(Ui),this.changeDetector=te(Ii),this.inputBinder=te(ST,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ve(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ve(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ve(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ve(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new yT(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ze({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ui]});let t=e;return t})(),yT=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===ts?this.route:e===$y?this.childContexts:this.parent.get(e,n)}},ST=new X("");function K8(t,e,n){let i=Mf(t,e._root,n?n._root:void 0);return new Ly(i,e)}function Mf(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=Q8(t,e,n);return new xi(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Mf(t,a)),s}}let i=Y8(e.value),r=e.children.map(o=>Mf(t,o));return new xi(i,r)}}function Q8(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Mf(t,i,r);return Mf(t,i)})}function Y8(t){return new ts(new Wt(t.url),new Wt(t.params),new Wt(t.queryParams),new Wt(t.fragment),new Wt(t.data),t.outlet,t.component,t)}var Rf=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},sF="ngNavigationCancelingError";function By(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Df(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=aF(!1,Ai.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function aF(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[sF]=!0,n.cancellationCode=e,n}function Z8(t){return cF(t)&&Df(t.url)}function cF(t){return!!t&&t[sF]}var X8=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["ng-component"]],standalone:!0,features:[Me],decls:1,vars:0,template:function(r,o){r&1&&ae(0,"router-outlet")},dependencies:[Nf],encapsulation:2});let t=e;return t})();function J8(t,e){return t.providers&&!t._injector&&(t._injector=bb(t.providers,e,`Route: ${t.path}`)),t._injector??e}function xT(t){let e=t.children&&t.children.map(xT),n=e?be(K({},t),{children:e}):K({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ve&&(n.component=X8),n}function wr(t){return t.outlet||Ve}function e9(t,e){let n=t.filter(i=>wr(i)===e);return n.push(...t.filter(i=>wr(i)!==e)),n}function Ff(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var t9=(t,e,n,i)=>oe(r=>(new _T(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),_T=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),YD(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Vu(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Vu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Vu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Vu(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new fT(o.value.snapshot))}),e.children.length&&this.forwardEvent(new dT(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(YD(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),YD(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Ff(r.snapshot);s.attachRef=null,s.route=r,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},Uy=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Uu=class{constructor(e,n){this.component=e,this.route=n}};function n9(t,e,n){let i=t._root,r=e?e._root:null;return _f(i,r,n,[i.value])}function i9(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function qu(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!qA(t)?t:e.get(t):i}function _f(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vu(e);return t.children.forEach(s=>{r9(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Cf(a,n.getContext(s),r)),r}function r9(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=o9(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Uy(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_f(t,e,a?a.children:null,i,r):_f(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Uu(a.outlet.component,s))}else s&&Cf(e,a,r),r.canActivateChecks.push(new Uy(i)),o.component?_f(t,null,a?a.children:null,i,r):_f(t,null,n,i,r);return r}function o9(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!xc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xc(t.url,e.url)||!lo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vT(t,e)||!lo(t.queryParams,e.queryParams);case"paramsChange":default:return!vT(t,e)}}function Cf(t,e,n){let i=Vu(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Cf(s,e.children.getContext(o),n):Cf(s,null,n):Cf(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Uu(e.outlet.component,r)):n.canDeactivateChecks.push(new Uu(null,r)):n.canDeactivateChecks.push(new Uu(null,r))}function Lf(t){return typeof t=="function"}function s9(t){return typeof t=="boolean"}function a9(t){return t&&Lf(t.canLoad)}function c9(t){return t&&Lf(t.canActivate)}function l9(t){return t&&Lf(t.canActivateChild)}function u9(t){return t&&Lf(t.canDeactivate)}function d9(t){return t&&Lf(t.canMatch)}function lF(t){return t instanceof xo||t?.name==="EmptyError"}var Ay=Symbol("INITIAL_VALUE");function Hu(){return ct(t=>_l(t.map(e=>e.pipe(Qt(1),oi(Ay)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===Ay)return Ay;if(n===!1||h9(n))return n}return!0}),dt(e=>e!==Ay),Qt(1)))}function h9(t){return Df(t)||t instanceof Rf}function f9(t,e){return Kt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ue(be(K({},n),{guardsResult:!0})):p9(s,i,r,t).pipe(Kt(a=>a&&s9(a)?m9(i,o,t,e):ue(a)),oe(a=>be(K({},n),{guardsResult:a})))})}function p9(t,e,n,i){return je(t).pipe(Kt(r=>w9(r.component,r.route,n,e,i)),Fi(r=>r!==!0,!0))}function m9(t,e,n,i){return je(e).pipe(bs(r=>_s(v9(r.route.parent,i),g9(r.route,i),_9(t,r.path,n),y9(t,r.route,n))),Fi(r=>r!==!0,!0))}function g9(t,e){return t!==null&&e&&e(new hT(t)),ue(!0)}function v9(t,e){return t!==null&&e&&e(new uT(t)),ue(!0)}function y9(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ue(!0);let r=i.map(o=>ws(()=>{let s=Ff(e)??n,a=qu(o,s),c=c9(a)?a.canActivate(e,t):ur(s,()=>a(e,t));return aa(c).pipe(Fi())}));return ue(r).pipe(Hu())}function _9(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>i9(s)).filter(s=>s!==null).map(s=>ws(()=>{let a=s.guards.map(c=>{let u=Ff(s.node)??n,h=qu(c,u),m=l9(h)?h.canActivateChild(i,t):ur(u,()=>h(i,t));return aa(m).pipe(Fi())});return ue(a).pipe(Hu())}));return ue(o).pipe(Hu())}function w9(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ue(!0);let s=o.map(a=>{let c=Ff(e)??r,u=qu(a,c),h=u9(u)?u.canDeactivate(t,e,n,i):ur(c,()=>u(t,e,n,i));return aa(h).pipe(Fi())});return ue(s).pipe(Hu())}function b9(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return ue(!0);let o=r.map(s=>{let a=qu(s,t),c=a9(a)?a.canLoad(e,n):ur(t,()=>a(e,n));return aa(c)});return ue(o).pipe(Hu(),uF(i))}function uF(t){return ww(Mt(e=>{if(typeof e!="boolean")throw By(t,e)}),oe(e=>e===!0))}function E9(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return ue(!0);let o=r.map(s=>{let a=qu(s,t),c=d9(a)?a.canMatch(e,n):ur(t,()=>a(e,n));return aa(c)});return ue(o).pipe(Hu(),uF(i))}var Pf=class{constructor(e){this.segmentGroup=e||null}},kf=class extends Error{constructor(e){super(),this.urlTree=e}};function Lu(t){return vl(new Pf(t))}function C9(t){return vl(new ve(4e3,!1))}function I9(t){return vl(aF(!1,Ai.GuardRejected))}var wT=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ue(i);if(r.numberOfChildren>1||!r.children[Ve])return C9(`${e.redirectTo}`);r=r.children[Ve]}}applyRedirectCommands(e,n,i,r,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:u,routeConfig:h,url:m,outlet:_,params:w,data:S,title:k}=r,R=ur(o,()=>a({params:w,data:S,queryParams:c,fragment:u,routeConfig:h,url:m,outlet:_,title:k}));if(R instanceof oa)throw new kf(R);n=R}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n[0]==="/")throw new kf(s);return s}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new oa(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new pt(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new ve(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},bT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function D9(t,e,n,i,r){let o=AT(t,e,n);return o.matched?(i=J8(e,i),E9(i,e,n,r).pipe(oe(s=>s===!0?o:K({},bT)))):ue(o)}function AT(t,e,n){if(e.path==="**")return T9(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?K({},bT):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||b8)(n,t,e);if(!r)return K({},bT);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?K(K({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function T9(t){return{matched:!0,parameters:t.length>0?HN(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function BN(t,e,n,i){return n.length>0&&A9(t,n,i)?{segmentGroup:new pt(e,x9(i,new pt(n,t.children))),slicedSegments:[]}:n.length===0&&M9(t,n,i)?{segmentGroup:new pt(t.segments,S9(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new pt(t.segments,t.children),slicedSegments:n}}function S9(t,e,n,i){let r={};for(let o of n)if(zy(t,e,o)&&!i[wr(o)]){let s=new pt([],{});r[wr(o)]=s}return K(K({},i),r)}function x9(t,e){let n={};n[Ve]=e;for(let i of t)if(i.path===""&&wr(i)!==Ve){let r=new pt([],{});n[wr(i)]=r}return n}function A9(t,e,n){return n.some(i=>zy(t,e,i)&&wr(i)!==Ve)}function M9(t,e,n){return n.some(i=>zy(t,e,i))}function zy(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function R9(t,e,n,i){return wr(t)!==i&&(i===Ve||!zy(e,n,t))?!1:AT(e,t,n).matched}function P9(t,e,n){return e.length===0&&!t.children[n]}var ET=class{};function k9(t,e,n,i,r,o,s="emptyOnly"){return new CT(t,e,n,i,r,s,o).recognize()}var O9=31,CT=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new wT(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ve(4002,`'${e.segmentGroup}'`)}recognize(){let e=BN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:n,rootSnapshot:i})=>{let r=new xi(i,n),o=new jy("",r),s=B8(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Bu([],Object.freeze({}),Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ve,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ve,n).pipe(oe(i=>({children:i,rootSnapshot:n})),Hn(i=>{if(i instanceof kf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Pf?this.noMatchError(i):i}))}processSegmentGroup(e,n,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i,o):this.processSegment(e,n,i,i.segments,r,!0,o).pipe(oe(s=>s instanceof xi?[s]:[]))}processChildren(e,n,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return je(o).pipe(bs(s=>{let a=i.children[s],c=e9(n,s);return this.processSegmentGroup(e,c,a,s,r)}),ja((s,a)=>(s.push(...a),s)),Es(null),Aw(),Kt(s=>{if(s===null)return Lu(i);let a=dF(s);return N9(a),ue(a)}))}processSegment(e,n,i,r,o,s,a){return je(n).pipe(bs(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,i,r,o,s,a).pipe(Hn(u=>{if(u instanceof Pf)return ue(null);throw u}))),Fi(c=>!!c),Hn(c=>{if(lF(c))return P9(i,r,o)?ue(new ET):Lu(i);throw c}))}processSegmentAgainstRoute(e,n,i,r,o,s,a,c){return R9(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s,c):Lu(r):Lu(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:m,remainingSegments:_}=AT(n,r,o);if(!c)return Lu(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>O9&&(this.allowRedirects=!1));let w=new Bu(o,u,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,UN(r),wr(r),r.component??r._loadedComponent??null,r,$N(r)),S=Vy(w,a,this.paramsInheritanceStrategy);w.params=Object.freeze(S.params),w.data=Object.freeze(S.data);let k=this.applyRedirects.applyRedirectCommands(h,r.redirectTo,m,w,e);return this.applyRedirects.lineralizeSegments(r,k).pipe(Kt(R=>this.processSegment(e,i,n,R.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,n,i,r,o,s){let a=D9(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(ct(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(ct(({routes:u})=>{let h=i._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:w}=c,S=new Bu(_,m,Object.freeze(K({},this.urlTree.queryParams)),this.urlTree.fragment,UN(i),wr(i),i.component??i._loadedComponent??null,i,$N(i)),k=Vy(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(k.params),S.data=Object.freeze(k.data);let{segmentGroup:R,slicedSegments:q}=BN(n,_,w,u);if(q.length===0&&R.hasChildren())return this.processChildren(h,u,R,S).pipe(oe(W=>new xi(S,W)));if(u.length===0&&q.length===0)return ue(new xi(S,[]));let ne=wr(i)===o;return this.processSegment(h,u,R,q,ne?Ve:o,!0,S).pipe(oe(W=>new xi(S,W instanceof xi?[W]:[])))}))):Lu(n)))}getChildConfig(e,n,i){return n.children?ue({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ue({routes:n._loadedRoutes,injector:n._loadedInjector}):b9(e,n,i,this.urlSerializer).pipe(Kt(r=>r?this.configLoader.loadChildren(e,n).pipe(Mt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):I9(n))):ue({routes:[],injector:e})}};function N9(t){t.sort((e,n)=>e.value.outlet===Ve?-1:n.value.outlet===Ve?1:e.value.outlet.localeCompare(n.value.outlet))}function F9(t){let e=t.value.routeConfig;return e&&e.path===""}function dF(t){let e=[],n=new Set;for(let i of t){if(!F9(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=dF(i.children);e.push(new xi(i.value,r))}return e.filter(i=>!n.has(i))}function UN(t){return t.data||{}}function $N(t){return t.resolve||{}}function L9(t,e,n,i,r,o){return Kt(s=>k9(t,e,n,i,s.extractedUrl,r,o).pipe(oe(({state:a,tree:c})=>be(K({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function V9(t,e){return Kt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return ue(n);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of hF(c))s.add(u);let a=0;return je(s).pipe(bs(c=>o.has(c)?j9(c,i,t,e):(c.data=Vy(c,c.parent,t).resolve,ue(void 0))),Mt(()=>a++),El(1),Kt(c=>a===s.size?ue(n):zn))})}function hF(t){let e=t.children.map(n=>hF(n)).flat();return[t,...e]}function j9(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!oF(r)&&(o[Of]=r.title),B9(o,t,e,i).pipe(oe(s=>(t._resolvedData=s,t.data=Vy(t,t.parent,n).resolve,null)))}function B9(t,e,n,i){let r=JD(t);if(r.length===0)return ue({});let o={};return je(r).pipe(Kt(s=>U9(t[s],e,n,i).pipe(Fi(),Mt(a=>{if(a instanceof Rf)throw By(new If,a);o[s]=a}))),El(1),xw(o),Hn(s=>lF(s)?zn:vl(s)))}function U9(t,e,n,i){let r=Ff(e)??i,o=qu(t,r),s=o.resolve?o.resolve(e,n):ur(r,()=>o(e,n));return aa(s)}function ZD(t){return ct(e=>{let n=t(e);return n?je(n).pipe(oe(()=>e)):ue(e)})}var fF=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===Ve);return r}getResolvedTitleForRoute(i){return i.data[Of]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>te($9),providedIn:"root"});let t=e;return t})(),$9=(()=>{let e=class e extends fF{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(P(tP))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),MT=new X("",{providedIn:"root",factory:()=>({})}),RT=new X(""),z9=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=te(Sb)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ue(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=aa(i.loadComponent()).pipe(oe(pF),Mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),or(()=>{this.componentLoaders.delete(i)})),o=new hl(r,()=>new Ce).pipe(dl());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=H9(r,this.compiler,i,this.onLoadEndListener).pipe(or(()=>{this.childrenLoaders.delete(r)})),a=new hl(s,()=>new Ce).pipe(dl());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function H9(t,e,n,i){return aa(t.loadChildren()).pipe(oe(pF),Kt(r=>r instanceof eh||Array.isArray(r)?ue(r):je(e.compileModuleAsync(r))),oe(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(RT,[],{optional:!0,self:!0}).flat()),{routes:s.map(xT),injector:o}}))}function q9(t){return t&&typeof t=="object"&&"default"in t}function pF(t){return q9(t)?t.default:t}var PT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>te(G9),providedIn:"root"});let t=e;return t})(),G9=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),W9=new X("");var K9=new X(""),Q9=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ce,this.transitionAbortSubject=new Ce,this.configLoader=te(z9),this.environmentInjector=te(li),this.urlSerializer=te(DT),this.rootContexts=te($y),this.location=te(Uo),this.inputBindingEnabled=te(ST,{optional:!0})!==null,this.titleStrategy=te(fF),this.options=te(MT,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=te(PT),this.createViewTransition=te(W9,{optional:!0}),this.navigationErrorHandler=te(K9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null;let i=o=>this.events.next(new cT(o)),r=o=>this.events.next(new lT(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(be(K(K({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new Wt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ef,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dt(s=>s.id!==0),oe(s=>be(K({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ct(s=>{let a=!1,c=!1;return ue(s).pipe(ct(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ai.SupersededByNewNavigation),zn;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?be(K({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!h&&m!=="reload"){let _="";return this.events.next(new Ac(u.id,this.urlSerializer.serialize(u.rawUrl),_,iT.IgnoredSameUrlNavigation)),u.resolve(!1),zn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ue(u).pipe(ct(_=>{let w=this.transitions?.getValue();return this.events.next(new Sf(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),w!==this.transitions?.getValue()?zn:Promise.resolve(_)}),L9(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Mt(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation=be(K({},this.currentNavigation),{finalUrl:_.urlAfterRedirects});let w=new Ny(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(w)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:_,extractedUrl:w,source:S,restoredState:k,extras:R}=u,q=new Sf(_,this.urlSerializer.serialize(w),S,k);this.events.next(q);let ne=iF(this.rootComponentType).snapshot;return this.currentTransition=s=be(K({},u),{targetSnapshot:ne,urlAfterRedirects:w,extras:be(K({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,ue(s)}else{let _="";return this.events.next(new Ac(u.id,this.urlSerializer.serialize(u.extractedUrl),_,iT.IgnoredByUrlHandlingStrategy)),u.resolve(!1),zn}}),Mt(u=>{let h=new rT(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),oe(u=>(this.currentTransition=s=be(K({},u),{guards:n9(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),f9(this.environmentInjector,u=>this.events.next(u)),Mt(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw By(this.urlSerializer,u.guardsResult);let h=new oT(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),dt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ai.GuardRejected),!1)),ZD(u=>{if(u.guards.canActivateChecks.length)return ue(u).pipe(Mt(h=>{let m=new sT(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),ct(h=>{let m=!1;return ue(h).pipe(V9(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(h,"",Ai.NoDataFromResolver)}}))}),Mt(h=>{let m=new aT(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),ZD(u=>{let h=m=>{let _=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(m.routeConfig).pipe(Mt(w=>{m.component=w}),oe(()=>{})));for(let w of m.children)_.push(...h(w));return _};return _l(h(u.targetSnapshot.root)).pipe(Es(null),Qt(1))}),ZD(()=>this.afterPreactivation()),ct(()=>{let{currentSnapshot:u,targetSnapshot:h}=s,m=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return m?je(m).pipe(oe(()=>s)):ue(s)}),oe(u=>{let h=K8(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=be(K({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),Mt(()=>{this.events.next(new Af)}),t9(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Qt(1),Mt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sa(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),si(this.transitionAbortSubject.pipe(Mt(u=>{throw u}))),or(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ai.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hn(u=>{if(c=!0,cF(u))this.events.next(new es(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),Z8(u)?this.events.next(new zu(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let h=new xf(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let m=ur(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(m instanceof Rf){let{message:_,cancellationCode:w}=By(this.urlSerializer,m);this.events.next(new es(s.id,this.urlSerializer.serialize(s.extractedUrl),_,w)),this.events.next(new zu(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(h);let _=i.errorHandler(u);s.resolve(!!_)}}catch(m){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(m)}}return zn}))}))}cancelNavigationTransition(i,r,o){let s=new es(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Y9(t){return t!==Ef}var Z9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>te(X9),providedIn:"root"});let t=e;return t})(),IT=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},X9=(()=>{let e=class e extends IT{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:()=>te(J9),providedIn:"root"});let t=e;return t})(),J9=(()=>{let e=class e extends mF{constructor(){super(...arguments),this.location=te(Uo),this.urlSerializer=te(DT),this.options=te(MT,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=te(PT),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new oa,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=iF(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Sf)this.stateMemento=this.createStateMemento();else if(i instanceof Ac)this.rawUrlTree=r.initialUrl;else if(i instanceof Ny){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof Af?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof es&&(i.code===Ai.GuardRejected||i.code===Ai.NoDataFromResolver)?this.restoreHistory(r):i instanceof xf?this.restoreHistory(r,!0):i instanceof sa&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=K(K({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=K(K({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wf=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(wf||{});function eG(t,e){t.events.pipe(dt(n=>n instanceof sa||n instanceof es||n instanceof xf||n instanceof Ac),oe(n=>n instanceof sa||n instanceof Ac?wf.COMPLETE:(n instanceof es?n.code===Ai.Redirect||n.code===Ai.SupersededByNewNavigation:!1)?wf.REDIRECTING:wf.FAILED),dt(n=>n!==wf.REDIRECTING),Qt(1)).subscribe(()=>{e()})}function tG(t){throw t}var nG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mi=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=te(Og),this.stateManager=te(mF),this.options=te(MT,{optional:!0})||{},this.pendingTasks=te(Fo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=te(Q9),this.urlSerializer=te(DT),this.location=te(Uo),this.urlHandlingStrategy=te(PT),this._events=new Ce,this.errorHandler=this.options.errorHandler||tG,this.navigated=!1,this.routeReuseStrategy=te(Z9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=te(RT,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!te(ST,{optional:!0}),this.eventsSubscription=new wt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof es&&r.code!==Ai.Redirect&&r.code!==Ai.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sa)this.navigated=!0;else if(r instanceof zu){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u=K({info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Y9(o.source)},a);this.scheduleNavigation(c,Ef,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}oG(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ef,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=K({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(xT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:a,m=null;switch(c){case"merge":m=K(K({},this.currentUrlTree.queryParams),s);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}m!==null&&(m=this.removeEmptyProps(m));let _;try{let w=o?o.snapshot:this.routerState.snapshot.root;_=JN(w)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),_=this.currentUrlTree.root}return eF(_,i,m,h??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=Df(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Ef,null,r)}navigate(i,r={skipLocationChange:!1}){return rG(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=K({},nG):r===!1?o=K({},iG):o=r,Df(i))return FN(this.currentUrlTree,i,o);let s=this.parseUrl(i);return FN(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,h;a?(c=a.resolve,u=a.reject,h=a.promise):h=new Promise((_,w)=>{c=_,u=w});let m=this.pendingTasks.add();return eG(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(_=>Promise.reject(_))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rG(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ve(4008,!1)}function oG(t){return!(t instanceof Af)&&!(t instanceof zu)}var gF=(()=>{let e=class e{constructor(i,r,o,s,a,c){this.router=i,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Ce,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=i.events.subscribe(h=>{h instanceof sa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(i!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:_1(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,i,r):o.removeAttribute(s,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(U(Mi),U(ts),sb("tabindex"),U(Wr),U(ht),U($l))},e.\u0275dir=ze({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&re("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&$i("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fr],replaceUrl:[2,"replaceUrl","replaceUrl",fr],routerLink:"routerLink"},standalone:!0,features:[Ms,ui]});let t=e;return t})();var sG=new X("");function vF(t,...e){return Ci([{provide:RT,multi:!0,useValue:t},[],{provide:ts,useFactory:aG,deps:[Mi]},{provide:Lg,multi:!0,useFactory:cG},e.map(n=>n.\u0275providers)])}function aG(t){return t.routerState.root}function cG(){let t=te(yt);return e=>{let n=t.get(Kr);if(e!==n.components[0])return;let i=t.get(Mi),r=t.get(lG);t.get(uG)===1&&i.initialNavigation(),t.get(dG,null,$e.Optional)?.setUpPreloading(),t.get(sG,null,$e.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var lG=new X("",{factory:()=>new Ce}),uG=new X("",{providedIn:"root",factory:()=>1});var dG=new X("");function hG(t,e){t&1&&(C(0,"div",6),M(1,"Presionar para Especialista"),E())}function fG(t,e){t&1&&(C(0,"div",6),M(1,"Presionar para Paciente"),E())}var Hy=(()=>{let e=class e{constructor(){this.close=new Ge,this.especialista=new Ge,this.paciente=new Ge,this.showTooltipText=null}showTooltip(i){this.showTooltipText=i}hideTooltip(){this.showTooltipText=null}handleEspecialista(){this.especialista.emit()}handlePaciente(){this.paciente.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-fondo-registro"]],outputs:{close:"close",especialista:"especialista",paciente:"paciente"},standalone:!0,features:[Me],decls:9,vars:2,consts:[[1,"button-container"],[1,"col"],["mat-raised-button","","color","primary",1,"boton","profile-button","m-3",3,"mouseover","mouseout","click"],["src","assets/especialista.gif","alt","Especialista"],["class","tooltip-label",4,"ngIf"],["src","assets/paciente.gif","alt","Paciente"],[1,"tooltip-label"]],template:function(r,o){r&1&&(C(0,"div",0)(1,"div",1)(2,"button",2),re("mouseover",function(){return o.showTooltip("Especialista")})("mouseout",function(){return o.hideTooltip()})("click",function(){return o.handleEspecialista()}),ae(3,"img",3),pe(4,hG,2,0,"div",4),E()(),C(5,"div",1)(6,"button",2),re("mouseover",function(){return o.showTooltip("Paciente")})("mouseout",function(){return o.hideTooltip()})("click",function(){return o.handlePaciente()}),ae(7,"img",5),pe(8,fG,2,0,"div",4),E()()()),r&2&&(F(4),J("ngIf",o.showTooltipText==="Especialista"),F(4),J("ngIf",o.showTooltipText==="Paciente"))},dependencies:[It],styles:[".profile-button[_ngcontent-%COMP%]{width:200px;height:100px;margin:10px;position:relative}.profile-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.boton[_ngcontent-%COMP%]:hover{width:26vw;height:26vw}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}.mat-raised-button[_ngcontent-%COMP%]{margin:0 10px}.tooltip-label[_ngcontent-%COMP%]{position:absolute;bottom:-20px;left:50%;transform:translate(-50%);background-color:#349cb6;color:#fff;padding:5px 10px;border-radius:5px;font-size:12px;white-space:nowrap}"]});let t=e;return t})();var Gu=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Gu||{});function yF(t,e){return{type:Gu.Trigger,name:t,definitions:e,options:{}}}function _F(t,e=null){return{type:Gu.Animate,styles:e,timings:t}}function wF(t){return{type:Gu.Style,styles:t,offset:null}}function bF(t,e,n){return{type:Gu.State,name:t,styles:e,options:n}}function EF(t,e,n=null){return{type:Gu.Transition,expr:t,animation:e,options:n}}var pG=new Map,mG={activated:!1,tokenObservers:[]},gG={initialized:!1,enabled:!1};function br(t){return pG.get(t)||Object.assign({},mG)}function SF(){return gG}var vG="https://content-firebaseappcheck.googleapis.com/v1";var yG="exchangeDebugToken",CF={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},pae=24*60*60*1e3;var OT=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new tw,this.pending.promise.catch(n=>{}),yield _G(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new tw,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function _G(t){return new Promise(e=>{setTimeout(e,t)})}var wG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ca=new Ix("appCheck","AppCheck",wG);function xF(t){if(!br(t).activated)throw ca.create("use-before-activation",{appName:t.name})}function AF(i,r){return N(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let w=yield s.getHeartbeatsHeader();w&&(o["X-Firebase-Client"]=w)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(w){throw ca.create("fetch-network-error",{originalErrorMessage:w?.message})}if(c.status!==200)throw ca.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(w){throw ca.create("fetch-parse-error",{originalErrorMessage:w?.message})}let h=u.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ca.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let m=Number(h[1])*1e3,_=Date.now();return{token:u.token,expireTimeMillis:_+m,issuedAtTimeMillis:_}})}function MF(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${vG}/projects/${n}/apps/${i}:${yG}?key=${r}`,body:{debug_token:e}}}var bG="firebase-app-check-database",EG=1,NT="firebase-app-check-store";var qy=null;function CG(){return qy||(qy=new Promise((t,e)=>{try{let n=indexedDB.open(bG,EG);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(ca.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(NT,{keyPath:"compositeKey"})}}}catch(n){e(ca.create("storage-open",{originalErrorMessage:n?.message}))}}),qy)}function IG(t,e){return DG(TG(t),e)}function DG(t,e){return N(this,null,function*(){let i=(yield CG()).transaction(NT,"readwrite"),o=i.objectStore(NT).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var u;a(ca.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function TG(t){return`${t.options.appId}-${t.name}`}var FT=new om("@firebase/app-check");function kT(t,e){return im()?IG(t,e).catch(n=>{FT.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function RF(){return SF().enabled}function PF(){return N(this,null,function*(){let t=SF();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var SG={error:"UNKNOWN_ERROR"};function xG(t){return Cx.encodeString(JSON.stringify(t),!1)}function LT(t,e=!1){return N(this,null,function*(){let n=t.app;xF(n);let i=br(n),r=i.token,o;if(r&&!jf(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(jf(c)?r=c:yield kT(n,void 0))}if(!e&&r&&jf(r))return{token:r.token};let s=!1;if(RF()){i.exchangeTokenPromise||(i.exchangeTokenPromise=AF(MF(n,yield PF()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield kT(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield br(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?FT.warn(c.message):FT.error(c),o=c}let a;return r?o?jf(r)?a={token:r.token,internalError:o}:a=DF(o):(a={token:r.token},i.token=r,yield kT(n,r)):a=DF(o),s&&PG(n,a),a})}function AG(t){return N(this,null,function*(){let e=t.app;xF(e);let{provider:n}=br(e);if(RF()){let i=yield PF(),{token:r}=yield AF(MF(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function MG(t,e,n,i){let{app:r}=t,o=br(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&jf(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),IF(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>IF(t))}function kF(t,e){let n=br(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function IF(t){let{app:e}=t,n=br(e),i=n.tokenRefresher;i||(i=RG(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function RG(t){let{app:e}=t;return new OT(()=>N(this,null,function*(){let n=br(e),i;if(n.token?i=yield LT(t,!0):i=yield LT(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=br(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},CF.RETRIAL_MIN_WAIT,CF.RETRIAL_MAX_WAIT)}function PG(t,e){let n=br(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function jf(t){return t.expireTimeMillis-Date.now()>0}function DF(t){return{token:xG(SG),error:t}}var VT=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=br(this.app);for(let n of e)kF(this.app,n.next);return Promise.resolve()}};function kG(t,e){return new VT(t,e)}function OG(t){return{getToken:e=>LT(t,e),getLimitedUseToken:()=>AG(t),addTokenListener:e=>MG(t,"INTERNAL",e),removeTokenListener:e=>kF(t.app,e)}}var NG="@firebase/app-check",FG="0.8.4";var LG="app-check",TF="app-check-internal";function VG(){Oa(new ir(LG,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return kG(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(TF).initialize()})),Oa(new ir(TF,t=>{let e=t.getProvider("app-check").getImmediate();return OG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gt(NG,FG)}VG();var jG=["localhost","0.0.0.0","127.0.0.1"],Tae=typeof window<"u"&&jG.includes(window.location.hostname);var BG="firebase",UG="10.12.2";bi.registerVersion(BG,UG,"app-compat");var $G=["ngOnDestroy"],NF=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if($G.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,u)=>s.then(h=>{let m=h?.(...u);return i?.spy?.apply&&i.spy.apply(o,u,m),m})})})});var BT=class{constructor(e){return e}},la=new X("angularfire2.app.options"),Wu=new X("angularfire2.app.name");function Ku(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=bi.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>bi.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;zG("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new BT(s)}var zG=(t,...e)=>{xb()&&typeof console<"u"&&console[t](...e)};function Qu(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return HG(r,s)||(OF("error",`${e} was already initialized on the ${n} Firebase App with different settings.${qG?" You may need to reload as Firebase is not HMR aware.":""}`),OF("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function HG(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var qG=typeof module<"u"&&!!module.hot,OF=(t,...e)=>{xb()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var UT=new X("angularfire2.auth.use-emulator"),$T=new X("angularfire2.auth.settings"),zT=new X("angularfire2.auth.tenant-id"),HT=new X("angularfire2.auth.langugage-code"),qT=new X("angularfire2.auth.use-device-language"),GT=new X("angularfire.auth.persistence"),WT=(t,e,n,i,r,o,s,a)=>Qu(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[u,h]of Object.entries(s))c.settings[u]=h;return a&&c.setPersistence(a),c},[n,i,r,o,s,a]),kt=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,c,u,h,m,_,w){let S=new Ce,k=ue(void 0).pipe(ri(s.outsideAngular),ct(()=>o.runOutsideAngular(()=>import("./chunk-GYIVHC42.js"))),oe(()=>Ku(n,o,i)),oe(R=>WT(R,o,a,u,h,m,c,_)),Hd({bufferSize:1,refCount:!1}));if(Os(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ue(null);else{k.pipe(Fi()).subscribe();let R=k.pipe(ct(W=>W.getRedirectResult().then(ee=>ee,()=>null)),wn,Hd({bufferSize:1,refCount:!1})),q=k.pipe(ct(W=>new Ee(ee=>({unsubscribe:o.runOutsideAngular(()=>W.onAuthStateChanged(me=>ee.next(me),me=>ee.error(me),()=>ee.complete()))})))),ne=k.pipe(ct(W=>new Ee(ee=>({unsubscribe:o.runOutsideAngular(()=>W.onIdTokenChanged(me=>ee.next(me),me=>ee.error(me),()=>ee.complete()))}))));this.authState=R.pipe(km(q),Ni(s.outsideAngular),ri(s.insideAngular)),this.user=R.pipe(km(ne),Ni(s.outsideAngular),ri(s.insideAngular)),this.idToken=this.user.pipe(ct(W=>W?je(W.getIdToken()):ue(null))),this.idTokenResult=this.user.pipe(ct(W=>W?je(W.getIdTokenResult()):ue(null))),this.credential=Va(R,S,this.authState.pipe(dt(W=>!W))).pipe(oe(W=>W?.user?W:null),Ni(s.outsideAngular),ri(s.insideAngular))}return NF(this,k,o,{spy:{apply:(R,q,ne)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&ne.then(W=>S.next(W))}}})}static \u0275fac=function(i){return new(i||t)(P(la),P(Wu,8),P(fn),P(ge),P(hi),P(UT,8),P($T,8),P(zT,8),P(HT,8),P(qT,8),P(GT,8),P(Kn,8))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function Bf(t,e=0){return GG(t)?Number(t):e}function GG(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Yu(t){return Array.isArray(t)?t:[t]}function tn(t){return t==null?"":typeof t=="string"?t:`${t}px`}function ns(t){return t instanceof ht?t.nativeElement:t}var QT;try{QT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{QT=!1}var Cn=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?AR(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||QT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(P(fn))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Uf;function WG(){if(Uf==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Uf=!0}))}finally{Uf=Uf||!1}return Uf}function Zu(t){return WG()?t:!!t.capture}var Mc;function FF(){if(Mc==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Mc=!1,Mc;if("scrollBehavior"in document.documentElement.style)Mc=!0;else{let t=Element.prototype.scrollTo;t?Mc=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Mc=!1}}return Mc}var KT;function KG(){if(KT==null){let t=typeof document<"u"?document.head:null;KT=!!(t&&(t.createShadowRoot||t.attachShadow))}return KT}function LF(t){if(KG()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function $f(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Er(t){return t.composedPath?t.composedPath()[0]:t.target}function zf(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var QG=new X("cdk-dir-doc",{providedIn:"root",factory:YG});function YG(){return te(Le)}var ZG=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function XG(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?ZG.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Hf=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new Ge,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=XG(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(P(QG,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ua=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({});let t=e;return t})();var nW=20,jF=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Ce,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=nW){return this._platform.isBrowser?new Ee(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(Rm(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ue()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(dt(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=ns(r),s=i.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return zd(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(P(ge),P(Cn),P(Le,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var iW=20,YT=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new Ce,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect(),a=-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,c=-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(i=iW){return i>0?this._change.pipe(Rm(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(P(Cn),P(ge),P(Le,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var VF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({});let t=e;return t})(),ZT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({imports:[ua,VF,ua,VF]});let t=e;return t})();var qf=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Xu=class extends qf{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Ju=class extends qf{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},XT=class extends qf{constructor(e){super(),this.element=e instanceof ht?e.nativeElement:e}},ed=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Xu)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Ju)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof XT)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Wy=class extends ed{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||yt.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Gf=(()=>{let e=class e extends ed{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Ge,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(U(zr),U(Ui),U(Le))},e.\u0275dir=ze({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Et]});let t=e;return t})();var Rc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({});let t=e;return t})();function Ky(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var BF=FF(),JT=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=tn(-this._previousScrollPosition.left),e.style.top=tn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),BF&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),BF&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var eS=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(dt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Qy=class{enable(){}disable(){}attach(){}};function tS(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,s=t.left>n.right;return i||r||o||s})}function UF(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,s=t.right>n.right;return i||r||o||s})}var nS=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();tS(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},oW=(()=>{let e=class e{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new Qy,this.close=a=>new eS(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new JT(this._viewportRuler,this._document),this.reposition=a=>new nS(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};e.\u0275fac=function(r){return new(r||e)(P(jF),P(YT),P(ge),P(Le))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wf=class{constructor(e){if(this.scrollStrategy=new Qy,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var iS=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var GF=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(P(Le))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sW=(()=>{let e=class e extends GF{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(P(Le),P(ge,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aW=(()=>{let e=class e extends GF{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Er(s)},this._clickListener=s=>{let a=Er(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let u=this._attachedOverlays.slice();for(let h=u.length-1;h>-1;h--){let m=u[h];if(m._outsidePointerEvents.observers.length<1||!m.hasAttached())continue;if(m.overlayElement.contains(a)||m.overlayElement.contains(c))break;let _=m._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>_.next(s)):_.next(s)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(P(Le),P(Cn),P(ge,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),td=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||zf()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(i),zf()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(P(Le),P(Cn))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),is=class{constructor(e,n,i,r,o,s,a,c,u,h=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=u,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new Ce,this._attachments=new Ce,this._detachments=new Ce,this._locationChanges=wt.EMPTY,this._backdropClickHandler=m=>this._backdropClick.next(m),this._backdropTransitionendHandler=m=>{this._disposeBackdrop(m.target)},this._keydownEvents=new Ce,this._outsidePointerEvents=new Ce,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Qt(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=K(K({},this._config),e),this._updateElementSize()}setDirection(e){this._config=be(K({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=tn(this._config.width),e.height=tn(this._config.height),e.minWidth=tn(this._config.minWidth),e.minHeight=tn(this._config.minHeight),e.maxWidth=tn(this._config.maxWidth),e.maxHeight=tn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=Yu(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(si(Va(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},$F="cdk-overlay-connected-position-bounding-box",cW=/([A-Za-z%]+)$/,rS=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ce,this._resizeSubscription=wt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add($F),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),u=this._getOverlayPoint(c,n,a),h=this._getOverlayFit(u,n,i,a);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(h,u,i)){o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<h.visibleArea)&&(s={overlayFit:h,overlayPoint:u,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(let u of o){let h=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);h>c&&(c=h,a=u)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Pc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($F),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?s:a}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=HF(n),{x:s,y:a}=e,c=this._getOffset(r,"x"),u=this._getOffset(r,"y");c&&(s+=c),u&&(a+=u);let h=0-s,m=s+o.width-i.width,_=0-a,w=a+o.height-i.height,S=this._subtractOverflows(o.width,h,m),k=this._subtractOverflows(o.height,_,w),R=S*k;return{visibleArea:R,isCompletelyWithinViewport:o.width*o.height===R,fitsInViewportVertically:k===o.height,fitsInViewportHorizontally:S==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,s=zF(this._overlayRef.getConfig().minHeight),a=zF(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||s!=null&&s<=r,u=e.fitsInViewportHorizontally||a!=null&&a<=o;return c&&u}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=HF(n),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),u=Math.max(o.left-i.left-e.x,0),h=0,m=0;return r.width<=o.width?h=u||-s:h=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?m=c||-a:m=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:h,y:m},{x:e.x+h,y:e.y+m}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!lW(this._lastScrollVisibility,i)){let r=new iS(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(n.overlayY==="top")s=e.y,o=i.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let w=Math.min(i.bottom-e.y+i.top,e.y),S=this._lastBoundingBoxSize.height;o=w*2,s=e.y-w,o>S&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-S/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,u=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,h,m,_;if(u)_=i.width-e.x+this._viewportMargin*2,h=e.x-this._viewportMargin;else if(c)m=e.x,h=i.right-e.x;else{let w=Math.min(i.right-e.x+i.left,e.x),S=this._lastBoundingBoxSize.width;h=w*2,m=e.x-w,h>S&&!this._isInitialRender&&!this._growAfterOpen&&(m=e.x-S/2)}return{top:s,left:m,bottom:a,right:_,width:h,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=tn(i.height),r.top=tn(i.top),r.bottom=tn(i.bottom),r.width=tn(i.width),r.left=tn(i.left),r.right=tn(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=tn(o)),s&&(r.maxWidth=tn(s))}this._lastBoundingBoxSize=i,Pc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Pc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Pc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let h=this._viewportRuler.getViewportScrollPosition();Pc(i,this._getExactOverlayY(n,e,h)),Pc(i,this._getExactOverlayX(n,e,h))}else i.position="static";let a="",c=this._getOffset(n,"x"),u=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),u&&(a+=`translateY(${u}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=tn(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=tn(s.maxWidth):o&&(i.maxWidth="")),Pc(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=tn(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=tn(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:UF(e,i),isOriginOutsideView:tS(e,i),isOverlayClipped:UF(n,i),isOverlayOutsideView:tS(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Yu(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ht)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function Pc(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function zF(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(cW);return!n||n==="px"?parseFloat(e):null}return t||null}function HF(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function lW(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var qF="cdk-global-overlay-wrapper",oS=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(qF),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),u=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),h=this._xPosition,m=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",w="",S="",k="";c?k="flex-start":h==="center"?(k="center",_?S=m:w=m):_?h==="left"||h==="end"?(k="flex-end",w=m):(h==="right"||h==="start")&&(k="flex-start",S=m):h==="left"||h==="start"?(k="flex-start",w=m):(h==="right"||h==="end")&&(k="flex-end",S=m),e.position=this._cssPosition,e.marginLeft=c?"0":w,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":S,n.justifyContent=k,n.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(qF),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},uW=(()=>{let e=class e{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new oS}flexibleConnectedTo(i){return new rS(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(P(YT),P(Le),P(Cn),P(td))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dW=0,Cr=(()=>{let e=class e{constructor(i,r,o,s,a,c,u,h,m,_,w,S){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=u,this._document=h,this._directionality=m,this._location=_,this._outsideClickDispatcher=w,this._animationsModuleType=S}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new Wf(i);return a.direction=a.direction||this._directionality.value,new is(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${dW++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Kr)),new Wy(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(P(oW),P(td),P(zr),P(uW),P(sW),P(yt),P(ge),P(Le),P(Hf),P(Uo),P(aW),P(Bl,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hW=new X("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=te(Cr);return()=>t.scrollStrategies.reposition()}});function fW(t){return()=>t.scrollStrategies.reposition()}var pW={provide:hW,deps:[Cr],useFactory:fW},Yy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({providers:[Cr,pW],imports:[ua,Rc,ZT,ZT]});let t=e;return t})();var mW=(()=>{let e=class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var KF=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({providers:[mW]});let t=e;return t})();var QF=new Set,kc,gW=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):yW}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&vW(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(P(Cn),P(ch,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vW(t,e){if(!QF.has(t))try{kc||(kc=document.createElement("style"),e&&kc.setAttribute("nonce",e),kc.setAttribute("type","text/css"),document.head.appendChild(kc)),kc.sheet&&(kc.sheet.insertRule(`@media ${t} {body{ }}`,0),QF.add(t))}catch(n){console.error(n)}}function yW(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var ZF=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Ce}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return YF(Yu(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=YF(Yu(i)).map(a=>this._registerQuery(a).observable),s=_l(o);return s=_s(s.pipe(Qt(1)),s.pipe(qd(1),wl(0))),s.pipe(oe(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:u,query:h})=>{c.matches=c.matches||u,c.breakpoints[h]=u}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new Ee(a=>{let c=u=>this._zone.run(()=>a.next(u));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(oi(r),oe(({matches:a})=>({query:i,matches:a})),si(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};e.\u0275fac=function(r){return new(r||e)(P(gW),P(ge))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function YF(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var Kf=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return wW(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=_W(xW(i));if(r&&(XF(r)===-1||!this.isVisible(r)))return!1;let o=i.nodeName.toLowerCase(),s=XF(i);return i.hasAttribute("contenteditable")?s!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!TW(i)?!1:o==="audio"?i.hasAttribute("controls")?s!==-1:!1:o==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return SW(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(P(Cn))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _W(t){try{return t.frameElement}catch{return null}}function wW(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function bW(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function EW(t){return IW(t)&&t.type=="hidden"}function CW(t){return DW(t)&&t.hasAttribute("href")}function IW(t){return t.nodeName.toLowerCase()=="input"}function DW(t){return t.nodeName.toLowerCase()=="a"}function t2(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function XF(t){if(!t2(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function TW(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function SW(t){return EW(t)?!1:bW(t)||CW(t)||t.hasAttribute("contenteditable")||t2(t)}function xW(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var aS=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,o=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Qt(1)).subscribe(e)}},Jy=(()=>{let e=class e{constructor(i,r,o){this._checker=i,this._ngZone=r,this._document=o}create(i,r=!1){return new aS(i,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(P(Kf),P(ge),P(Le))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cS(t){return t.buttons===0||t.detail===0}function lS(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var AW=new X("cdk-input-modality-detector-options"),MW={ignoreKeys:[18,17,224,91,16]},n2=650,nd=Zu({passive:!0,capture:!0}),RW=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new Wt(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Er(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<n2||(this._modality.next(cS(a)?"keyboard":"mouse"),this._mostRecentTarget=Er(a))},this._onTouchstart=a=>{if(lS(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Er(a)},this._options=K(K({},MW),s),this.modalityDetected=this._modality.pipe(qd(1)),this.modalityChanged=this.modalityDetected.pipe(bl()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,nd),o.addEventListener("mousedown",this._onMousedown,nd),o.addEventListener("touchstart",this._onTouchstart,nd)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,nd),document.removeEventListener("mousedown",this._onMousedown,nd),document.removeEventListener("touchstart",this._onTouchstart,nd))}};e.\u0275fac=function(r){return new(r||e)(P(Cn),P(ge),P(Le),P(AW,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xy=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Xy||{}),PW=new X("cdk-focus-monitor-default-options"),Zy=Zu({passive:!0,capture:!0}),e_=(()=>{let e=class e{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ce,this._rootNodeFocusAndBlurListener=c=>{let u=Er(c);for(let h=u;h;h=h.parentElement)c.type==="focus"?this._onFocus(c,h):this._onBlur(c,h)},this._document=s,this._detectionMode=a?.detectionMode||Xy.IMMEDIATE}monitor(i,r=!1){let o=ns(i);if(!this._platform.isBrowser||o.nodeType!==1)return ue();let s=LF(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new Ce,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=ns(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let s=ns(i),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,u])=>this._originChanged(c,r,u)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===Xy.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===Xy.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?n2:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),s=Er(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Zy),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Zy)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(si(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Zy),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Zy),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let s=i.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(P(ge),P(Cn),P(RW),P(Le,8),P(PW,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Oc=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Oc||{}),JF="cdk-high-contrast-black-on-white",e2="cdk-high-contrast-white-on-black",sS="cdk-high-contrast-active",uS=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=te(ZF).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Oc.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Oc.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Oc.BLACK_ON_WHITE}return Oc.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(sS,JF,e2),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Oc.BLACK_ON_WHITE?i.add(sS,JF):r===Oc.WHITE_ON_BLACK&&i.add(sS,e2)}}};e.\u0275fac=function(r){return new(r||e)(P(Cn),P(Le))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),i2=(()=>{let e=class e{constructor(i){i._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(P(uS))},e.\u0275mod=et({type:e}),e.\u0275inj=Je({imports:[KF]});let t=e;return t})();function kW(t,e){}var Nc=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var pS=(()=>{let e=class e extends ed{constructor(i,r,o,s,a,c,u,h){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=u,this._focusMonitor=h,this._platform=te(Cn),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=te(Ii),this.attachDomPortal=m=>{this._portalOutlet.hasAttached();let _=this._portalOutlet.attachDomPortal(m);return this._contentAttached(),_},this._document=o,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i.removeEventListener("blur",o),i.removeEventListener("mousedown",o),i.removeAttribute("tabindex")};i.addEventListener("blur",o),i.addEventListener("mousedown",o)})),i.focus(r)}_focusByCssSelector(i,r){let o=this._elementRef.nativeElement.querySelector(i);o&&this._forceFocus(o,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let o=$f(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=$f();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=$f()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(U(ht),U(Jy),U(Le,8),U(Nc),U(Kf),U(ge),U(is),U(e_))},e.\u0275cmp=Ae({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(r&1&&Pg(Gf,7),r&2){let s;uh(s=dh())&&(o._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){r&2&&$i("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},standalone:!0,features:[Et,Me],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){r&1&&pe(0,kW,0,0,"ng-template",0)},dependencies:[Gf],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Qf=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Ce,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Ky(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},OW=new X("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=te(Cr);return()=>t.scrollStrategies.block()}}),NW=new X("DialogData"),FW=new X("DefaultDialogConfig");var LW=0,mS=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,o,s,a,c){this._overlay=i,this._injector=r,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ce,this._afterOpenedAtThisLevel=new Ce,this._ariaHiddenElements=new Map,this.afterAllClosed=ws(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(oi(void 0))),this._scrollStrategy=c}open(i,r){let o=this._defaultOptions||new Nc;r=K(K({},o),r),r.id=r.id||`cdk-dialog-${LW++}`,r.id&&this.getDialogById(r.id);let s=this._getOverlayConfig(r),a=this._overlay.create(s),c=new Qf(a,r),u=this._attachContainer(a,c,r);return c.containerInstance=u,this._attachDialogContent(i,c,u,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){hS(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){hS(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),hS(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new Wf({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,o){let s=o.injector||o.viewContainerRef?.injector,a=[{provide:Nc,useValue:o},{provide:Qf,useValue:r},{provide:is,useValue:i}],c;o.container?typeof o.container=="function"?c=o.container:(c=o.container.type,a.push(...o.container.providers(o))):c=pS;let u=new Xu(c,o.viewContainerRef,yt.create({parent:s||this._injector,providers:a}),o.componentFactoryResolver);return i.attach(u).instance}_attachDialogContent(i,r,o,s){if(i instanceof ji){let a=this._createInjector(s,r,o,void 0),c={$implicit:s.data,dialogRef:r};s.templateContext&&(c=K(K({},c),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),o.attachTemplatePortal(new Ju(i,null,c,a))}else{let a=this._createInjector(s,r,o,this._injector),c=o.attachComponentPortal(new Xu(i,s.viewContainerRef,a,s.componentFactoryResolver));r.componentRef=c,r.componentInstance=c.instance}}_createInjector(i,r,o,s){let a=i.injector||i.viewContainerRef?.injector,c=[{provide:NW,useValue:i.data},{provide:Qf,useValue:r}];return i.providers&&(typeof i.providers=="function"?c.push(...i.providers(r,i,o)):c.push(...i.providers)),i.direction&&(!a||!a.get(Hf,null,{optional:!0}))&&c.push({provide:Hf,useValue:{value:i.direction,change:ue()}}),yt.create({parent:a||s,providers:c})}_removeOpenDialog(i,r){let o=this.openDialogs.indexOf(i);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let o=r.length-1;o>-1;o--){let s=r[o];s!==i&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(P(Cr),P(yt),P(FW,8),P(e,12),P(td),P(OW))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hS(t,e){let n=t.length;for(;n--;)e(t[n])}var r2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({providers:[mS],imports:[Yy,Rc,i2,Rc]});let t=e;return t})();function VW(){return!0}var jW=new X("mat-sanity-checks",{providedIn:"root",factory:VW}),yS=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return zf()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(P(uS),P(jW,8),P(Le))},e.\u0275mod=et({type:e}),e.\u0275inj=Je({imports:[ua,ua]});let t=e;return t})();var Yi=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Yi||{}),gS=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Yi.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},o2=Zu({passive:!0,capture:!0}),vS=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Er(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,o2)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,o2)))}},s2={enterDuration:225,exitDuration:150},BW=800,a2=Zu({passive:!0,capture:!0}),c2=["mousedown","touchstart"],l2=["mouseup","mouseleave","touchend","touchcancel"],Yf=class Yf{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ns(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=K(K({},s2),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||UW(e,n,r),a=e-r.left,c=n-r.top,u=o.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${a-s}px`,h.style.top=`${c-s}px`,h.style.height=`${s*2}px`,h.style.width=`${s*2}px`,i.color!=null&&(h.style.backgroundColor=i.color),h.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(h);let m=window.getComputedStyle(h),_=m.transitionProperty,w=m.transitionDuration,S=_==="none"||w==="0s"||w==="0s, 0s"||r.width===0&&r.height===0,k=new gS(this,h,i,S);h.style.transform="scale3d(1, 1, 1)",k.state=Yi.FADING_IN,i.persistent||(this._mostRecentTransientRipple=k);let R=null;return!S&&(u||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let q=()=>this._finishRippleTransition(k),ne=()=>this._destroyRipple(k);h.addEventListener("transitionend",q),h.addEventListener("transitioncancel",ne),R={onTransitionEnd:q,onTransitionCancel:ne}}),this._activeRipples.set(k,R),(S||!u)&&this._finishRippleTransition(k),k}fadeOutRipple(e){if(e.state===Yi.FADING_OUT||e.state===Yi.HIDDEN)return;let n=e.element,i=K(K({},s2),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Yi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=ns(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,c2.forEach(i=>{Yf._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{l2.forEach(n=>{this._triggerElement.addEventListener(n,this,a2)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Yi.FADING_IN?this._startFadeOutTransition(e):e.state===Yi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Yi.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Yi.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=cS(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+BW;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!lS(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Yi.VISIBLE||e.config.terminateOnPointerUp&&e.state===Yi.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(c2.forEach(n=>Yf._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(l2.forEach(n=>e.removeEventListener(n,this,a2)),this._pointerUpEventsRegistered=!1))}};Yf._eventManager=new vS;var u2=Yf;function UW(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}function $W(t,e){}var Zf=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},_S="mdc-dialog--open",d2="mdc-dialog--opening",h2="mdc-dialog--closing",zW=150,HW=75,qW=(()=>{let e=class e extends pS{constructor(i,r,o,s,a,c,u,h,m){super(i,r,o,s,a,c,u,m),this._animationMode=h,this._animationStateChanged=new Ge,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?p2(this._config.enterAnimationDuration)??zW:0,this._exitAnimationDuration=this._animationsEnabled?p2(this._config.exitAnimationDuration)??HW:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(f2,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(d2,_S)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(_S),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(_S),this._animationsEnabled?(this._hostElement.style.setProperty(f2,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(h2)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(i){this._actionSectionCount+=i,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(d2,h2)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(U(ht),U(Jy),U(Le,8),U(Zf),U(Kf),U(ge),U(is),U(Bl,8),U(e_))},e.\u0275cmp=Ae({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,o){r&2&&(Ag("id",o._config.id),$i("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),Rs("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},standalone:!0,features:[Et,Me],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(C(0,"div",0)(1,"div",1),pe(2,$W,0,0,"ng-template",2),E()())},dependencies:[Gf],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),f2="--mat-dialog-transition-duration";function p2(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Bf(t.substring(0,t.length-2)):t.endsWith("s")?Bf(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var t_=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(t_||{}),wS=class{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Ce,this._beforeClosed=new Ce,this._state=t_.OPEN,this.disableClose=n.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(dt(r=>r.state==="opened"),Qt(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(dt(r=>r.state==="closed"),Qt(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Va(this.backdropClick(),this.keydownEvents().pipe(dt(r=>r.keyCode===27&&!this.disableClose&&!Ky(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),GW(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(dt(n=>n.state==="closing"),Qt(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=t_.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=t_.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function GW(t,e,n){return t._closeInteractionType=e,t.close(n)}var WW=new X("MatMdcDialogData"),KW=new X("mat-mdc-dialog-default-options"),QW=new X("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=te(Cr);return()=>t.scrollStrategies.block()}});var YW=0,bS=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,o,s,a,c,u,h){this._overlay=i,this._defaultOptions=s,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ce,this._afterOpenedAtThisLevel=new Ce,this.dialogConfigClass=Zf,this.afterAllClosed=ws(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(oi(void 0))),this._dialog=r.get(mS),this._dialogRefConstructor=wS,this._dialogContainerType=qW,this._dialogDataToken=WW}open(i,r){let o;r=K(K({},this._defaultOptions||new Zf),r),r.id=r.id||`mat-mdc-dialog-${YW++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(i,be(K({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:Nc,useValue:r}]},templateContext:()=>({dialogRef:o}),providers:(a,c,u)=>(o=new this._dialogRefConstructor(a,r,u),o.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:u},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(o);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};e.\u0275fac=function(r){return new(r||e)(P(Cr),P(yt),P(Uo,8),P(KW,8),P(QW),P(e,12),P(td),P(Bl,8))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var m2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({providers:[bS],imports:[r2,Yy,Rc,yS,yS]});let t=e;return t})();function XW(t,e){if(t&1){let n=Ue();C(0,"div",8)(1,"app-fondo-registro",9),re("especialista",function(){Ie(n);let r=se();return De(r.handleEspecialista())})("paciente",function(){Ie(n);let r=se();return De(r.handlePaciente())})("close",function(){Ie(n);let r=se();return De(r.closeFondoRegistro())}),E()()}}var g2=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.router=r,this.dialog=o,this.showFondoRegistro=!1}navigateToLogin(){return N(this,null,function*(){try{yield this.afAuth.signOut()}catch(i){console.error("Error al cerrar sesi\xF3n:",i)}finally{this.router.navigate(["/login"])}})}navigateToRegistro(){this.showFondoRegistro=!0}closeFondoRegistro(){this.showFondoRegistro=!1}handleEspecialista(){this.router.navigate(["/regespecialista"]),this.closeFondoRegistro()}handlePaciente(){this.router.navigate(["/register"]),this.closeFondoRegistro()}};e.\u0275fac=function(r){return new(r||e)(U(kt),U(Mi),U(bS))},e.\u0275cmp=Ae({type:e,selectors:[["app-bienvenida"]],standalone:!0,features:[Me],decls:11,vars:1,consts:[[1,"container",2,"background-image","url('assets/onli.jpeg')","background-size","cover","background-position","center","height","100vh","margin","0","padding","0"],[1,"title","animated-title"],[1,"buttons"],[1,"login-btn","button",3,"click"],[1,"fas","fa-sign-in-alt"],[1,"register-btn","button",2,"cursor","pointer",3,"click"],[1,"fas","fa-user-plus"],["class","overlay",4,"ngIf"],[1,"overlay"],[3,"especialista","paciente","close"]],template:function(r,o){r&1&&(C(0,"div",0)(1,"h1",1),M(2,"\xA1Bienvenido a nuestra cl\xEDnica online Clinitech!"),E(),C(3,"div",2)(4,"button",3),re("click",function(){return o.navigateToLogin()}),ae(5,"i",4),M(6," Iniciar sesi\xF3n"),E(),C(7,"button",5),re("click",function(){return o.navigateToRegistro()}),ae(8,"i",6),M(9," Registrarse"),E()()(),pe(10,XW,2,0,"div",7)),r&2&&(F(10),J("ngIf",o.showFondoRegistro))},dependencies:[Hy,It],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin:0;padding:0;background-size:cover;background-position:center;position:relative}.title[_ngcontent-%COMP%]{font-size:3em;color:#3498db;text-align:center;animation:_ngcontent-%COMP%_fadeIn 2s}.buttons[_ngcontent-%COMP%]{display:flex;gap:20px;animation:_ngcontent-%COMP%_slideUp 2s}.button[_ngcontent-%COMP%]{padding:15px 25px;font-size:1.2em;border:none;border-radius:5px;cursor:pointer;transition:all .3s ease;color:#fff;box-shadow:0 8px 15px #0000001a}.button[_ngcontent-%COMP%]:hover{opacity:.8;transform:translateY(-2px)}.login-btn[_ngcontent-%COMP%]{background-color:#3498db}.register-btn[_ngcontent-%COMP%]{background-color:#2ecc71}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.custom-dialog-container[_ngcontent-%COMP%]{position:fixed;top:50px;left:50%;transform:translate(-50%);z-index:1000}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000bf;display:flex;align-items:center;justify-content:center;z-index:1000}"],data:{animation:[yF("fadeAndScale",[bF("void",wF({opacity:0,transform:"scale(0.5)"})),EF(":enter, :leave",[_F("0.5s ease-in-out")])])]}});let t=e;return t})();var T2=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(U(Wr),U(ht))},e.\u0275dir=ze({type:e});let t=e;return t})(),ad=(()=>{let e=class e extends T2{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275dir=ze({type:e,features:[Et]});let t=e;return t})(),pa=new X("");var JW={provide:pa,useExisting:In(()=>$t),multi:!0};function e7(){let t=Qr()?Qr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var t7=new X(""),$t=(()=>{let e=class e extends T2{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!e7())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(U(Wr),U(ht),U(t7,8))},e.\u0275dir=ze({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&re("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[pn([JW]),Et]});let t=e;return t})();function da(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function S2(t){return t!=null&&typeof t.length=="number"}var ma=new X(""),cd=new X(""),n7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ut=class{static min(e){return x2(e)}static max(e){return i7(e)}static required(e){return A2(e)}static requiredTrue(e){return r7(e)}static email(e){return o7(e)}static minLength(e){return s7(e)}static maxLength(e){return a7(e)}static pattern(e){return c7(e)}static nullValidator(e){return i_(e)}static compose(e){return N2(e)}static composeAsync(e){return F2(e)}};function x2(t){return e=>{if(da(e.value)||da(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function i7(t){return e=>{if(da(e.value)||da(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function A2(t){return da(t.value)?{required:!0}:null}function r7(t){return t.value===!0?null:{required:!0}}function o7(t){return da(t.value)||n7.test(t.value)?null:{email:!0}}function s7(t){return e=>da(e.value)||!S2(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function a7(t){return e=>S2(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function c7(t){if(!t)return i_;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(da(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function i_(t){return null}function M2(t){return t!=null}function R2(t){return Ps(t)?je(t):t}function P2(t){let e={};return t.forEach(n=>{e=n!=null?K(K({},e),n):e}),Object.keys(e).length===0?null:e}function k2(t,e){return e.map(n=>n(t))}function l7(t){return!t.validate}function O2(t){return t.map(e=>l7(e)?e:n=>e.validate(n))}function N2(t){if(!t)return null;let e=t.filter(M2);return e.length==0?null:function(n){return P2(k2(n,e))}}function SS(t){return t!=null?N2(O2(t)):null}function F2(t){if(!t)return null;let e=t.filter(M2);return e.length==0?null:function(n){let i=k2(n,e).map(R2);return Sw(i).pipe(oe(P2))}}function xS(t){return t!=null?F2(O2(t)):null}function v2(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function L2(t){return t._rawValidators}function V2(t){return t._rawAsyncValidators}function ES(t){return t?Array.isArray(t)?t:[t]:[]}function r_(t,e){return Array.isArray(t)?t.includes(e):t===e}function y2(t,e){let n=ES(e);return ES(t).forEach(r=>{r_(n,r)||n.push(r)}),n}function _2(t,e){return ES(e).filter(n=>!r_(t,n))}var o_=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Xn=class extends o_{get formDirective(){return null}get path(){return null}},ha=class extends o_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},s_=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},u7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Jue=be(K({},u7),{"[class.ng-submitted]":"isSubmitted"}),cn=(()=>{let e=class e extends s_{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(U(ha,2))},e.\u0275dir=ze({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Rs("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Et]});let t=e;return t})(),pi=(()=>{let e=class e extends s_{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(U(Xn,10))},e.\u0275dir=ze({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&Rs("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Et]});let t=e;return t})();var Xf="VALID",n_="INVALID",id="PENDING",Jf="DISABLED",fa=class{},a_=class extends fa{constructor(e,n){super(),this.value=e,this.source=n}},tp=class extends fa{constructor(e,n){super(),this.pristine=e,this.source=n}},np=class extends fa{constructor(e,n){super(),this.touched=e,this.source=n}},rd=class extends fa{constructor(e,n){super(),this.status=e,this.source=n}},CS=class extends fa{constructor(e){super(),this.source=e}},IS=class extends fa{constructor(e){super(),this.source=e}};function AS(t){return(d_(t)?t.validators:t)||null}function d7(t){return Array.isArray(t)?SS(t):t||null}function MS(t,e){return(d_(e)?e.asyncValidators:t)||null}function h7(t){return Array.isArray(t)?xS(t):t||null}function d_(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function j2(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new ve(1e3,"");if(!i[n])throw new ve(1001,"")}function B2(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new ve(1002,"")})}var od=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Ce,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Xf}get invalid(){return this.status===n_}get pending(){return this.status==id}get disabled(){return this.status===Jf}get enabled(){return this.status!==Jf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(y2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(y2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_2(e,this._rawAsyncValidators))}hasValidator(e){return r_(this._rawValidators,e)}hasAsyncValidator(e){return r_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(be(K({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new np(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new np(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(be(K({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new tp(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new tp(!0,i))}markAsPending(e={}){this.status=id;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rd(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(be(K({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Jf,this.errors=null,this._forEachChild(r=>{r.disable(be(K({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new a_(this.value,i)),this._events.next(new rd(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(be(K({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xf,this._forEachChild(i=>{i.enable(be(K({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(be(K({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xf||this.status===id)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new a_(this.value,n)),this._events.next(new rd(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(be(K({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jf:Xf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=id,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let i=R2(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new rd(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?Jf:this.errors?n_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(id)?id:this._anyControlsHaveStatus(n_)?n_:Xf}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new tp(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new np(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){d_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=d7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=h7(this._rawAsyncValidators)}},sd=class extends od{constructor(e,n,i){super(AS(n),MS(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){B2(this,!0,e),Object.keys(e).forEach(i=>{j2(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var DS=class extends sd{};var ld=new X("CallSetDisabledState",{providedIn:"root",factory:()=>rp}),rp="always";function h_(t,e){return[...e.path,t]}function c_(t,e,n=rp){RS(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),p7(t,e),g7(t,e),m7(t,e),f7(t,e)}function w2(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),u_(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function l_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function f7(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function RS(t,e){let n=L2(t);e.validator!==null?t.setValidators(v2(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=V2(t);e.asyncValidator!==null?t.setAsyncValidators(v2(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();l_(e._rawValidators,r),l_(e._rawAsyncValidators,r)}function u_(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=L2(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=V2(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(n=!0,t.setAsyncValidators(o))}}}let i=()=>{};return l_(e._rawValidators,i),l_(e._rawAsyncValidators,i),n}function p7(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&U2(t,e)})}function m7(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&U2(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function U2(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function g7(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function $2(t,e){t==null,RS(t,e)}function v7(t,e){return u_(t,e)}function z2(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function y7(t){return Object.getPrototypeOf(t.constructor)===ad}function H2(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function q2(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===$t?n=o:y7(o)?i=o:r=o}),r||i||n||null}function _7(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var w7={provide:Xn,useExisting:In(()=>Ir)},ep=Promise.resolve(),Ir=(()=>{let e=class e extends Xn{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ge,this.form=new sd({},SS(i),xS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){ep.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),c_(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){ep.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){ep.then(()=>{let r=this._findContainer(i.path),o=new sd({});$2(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){ep.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){ep.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,H2(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(U(ma,10),U(cd,10),U(ld,8))},e.\u0275dir=ze({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&re("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pn([w7]),Et]});let t=e;return t})();function b2(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function E2(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ip=class extends od{constructor(e=null,n,i){super(AS(n),MS(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),d_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(E2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){b2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){b2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){E2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var b7=t=>t instanceof ip,E7=(()=>{let e=class e extends Xn{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return h_(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275dir=ze({type:e,features:[Et]});let t=e;return t})();var C7={provide:ha,useExisting:In(()=>xn)},C2=Promise.resolve(),xn=(()=>{let e=class e extends ha{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new ip,this._registered=!1,this.name="",this.update=new Ge,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=q2(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),z2(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){c_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){C2.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&fr(r);C2.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?h_(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(U(Xn,9),U(ma,10),U(cd,10),U(pa,10),U(Ii,8),U(ld,8))},e.\u0275dir=ze({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pn([C7]),Et,ui]});let t=e;return t})(),mi=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ze({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),I7={provide:pa,useExisting:In(()=>rs),multi:!0},rs=(()=>{let e=class e extends ad{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275dir=ze({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&re("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[pn([I7]),Et]});let t=e;return t})(),D7={provide:pa,useExisting:In(()=>PS),multi:!0};var T7=(()=>{let e=class e{constructor(){this._accessors=[]}add(i,r){this._accessors.push([i,r])}remove(i){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===i){this._accessors.splice(r,1);return}}select(i){this._accessors.forEach(r=>{this._isSameGroup(r,i)&&r[1]!==i&&r[1].fireUncheck(i.value)})}_isSameGroup(i,r){return i[0].control?i[0]._parent===r._control._parent&&i[1].name===r.name:!1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),PS=(()=>{let e=class e extends ad{constructor(i,r,o,s){super(i,r),this._registry=o,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=te(ld,{optional:!0})??rp}ngOnInit(){this._control=this._injector.get(ha),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(i){this._state=i===this.value,this.setProperty("checked",this._state)}registerOnChange(i){this._fn=i,this.onChange=()=>{i(this.value),this._registry.select(this)}}setDisabledState(i){(this.setDisabledStateFired||i||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",i),this.setDisabledStateFired=!0}fireUncheck(i){this.writeValue(i)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(r){return new(r||e)(U(Wr),U(ht),U(T7),U(yt))},e.\u0275dir=ze({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,o){r&1&&re("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[pn([D7]),Et]});let t=e;return t})(),S7={provide:pa,useExisting:In(()=>kS),multi:!0},kS=(()=>{let e=class e extends ad{writeValue(i){this.setProperty("value",parseFloat(i))}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275dir=ze({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,o){r&1&&re("change",function(a){return o.onChange(a.target.value)})("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[pn([S7]),Et]});let t=e;return t})(),G2=new X("");var x7={provide:Xn,useExisting:In(()=>ud)},ud=(()=>{let e=class e extends Xn{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ge,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(u_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return c_(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){w2(i.control||null,i,!1),_7(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,H2(this.form,this.directives),this.ngSubmit.emit(i),this.form._events.next(new CS(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1,this.form._events.next(new IS(this.form))}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,o=this.form.get(i.path);r!==o&&(w2(r||null,i),b7(o)&&(c_(o,i,this.callSetDisabledState),i.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);$2(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&v7(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){RS(this.form,this),this._oldForm&&u_(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(U(ma,10),U(cd,10),U(ld,8))},e.\u0275dir=ze({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&re("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pn([x7]),Et,ui]});let t=e;return t})(),A7={provide:Xn,useExisting:In(()=>f_)},f_=(()=>{let e=class e extends E7{constructor(i,r,o){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(o)}_checkParentType(){W2(this._parent)}};e.\u0275fac=function(r){return new(r||e)(U(Xn,13),U(ma,10),U(cd,10))},e.\u0275dir=ze({type:e,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[pn([A7]),Et]});let t=e;return t})(),M7={provide:Xn,useExisting:In(()=>p_)},p_=(()=>{let e=class e extends Xn{constructor(i,r,o){super(),this.name=null,this._parent=i,this._setValidators(r),this._setAsyncValidators(o)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return h_(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){W2(this._parent)}};e.\u0275fac=function(r){return new(r||e)(U(Xn,13),U(ma,10),U(cd,10))},e.\u0275dir=ze({type:e,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[pn([M7]),Et]});let t=e;return t})();function W2(t){return!(t instanceof f_)&&!(t instanceof ud)&&!(t instanceof p_)}var R7={provide:ha,useExisting:In(()=>op)},op=(()=>{let e=class e extends ha{set isDisabled(i){}constructor(i,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ge,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=q2(this,s)}ngOnChanges(i){this._added||this._setUpControl(),z2(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return h_(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(U(Xn,13),U(ma,10),U(cd,10),U(pa,10),U(G2,8))},e.\u0275dir=ze({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[pn([R7]),Et,ui]});let t=e;return t})(),P7={provide:pa,useExisting:In(()=>dd),multi:!0};function K2(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function k7(t){return t.split(":")[0]}var dd=(()=>{let e=class e extends ad{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),o=K2(r,i);this.setProperty("value",o)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=k7(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275dir=ze({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&re("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[pn([P7]),Et]});let t=e;return t})(),m_=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(K2(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(U(ht),U(Wr),U(dd,9))},e.\u0275dir=ze({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),O7={provide:pa,useExisting:In(()=>Q2),multi:!0};function I2(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function N7(t){return t.split(":")[0]}var Q2=(()=>{let e=class e extends ad{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let o=i.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let u=a[c],h=this._getOptionValue(u.value);o.push(h)}}else{let a=r.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let h=this._getOptionValue(u.value);o.push(h)}}}this.value=o,i(o)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=N7(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275dir=ze({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&re("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[pn([O7]),Et]});let t=e;return t})(),g_=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(I2(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(I2(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(U(ht),U(Wr),U(Q2,9))},e.\u0275dir=ze({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();function F7(t){return typeof t=="number"?t:parseFloat(t)}var Y2=(()=>{let e=class e{constructor(){this._validator=i_}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):i_,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ze({type:e,features:[ui]});let t=e;return t})();var L7={provide:ma,useExisting:In(()=>Fc),multi:!0},Fc=(()=>{let e=class e extends Y2{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=i=>F7(i),this.createValidator=i=>x2(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275dir=ze({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&$i("min",o._enabled?o.min:null)},inputs:{min:"min"},features:[pn([L7]),Et]});let t=e;return t})(),V7={provide:ma,useExisting:In(()=>os),multi:!0};var os=(()=>{let e=class e extends Y2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fr,this.createValidator=i=>A2}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=di(e)))(o||e)}})(),e.\u0275dir=ze({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&$i("required",o._enabled?"":null)},inputs:{required:"required"},features:[pn([V7]),Et]});let t=e;return t})();var Z2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({});let t=e;return t})(),TS=class extends od{constructor(e,n,i){super(AS(n),MS(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){B2(this,!1,e),e.forEach((i,r)=>{j2(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function D2(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var v_=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let o=this._reduceControls(i),s={};return D2(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new sd(o,s)}record(i,r=null){let o=this._reduceControls(i);return new DS(o,r)}control(i,r,o){let s={};return this.useNonNullable?(D2(r)?s=r:(s.validators=r,s.asyncValidators=o),new ip(i,be(K({},s),{nonNullable:!0}))):new ip(i,r,o)}array(i,r,o){let s=i.map(a=>this._createControl(a));return new TS(s,r,o)}_reduceControls(i){let r={};return Object.keys(i).forEach(o=>{r[o]=this._createControl(i[o])}),r}_createControl(i){if(i instanceof ip)return i;if(i instanceof od)return i;if(Array.isArray(i)){let r=i[0],o=i.length>1?i[1]:null,s=i.length>2?i[2]:null;return this.control(r,o,s)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zt=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:ld,useValue:i.callSetDisabledState??rp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({imports:[Z2]});let t=e;return t})(),gi=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:G2,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:ld,useValue:i.callSetDisabledState??rp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Je({imports:[Z2]});let t=e;return t})();var lL=wi(vi());var j7="@firebase/firestore-compat",B7="0.3.32";function BS(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Y("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function X2(){if(typeof Uint8Array>"u")throw new Y("unimplemented","Uint8Arrays are not available in this environment.")}function J2(){if(!Ck())throw new Y("unimplemented","Blobs are unavailable in Firestore in this environment.")}var y_=class t{constructor(e){this._delegate=e}static fromBase64String(e){return J2(),new t(oo.fromBase64String(e))}static fromUint8Array(e){return X2(),new t(oo.fromUint8Array(e))}toBase64(){return J2(),this._delegate.toBase64()}toUint8Array(){return X2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function NS(t){return U7(t,["next","error","complete"])}function U7(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var FS=class{enableIndexedDbPersistence(e,n){return BI(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return UI(e._delegate)}clearIndexedDbPersistence(e){return $I(e._delegate)}},__=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ks||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&qi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){ly(this._delegate,e,n,i)}enableNetwork(){return HI(this._delegate)}disableNetwork(){return qI(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,VI("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return zI(this._delegate)}onSnapshotsInSync(e){return pD(this._delegate,e)}get app(){if(!this._appCompat)throw new Y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pd(this,uy(this._delegate,e))}catch(n){throw Jn(n,"collection()","Firestore.collection()")}}doc(e){try{return new fo(this,xu(this._delegate,e))}catch(n){throw Jn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bc(this,jI(this._delegate,e))}catch(n){throw Jn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return gD(this._delegate,n=>e(new w_(this,n)))}batch(){return mn(this._delegate),new b_(new iy(this._delegate,e=>Au(this._delegate,e)))}loadBundle(e){return GI(this._delegate,e)}namedQuery(e){return WI(this._delegate,e).then(n=>n?new Bc(this,n):null)}},hd=class extends bu{constructor(e){super(),this.firestore=e}convertBytes(e){return new y_(new oo(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return fo.forKey(n,this.firestore,null)}};function $7(t){dI(t)}var w_=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new hd(e)}get(e){let n=Lc(e);return this._delegate.get(n).then(i=>new Vc(this._firestore,new Wi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=Lc(e);return i?(BS("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Lc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Lc(e);return this._delegate.delete(n),this}},b_=class{constructor(e){this._delegate=e}set(e,n,i){let r=Lc(e);return i?(BS("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Lc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Lc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},fd=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Hs(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jc(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new hd(e),n),r.set(n,o)),o}};fd.INSTANCES=new WeakMap;var fo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hd(e)}static forPath(e,n,i){if(e.length%2!==0)throw new Y("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Dt(n._delegate,i,new ce(e)))}static forKey(e,n,i){return new t(n,new Dt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new pd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pd(this.firestore,uy(this._delegate,e))}catch(n){throw Jn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=st(e),e instanceof Dt?dy(this._delegate,e):!1}set(e,n){n=BS("DocumentReference.set",n);try{return n?vy(this._delegate,e,n):vy(this._delegate,e)}catch(i){throw Jn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?yy(this._delegate,e):yy(this._delegate,e,n,...i)}catch(r){throw Jn(r,"updateDoc()","DocumentReference.update()")}}delete(){return hD(this._delegate)}onSnapshot(...e){let n=eL(e),i=tL(e,r=>new Vc(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return _y(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=aD(this._delegate):e?.source==="server"?n=cD(this._delegate):n=sD(this._delegate),n.then(i=>new Vc(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(fd.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Jn(t,e,n){return t.message=t.message.replace(e,n),t}function eL(t){for(let e of t)if(typeof e=="object"&&!NS(e))return e;return{}}function tL(t,e){var n,i;let r;return NS(t[0])?r=t[0]:NS(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Vc=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new fo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return gy(this._delegate,e._delegate)}},jc=class extends Vc{data(e){let n=this._delegate.data(e);return this._delegate._converter||uk(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Bc=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new hd(e)}where(e,n,i){try{return new t(this.firestore,so(this._delegate,XI(e,n,i)))}catch(r){throw Jn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,so(this._delegate,JI(e,n)))}catch(i){throw Jn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,so(this._delegate,eD(e)))}catch(n){throw Jn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,so(this._delegate,tD(e)))}catch(n){throw Jn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,so(this._delegate,nD(...e)))}catch(n){throw Jn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,so(this._delegate,iD(...e)))}catch(n){throw Jn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,so(this._delegate,rD(...e)))}catch(n){throw Jn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,so(this._delegate,oD(...e)))}catch(n){throw Jn(n,"endAt()","Query.endAt()")}}isEqual(e){return hy(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=uD(this._delegate):e?.source==="server"?n=dD(this._delegate):n=lD(this._delegate),n.then(i=>new sp(this.firestore,new yr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=eL(e),i=tL(e,r=>new sp(this.firestore,new yr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return _y(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(fd.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},LS=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new jc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},sp=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Bc(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new LS(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new jc(this._firestore,i))})}isEqual(e){return gy(this._delegate,e._delegate)}},pd=class t extends Bc{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new fo(this.firestore,e):null}doc(e){try{return e===void 0?new fo(this.firestore,xu(this._delegate)):new fo(this.firestore,xu(this._delegate,e))}catch(n){throw Jn(n,"doc()","CollectionReference.doc()")}}add(e){return fD(this._delegate,e).then(n=>new fo(this.firestore,n))}isEqual(e){return dy(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(fd.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Lc(t){return ot(t,Dt)}var VS=class t{constructor(...e){this._delegate=new vr(...e)}static documentId(){return new t(Jt.keyField().canonicalString())}isEqual(e){return e=st(e),e instanceof vr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var jS=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=yD();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=vD();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=_D(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=wD(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=bD(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var z7={Firestore:__,GeoPoint:wc,Timestamp:Ft,Blob:y_,Transaction:w_,WriteBatch:b_,DocumentReference:fo,DocumentSnapshot:Vc,Query:Bc,QueryDocumentSnapshot:jc,QuerySnapshot:sp,CollectionReference:pd,FieldPath:VS,FieldValue:jS,setLogLevel:$7,CACHE_SIZE_UNLIMITED:BO};function H7(t,e){t.INTERNAL.registerComponent(new ir("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},z7)))}function q7(t){H7(t,(e,n)=>new __(e,n,new FS)),t.registerVersion(j7,B7)}q7(bi);function G7(t,e=Nr){return new Ee(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function nL(t,e){return G7(t,e)}function W7(t,e){return nL(t,e).pipe(oi(void 0),Cl(),oe(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function zS(t,e){return nL(t,e).pipe(oe(n=>({payload:n,type:"query"})))}var E_=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=oL(i,n);return new I_(r,o,this.afs)}snapshotChanges(){return W7(this.ref,this.afs.schedulers.outsideAngular).pipe(wn)}valueChanges(e={}){return this.snapshotChanges().pipe(oe(({payload:n})=>e.idField?be(K({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return je(this.ref.get(e)).pipe(wn)}};function C_(t,e){return zS(t,e).pipe(oi(void 0),Cl(),oe(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let u=o.find(m=>m.doc.ref.isEqual(a.ref)),h=i?.payload.docs.find(m=>m.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function iL(t,e,n){return C_(t,n).pipe(ja((i,r)=>K7(i,r.map(o=>o.payload),e),[]),bl(),oe(i=>i.map(r=>({type:r.type,payload:r}))))}function K7(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=Q7(t,i))}),t}function US(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function Q7(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return US(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return US(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return US(t,e.oldIndex,1);break}return t}function rL(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var I_=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=C_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(oe(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(oi(void 0),Cl(),dt(([i,r])=>r.length>0||!i),oe(([,i])=>i),wn)}auditTrail(e){return this.stateChanges(e).pipe(ja((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=rL(e);return iL(this.query,n,this.afs.schedulers.outsideAngular).pipe(wn)}valueChanges(e={}){return zS(this.query,this.afs.schedulers.outsideAngular).pipe(oe(n=>n.payload.docs.map(i=>e.idField?be(K({},i.data()),{[e.idField]:i.id}):i.data())),wn)}get(e){return je(this.query.get(e)).pipe(wn)}add(e){return this.ref.add(e)}doc(e){return new E_(this.ref.doc(e),this.afs)}},$S=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?C_(this.query,this.afs.schedulers.outsideAngular).pipe(wn):C_(this.query,this.afs.schedulers.outsideAngular).pipe(oe(n=>n.filter(i=>e.indexOf(i.type)>-1)),dt(n=>n.length>0),wn)}auditTrail(e){return this.stateChanges(e).pipe(ja((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=rL(e);return iL(this.query,n,this.afs.schedulers.outsideAngular).pipe(wn)}valueChanges(e={}){return zS(this.query,this.afs.schedulers.outsideAngular).pipe(oe(i=>i.payload.docs.map(r=>e.idField?K({[e.idField]:r.id},r.data()):r.data())),wn)}get(e){return je(this.query.get(e)).pipe(wn)}},Y7=new X("angularfire2.enableFirestorePersistence"),Z7=new X("angularfire2.firestore.persistenceSettings"),X7=new X("angularfire2.firestore.settings"),J7=new X("angularfire2.firestore.use-emulator");function oL(t,e=n=>n){return{query:e(t),ref:t}}var Tt=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,c,u,h,m,_,w,S,k,R,q,ne){this.schedulers=c;let W=Ku(n,a,i),ee=h;m&&WT(W,a,_,S,k,R,w,q),[this.firestore,this.persistenceEnabled$]=Qu(`${W.name}.firestore`,"AngularFirestore",W.name,()=>{let me=a.runOutsideAngular(()=>W.firestore());if(o&&me.settings(o),ee&&me.useEmulator(...ee),r&&!Os(s)){let de=()=>{try{return je(me.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(A){return typeof console<"u"&&console.warn(A),ue(!1)}};return[me,a.runOutsideAngular(de)]}else return[me,ue(!1)]},[o,ee,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=oL(r,i),a=this.schedulers.ngZone.run(()=>o);return new I_(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new $S(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new E_(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(P(la),P(Wu,8),P(Y7,8),P(X7,8),P(fn),P(ge),P(hi),P(Z7,8),P(J7,8),P(kt,8),P(UT,8),P($T,8),P(zT,8),P(HT,8),P(qT,8),P(GT,8),P(Kn,8))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var md=class{constructor(e,n,i,r,o,s,a,c){this.uid=e,this.nombre=n,this.apellido=i,this.edad=r,this.dni=o,this.obraSocial=s,this.foto1=a,this.foto2=c}};var gd=class{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var D_=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new gd(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new gd(i,this,this._ref))},n)}on(e,n,i,r){let o;return n&&(typeof n=="function"?o=s=>n(new gd(s,this,this._ref)):o={next:n.next?s=>n.next(new gd(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,i||void 0,r||void 0)}},T_=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Uc(e,this._service))}get items(){return this._delegate.items.map(e=>new Uc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Uc=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=RN(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new D_(jD(this._delegate,e,n),this)}putString(e,n=Si.RAW,i){this._throwIfRoot("putString");let r=ND(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),new D_(new mf(this._delegate,new ku(r.data,!0),o),this)}listAll(){return zD(this._delegate).then(e=>new T_(e,this.storage))}list(e){return $D(this._delegate,e||void 0).then(n=>new T_(n,this.storage))}getMetadata(){return BD(this._delegate)}updateMetadata(e){return UD(this._delegate,e)}getDownloadURL(){return HD(this._delegate)}delete(){return this._throwIfRoot("delete"),qD(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw kD(e)}};var S_=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(sL(e))throw Tc("ref() expected a child path but got a URL, use refFromURL instead.");return new Uc(Ty(this._delegate,e),this)}refFromURL(e){if(!sL(e))throw Tc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Zn.makeFromUrl(e,this._delegate.host)}catch{throw Tc("refFromUrl() expected a valid full URL but got an invalid one.")}return new Uc(Ty(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){Sy(this._delegate,e,n,i)}};function sL(t){return/^[A-Za-z]+:\/\//.test(t)}var eK="@firebase/storage-compat",tK="0.3.8";var nK="storage-compat";function iK(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new S_(n,i)}function rK(t){let e={TaskState:Vn,TaskEvent:DN,StringFormat:Si,Storage:S_,Reference:Uc};t.INTERNAL.registerComponent(new ir(nK,iK,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(eK,tK)}rK(bi);function oK(t){return new Ee(e=>{let n=s=>e.next(s),i=s=>e.error(s),r=()=>e.complete();n(t.snapshot);let o=t.on("state_changed",n);return t.then(s=>{n(s),r()},s=>{n(t.snapshot),i(s)}),function(){o()}}).pipe(wl(0))}function aL(t){let e=oK(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(oe(n=>n.bytesTransferred/n.totalBytes*100))}}function x_(t){return{getDownloadURL:()=>ue(void 0).pipe(Xb,ct(()=>t.getDownloadURL()),wn),getMetadata:()=>ue(void 0).pipe(Xb,ct(()=>t.getMetadata()),wn),delete:()=>je(t.delete()),child:e=>x_(t.child(e)),updateMetadata:e=>je(t.updateMetadata(e)),put:(e,n)=>{let i=t.put(e,n);return aL(i)},putString:(e,n,i)=>{let r=t.putString(e,n,i);return aL(r)},list:e=>je(t.list(e)),listAll:()=>je(t.listAll())}}var sK=new X("angularfire2.storageBucket"),aK=new X("angularfire2.storage.maxUploadRetryTime"),cK=new X("angularfire2.storage.maxOperationRetryTime"),lK=new X("angularfire2.storage.use-emulator"),cL=(()=>{class t{storage;constructor(n,i,r,o,s,a,c,u,h,m){let _=Ku(n,s,i);this.storage=Qu(`${_.name}.storage.${r}`,"AngularFireStorage",_.name,()=>{let w=s.runOutsideAngular(()=>_.storage(r||void 0)),S=h;return S&&w.useEmulator(...S),c&&w.setMaxUploadRetryTime(c),u&&w.setMaxOperationRetryTime(u),w},[c,u])}ref(n){return x_(this.storage.ref(n))}refFromURL(n){return x_(this.storage.refFromURL(n))}upload(n,i,r){let o=this.storage.ref(n);return x_(o).put(i,r)}static \u0275fac=function(i){return new(i||t)(P(la),P(Wu,8),P(sK,8),P(fn),P(ge),P(hi),P(aK,8),P(cK,8),P(lK,8),P(Kn,8))};static \u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Zi=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.firestore=r,this.storage=o}login(i,r){return N(this,null,function*(){try{let o=yield this.afAuth.signInWithEmailAndPassword(i,r);if(o.user){let s=o.user.uid;if(this.getUserType(s)==="especialistas"){let c=yield this.getEspecialista(s);if(c&&c.habilitado)console.log("Usuario especialista habilitado, permitiendo acceso...");else throw console.error("El usuario especialista no est\xE1 habilitado."),new Error("El usuario especialista no est\xE1 habilitado.")}else console.log("El usuario no es un especialista, permitiendo acceso...")}}catch(o){throw console.error("Error al iniciar sesi\xF3n:",o),o}})}getAllPacientes(){return N(this,null,function*(){try{let i=yield this.firestore.collection("pacientes").get().toPromise(),r=[];return i?.forEach(o=>{let s=o.data(),a=new md(s.uid,s.nombre,s.apellido,s.edad,s.dni,s.obraSocial,s.foto1,s.foto2);r.push(a)}),r}catch(i){return console.error("Error al obtener todos los pacientes: ",i),[]}})}obtenerEspecialidades(){return N(this,null,function*(){try{return(yield this.firestore.collection("especialidades").get().toPromise())?.docs.map(o=>K({id:o.id},o.data()))||[]}catch(i){return console.error("Error al obtener las especialidades: ",i),[]}})}obtenerEspecialistas(){return N(this,null,function*(){try{return(yield this.firestore.collection("especialistas").get().toPromise())?.docs.map(o=>K({id:o.id},o.data()))||[]}catch(i){return console.error("Error al obtener los especialistas: ",i),[]}})}modificarTurno(i){return N(this,null,function*(){yield this.firestore.doc(`turnos/${i.uid}`).update({especialidad:i.idEspecialidad,especialista:i.idEspecialista,paciente:i.pacienteId,estado:i.estado,fecha:i.fecha,hora:i.hora,resena:i.resena,comentario:i.comentario,atencion:i.atencion,encuesta:i.encuesta,historiaClinica:i.historiaClinica})})}guardarHistoriaClinica(i){return N(this,null,function*(){try{let r=yield this.firestore.collection("historiasClinicas").add({altura:i.altura,peso:i.peso,temperatura:i.temperatura,presion:i.presion,datosDinamicos:i.datosDinamicos});return console.log("Document written with ID: ",r.id),r.id}catch(r){return console.error("Error adding document: ",r),!1}})}getUserType(i){return"especialistas"}getEspecialista(i){return N(this,null,function*(){try{let r=yield this.firestore.collection("especialistas").doc(i).get().toPromise();return r&&r.exists?r.data():null}catch(r){return console.error("Error al obtener datos del especialista:",r),null}})}logout(){return N(this,null,function*(){try{yield this.afAuth.signOut()}catch(i){console.error("Error al cerrar sesi\xF3n:",i)}})}registerUser(i,r,o){return N(this,null,function*(){try{let s=yield this.afAuth.createUserWithEmailAndPassword(i.email,i.password);if(!s.user)throw new Error("User creation failed");let a=s.user.uid,c=r[0],u=r[1],h=`images/${a}/image1.jpg`,m=`images/${a}/image2.jpg`,_=this.storage.ref(h),w=this.storage.ref(m);yield this.storage.upload(h,c).snapshotChanges().pipe(or(()=>N(this,null,function*(){let S=yield _.getDownloadURL().toPromise();i.imageUrl1=S}))).toPromise(),yield this.storage.upload(m,u).snapshotChanges().pipe(or(()=>N(this,null,function*(){let S=yield w.getDownloadURL().toPromise();i.imageUrl2=S}))).toPromise(),yield this.firestore.collection(o).doc(a).set(i)}catch(s){console.error(`Error al registrar ${o}:`,s)}})}registerPatient(i,r,o){return this.registerUser(i,[r,o],"pacientes")}registerEspecialista(i,r){return this.registerUser(i,[r],"especialistas")}habilitarUsuario(i,r,o){return N(this,null,function*(){try{yield this.firestore.collection(o).doc(i).update({habilitado:r})}catch(s){throw console.error(`Error al habilitar/deshabilitar usuario ${i} (${o}):`,s),s}})}getCurrentUser(){return this.afAuth.currentUser}getEspecialistaProfile(i){return this.firestore.collection("especialistas").doc(i).valueChanges()}obtenerTodosLosTurnos(){return this.firestore.collection("turnos").valueChanges({idField:"id"})}obtenerHorarios(){return this.firestore.collection("horarios").valueChanges({idField:"id"})}guardarHorario(i){return this.firestore.collection("horarios").add(i)}obtenerTurnos(){return this.firestore.collection("turnos").valueChanges({idField:"id"})}obtenerHorariosPorEspecialista(i){return this.firestore.collection("horarios",r=>r.where("especialistaId","==",i)).valueChanges({idField:"id"})}guardarHorariosPorEspecialista(i,r){let o=this.firestore.firestore.batch(),s=this.firestore.collection("horarios");return r.forEach(a=>{let c=s.doc(a.id).ref;o.set(c,be(K({},a),{especialistaId:i}))}),o.commit()}updateEspecialistaHorarios(i,r){return N(this,null,function*(){try{yield this.firestore.collection("especialistas").doc(i).update({horarios:r})}catch(o){throw console.error("Error al actualizar los horarios:",o),o}})}};e.\u0275fac=function(r){return new(r||e)(P(kt),P(Tt),P(cL))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var yd=(()=>{let e=class e{constructor(){this.loadingSubject=new Wt(!1),this.loading$=this.loadingSubject.asObservable()}show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dK(t,e){if(t&1&&(C(0,"p",19),M(1),E()),t&2){let n=se();F(),ft(n.errorMessage)}}function hK(t,e){t&1&&(C(0,"div",20),ae(1,"div",21),E())}var uL=(()=>{let e=class e{constructor(i,r,o,s,a){this.afAuth=i,this.router=r,this.firestore=o,this.firebaseService=s,this.loadingService=a,this.email="",this.password="",this.errorMessage="",this.successMessage="",this.loading$=this.loadingService.loading$}login(){return N(this,null,function*(){this.loadingService.show();try{let{user:i}=yield this.afAuth.signInWithEmailAndPassword(this.email,this.password);if(i){let r=yield this.getUserType(i.uid);if(!r)throw new Error("El usuario no tiene un tipo definido");if(r==="especialistas"){let o=yield this.getEspecialista(i.uid);if(o&&o.habilitado===!0)this.successMessage="Inicio de sesi\xF3n exitoso",this.errorMessage="",this.router.navigate(["/home"]);else throw yield this.afAuth.signOut(),new Error("La cuenta de especialista ha sido deshabilitada")}else this.successMessage="Inicio de sesi\xF3n exitoso",this.errorMessage="",this.router.navigate(["/home"])}}catch(i){this.errorMessage=this.getErrorMessage(i),lL.default.fire({icon:"error",title:"ERROR",text:this.errorMessage})}finally{this.loadingService.hide()}})}setQuickAccess(i){let r={admin:{email:"juan@juann.com",password:"123456"},especialista:{email:"rosario@rosario.com",password:"123456"},especialista2:{email:"esteban@esteban.com",password:"123456"},paciente1:{email:"mariana@marian.com",password:"123456"},paciente2:{email:"aguss@agus.com",password:"123456"},paciente3:{email:"gemma@gemma.com",password:"123456"}};this.email=r[i]?.email||"",this.password=r[i]?.password||""}getErrorMessage(i){let r="";switch(i.code){case"auth/user-not-found":r="No hay ning\xFAn usuario con ese correo";break;case"auth/invalid-email":r="El formato del correo electr\xF3nico es inv\xE1lido";break;case"auth/wrong-password":r="La contrase\xF1a es incorrecta";break;case"auth/user-disabled":r="La cuenta de usuario ha sido deshabilitada";break;case"auth/invalid-credential":r="La credencial suministrada es incorrecta, est\xE1 malformada o ha caducado";break;default:r="Error al iniciar sesi\xF3n: "+i.message;break}return r}getUserType(i){return N(this,null,function*(){try{return(yield this.firestore.collection("administradores").doc(i).get().toPromise())?.exists?"administradores":(yield this.firestore.collection("especialistas").doc(i).get().toPromise())?.exists?"especialistas":(yield this.firestore.collection("pacientes").doc(i).get().toPromise())?.exists?"pacientes":null}catch(r){return console.error("Error al determinar el tipo de usuario:",r),null}})}getEspecialista(i){return N(this,null,function*(){try{return(yield this.firestore.collection("especialistas").doc(i).get().toPromise())?.data()||null}catch(r){return console.error("Error al obtener datos del especialista:",r),null}})}};e.\u0275fac=function(r){return new(r||e)(U(kt),U(Mi),U(Tt),U(Zi),U(yd))},e.\u0275cmp=Ae({type:e,selectors:[["app-login"]],standalone:!0,features:[Me],decls:35,vars:6,consts:[[1,"login-container"],[1,"quick-access-container"],[1,"quick-access-buttons"],[1,"quick-access-button",3,"click"],["src","assets/administrador.png","alt","Admin"],["src","assets/Dentista.png","alt","Especialista"],["src","assets/Especialista.png","alt","Especialista 2"],["src","assets/PacienteUno.png","alt","Paciente 1"],["src","assets/PacienteDos.png","alt","Paciente 2"],["src","assets/PacienteTres.png","alt","Paciente 3"],[1,"login-form"],[3,"ngSubmit"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit"],["class","error-message",4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"error-message"],[1,"loading-overlay"],[1,"spinner"]],template:function(r,o){r&1&&(C(0,"body")(1,"div",0)(2,"div",1)(3,"h3"),M(4,"Acceso R\xE1pido"),E(),C(5,"div",2)(6,"button",3),re("click",function(){return o.setQuickAccess("admin")}),ae(7,"img",4),E(),C(8,"button",3),re("click",function(){return o.setQuickAccess("especialista")}),ae(9,"img",5),E(),C(10,"button",3),re("click",function(){return o.setQuickAccess("especialista2")}),ae(11,"img",6),E(),C(12,"button",3),re("click",function(){return o.setQuickAccess("paciente1")}),ae(13,"img",7),E(),C(14,"button",3),re("click",function(){return o.setQuickAccess("paciente2")}),ae(15,"img",8),E(),C(16,"button",3),re("click",function(){return o.setQuickAccess("paciente3")}),ae(17,"img",9),E()()(),C(18,"div",10)(19,"h2"),M(20,"Inicio de Sesi\xF3n"),E(),C(21,"form",11),re("ngSubmit",function(){return o.login()}),C(22,"div")(23,"label",12),M(24,"Email:"),E(),C(25,"input",13),Ke("ngModelChange",function(a){return Ze(o.email,a)||(o.email=a),a}),E()(),C(26,"div")(27,"label",14),M(28,"Password:"),E(),C(29,"input",15),Ke("ngModelChange",function(a){return Ze(o.password,a)||(o.password=a),a}),E()(),C(30,"button",16),M(31,"Iniciar Sesi\xF3n"),E()(),pe(32,dK,2,1,"p",17)(33,hK,2,0,"div",18),jo(34,"async"),E()()()),r&2&&(F(25),We("ngModel",o.email),F(4),We("ngModel",o.password),F(3),J("ngIf",o.errorMessage),F(),J("ngIf",Bo(34,4,o.loading$)))},dependencies:[gi,mi,$t,cn,pi,os,It,ks,zt,xn,Ir],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#349cb6;display:flex;justify-content:center;align-items:center;background-attachment:fixed;overflow-y:hidden;height:100vh;margin:0;background-image:linear-gradient(45deg,#349cb6,#1a5575,#669bbc);animation:_ngcontent-%COMP%_gradientAnimation 10s infinite alternate}@keyframes _ngcontent-%COMP%_gradientAnimation{0%{background-position:0% 50%}to{background-position:100% 50%}}.login-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row;height:100vh}.login-form[_ngcontent-%COMP%]{width:90%;padding:110px;background-color:#ede7e4;border-radius:8px;box-shadow:0 0 10px #0000001a}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px;text-align:center}label[_ngcontent-%COMP%]{color:#0a0a0a;display:block;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #dddddd;border-radius:4px;margin-bottom:15px;box-sizing:border-box}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#0056b3;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#003d82}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:10px;text-align:center}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-top:16px solid #3498db;border-radius:50%;width:120px;height:120px;animation:spin 1s linear infinite}.quick-access-container[_ngcontent-%COMP%]{width:90%;padding:35px;background-color:#225186;border-right:1px solid #ddd;display:flex;flex-direction:column;align-items:center;border-top-left-radius:8px;border-bottom-left-radius:8px}.quick-access-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:10px;text-align:center}.quick-access-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:10px;border-radius:0}.quick-access-button[_ngcontent-%COMP%]{width:60px;height:60px;background:none;border:none;cursor:pointer;padding:0;overflow:hidden;border-radius:0;transition:background-color .3s ease}.quick-access-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.quick-access-button[_ngcontent-%COMP%]:hover{background-color:#0000001a}.quick-access-container[_ngcontent-%COMP%]:before{content:"";position:absolute;width:20px;height:20px;background-color:#ffffff4d;border-radius:50%;animation:_ngcontent-%COMP%_floatBubble 5s infinite alternate;pointer-events:none}@keyframes _ngcontent-%COMP%_floatBubble{0%{transform:translateY(0)}50%{transform:translateY(-20px)}to{transform:translateY(0)}}']});let t=e;return t})();var A_=wi(vi());function fK(t,e){t&1&&(C(0,"div",22),ae(1,"div",23),E())}var dL=(()=>{let e=class e{constructor(i,r){this.firebaseService=i,this.loadingService=r,this.paciente={nombre:"",apellido:"",edad:null,dni:null,obraSocial:"",email:"",password:""},this.selectedPacienteFiles={},this.errorMessage="",this.successMessage="",this.loading$=this.loadingService.loading$}onFileSelected(i,r){let o=i.target.files[0];o&&(this.selectedPacienteFiles[r]=o)}registerPatient(i){return N(this,null,function*(){i.preventDefault();let r=Object.values(this.selectedPacienteFiles);if(r.length>=2){this.loadingService.show();try{let[o,s]=r;yield this.firebaseService.registerPatient(this.paciente,o,s),this.successMessage="Paciente registrado con \xE9xito",A_.default.fire({icon:"success",title:"\xC9xito",text:this.successMessage}),this.resetForm()}catch(o){console.error("Error al registrar paciente:",o),this.errorMessage="Error al registrar paciente: "+o,A_.default.fire({icon:"error",title:"Error",text:this.errorMessage})}finally{this.loadingService.hide()}}else this.errorMessage="Se requieren al menos dos im\xE1genes para el perfil del paciente.",A_.default.fire({icon:"error",title:"Error",text:this.errorMessage})})}resetForm(){this.paciente={nombre:"",apellido:"",edad:null,dni:null,obraSocial:"",email:"",password:""},this.selectedPacienteFiles={},this.errorMessage="",this.successMessage=""}};e.\u0275fac=function(r){return new(r||e)(U(Zi),U(yd))},e.\u0275cmp=Ae({type:e,selectors:[["app-registro"]],standalone:!0,features:[Me],decls:44,vars:10,consts:[[1,"container"],[3,"submit"],["for","nombre"],["type","text","id","nombre","name","nombre","placeholder","Nombre","required","",3,"ngModelChange","ngModel"],["for","apellido"],["type","text","id","apellido","name","apellido","placeholder","Apellido","required","",3,"ngModelChange","ngModel"],["for","edad"],["type","number","id","edad","name","edad","placeholder","Edad","required","","min","0",3,"ngModelChange","ngModel"],["for","dni"],["type","number","id","dni","name","dni","placeholder","DNI","required","",3,"ngModelChange","ngModel"],["for","obraSocial"],["type","text","id","obraSocial","name","obraSocial","placeholder","Obra Social","required","",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","Mail","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["for","perfil1"],["type","file","id","perfil1","required","",3,"change"],["for","perfil2"],["type","file","id","perfil2","required","",3,"change"],["type","submit","value","Registrar"],["class","loading-overlay",4,"ngIf"],[1,"loading-overlay"],[1,"spinner"]],template:function(r,o){r&1&&(C(0,"body")(1,"div",0)(2,"h2"),M(3,"Registro de Pacientes"),E(),C(4,"form",1),re("submit",function(a){return o.registerPatient(a)}),C(5,"div")(6,"label",2),M(7,"Nombre:"),E(),C(8,"input",3),Ke("ngModelChange",function(a){return Ze(o.paciente.nombre,a)||(o.paciente.nombre=a),a}),E()(),C(9,"div")(10,"label",4),M(11,"Apellido:"),E(),C(12,"input",5),Ke("ngModelChange",function(a){return Ze(o.paciente.apellido,a)||(o.paciente.apellido=a),a}),E()(),C(13,"div")(14,"label",6),M(15,"Edad:"),E(),C(16,"input",7),Ke("ngModelChange",function(a){return Ze(o.paciente.edad,a)||(o.paciente.edad=a),a}),E()(),C(17,"div")(18,"label",8),M(19,"DNI:"),E(),C(20,"input",9),Ke("ngModelChange",function(a){return Ze(o.paciente.dni,a)||(o.paciente.dni=a),a}),E()(),C(21,"div")(22,"label",10),M(23,"Obra Social:"),E(),C(24,"input",11),Ke("ngModelChange",function(a){return Ze(o.paciente.obraSocial,a)||(o.paciente.obraSocial=a),a}),E()(),C(25,"div")(26,"label",12),M(27,"Email:"),E(),C(28,"input",13),Ke("ngModelChange",function(a){return Ze(o.paciente.email,a)||(o.paciente.email=a),a}),E()(),C(29,"div")(30,"label",14),M(31,"Password:"),E(),C(32,"input",15),Ke("ngModelChange",function(a){return Ze(o.paciente.password,a)||(o.paciente.password=a),a}),E()(),C(33,"div")(34,"label",16),M(35,"Seleccionar primera imagen:"),E(),C(36,"input",17),re("change",function(a){return o.onFileSelected(a,1)}),E()(),C(37,"div")(38,"label",18),M(39,"Seleccionar segunda imagen:"),E(),C(40,"input",19),re("change",function(a){return o.onFileSelected(a,2)}),E()(),ae(41,"input",20),E(),pe(42,fK,2,0,"div",21),jo(43,"async"),E()()),r&2&&(F(8),We("ngModel",o.paciente.nombre),F(4),We("ngModel",o.paciente.apellido),F(4),We("ngModel",o.paciente.edad),F(4),We("ngModel",o.paciente.dni),F(4),We("ngModel",o.paciente.obraSocial),F(4),We("ngModel",o.paciente.email),F(4),We("ngModel",o.paciente.password),F(10),J("ngIf",Bo(43,8,o.loading$)))},dependencies:[It,zt,mi,$t,rs,cn,pi,os,Fc,xn,Ir,ks],styles:["body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;background-color:#ede7e4;display:flex;justify-content:center;align-items:center;height:100vh;margin:0 0 20px;padding:0;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:600px;padding:20px;background-color:#349cb6;box-shadow:0 0 10px #0000001a;border-radius:40px;margin:80px}.img-paciente[_ngcontent-%COMP%]{float:left;margin-right:50px;max-width:15%}.img-especialista[_ngcontent-%COMP%]{float:right;margin-right:50px;max-width:15%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:20px}.registro-paciente[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .registro-especialista[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:40%}.registro-especialista[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex:1;margin-right:180px}h2[_ngcontent-%COMP%]{color:#333;border-bottom:1px solid #ddd;padding-bottom:10px;text-align:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{padding:1px;margin:10px 0;border:1px solid #ddd;border-radius:4px;transition:all .3s ease;width:100%}input[type=submit][_ngcontent-%COMP%]{background-color:#56ab2f;color:#fff;border:none;border-radius:4px;padding:10px;cursor:pointer;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#449c24}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-top:16px solid #3498db;border-radius:50%;width:120px;height:120px;animation:spin 1s linear infinite}"]});let t=e;return t})();var ap=wi(vi());var hL=(()=>{let e=class e{constructor(i,r){this.firestore=i,this.firebaseService=r,this.pacientes=[],this.usuarios=[],this.especialistas=[],this.administradores=[],this.admin={nombre:"",apellido:"",edad:null,dni:null,email:"",password:"",imagen:null}}ngOnInit(){this.cargarPacientes(),this.cargarEspecialistas(),this.cargarAdministradores()}cargarPacientes(){this.firestore.collection("pacientes").valueChanges({idField:"index"}).subscribe(i=>{this.pacientes=i})}cargarEspecialistas(){this.firestore.collection("especialistas").valueChanges({idField:"index"}).subscribe(i=>{this.especialistas=i})}cargarAdministradores(){this.firestore.collection("administradores").valueChanges({idField:"id"}).subscribe(i=>{this.administradores=i})}habilitarUsuario(i,r,o){let s=o==="paciente"?"pacientes":o==="especialista"?"especialistas":"administradores";this.firestore.collection(s).doc(i).update({habilitado:r}).then(()=>{ap.default.fire({icon:"success",title:"Actualizado",text:`El usuario ha sido ${r?"habilitado":"inhabilitado"}.`})}).catch(a=>{console.error("Error al actualizar el usuario:",a),ap.default.fire({icon:"error",title:"Error",text:"Hubo un problema al actualizar el usuario."})})}onFileSelected(i){this.selectedFile=i.target.files[0]}registrarAdmin(){return N(this,null,function*(){try{yield this.firebaseService.registerUser(this.admin,[this.selectedFile],"administradores"),ap.default.fire({icon:"success",title:"Registro exitoso",text:"El administrador ha sido registrado con \xE9xito."}),this.cargarAdministradores()}catch(i){console.error("Error al registrar administrador:",i),ap.default.fire({icon:"error",title:"Error",text:"Hubo un problema al registrar el administrador."})}})}};e.\u0275fac=function(r){return new(r||e)(U(Tt),U(Zi))},e.\u0275cmp=Ae({type:e,selectors:[["app-usuarios"]],standalone:!0,features:[Me],decls:13,vars:6,consts:[[3,"submit"],["type","text","name","nombre","placeholder","Nombre","required","",3,"ngModelChange","ngModel"],["type","text","name","apellido","placeholder","Apellido","required","",3,"ngModelChange","ngModel"],["type","number","name","edad","placeholder","Edad","required","","min","0",3,"ngModelChange","ngModel"],["type","number","name","dni","placeholder","DNI","required","",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["type","file","required","",3,"change"],["type","submit"]],template:function(r,o){r&1&&(C(0,"div")(1,"h2"),M(2,"Registrar Administrador"),E(),C(3,"form",0),re("submit",function(){return o.registrarAdmin()}),C(4,"input",1),Ke("ngModelChange",function(a){return Ze(o.admin.nombre,a)||(o.admin.nombre=a),a}),E(),C(5,"input",2),Ke("ngModelChange",function(a){return Ze(o.admin.apellido,a)||(o.admin.apellido=a),a}),E(),C(6,"input",3),Ke("ngModelChange",function(a){return Ze(o.admin.edad,a)||(o.admin.edad=a),a}),E(),C(7,"input",4),Ke("ngModelChange",function(a){return Ze(o.admin.dni,a)||(o.admin.dni=a),a}),E(),C(8,"input",5),Ke("ngModelChange",function(a){return Ze(o.admin.email,a)||(o.admin.email=a),a}),E(),C(9,"input",6),Ke("ngModelChange",function(a){return Ze(o.admin.password,a)||(o.admin.password=a),a}),E(),C(10,"input",7),re("change",function(a){return o.onFileSelected(a)}),E(),C(11,"button",8),M(12,"Registrar"),E()()()),r&2&&(F(4),We("ngModel",o.admin.nombre),F(),We("ngModel",o.admin.apellido),F(),We("ngModel",o.admin.edad),F(),We("ngModel",o.admin.dni),F(),We("ngModel",o.admin.email),F(),We("ngModel",o.admin.password))},dependencies:[zt,mi,$t,rs,cn,pi,os,Fc,xn,Ir,_n],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f9f9f9;border:1px solid #ccc;border-radius:5px}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{font-weight:700}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:3px;padding:8px 12px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}input[_ngcontent-%COMP%]{padding:8px;margin-bottom:10px;border:1px solid #ccc;border-radius:3px}input[type=file][_ngcontent-%COMP%]{margin-bottom:20px}button[type=submit][_ngcontent-%COMP%]{background-color:#28a745}"]});let t=e;return t})();var qS=wi(vi());function pK(t,e){if(t&1&&(C(0,"tr")(1,"td"),M(2),E(),C(3,"td"),M(4),E(),C(5,"td"),M(6),E(),C(7,"td"),M(8),E(),ae(9,"td"),E()),t&2){let n=e.$implicit;F(2),ft(n.nombre),F(2),ft(n.apellido),F(2),ft(n.email),F(2),ft(n.perfil)}}function mK(t,e){if(t&1&&(C(0,"tr")(1,"td"),M(2),E(),C(3,"td"),M(4),E(),C(5,"td"),M(6),E(),C(7,"td"),M(8),E()()),t&2){let n=e.$implicit;F(2),ft(n.nombre),F(2),ft(n.apellido),F(2),ft(n.email),F(2),ft(n.perfil)}}function gK(t,e){if(t&1&&(C(0,"tr")(1,"td"),M(2),E(),C(3,"td"),M(4),E(),C(5,"td"),M(6),E(),C(7,"td"),M(8),E(),ae(9,"td"),E()),t&2){let n=e.$implicit;F(2),ft(n.nombre),F(2),ft(n.apellido),F(2),ft(n.email),F(2),ft(n.perfil)}}var fL=(()=>{let e=class e{constructor(i,r){this.firestore=i,this.firebaseService=r,this.pacientes=[],this.usuarios=[],this.especialistas=[],this.administradores=[],this.admin={nombre:"",apellido:"",edad:null,dni:null,email:"",password:"",imagen:null,perfil:""}}ngOnInit(){this.cargarPacientes(),this.cargarEspecialistas(),this.cargarAdministradores()}cargarPacientes(){this.firestore.collection("pacientes").valueChanges({idField:"index"}).subscribe(i=>{this.pacientes=i.map(r=>be(K({},r),{perfil:"paciente"}))})}cargarEspecialistas(){this.firestore.collection("especialistas").valueChanges({idField:"index"}).subscribe(i=>{this.especialistas=i.map(r=>be(K({},r),{perfil:"especialista"}))})}cargarAdministradores(){this.firestore.collection("administradores").valueChanges({idField:"index"}).subscribe(i=>{this.administradores=i.map(r=>be(K({},r),{perfil:"administrador"}))})}habilitarUsuario(i,r,o){let s=o==="paciente"?"pacientes":o==="especialista"?"especialistas":"administradores";this.firestore.collection(s).doc(i).update({habilitado:r}).then(()=>{qS.default.fire({icon:"success",title:"Actualizado",text:`El usuario ha sido ${r?"habilitado":"inhabilitado"}.`})}).catch(a=>{console.error("Error al actualizar el usuario:",a),qS.default.fire({icon:"error",title:"Error",text:"Hubo un problema al actualizar el usuario."})})}onFileSelected(i){this.selectedFile=i.target.files[0]}};e.\u0275fac=function(r){return new(r||e)(U(Tt),U(Zi))},e.\u0275cmp=Ae({type:e,selectors:[["app-gestion"]],standalone:!0,features:[Me],decls:17,vars:3,consts:[[4,"ngFor","ngForOf"]],template:function(r,o){r&1&&(C(0,"h2"),M(1,"Gesti\xF3n de Usuarios"),E(),C(2,"table")(3,"thead")(4,"tr")(5,"th"),M(6,"Nombre"),E(),C(7,"th"),M(8,"Apellido"),E(),C(9,"th"),M(10,"Email"),E(),C(11,"th"),M(12,"Perfil"),E()()(),C(13,"tbody"),pe(14,pK,10,4,"tr",0)(15,mK,9,4,"tr",0)(16,gK,10,4,"tr",0),E()()),r&2&&(F(14),J("ngForOf",o.pacientes),F(),J("ngForOf",o.especialistas),F(),J("ngForOf",o.administradores))},dependencies:[_n,yn],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd}table[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:14px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left}"]});let t=e;return t})();var GS=wi(vi());function vK(t,e){if(t&1){let n=Ue();C(0,"tr")(1,"td"),M(2),E(),C(3,"td"),M(4),E(),C(5,"td"),M(6),E(),C(7,"td")(8,"button",1),re("click",function(){let r=Ie(n).$implicit,o=se();return De(o.habilitarUsuario(r.id,!r.habilitado))}),M(9),E()()()}if(t&2){let n=e.$implicit;F(2),ft(n.nombre),F(2),ft(n.apellido),F(2),ft(n.email),F(3),ke(" ",n.habilitado?"Deshabilitar":"Habilitar"," ")}}var pL=(()=>{let e=class e{constructor(i,r){this.firestore=i,this.firebaseService=r,this.especialistas=[]}ngOnInit(){this.cargarEspecialistas()}cargarEspecialistas(){this.firestore.collection("especialistas").valueChanges({idField:"id"}).subscribe(i=>{this.especialistas=i})}habilitarUsuario(i,r){this.firestore.collection("especialistas").doc(i).update({habilitado:r}).then(()=>{GS.default.fire({icon:"success",title:"Actualizado",text:`El especialista ha sido ${r?"habilitado":"deshabilitado"}.`})}).catch(o=>{console.error("Error al actualizar el especialista:",o),GS.default.fire({icon:"error",title:"Error",text:"Hubo un problema al actualizar el especialista."})})}};e.\u0275fac=function(r){return new(r||e)(U(Tt),U(Zi))},e.\u0275cmp=Ae({type:e,selectors:[["app-especialistas"]],standalone:!0,features:[Me],decls:13,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"click"]],template:function(r,o){r&1&&(C(0,"table")(1,"thead")(2,"tr")(3,"th"),M(4,"Nombre"),E(),C(5,"th"),M(6,"Apellido"),E(),C(7,"th"),M(8,"Email"),E(),C(9,"th"),M(10,"Acciones"),E()()(),C(11,"tbody"),pe(12,vK,10,4,"tr",0),E()()),r&2&&(F(12),J("ngForOf",o.especialistas))},dependencies:[_n,yn],styles:["table[_ngcontent-%COMP%]{width:80%;border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:5px;border:1px solid #ddd}table[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:14px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}"]});let t=e;return t})();var M_=wi(vi());function yK(t,e){if(t&1&&(C(0,"option",25),M(1),E()),t&2){let n=e.$implicit;J("value",n),F(),ft(n)}}function _K(t,e){if(t&1){let n=Ue();C(0,"div")(1,"input",26),Ke("ngModelChange",function(r){Ie(n);let o=se();return Ze(o.nuevaEspecialidad,r)||(o.nuevaEspecialidad=r),De(r)}),E(),C(2,"button",27),re("click",function(){Ie(n);let r=se();return De(r.agregarNuevaEspecialidad())}),M(3,"Agregar"),E()()}if(t&2){let n=se();F(),We("ngModel",n.nuevaEspecialidad)}}function wK(t,e){if(t&1&&(C(0,"li"),M(1),E()),t&2){let n=e.$implicit;F(),ft(n)}}function bK(t,e){t&1&&(C(0,"div",28),ae(1,"div",29),E())}var mL=(()=>{let e=class e{constructor(i,r){this.firebaseService=i,this.loadingService=r,this.especialista={nombre:"",apellido:"",edad:null,dni:null,especialidades:[],email:"",password:""},this.especialidades=["Cardiolog\xEDa","Neurolog\xEDa","Pediatr\xEDa"],this.especialidadSeleccionada="",this.nuevaEspecialidad="",this.mostrarCampoOtraEspecialidad=!1,this.errorMessage="",this.successMessage="",this.loading$=this.loadingService.loading$}onFileSelected(i,r){let o=i.target.files[0];r==="especialista"&&o&&(this.selectedEspecialistaFile=o)}agregarEspecialidad(){this.especialidadSeleccionada==="otra"?this.mostrarCampoOtraEspecialidad=!0:this.especialidadSeleccionada&&!this.especialista.especialidades.includes(this.especialidadSeleccionada)&&this.especialista.especialidades.push(this.especialidadSeleccionada),this.especialidadSeleccionada=""}agregarNuevaEspecialidad(){this.nuevaEspecialidad&&!this.especialidades.includes(this.nuevaEspecialidad)&&(this.especialidades.push(this.nuevaEspecialidad),this.especialista.especialidades.push(this.nuevaEspecialidad),this.mostrarCampoOtraEspecialidad=!1,this.nuevaEspecialidad="")}registerEspecialista(i){return N(this,null,function*(){if(i.preventDefault(),this.selectedEspecialistaFile){this.loadingService.show();try{yield this.firebaseService.registerEspecialista(this.especialista,this.selectedEspecialistaFile),this.successMessage="Especialista registrado con \xE9xito",M_.default.fire({icon:"success",title:"\xC9xito",text:this.successMessage}),this.resetForm()}catch(r){console.error("Error al registrar especialista:",r),this.errorMessage="Error al registrar especialista: "+r,M_.default.fire({icon:"error",title:"Error",text:this.errorMessage})}finally{this.loadingService.hide()}}else this.errorMessage="Se requiere una imagen para el perfil del especialista.",M_.default.fire({icon:"error",title:"Error",text:this.errorMessage})})}resetForm(){this.especialista={nombre:"",apellido:"",edad:null,dni:null,especialidades:[],email:"",password:""},this.selectedEspecialistaFile=void 0,this.errorMessage="",this.successMessage=""}};e.\u0275fac=function(r){return new(r||e)(U(Zi),U(yd))},e.\u0275cmp=Ae({type:e,selectors:[["app-registro-especialista"]],standalone:!0,features:[Me],decls:49,vars:13,consts:[[1,"container"],[3,"submit"],["for","nombre"],["type","text","id","nombre","name","nombre","placeholder","Nombre","required","",3,"ngModelChange","ngModel"],["for","apellido"],["type","text","id","apellido","name","apellido","placeholder","Apellido","required","",3,"ngModelChange","ngModel"],["for","edad"],["type","number","id","edad","name","edad","placeholder","Edad","required","","min","0",3,"ngModelChange","ngModel"],["for","dni"],["type","number","id","dni","name","dni","placeholder","DNI","required","",3,"ngModelChange","ngModel"],["for","especialidad"],["name","especialidadSeleccionada","required","",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["value","otra"],[4,"ngIf"],[4,"ngFor","ngForOf"],["for","email"],["type","email","id","email","name","email","placeholder","Mail","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","placeholder","Password","required","",3,"ngModelChange","ngModel"],["for","perfil"],["type","file","id","perfil","required","",3,"change"],["type","submit","value","Registrar"],["class","loading-overlay",4,"ngIf"],["src","assets/especialista.gif","alt","GIF de especialista",1,"img-especialista"],[3,"value"],["type","text","name","nuevaEspecialidad","placeholder","Nueva Especialidad",3,"ngModelChange","ngModel"],["type","button",3,"click"],[1,"loading-overlay"],[1,"spinner"]],template:function(r,o){r&1&&(C(0,"div",0)(1,"h2"),M(2,"Registro de Especialistas"),E(),C(3,"form",1),re("submit",function(a){return o.registerEspecialista(a)}),C(4,"div")(5,"label",2),M(6,"Nombre:"),E(),C(7,"input",3),Ke("ngModelChange",function(a){return Ze(o.especialista.nombre,a)||(o.especialista.nombre=a),a}),E()(),C(8,"div")(9,"label",4),M(10,"Apellido:"),E(),C(11,"input",5),Ke("ngModelChange",function(a){return Ze(o.especialista.apellido,a)||(o.especialista.apellido=a),a}),E()(),C(12,"div")(13,"label",6),M(14,"Edad:"),E(),C(15,"input",7),Ke("ngModelChange",function(a){return Ze(o.especialista.edad,a)||(o.especialista.edad=a),a}),E()(),C(16,"div")(17,"label",8),M(18,"DNI:"),E(),C(19,"input",9),Ke("ngModelChange",function(a){return Ze(o.especialista.dni,a)||(o.especialista.dni=a),a}),E()(),C(20,"div")(21,"label",10),M(22,"Especialidad:"),E(),C(23,"select",11),Ke("ngModelChange",function(a){return Ze(o.especialidadSeleccionada,a)||(o.especialidadSeleccionada=a),a}),re("change",function(){return o.agregarEspecialidad()}),pe(24,yK,2,2,"option",12),C(25,"option",13),M(26,"Otra"),E()(),pe(27,_K,4,1,"div",14),C(28,"div")(29,"label"),M(30,"Especialidades Seleccionadas:"),E(),C(31,"ul"),pe(32,wK,2,1,"li",15),E()()(),C(33,"div")(34,"label",16),M(35,"Email:"),E(),C(36,"input",17),Ke("ngModelChange",function(a){return Ze(o.especialista.email,a)||(o.especialista.email=a),a}),E()(),C(37,"div")(38,"label",18),M(39,"Password:"),E(),C(40,"input",19),Ke("ngModelChange",function(a){return Ze(o.especialista.password,a)||(o.especialista.password=a),a}),E()(),C(41,"div")(42,"label",20),M(43,"Seleccionar imagen:"),E(),C(44,"input",21),re("change",function(a){return o.onFileSelected(a,"especialista")}),E()(),ae(45,"input",22),E(),pe(46,bK,2,0,"div",23),jo(47,"async"),E(),ae(48,"img",24)),r&2&&(F(7),We("ngModel",o.especialista.nombre),F(4),We("ngModel",o.especialista.apellido),F(4),We("ngModel",o.especialista.edad),F(4),We("ngModel",o.especialista.dni),F(4),We("ngModel",o.especialidadSeleccionada),F(),J("ngForOf",o.especialidades),F(3),J("ngIf",o.mostrarCampoOtraEspecialidad),F(5),J("ngForOf",o.especialista.especialidades),F(4),We("ngModel",o.especialista.email),F(4),We("ngModel",o.especialista.password),F(6),J("ngIf",Bo(47,11,o.loading$)))},dependencies:[It,zt,mi,m_,g_,$t,rs,dd,cn,pi,os,Fc,xn,Ir,ks,yn],styles:["body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;background-color:#ede7e4;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;padding:0;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:1600px;padding:20px;background-color:#349cb6;box-shadow:0 0 10px #0000001a;border-radius:40px;margin:20px}.img-paciente[_ngcontent-%COMP%]{float:left;margin-right:50px;max-width:15%}.img-especialista[_ngcontent-%COMP%]{float:right;margin-right:50px;max-width:15%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-bottom:20px}.registro-paciente[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .registro-especialista[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:40%}.registro-especialista[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex:1;margin-right:180px}h2[_ngcontent-%COMP%]{color:#333;border-bottom:1px solid #ddd;padding-bottom:1px;text-align:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{padding:1px;margin:10px 0;border:1px solid #ddd;border-radius:4px;transition:all .3s ease;width:100%}input[type=submit][_ngcontent-%COMP%]{background-color:#56ab2f;color:#fff;border:none;border-radius:4px;padding:10px;cursor:pointer;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#449c24}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-top:16px solid #3498db;border-radius:50%;width:120px;height:120px;animation:spin 1s linear infinite}"]});let t=e;return t})();var gL=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-vistausuarios"]],standalone:!0,features:[Me],decls:5,vars:0,consts:[[1,"container"],[1,"row"]],template:function(r,o){r&1&&(C(0,"div",0)(1,"div",1),ae(2,"app-gestion")(3,"app-especialistas")(4,"app-usuarios"),E()())},dependencies:[hL,fL,pL],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;padding:20px;background-color:#ecdcd4;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 4px #0000001a}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}app-especialistas[_ngcontent-%COMP%]{width:50%;padding:20px;background-color:#349cb6;border:1px solid #ecdcd4;border-radius:8px;transition:transform .2s ease;cursor:pointer}app-gestion[_ngcontent-%COMP%], app-usuarios[_ngcontent-%COMP%]{width:50%;padding:20px;background-color:#349cb6;border:1px solid #ecdcd4;border-radius:8px;transition:transform .2s ease;cursor:pointer}app-gestion[_ngcontent-%COMP%]:hover, app-usuarios[_ngcontent-%COMP%]:hover, app-especialistas[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a}.app-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.app-description[_ngcontent-%COMP%]{font-size:14px;color:#777}.app-gestion.minimized[_ngcontent-%COMP%]{width:0;padding:0;overflow:hidden;transition:width .2s ease}.app-gestion[_ngcontent-%COMP%]   .app-action-icon[_ngcontent-%COMP%]:before{content:"u25b2"}.app-gestion.minimized[_ngcontent-%COMP%]   .app-action-icon[_ngcontent-%COMP%]:before{content:"u25bc"}.loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s infinite linear}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']});let t=e;return t})();var vL=wi(vi());var yL=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.firestore=r,this.router=o}canActivate(){return this.afAuth.authState.pipe(ct(i=>(console.log("User:",i),i?this.firestore.collection("administradores").doc(i.uid).get().pipe(oe(r=>r.exists),Mt(r=>{console.log("Is Admin:",r),r?console.log("Admin access granted"):vL.default.fire("","Usuario no autorizado","error").then(()=>{console.log("Navigating to login"),this.router.navigate(["/login"])})})):(console.log("No user logged in"),this.router.navigate(["/login"]),ue(!1)))),oe(i=>(console.log("Final admin check:",i),i)))}};e.\u0275fac=function(r){return new(r||e)(P(kt),P(Tt),P(Mi))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _d=wi(vi());var po=(()=>{let e=class e{constructor(i,r){this.firestore=i,this.afAuth=r}cancelarTurno(i,r){return N(this,null,function*(){try{yield this.firestore.collection("turnos").doc(i).update({estado:"Cancelado",comentarioCancelacion:r}),console.log(`Turno con ID ${i} cancelado exitosamente.`)}catch(o){throw console.error(`Error al cancelar el turno con ID ${i}:`,o),o}})}rechazarTurno(i,r){return N(this,null,function*(){try{yield this.firestore.collection("turnos").doc(i).update({estado:"Rechazado",comentarioRechazo:r}),console.log(`Turno con ID ${i} rechazado exitosamente.`)}catch(o){throw console.error(`Error al rechazar el turno con ID ${i}:`,o),o}})}aceptarTurno(i){return N(this,null,function*(){try{yield this.firestore.collection("turnos").doc(i).update({estado:"Aceptado"}),console.log(`Turno con ID ${i} aceptado exitosamente.`)}catch(r){throw console.error(`Error al aceptar el turno con ID ${i}:`,r),r}})}finalizarTurno(i,r){return N(this,null,function*(){try{yield this.firestore.collection("turnos").doc(i).update({estado:"Finalizado",resena:r}),console.log(`Turno con ID ${i} finalizado exitosamente.`)}catch(o){throw console.error(`Error al finalizar el turno con ID ${i}:`,o),o}})}obtenerTurnoPorId(i){return this.firestore.collection("turnos").doc(i).valueChanges().pipe(oe(r=>{if(r)return K({id:i},r)}))}getTurnosPaciente(i){return this.firestore.collection("turnos",r=>r.where("pacienteId","==",i)).snapshotChanges().pipe(oe(r=>r.map(o=>{let s=o.payload.doc.data(),a=o.payload.doc.id,c=K({id:a},s);return this.getNombreEspecialista(c.especialistaId).subscribe(u=>{c.especialistaNombre=u}),c})))}buscarPorPacienteNombre(i,r){return this.firestore.collection("turnos",o=>o.where("pacienteNombre","==",i.trim()).where("especialistaId","==",r)).valueChanges()}getNombreEspecialista(i){return this.firestore.collection("especialistas").doc(i).valueChanges().pipe(oe(r=>r.nombre))}getTurnos(){return this.firestore.collection("turnos").valueChanges()}getTurnosEspecialista(i){return this.firestore.collection("turnos",r=>r.where("especialistaId","==",i)).snapshotChanges().pipe(oe(r=>r.map(o=>{let s=o.payload.doc.data(),a=o.payload.doc.id;return K({id:a},s)})))}buscarTurnos(i,r,o){let s=i.trim();return this.afAuth.authState.pipe(ct(a=>{if(a){let c=u=>{let h=u;return o&&(h=h.where("especialistaId","==",o)),r==="especialidad"&&s!==""?h=h.where("especialidades","array-contains",s):r==="paciente"&&s!==""&&(h=h.where("pacienteNombre","==",s)),h};return this.firestore.collection("turnos",c).snapshotChanges().pipe(oe(u=>u.map(h=>{let m=h.payload.doc.data(),_=h.payload.doc.id;return be(K({},m),{id:_})})),Hn(u=>(console.error("Error al buscar turnos:",u),ue([]))))}else return ue([])}),Hn(a=>(console.error("Error al autenticar:",a),ue([]))))}getTurnoById(i){return this.firestore.collection("turnos").doc(i).valueChanges().pipe(oe(r=>K({id:i},r)))}completarEncuesta(i){return new Promise((r,o)=>{this.firestore.collection("encuestas").add(i).then(()=>{r()}).catch(s=>{o(s)})})}obtenerEncuesta(i){return this.firestore.collection("encuestas").doc(i).valueChanges()}calificarAtencion(i,r){return this.firestore.collection("turnos").doc(i).update({calificacion:r})}crearHistoriaClinica(i){return this.afAuth.authState.pipe(ct(r=>{if(r)return this.firestore.collection("historiasClinicas").add(i);throw new Error("Usuario no autenticado")}),Hn(r=>(console.error("Error al crear historia cl\xEDnica:",r),ue(null))))}actualizarHistoriaClinica(i,r,o,s,a){let c={altura:r,peso:o,temperatura:s,presion:a};return je(this.firestore.collection("historiasClinicas").doc(i).update(c))}obtenerHistoriasClinicasPorPaciente(i){return this.firestore.collection("historiasClinicas",r=>r.where("pacienteId","==",i)).snapshotChanges().pipe(oe(r=>r.map(o=>{let s=o.payload.doc.data(),a=o.payload.doc.id;return K({id:a},s)})),Hn(r=>(console.error("Error al obtener historias cl\xEDnicas:",r),ue([]))))}buscarTurnosPacientes(i,r){let o=i.trim();return this.afAuth.authState.pipe(ct(s=>{if(s){let a=c=>{let u=c;return r&&(u=u.where("especialistaId","==",r)),o!==""&&(u=u.where("pacienteNombre","==",o)),u};return this.firestore.collection("turnos",a).snapshotChanges().pipe(oe(c=>c.map(u=>{let h=u.payload.doc.data(),m=u.payload.doc.id;return be(K({},h),{id:m})})),Hn(c=>(console.error("Error al buscar turnos de pacientes:",c),ue([]))))}else return ue([])}),Hn(s=>(console.error("Error al autenticar:",s),ue([]))))}solicitarTurno(i,r){return N(this,null,function*(){let o=yield this.getNombreEspecialista(i.especialistaId).toPromise(),s=be(K({},i),{pacienteNombre:r,especialistaNombre:o});yield this.firestore.collection("turnos").add(s)})}};e.\u0275fac=function(r){return new(r||e)(P(Tt),P(kt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EK(t,e){if(t&1){let n=Ue();C(0,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.cancelarTurno(r.id))}),M(1,"Cancelar Turno"),E()}}function CK(t,e){if(t&1&&(C(0,"div")(1,"p"),M(2),E(),C(3,"p"),M(4),E(),C(5,"p"),M(6),E(),C(7,"p"),M(8),E(),C(9,"p"),M(10),E(),pe(11,EK,2,0,"button",5),E()),t&2){let n=e.$implicit,i=se(2);F(2),ke("Especialidad: ",n.especialidades[0],""),F(2),ke("Especialista: ",n.especialistaNombre,""),F(2),ke("Fecha: ",n.fecha,""),F(2),ke("Hora: ",n.hora,""),F(2),ke("Estado: ",n.estado,""),F(),J("ngIf",i.mostrarCancelar(n.estado))}}function IK(t,e){if(t&1&&(C(0,"div"),pe(1,CK,12,6,"div",4),E()),t&2){let n=se();F(),J("ngForOf",n.turnosFiltrados)}}var _L=(()=>{let e=class e{constructor(i){this.turnosService=i,this.turnos=[],this.turnosFiltrados=[],this.filtroBusqueda=""}ngOnInit(){this.obtenerTurnos()}obtenerTurnos(){this.turnosService.getTurnos().subscribe(i=>{this.turnos=i})}buscarTurnos(){if(this.filtroBusqueda.trim()!==""){let i=this.filtroBusqueda.trim().toLowerCase();this.turnosFiltrados=this.turnos.filter(r=>{let o=r.especialidades?.some(a=>a.trim().toLowerCase().includes(i))||!1,s=r.especialistaNombre?.trim().toLowerCase().includes(i)||!1;return o||s}),this.turnosFiltrados.length===0&&_d.default.fire({icon:"info",title:"No hay turnos",text:"No se encontraron turnos para la b\xFAsqueda ingresada."})}else _d.default.fire({icon:"error",title:"Error",text:"Debe ingresar un t\xE9rmino de b\xFAsqueda para buscar turnos."})}mostrarCancelar(i){return i!=="Aceptado"&&i!=="Realizado"&&i!=="Rechazado"}cancelarTurno(i){let r=prompt("Ingrese el motivo de la cancelaci\xF3n:");if(r){if(!this.turnos.some(o=>o.id===i)){console.error("El turno con ID",i,"no se encontr\xF3 en la lista de turnos."),_d.default.fire({icon:"error",title:"Error",text:"El turno que intentas cancelar no existe o ya ha sido cancelado."});return}this.turnosService.cancelarTurno(i,r).then(()=>{this.turnos=this.turnos.filter(o=>o.id!==i),this.turnosFiltrados=this.turnosFiltrados.filter(o=>o.id!==i),_d.default.fire({icon:"success",title:"Turno cancelado",text:"El turno ha sido cancelado correctamente."})}).catch(o=>{console.error("Error al cancelar turno:",o),_d.default.fire({icon:"error",title:"Error",text:"Hubo un error al cancelar el turno. Por favor, intenta nuevamente m\xE1s tarde."})})}}};e.\u0275fac=function(r){return new(r||e)(U(po))},e.\u0275cmp=Ae({type:e,selectors:[["app-turnos"]],standalone:!0,features:[Me],decls:7,vars:2,consts:[["for","buscar"],["type","text","id","buscar","placeholder","Ingrese especialidad o especialista",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"]],template:function(r,o){r&1&&(C(0,"div")(1,"label",0),M(2,"Buscar por Especialidad o Especialista:"),E(),C(3,"input",1),Ke("ngModelChange",function(a){return Ze(o.filtroBusqueda,a)||(o.filtroBusqueda=a),a}),E(),C(4,"button",2),re("click",function(){return o.buscarTurnos()}),M(5,"Buscar"),E()(),pe(6,IK,2,1,"div",3)),r&2&&(F(3),We("ngModel",o.filtroBusqueda),F(3),J("ngIf",o.turnosFiltrados&&o.turnosFiltrados.length>0))},dependencies:[_n,yn,It,zt,$t,cn,xn],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#f8f8f8}label[_ngcontent-%COMP%]{font-weight:700}input[type=text][_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;margin-right:10px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:10px 20px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{background-color:#349cb6;border:1px solid #ddd;border-radius:4px;padding:20px;margin-bottom:20px;box-shadow:0 2px 4px #0000001a}p[_ngcontent-%COMP%]{margin:0}button.cancelar[_ngcontent-%COMP%]{background-color:#dc3545}div[_ngcontent-%COMP%]{transition:transform .3s ease}div[_ngcontent-%COMP%]:hover{transform:scale(1.02)}"]});let t=e;return t})();var R_,DK=new Uint8Array(16);function WS(){if(!R_&&(R_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!R_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R_(DK)}var wL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function TK(t){return typeof t=="string"&&wL.test(t)}var bL=TK;var An=[];for(P_=0;P_<256;++P_)An.push((P_+256).toString(16).substr(1));var P_;function SK(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(An[t[e+0]]+An[t[e+1]]+An[t[e+2]]+An[t[e+3]]+"-"+An[t[e+4]]+An[t[e+5]]+"-"+An[t[e+6]]+An[t[e+7]]+"-"+An[t[e+8]]+An[t[e+9]]+"-"+An[t[e+10]]+An[t[e+11]]+An[t[e+12]]+An[t[e+13]]+An[t[e+14]]+An[t[e+15]]).toLowerCase();if(!bL(n))throw TypeError("Stringified UUID is invalid");return n}var EL=SK;function xK(t,e,n){t=t||{};var i=t.random||(t.rng||WS)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return EL(i)}var KS=xK;var k_=class{constructor(e,n,i,r,o,s,a,c,u,h=[]){this.uid=e,this.nombre=n,this.apellido=i,this.edad=r,this.dni=o,this.especialidades=s,this.especialidad=a,this.imageUrl1=c,this.verificado=u,this.turnos=h}};var O_=class{constructor(e,n){this.especialidad=e,this.turno=n}};var QS=wi(vi());var CL=()=>[];function AK(t,e){if(t&1&&(C(0,"option",16),M(1),E()),t&2){let n=e.$implicit;J("ngValue",n),F(),ft(n.nombre)}}function MK(t,e){if(t&1){let n=Ue();C(0,"div",4)(1,"label",12),M(2,"Seleccionar Paciente"),E(),C(3,"select",13),Ke("ngModelChange",function(r){Ie(n);let o=se();return Ze(o.pacienteSeleccionado,r)||(o.pacienteSeleccionado=r),De(r)}),C(4,"option",14),M(5,"Selecciona un paciente"),E(),pe(6,AK,2,2,"option",15),jo(7,"async"),E()()}if(t&2){let n=se();F(3),We("ngModel",n.pacienteSeleccionado),F(3),J("ngForOf",Bo(7,2,n.pacientes$)||Eb(4,CL))}}function RK(t,e){if(t&1){let n=Ue();C(0,"div",4)(1,"label",12),M(2,"Paciente"),E(),C(3,"input",17),Ke("ngModelChange",function(r){Ie(n);let o=se();return Ze(o.pacienteNombre,r)||(o.pacienteNombre=r),De(r)}),E()()}if(t&2){let n=se();F(3),We("ngModel",n.pacienteNombre)}}function PK(t,e){if(t&1){let n=Ue();C(0,"button",18),re("click",function(){let r=Ie(n).$implicit,o=se();return o.especialistaSeleccionado=r,o.cargarEspecialidades(),De(o.cargarImagenEspecialista())}),ae(1,"img",19),C(2,"span"),M(3),E()()}if(t&2){let n=e.$implicit;F(),Mg("alt",n.nombre),J("src",n.imageUrl1,Vo),F(2),ft(n.nombre)}}function kK(t,e){if(t&1){let n=Ue();C(0,"button",23),re("click",function(){let r=Ie(n).$implicit,o=se(2);return o.especialidadSeleccionada=r,De(o.cargarHorariosDisponibles())}),C(1,"span"),M(2),E(),ae(3,"img",19),E()}if(t&2){let n=e.$implicit,i=se(2);F(2),ft(n),F(),Mg("alt",n),J("src",i.getEspecialidadImage(n),Vo)}}function OK(t,e){if(t&1&&(C(0,"div",4)(1,"label",20),M(2,"Especialidades del Especialista"),E(),C(3,"div",21),pe(4,kK,4,3,"button",22),E()()),t&2){let n=se();F(4),J("ngForOf",n.especialidadesEspecialista)}}function NK(t,e){if(t&1){let n=Ue();C(0,"button",27),re("click",function(){let r=Ie(n).$implicit,o=se(2);return De(o.fechaSeleccionada=r)}),M(1),E()}if(t&2){let n=e.$implicit;F(),ke(" ",n," ")}}function FK(t,e){if(t&1&&(C(0,"div",4)(1,"label",24),M(2),E(),C(3,"div",25),pe(4,NK,2,1,"button",26),E()()),t&2){let n=se();F(2),ke("D\xEDas disponibles para ",n.especialistaSeleccionado==null?null:n.especialistaSeleccionado.nombre,""),F(2),J("ngForOf",n.fechasDisponibles)}}function LK(t,e){if(t&1){let n=Ue();C(0,"button",28),re("click",function(){let r=Ie(n).$implicit,o=se();return De(o.horaSeleccionada=r)}),M(1),E()}if(t&2){let n=e.$implicit;F(),ke(" ",n," ")}}var IL=(()=>{let e=class e{constructor(i,r){this.firestore=i,this.afAuth=r,this.especialistas$=null,this.pacientes$=null,this.pacienteSeleccionado=null,this.pacienteNombre=null,this.especialidadSeleccionada=null,this.fechaSeleccionada="",this.horaSeleccionada="",this.especialistaSeleccionado=null,this.especialidadesEspecialista=[],this.horariosDisponibles=[],this.isAdmin=!1,this.fechasDisponibles=[],this.imageUrl1=null,this.especialistaNombre=null,this.unsubscribe$=new Ce,this.especialidades=[{nombre:"Dentista",imagenUrl:"assets/especialidades/dentista.png"},{nombre:"Pediatra",imagenUrl:"assets/especialidades/Pediatra.png"},{nombre:"Cardiolog\xEDa",imagenUrl:"assets/especialidades/Cardiolog\xEDa.png"},{nombre:"Dermatolog\xEDa",imagenUrl:"assets/especialidades/dermatologia.png"},{nombre:"Neurolog\xEDa",imagenUrl:"assets/especialidades/neurologia.png"},{nombre:"Imagen por defecto",imagenUrl:"assets/especialidades/default.png"}]}ngOnInit(){this.afAuth.authState.pipe(si(this.unsubscribe$)).subscribe(i=>{i?(this.firestore.collection("administradores").doc(i.uid).valueChanges().pipe(Qt(1),si(this.unsubscribe$)).subscribe(r=>{r?(this.isAdmin=!0,this.pacientes$=this.firestore.collection("pacientes").valueChanges({idField:"uid"})):(this.isAdmin=!1,this.firestore.collection("pacientes").doc(i.uid).valueChanges().pipe(si(this.unsubscribe$)).subscribe(o=>{o&&(this.pacienteNombre=o.nombre||null)}))}),this.especialistas$=this.firestore.collection("especialistas").valueChanges({idField:"uid"}).pipe(oe(r=>r.map(o=>{let s=[],a=[];return o.especialidades||(o.especialidades=[]),o.especialidad&&o.especialidades.push(o.especialidad),o.turnos&&(a=o.turnos.map(c=>new O_(c.especialidades,c.turno))),new k_(o.uid,o.nombre,o.apellido,o.edad,o.dni,o.especialidades,o.especialidad,o.imageUrl1,o.verificado,a)})))):(this.isAdmin=!1,this.pacienteNombre=null)}),this.generarFechasDisponibles()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}generarFechasDisponibles(){let i=new Date,r=new Date;r.setDate(i.getDate()+15);let o=this.getDatesBetween(i,r);this.fechasDisponibles=o.map(s=>this.formatDate(s))}getDatesBetween(i,r){let o=[],s=i;for(;s<=r;)o.push(new Date(s)),s.setDate(s.getDate()+1);return o}cargarEspecialidades(){this.especialistaSeleccionado?this.especialidadesEspecialista=this.especialistaSeleccionado.especialidades||[]:this.especialidadesEspecialista=[]}formatDate(i){let r=i.getFullYear(),o=(i.getMonth()+1).toString().padStart(2,"0"),s=i.getDate().toString().padStart(2,"0");return`${r}-${o}-${s}`}getEspecialidadImage(i){let r=this.especialidades.find(o=>o.nombre===i);return r?r.imagenUrl:"assets/default.jpg"}cargarHorariosDisponibles(){if(this.especialistaSeleccionado&&this.especialidadSeleccionada){let i=this.especialistaSeleccionado.turnos.find(r=>r.especialidad===this.especialidadSeleccionada);i&&i.turno?i.turno.manana?this.horariosDisponibles=this.generarHorarios("05:00","12:00"):i.turno.tarde?this.horariosDisponibles=this.generarHorarios("13:00","20:00"):i.turno.noche?this.horariosDisponibles=this.generarHorarios("21:00","04:00"):this.horariosDisponibles=[]:this.horariosDisponibles=[]}else this.horariosDisponibles=[]}generarHorarios(i,r){let o=[],[s,a]=i.split(":").map(Number),[c,u]=r.split(":").map(Number),h=new Date;h.setHours(s,a,0,0);let m=new Date;for(m.setHours(c,u,0,0),m<h&&m.setDate(m.getDate()+1);h<=m;)o.push(h.toTimeString().substring(0,5)),h.setMinutes(h.getMinutes()+30);return o}cargarImagenEspecialista(){this.especialistaSeleccionado?(this.imageUrl1=this.especialistaSeleccionado.imageUrl1,this.especialistaNombre=this.especialistaSeleccionado.nombre):(this.imageUrl1=null,this.especialistaNombre=null)}seleccionarPaciente(i){this.pacienteSeleccionado=i,i?this.pacienteNombre=i.nombre||"":this.pacienteNombre=null}solicitarTurno(){return N(this,null,function*(){try{let i=yield this.afAuth.currentUser;if(!i)throw new Error("No hay usuario autenticado.");let r="",o="";if(this.isAdmin&&this.pacienteSeleccionado?(r=this.pacienteSeleccionado.uid,o=this.pacienteSeleccionado.nombre||""):(r=i.uid,o=this.pacienteNombre||""),!this.especialistaSeleccionado||!this.fechaSeleccionada||!this.horaSeleccionada||!r||!o)throw new Error("Todos los campos son requeridos.");let s=KS();yield this.firestore.collection("turnos").doc(s).set({turnoId:s,pacienteNombre:o,pacienteId:r,especialidadId:this.especialidadesEspecialista,especialistaId:this.especialistaSeleccionado.uid,especialidades:this.especialidadesEspecialista,especialistaNombre:`${this.especialistaSeleccionado.nombre} ${this.especialistaSeleccionado.apellido}`,fecha:this.fechaSeleccionada,hora:this.horaSeleccionada,estado:"Pendiente"}),QS.default.fire({icon:"success",title:"\xA1Turno solicitado!",text:"El turno ha sido solicitado con \xE9xito.",confirmButtonText:"Aceptar"}),console.log("Turno solicitado con \xE9xito, turnoId:",s),this.especialistaSeleccionado=null,this.especialidadSeleccionada=null,this.fechaSeleccionada="",this.horaSeleccionada="",this.pacienteSeleccionado=null,this.pacienteNombre=null,this.especialidadesEspecialista=[],this.horariosDisponibles=[]}catch(i){console.error("Error al solicitar turno:",i),QS.default.fire({icon:"error",title:"Error",text:"Hubo un error al solicitar el turno. Por favor, intenta nuevamente m\xE1s tarde.",confirmButtonText:"Aceptar"})}})}};e.\u0275fac=function(r){return new(r||e)(U(Tt),U(kt))},e.\u0275cmp=Ae({type:e,selectors:[["app-solicitar-turnos"]],standalone:!0,features:[Me],decls:22,vars:10,consts:[["solicitudForm","ngForm"],[1,"solicitud-turno-container"],[3,"ngSubmit"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","especialista"],[1,"profesionales-container"],["type","button","class","btn btn-profesional",3,"click",4,"ngFor","ngForOf"],["for","hora"],[1,"horas-container"],["type","button","class","btn btn-hora",3,"click",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],["for","paciente"],["id","paciente","name","paciente",1,"form-control",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","text","id","paciente","name","paciente","disabled","",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-profesional",3,"click"],[3,"src","alt"],["for","especialidadesEspecialista"],[1,"especialidades-container"],["type","button","class","btn btn-especialidad",3,"click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-especialidad",3,"click"],["for","fecha"],[1,"fechas-container"],["type","button","class","btn btn-fecha",3,"click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-fecha",3,"click"],["type","button",1,"btn","btn-hora",3,"click"]],template:function(r,o){if(r&1){let s=Ue();C(0,"div",1)(1,"h2"),M(2,"Solicitar Turno"),E(),C(3,"form",2,0),re("ngSubmit",function(){return Ie(s),De(o.solicitarTurno())}),pe(5,MK,8,5,"div",3)(6,RK,4,1,"div",3),C(7,"div",4)(8,"label",5),M(9,"Profesionales"),E(),C(10,"div",6),pe(11,PK,4,3,"button",7),jo(12,"async"),E()(),pe(13,OK,5,1,"div",3)(14,FK,5,2,"div",3),C(15,"div",4)(16,"label",8),M(17,"Hora del turno"),E(),C(18,"div",9),pe(19,LK,2,1,"button",10),E()(),C(20,"button",11),M(21,"Solicitar Turno"),E()()()}if(r&2){let s=kg(4);F(5),J("ngIf",o.isAdmin),F(),J("ngIf",!o.isAdmin),F(5),J("ngForOf",Bo(12,7,o.especialistas$)||Eb(9,CL)),F(2),J("ngIf",o.especialidadesEspecialista.length>0),F(),J("ngIf",o.especialidadSeleccionada),F(5),J("ngForOf",o.horariosDisponibles),F(),J("disabled",!s.form.valid||!o.especialistaSeleccionado||!o.especialidadSeleccionada||!o.fechaSeleccionada||!o.horaSeleccionada)}},dependencies:[_n,yn,It,ks,gi,mi,m_,g_,$t,dd,cn,pi,zt,xn,Ir],styles:[".solicitud-turno-container[_ngcontent-%COMP%]{background-color:#349cb6;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:20px}.profesionales-container[_ngcontent-%COMP%], .especialidades-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.btn-profesional[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.btn-profesional[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:5px}.btn-especialidad[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:10px;background-color:#f0f0f0;border:1px solid #ccc;border-radius:5px;margin:5px;width:150px;height:150px;cursor:pointer;transition:all .3s ease;overflow:hidden}.btn-especialidad[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover}.btn-especialidad[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-weight:700}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:14px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:10px 20px;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}.solicitud-turno-container[_ngcontent-%COMP%]{transition:transform .3s ease}.solicitud-turno-container[_ngcontent-%COMP%]:hover{transform:scale(1.02)}"]});let t=e;return t})();var wd=wi(vi());function VK(t,e){if(t&1){let n=Ue();C(0,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.verResena(r))}),M(1,"Ver Rese\xF1a"),E()}}function jK(t,e){if(t&1){let n=Ue();C(0,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.completarEncuesta(r))}),M(1,"Completar Encuesta"),E()}}function BK(t,e){if(t&1){let n=Ue();C(0,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.calificarAtencion(r))}),M(1,"Calificar Atenci\xF3n"),E()}}function UK(t,e){if(t&1){let n=Ue();C(0,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.cancelarTurno(r.id))}),M(1,"Cancelar Turno"),E()}}function $K(t,e){if(t&1&&(C(0,"div")(1,"p"),M(2),E(),C(3,"p"),M(4),E(),C(5,"p"),M(6),E(),C(7,"p"),M(8),E(),C(9,"p"),M(10),E(),pe(11,VK,2,0,"button",5)(12,jK,2,0,"button",5)(13,BK,2,0,"button",5)(14,UK,2,0,"button",5),E()),t&2){let n=e.$implicit,i=se(2);F(2),ke("Especialidad: ",n.especialidades[0],""),F(2),ke("Especialista: ",n.especialistaNombre,""),F(2),ke("Fecha: ",n.fecha,""),F(2),ke("Hora: ",n.hora,""),F(2),ke("Estado: ",n.estado,""),F(),J("ngIf",n.resena),F(),J("ngIf",n.estado==="Realizado"&&!n.encuesta),F(),J("ngIf",n.estado==="Realizado"&&n.encuesta&&!n.calificacion),F(),J("ngIf",i.mostrarCancelar(n.estado))}}function zK(t,e){if(t&1&&(C(0,"div"),pe(1,$K,15,9,"div",4),E()),t&2){let n=se();F(),J("ngForOf",n.turnosFiltrados)}}function HK(t,e){t&1&&(C(0,"div")(1,"p"),M(2,"No se encontraron turnos con los criterios de b\xFAsqueda proporcionados."),E()())}var DL=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.router=r,this.turnosService=o,this.turnos=[],this.turnosFiltrados=[],this.filtroBusqueda="",this.pacienteUid="",this.busquedaRealizada=!1,this.mostrarListaTurnos=!1}ngOnInit(){this.afAuth.authState.subscribe(i=>{i&&i.uid&&(this.pacienteUid=i.uid,console.log("UID del paciente:",this.pacienteUid),this.obtenerTurnos())})}obtenerTurnos(){this.turnosService.getTurnosPaciente(this.pacienteUid).subscribe(i=>{console.log("Turnos del paciente:",i),this.turnos=i.map(r=>be(K({},r),{especialistaNombre:r.especialistaNombre||""})),this.turnosFiltrados=this.turnos},i=>{console.error("Error al obtener los turnos del paciente:",i)})}buscarTurnos(){if(this.filtroBusqueda.trim()!==""){let i=this.filtroBusqueda.trim().toLowerCase();console.log("Realizando b\xFAsqueda con t\xE9rmino:",i),this.turnosFiltrados=this.turnos.filter(r=>{let o=r.especialidades?.some(a=>a.trim().toLowerCase()===i)||!1,s=r.especialistaNombre?.trim().toLowerCase().includes(i)||!1;return o||s}),console.log("Resultados de la b\xFAsqueda:",this.turnosFiltrados),this.mostrarListaTurnos=this.turnosFiltrados.length>0,this.turnosFiltrados.length===0&&wd.default.fire({icon:"info",title:"No hay turnos",text:"No se encontraron turnos para la b\xFAsqueda ingresada."}),this.busquedaRealizada=!0}else wd.default.fire({icon:"error",title:"Error",text:"Debe ingresar un t\xE9rmino de b\xFAsqueda para buscar turnos."})}mostrarCancelar(i){return i!=="Realizado"}cancelarTurno(i){let r=prompt("Ingrese el motivo de la cancelaci\xF3n:");r&&this.turnosService.cancelarTurno(i,r).then(()=>{this.turnos=this.turnos.filter(o=>o.id!==i),this.turnosFiltrados=this.turnosFiltrados.filter(o=>o.id!==i),wd.default.fire({icon:"success",title:"Turno cancelado",text:"El turno ha sido cancelado correctamente."})}).catch(o=>{console.error("Error al cancelar turno:",o),wd.default.fire({icon:"error",title:"Error",text:"Hubo un error al cancelar el turno. Por favor, intenta nuevamente m\xE1s tarde."})})}verResena(i){wd.default.fire("Rese\xF1a",i.resena||"No hay rese\xF1a disponible","info")}completarEncuesta(i){this.router.navigate(["/encuesta"])}calificarAtencion(i){this.router.navigate(["/calificacion",i.id])}};e.\u0275fac=function(r){return new(r||e)(U(kt),U(Mi),U(po))},e.\u0275cmp=Ae({type:e,selectors:[["app-misturnos"]],standalone:!0,features:[Me],decls:10,vars:3,consts:[["for","buscar"],["type","text","id","buscar","placeholder","Ingrese especialidad o especialista",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"]],template:function(r,o){r&1&&(C(0,"h2"),M(1,"Mis Turnos"),E(),C(2,"div")(3,"label",0),M(4,"Buscar por Especialidad o Especialista:"),E(),C(5,"input",1),Ke("ngModelChange",function(a){return Ze(o.filtroBusqueda,a)||(o.filtroBusqueda=a),a}),E(),C(6,"button",2),re("click",function(){return o.buscarTurnos()}),M(7,"Buscar"),E()(),pe(8,zK,2,1,"div",3)(9,HK,3,0,"div",3)),r&2&&(F(5),We("ngModel",o.filtroBusqueda),F(3),J("ngIf",o.busquedaRealizada&&o.turnosFiltrados.length>0),F(),J("ngIf",o.busquedaRealizada&&o.turnosFiltrados.length===0))},dependencies:[_n,yn,It,zt,$t,cn,xn],styles:["h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1rem}label[for=buscar][_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:.5rem}input#buscar[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ccc;border-radius:4px;margin-bottom:1rem}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer}div[ngIf=busquedaRealizada][_ngcontent-%COMP%]{border:1px solid #d88181;padding:1rem}div[ngIf=busquedaRealizada][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:1rem;background-color:#752222;padding:.5rem}"]});let t=e;return t})();var mo=wi(vi());var YS=wi(vi());function qK(t,e){t&1&&(C(0,"div")(1,"small",15),M(2,"Altura requerida (entre 100 y 230 cm)."),E()())}function GK(t,e){t&1&&(C(0,"div")(1,"small",15),M(2,"Peso requerido (entre 1 y 200 kg)."),E()())}function WK(t,e){t&1&&(C(0,"div")(1,"small",15),M(2,"Temperatura requerida (entre 34 y 42 grados)."),E()())}function KK(t,e){t&1&&(C(0,"div")(1,"small",15),M(2,"Presi\xF3n requerida."),E()())}function QK(t,e){t&1&&(C(0,"div")(1,"small",15),M(2,"La clave es requerida."),E()())}function YK(t,e){t&1&&(C(0,"div")(1,"small",15),M(2,"El valor es requerido."),E()())}function ZK(t,e){if(t&1){let n=Ue();C(0,"div",16)(1,"div",17)(2,"label",18),M(3,"Clave:"),E(),ae(4,"input",19),pe(5,QK,3,0,"div",4),E(),C(6,"div",17)(7,"label",20),M(8,"Valor:"),E(),ae(9,"input",21),pe(10,YK,3,0,"div",4),E(),C(11,"div",22)(12,"button",23),re("click",function(){let r=Ie(n).index,o=se();return De(o.quitarDatoDinamico(r))}),M(13," Eliminar "),E()()()}if(t&2){let n,i,r=e.$implicit,o=e.index;J("formGroupName",o),F(5),J("ngIf",((n=r.get("clave"))==null?null:n.invalid)&&((n=r.get("clave"))==null?null:n.touched)),F(5),J("ngIf",((i=r.get("valor"))==null?null:i.invalid)&&((i=r.get("valor"))==null?null:i.touched))}}var TL=(()=>{let e=class e{constructor(i,r){this.fb=i,this.turnosService=r,this.turno=null,this.historiaClinicaCreada=new Ge,this.form=this.fb.group({altura:[null,[Ut.required,Ut.min(100),Ut.max(230)]],peso:[null,[Ut.required,Ut.min(1),Ut.max(200)]],temperatura:[null,[Ut.required,Ut.min(34),Ut.max(42)]],presion:[null,Ut.required],datosDinamicos:this.fb.array([])})}get datosDinamicos(){return this.form.get("datosDinamicos")}agregarDatoDinamico(){let i=this.fb.group({clave:["",Ut.required],valor:["",Ut.required]});this.datosDinamicos.push(i)}quitarDatoDinamico(i){this.datosDinamicos.removeAt(i)}onSubmit(){if(console.log("Enviando formulario..."),this.form.valid&&this.turno){let i={altura:this.form.value.altura,peso:this.form.value.peso,temperatura:this.form.value.temperatura,presion:this.form.value.presion,datosDinamicos:this.form.value.datosDinamicos,Paciente:this.turno.pacienteId,Especialista:this.turno.especialistaId};console.log("Historia cl\xEDnica a enviar:",i),this.turnosService.crearHistoriaClinica(i).subscribe(()=>{YS.default.fire("Historia cl\xEDnica creada","","success"),console.log("Historia cl\xEDnica creada exitosamente."),this.form.reset(),this.historiaClinicaCreada.emit()},r=>{console.error("Error al crear la historia cl\xEDnica:",r),YS.default.fire("Error","Ocurri\xF3 un error al crear la historia cl\xEDnica. Por favor, int\xE9ntalo nuevamente.","error")})}else console.log("Formulario inv\xE1lido o turno no seleccionado."),Object.values(this.form.controls).forEach(i=>{i.markAsTouched()})}};e.\u0275fac=function(r){return new(r||e)(U(v_),U(po))},e.\u0275cmp=Ae({type:e,selectors:[["app-historia-clinica"]],inputs:{turno:"turno"},outputs:{historiaClinicaCreada:"historiaClinicaCreada"},standalone:!0,features:[Me],decls:27,vars:6,consts:[[1,"container","mt-3",3,"ngSubmit","formGroup"],[1,"form-group"],["for","altura"],["type","number","formControlName","altura","id","altura",1,"form-control"],[4,"ngIf"],["for","peso"],["type","number","formControlName","peso","id","peso",1,"form-control"],["for","temperatura"],["type","number","formControlName","temperatura","id","temperatura",1,"form-control"],["for","presion"],["formControlName","presion","id","presion",1,"form-control"],["formArrayName","datosDinamicos"],["class","form-row align-items-center",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","mt-3",3,"click"],["type","submit",1,"btn","btn-primary","mt-3"],[1,"text-danger"],[1,"form-row","align-items-center",3,"formGroupName"],[1,"col"],["for","clave"],["type","text","formControlName","clave","id","clave",1,"form-control"],["for","valor"],["type","text","formControlName","valor","id","valor",1,"form-control"],[1,"col-auto","align-self-end"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,o){r&1&&(C(0,"form",0),re("ngSubmit",function(){return o.onSubmit()}),C(1,"div",1)(2,"label",2),M(3,"Altura en cm:"),E(),ae(4,"input",3),pe(5,qK,3,0,"div",4),E(),C(6,"div",1)(7,"label",5),M(8,"Peso en kg:"),E(),ae(9,"input",6),pe(10,GK,3,0,"div",4),E(),C(11,"div",1)(12,"label",7),M(13,"Temperatura:"),E(),ae(14,"input",8),pe(15,WK,3,0,"div",4),E(),C(16,"div",1)(17,"label",9),M(18,"Presi\xF3n:"),E(),ae(19,"input",10),pe(20,KK,3,0,"div",4),E(),C(21,"div",11),pe(22,ZK,14,3,"div",12),E(),C(23,"button",13),re("click",function(){return o.agregarDatoDinamico()}),M(24," Agregar Dato Din\xE1mico "),E(),C(25,"button",14),M(26,"Guardar Historia Cl\xEDnica"),E()()),r&2&&(J("formGroup",o.form),F(5),J("ngIf",o.form.controls.altura.errors&&o.form.controls.altura.touched),F(5),J("ngIf",o.form.controls.peso.errors&&o.form.controls.peso.touched),F(5),J("ngIf",o.form.controls.temperatura.errors&&o.form.controls.temperatura.touched),F(5),J("ngIf",o.form.controls.presion.errors&&o.form.controls.presion.touched),F(2),J("ngForOf",o.datosDinamicos.controls))},dependencies:[gi,mi,$t,rs,cn,pi,ud,op,f_,p_,It,yn,zt],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-control[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{margin-top:.5rem}.text-danger[_ngcontent-%COMP%]{font-size:.875rem}"]});let t=e;return t})();var SL=(()=>{let e=class e{constructor(i){this.firestore=i}obtenerUidPacientePorNombre(i){return this.firestore.collection("pacientes",r=>r.where("nombre","==",i)).get().pipe(oe(r=>r.empty?null:r.docs[0].id))}obtenerNombrePaciente(i){return this.firestore.collection("pacientes").doc(i).valueChanges().pipe(oe(r=>r?r.nombre:null))}agregarPaciente(i,r){return this.firestore.collection("pacientes").doc(i).set(K({},r))}};e.\u0275fac=function(r){return new(r||e)(P(Tt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JK(t,e){if(t&1){let n=Ue();C(0,"app-historia-clinica",5),re("historiaClinicaCreada",function(){Ie(n);let r=se();return De(r.onHistoriaClinicaCreada())}),E()}if(t&2){let n=se();J("turno",n.turnoSeleccionado)}}function eQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.cancelarTurno(r.turnoId))}),M(2,"Cancelar turno"),E()()}}function tQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.rechazarTurno(r.turnoId))}),M(2,"Rechazar turno"),E()()}}function nQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.aceptarTurno(r.turnoId))}),M(2,"Aceptar turno"),E()()}}function iQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.finalizarTurno(r.turnoId))}),M(2,"Finalizar turno"),E()()}}function rQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.verResena(r))}),M(2,"Ver Rese\xF1a"),E()()}}function oQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"button",2),re("click",function(){Ie(n);let r=se().$implicit,o=se(2);return De(o.seleccionarTurno(r))}),M(2,"Crear Historia Cl\xEDnica"),E()()}}function sQ(t,e){if(t&1&&(C(0,"div")(1,"p"),M(2),E(),C(3,"p"),M(4),E(),C(5,"p"),M(6),E(),C(7,"p"),M(8),E(),C(9,"p"),M(10),E(),pe(11,eQ,3,0,"div",7)(12,tQ,3,0,"div",7)(13,nQ,3,0,"div",7)(14,iQ,3,0,"div",7)(15,rQ,3,0,"div",7)(16,oQ,3,0,"div",7),C(17,"p"),M(18),E()()),t&2){let n=e.$implicit,i=se(2);F(2),ke("Especialidad: ",i.obtenerEspecialidad(n),""),F(2),ke("Paciente Nombre: ",n.pacienteNombre,""),F(2),ke("Fecha: ",n.fecha,""),F(2),ke("Hora: ",n.hora,""),F(2),ke("Estado: ",n.estado,""),F(),J("ngIf",i.puedeCancelar(n)),F(),J("ngIf",i.puedeRechazar(n)),F(),J("ngIf",i.puedeAceptar(n)),F(),J("ngIf",i.puedeFinalizar(n)),F(),J("ngIf",i.tieneResena(n)),F(),J("ngIf",i.puedeCrearHistoriaClinica(n)),F(2),ke("Estado del turno: ",n.estado,"")}}function aQ(t,e){if(t&1&&(C(0,"div"),pe(1,sQ,19,12,"div",6),E()),t&2){let n=se();F(),J("ngForOf",n.turnosFiltrados)}}function cQ(t,e){t&1&&(C(0,"p"),M(1,"No se encontraron turnos."),E())}var xL=(()=>{let e=class e{constructor(i,r,o,s){this.turnosService=i,this.pacienteService=r,this.firestore=o,this.afAuth=s,this.turnos=[],this.filtroBusquedaPaciente="",this.filtroBusqueda="",this.especialistaId="",this.turnosFiltrados=[],this.filtroPaciente="",this.filtro="",this.filtroEspecialidad="",this.paciente=null,this.mostrarFormularioHistoriaClinica=!1,this.uidPaciente="",this.pacienteNombre=""}ngOnInit(){console.log("Inicializando componente TurnosEspecialistaComponent..."),this.afAuth.authState.subscribe(i=>{i?(console.log("Usuario autenticado:",i.uid),this.especialistaId=i.uid,console.log("Inicializaci\xF3n del componente, pacienteNombre:",this.pacienteNombre),this.cargarTodosLosTurnos(),this.filtrarTurnos(),this.buscarTurnos()):console.error("No se encontr\xF3 el usuario autenticado.")})}actualizarPacienteNombre(i){this.pacienteNombre=i.target.value}seleccionarTurno(i){this.turnoSeleccionado=i}onHistoriaClinicaCreada(){this.cargarTodosLosTurnos()}cargarTodosLosTurnos(){this.firestore.collection("turnos",i=>i.where("especialistaId","==",this.especialistaId)).get().toPromise().then(i=>{i&&!i.empty?(this.turnos=i.docs.map(r=>r.data()),this.filtrarTurnos()):(console.log("No se encontraron turnos."),this.turnos=[],this.turnosFiltrados=[])}).catch(i=>{console.error("Error al obtener los turnos:",i),this.turnos=[],this.turnosFiltrados=[]})}obtenerEspecialidad(i){return i.especialidades&&i.especialidades.length>0?i.especialidades[0]:"Especialidad no especificada"}obtenerEspecialistaId(i){this.firestore.collection("especialistas",r=>r.where("email","==",i)).get().subscribe(r=>{r.empty?console.error("No se encontr\xF3 el especialista con el email proporcionado."):r.forEach(o=>{let s=o.data();this.especialistaId=o.id,this.firestore.collection("pacientes",a=>a.where("especialistaId","==",this.especialistaId).where("pacienteNombre","==",this.pacienteNombre)).get().subscribe(a=>{a.forEach(c=>{let u=c.data();this.uidPaciente=c.id,this.paciente=new md(this.uidPaciente,u.nombre,u.apellido,u.edad,u.dni,u.obraSocial,u.foto1,u.foto2),this.pacienteNombre=`${this.paciente.nombre} ${this.paciente.apellido}`,console.log("Paciente:",this.paciente),this.buscarTurnos()})})})})}obtenerTurnosEspecialista(){this.buscarTurnos()}filtrarTurnos(){if(this.filtro.trim()){let i=this.filtro.toLowerCase();this.turnosFiltrados=this.turnos.filter(r=>Object.values(r).some(o=>Array.isArray(o)?o.some(s=>String(s).toLowerCase().includes(i)):typeof o=="string"?o.toLowerCase().includes(i):!1))}else this.turnosFiltrados=[...this.turnos]}limpiarFiltro(){this.filtroBusqueda="",this.turnosFiltrados=[...this.turnos]}buscarTurnos(){let i=this.filtroBusqueda.trim();if(i){let r;isNaN(Number(i))?r="especialidad":r="paciente",this.turnosService.buscarTurnos(i,r,this.especialistaId).subscribe(o=>{console.log("Turnos encontrados:",o),this.turnosFiltrados=o},o=>{console.error("Error al buscar turnos:",o),this.turnosFiltrados=[]})}else console.warn("El campo de b\xFAsqueda est\xE1 vac\xEDo."),this.turnosFiltrados=[]}esEspecialistaId(i){return!1}puedeCrearHistoriaClinica(i){return i.estado==="Finalizado"&&!i.historiaClinica}crearHistoriaClinica(i){let r=Number(prompt("Ingrese la altura (cm):")),o=Number(prompt("Ingrese el peso (kg):")),s=Number(prompt("Ingrese la temperatura (\xB0C):")),a=prompt("Ingrese la presi\xF3n arterial:");a===null&&(a=""),this.turnosService.actualizarHistoriaClinica(i,r,o,s,a).subscribe(()=>{console.log("Historia cl\xEDnica actualizada correctamente.")},c=>{console.error("Error al actualizar historia cl\xEDnica:",c),mo.default.fire("Error","Ocurri\xF3 un error al crear la Historia Cl\xEDnica. Por favor, int\xE9ntalo nuevamente.","error")})}puedeCancelar(i){return i.estado!=="Realizado"&&i.estado!=="Rechazado"}puedeRechazar(i){return i.estado!=="Aceptado"&&i.estado!=="Realizado"&&i.estado!=="Cancelado"}puedeAceptar(i){return i.estado!=="Realizado"&&i.estado!=="Cancelado"&&i.estado!=="Rechazado"}puedeFinalizar(i){return i.estado==="Aceptado"}tieneResena(i){return!!i.resena}cancelarTurno(i){let r=prompt("Ingrese el motivo de la cancelaci\xF3n:");r&&this.turnosService.cancelarTurno(i,r).then(()=>{this.cargarTodosLosTurnos(),mo.default.fire("Turno cancelado","","success")}).catch(o=>{mo.default.fire("Error","Ocurri\xF3 un error al cancelar el turno. Por favor, int\xE9ntalo nuevamente.","error")})}rechazarTurno(i){let r=prompt("Ingrese el motivo del rechazo:");r&&this.turnosService.rechazarTurno(i,r).then(()=>{this.cargarTodosLosTurnos(),mo.default.fire("Turno rechazado","","success")}).catch(o=>{mo.default.fire("Error","Ocurri\xF3 un error al rechazar el turno. Por favor, int\xE9ntalo nuevamente.","error")})}aceptarTurno(i){this.turnosService.aceptarTurno(i).then(()=>{this.cargarTodosLosTurnos(),mo.default.fire("Turno aceptado","","success")}).catch(r=>{mo.default.fire("Error","Ocurri\xF3 un error al aceptar el turno. Por favor, int\xE9ntalo nuevamente.","error")})}finalizarTurno(i){let r=prompt("Ingrese la rese\xF1a o comentario del turno:");r&&this.turnosService.finalizarTurno(i,r).then(()=>{this.cargarTodosLosTurnos(),mo.default.fire("Turno finalizado","","success")}).catch(o=>{mo.default.fire("Error","Ocurri\xF3 un error al finalizar el turno. Por favor, int\xE9ntalo nuevamente.","error")})}verResena(i){alert(i.resena||"No hay rese\xF1a disponible")}};e.\u0275fac=function(r){return new(r||e)(U(po),U(SL),U(Tt),U(kt))},e.\u0275cmp=Ae({type:e,selectors:[["app-turnos-especialista"]],inputs:{pacienteNombre:"pacienteNombre"},standalone:!0,features:[Me],decls:14,vars:4,consts:[["noTurnos",""],["type","text",3,"ngModelChange","input","ngModel"],[3,"click"],[3,"turno","historiaClinicaCreada",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"historiaClinicaCreada","turno"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(r,o){if(r&1){let s=Ue();C(0,"div")(1,"h2"),M(2,"Mis Turnos como Especialista"),E(),C(3,"div")(4,"label"),M(5,"Filtrar por cualquier campo:"),E(),C(6,"input",1),Ke("ngModelChange",function(c){return Ie(s),Ze(o.filtro,c)||(o.filtro=c),De(c)}),re("input",function(){return Ie(s),De(o.filtrarTurnos())}),E()(),C(7,"div")(8,"button",2),re("click",function(){return Ie(s),De(o.limpiarFiltro())}),M(9,"Limpiar"),E()(),pe(10,JK,1,1,"app-historia-clinica",3)(11,aQ,2,1,"div",4)(12,cQ,2,0,"ng-template",null,0,pR),E()}if(r&2){let s=kg(13);F(6),We("ngModel",o.filtro),F(4),J("ngIf",o.turnoSeleccionado),F(),J("ngIf",o.turnosFiltrados&&o.turnosFiltrados.length>0)("ngIfElse",s)}},dependencies:[_n,yn,It,gi,$t,cn,zt,xn,TL]});let t=e;return t})();var N_=wi(vi());var AL=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.firestore=r}getInfoUsuario(){return N(this,null,function*(){try{let i=yield this.afAuth.currentUser;if(!i)throw new Error("No user is logged in");let r=["administradores","pacientes","especialistas"],o=null;for(let s of r){let c=yield this.firestore.collection(s).doc(i.uid).get().toPromise();if(c&&c.exists){o=c.data(),o.uid=i.uid,o.tipo=s;break}}if(!o)throw new Error("User document does not exist");return o}catch(i){throw console.error("Error fetching user data:",i),i}})}getUsuarioActual(){return N(this,null,function*(){return this.afAuth.authState.toPromise()})}obtenerEspecialistas(){return N(this,null,function*(){try{let i=yield this.firestore.collection("especialistas").get().toPromise(),r=[];return i&&!i.empty&&i.forEach(o=>{let s=o.data(),a={uid:o.id,especialidad:s.especialidad||"",nombre:s.nombre||"",apellido:s.apellido||"",edad:typeof s.edad=="number"?s.edad:0,dni:typeof s.dni=="number"?s.dni:0,especialidades:s.especialidades||"",imageUrl1:s.imageUrl1||"",verificado:"",turnos:[]};r.push(a)}),r}catch(i){throw console.error("Error fetching specialists:",i),i}})}actualizarHorariosEspecialista(i,r){return N(this,null,function*(){try{yield this.firestore.collection("especialistas").doc(i).update({turnos:r})}catch(o){throw console.error("Error updating specialist schedules:",o),o}})}};e.\u0275fac=function(r){return new(r||e)(P(kt),P(Tt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uQ(t,e){t&1&&(C(0,"div")(1,"div",2)(2,"div",3)(3,"span",4),M(4,"Cargando..."),E()(),C(5,"p"),M(6,"Cargando..."),E()()())}function dQ(t,e){if(t&1&&(C(0,"div")(1,"div",6)(2,"div",7)(3,"div",8),ae(4,"img",9),C(5,"div",10)(6,"h5",11),M(7),E(),C(8,"p",12),M(9),E(),C(10,"p",12),M(11),E()()()()()()),t&2){let n=se(2);F(4),J("src",n.usuario.imageUrl1,Vo),F(3),hh("",n.usuario.nombre," ",n.usuario.apellido,""),F(2),ke("DNI: ",n.usuario.dni,""),F(2),ke("Edad: ",n.usuario.edad,"")}}function hQ(t,e){if(t&1&&(C(0,"div")(1,"div",6)(2,"div",13)(3,"div",8),ae(4,"img",9),C(5,"div",10)(6,"h5",11),M(7),E(),C(8,"p",12),M(9),E(),C(10,"p",12),M(11),E(),C(12,"p",12),M(13),E()()()()()()),t&2){let n=se(2);F(4),J("src",n.usuario.imageUrl1,Vo),F(3),hh("",n.usuario.nombre," ",n.usuario.apellido,""),F(2),ke("DNI: ",n.usuario.dni,""),F(2),ke("Edad: ",n.usuario.edad,""),F(2),ke("Obra Social: ",n.usuario.obraSocial,"")}}function fQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"h3"),M(2),E(),C(3,"div")(4,"label")(5,"input",16),re("change",function(r){let o=Ie(n).$implicit,s=se(3);return De(s.actualizarHorario(r,o,"manana"))}),E(),M(6," Ma\xF1ana "),E(),C(7,"label")(8,"input",16),re("change",function(r){let o=Ie(n).$implicit,s=se(3);return De(s.actualizarHorario(r,o,"tarde"))}),E(),M(9," Tarde "),E(),C(10,"label")(11,"input",16),re("change",function(r){let o=Ie(n).$implicit,s=se(3);return De(s.actualizarHorario(r,o,"noche"))}),E(),M(12," Noche "),E()()()}if(t&2){let n=e.$implicit,i=se(3);F(2),ft(n),F(3),J("checked",i.horario[n]==null?null:i.horario[n].manana),F(3),J("checked",i.horario[n]==null?null:i.horario[n].tarde),F(3),J("checked",i.horario[n]==null?null:i.horario[n].noche)}}function pQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"div",6)(2,"div",7)(3,"div",8),ae(4,"img",9),C(5,"div",10)(6,"h3",11),M(7),E(),C(8,"p",12),M(9),E(),C(10,"p",12),M(11),E(),C(12,"h4"),M(13,"Especialidades y horarios:"),E(),pe(14,fQ,13,4,"div",14),C(15,"button",15),re("click",function(){Ie(n);let r=se(2);return De(r.guardar())}),M(16,"Guardar Horarios"),E()()()()()()}if(t&2){let n=se(2);F(4),J("src",n.usuario.imageUrl1,Vo),F(3),hh("",n.usuario.nombre," ",n.usuario.apellido,""),F(2),ke("DNI: ",n.usuario.dni,""),F(2),ke("Edad: ",n.usuario.edad,""),F(3),J("ngForOf",n.especialidades)}}function mQ(t,e){if(t&1){let n=Ue();C(0,"div",19)(1,"button",20),re("click",function(){let r=Ie(n).$implicit,o=se(3);return De(o.filtrarEspecialistas(r.uid))}),C(2,"p"),M(3),E(),ae(4,"img",21),E()()}if(t&2){let n=e.$implicit;F(3),ft(n.nombre),F(),Rg("alt","Imagen de ",n.nombre,""),J("src",n.imageUrl1,Vo)}}function gQ(t,e){if(t&1&&(C(0,"div",17)(1,"div",6),pe(2,mQ,5,4,"div",18),E()()),t&2){let n=se(2);F(2),J("ngForOf",n.especialistasT)}}function vQ(t,e){if(t&1&&(C(0,"div"),pe(1,dQ,12,5,"div",1)(2,hQ,14,6,"div",1)(3,pQ,17,6,"div",1)(4,gQ,3,1,"div",5),E()),t&2){let n=se();F(),J("ngIf",n.coleccion==="administradores"),F(),J("ngIf",n.coleccion==="pacientes"),F(),J("ngIf",n.coleccion==="especialistas"),F(),J("ngIf",n.coleccion==="pacientes"&&n.filtrar)}}var ML=(()=>{let e=class e{constructor(i,r,o){this.authService=i,this.http=r,this.sanitizer=o,this.coleccion=null,this.usuario=null,this.horario={},this.especialidades=[],this.historiasClinicas=[],this.filtrar=!1}ngOnInit(){this.loadUser()}loadUser(){return N(this,null,function*(){try{localStorage.removeItem("user"),localStorage.removeItem("especialistas"),localStorage.removeItem("administradores"),localStorage.removeItem("pacientes");let i=yield this.authService.getInfoUsuario();this.usuario=i,this.usuario.tipo==="especialistas"?(this.coleccion="especialistas",localStorage.setItem("especialistas",JSON.stringify(i))):this.usuario.tipo==="administradores"?(this.coleccion="administradores",localStorage.setItem("administradores",JSON.stringify(i))):(this.coleccion="pacientes",localStorage.setItem("pacientes",JSON.stringify(i))),typeof this.usuario.especialidad=="string"?this.especialidades=[this.usuario.especialidad]:this.especialidades=this.usuario.especialidades||[],this.horario=this.usuario.turnos?.reduce((r,o)=>(r[o.especialidades]=o.turno,r),{})||{},this.inicializarHorarios(),console.log("Usuario cargado:",this.usuario),console.log("Horarios cargados:",this.horario),console.log("Tipo de usuario:",this.usuario.tipo),console.log("Coleccion:",this.coleccion)}catch(i){console.error("Error al cargar usuario:",i)}})}inicializarHorarios(){(Array.isArray(this.especialidades)?this.especialidades:[this.especialidades]).forEach(r=>{this.horario[r]||(this.horario[r]={manana:!1,tarde:!1,noche:!1})})}filtrarEspecialistas(i){return N(this,null,function*(){try{let r=this.historiasClinicas.filter(o=>o.idEspecialista===i);console.log(r)}catch(r){console.error("Error al filtrar especialistas:",r)}})}guardar(){try{if(!this.usuario||!this.usuario.uid)throw new Error("Usuario no est\xE1 definido correctamente");if(this.usuario.turnos=[],this.especialidades.forEach(r=>{let o=this.horario[r];if(o){let s={especialidades:r,especialista:this.usuario.uid,turno:{manana:o.manana||!1,tarde:o.tarde||!1,noche:o.noche||!1}};this.usuario.turnos.push(s)}}),console.log("Turnos generados:",this.usuario.turnos),this.usuario.turnos.every(r=>{let o=r.especialidades&&r.especialista&&r.turno&&r.turno.manana!==void 0&&r.turno.tarde!==void 0&&r.turno.noche!==void 0;return o||console.error("Datos inv\xE1lidos en turno:",r),o}))this.authService.actualizarHorariosEspecialista(this.usuario.uid,this.usuario.turnos).then(()=>{N_.default.fire("Guardado","Los horarios han sido guardados exitosamente","success")}).catch(r=>{console.error("Error al guardar horarios:",r),N_.default.fire("Error","Hubo un error al guardar los horarios","error")});else throw new Error("Datos inv\xE1lidos detectados")}catch(i){console.error("Error al guardar horarios:",i),N_.default.fire("Error","Hubo un error al guardar los horarios","error")}}actualizarHorario(i,r,o){try{let s=i.target;this.horario[r]||(this.horario[r]={manana:!1,tarde:!1,noche:!1}),this.horario[r][o]=s.checked}catch(s){console.error("Error al actualizar horario:",s)}}verhistoriasFiltrada(){this.filtrar=!this.filtrar}convertImageToBase64(i){return new Promise((r,o)=>{this.http.get(i,{responseType:"blob"}).subscribe(s=>{let a=new FileReader;a.onloadend=()=>{let c=a.result;r(c)},a.onerror=()=>{o("Error al leer la imagen")},a.readAsDataURL(s)},s=>{console.error("Error al obtener la imagen en formato blob:",s),o(s)})})}};e.\u0275fac=function(r){return new(r||e)(U(AL),U(yh),U(Yb))},e.\u0275cmp=Ae({type:e,selectors:[["app-miperfil"]],standalone:!0,features:[Me],decls:3,vars:2,consts:[[1,"container","mt-3","mb-3"],[4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-grow","text-primary"],[1,"visually-hidden"],["class","col-sm-10",4,"ngIf"],[1,"row"],[1,"col-lg-4","col-md-6","col-sm-12"],[1,"card"],["alt","Foto de perfil","height","300",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"col-lg-5","col-md-6","col-sm-12"],[4,"ngFor","ngForOf"],[3,"click"],["type","checkbox",3,"change","checked"],[1,"col-sm-10"],["class","col-sm-3 m-1",4,"ngFor","ngForOf"],[1,"col-sm-3","m-1"],["type","button",1,"btn","btn-primary",3,"click"],["width","100","height","100",1,"img-fluid","especialidad-img",3,"src","alt"]],template:function(r,o){r&1&&(C(0,"div",0),pe(1,uQ,7,0,"div",1)(2,vQ,5,4,"div",1),E()),r&2&&(F(),J("ngIf",!o.usuario),F(),J("ngIf",o.usuario))},dependencies:[gi,zt,yn,It],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:auto}.card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0003;transition:.3s;border-radius:5px}.card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.card-img-top[_ngcontent-%COMP%]{width:100%;border-radius:5px 5px 0 0}.card-body[_ngcontent-%COMP%]{padding:2px 16px}.text-center[_ngcontent-%COMP%]{text-align:center}.spinner-grow[_ngcontent-%COMP%]{width:3rem;height:3rem}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff}.btn[_ngcontent-%COMP%]{border:none;color:#fff;padding:14px 28px;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#0069d9}"]});let t=e;return t})();function yQ(t,e){if(t&1){let n=Ue();C(0,"div")(1,"label",3),M(2),E(),C(3,"div",4),ae(4,"input",5),M(5," Muy Satisfecho "),ae(6,"br")(7,"input",6),M(8," Satisfecho "),ae(9,"br")(10,"input",7),M(11," Neutral "),ae(12,"br")(13,"input",8),M(14," Insatisfecho "),ae(15,"br")(16,"input",9),M(17," Muy insatisfecho "),ae(18,"br"),E(),C(19,"label",10),M(20),E(),C(21,"div",4),ae(22,"input",11),M(23," Muy satisfecho "),ae(24,"br")(25,"input",12),M(26," Satisfecho "),ae(27,"br")(28,"input",13),M(29," Neutral "),ae(30,"br")(31,"input",14),M(32," Insatisfecho "),ae(33,"br")(34,"input",15),M(35," Muy insatisfecho "),ae(36,"br"),E(),C(37,"button",16),re("click",function(){Ie(n);let r=se();return De(r.siguiente())}),M(38,"Siguiente"),E()()}if(t&2){let n=se();F(2),ke("1. ",n.pregunta1,""),F(18),ke("2. ",n.pregunta2,"")}}function _Q(t,e){if(t&1){let n=Ue();C(0,"div")(1,"label",17),M(2),E(),C(3,"div",4),ae(4,"input",18),M(5," Cumpli\xF3 completamente "),ae(6,"br")(7,"input",19),M(8," Cumpli\xF3 "),ae(9,"br")(10,"input",20),M(11," Cumpli\xF3 parcialmente "),ae(12,"br")(13,"input",21),M(14," No cumpli\xF3 "),ae(15,"br")(16,"input",22),M(17," No cumpli\xF3 para nada "),ae(18,"br"),E(),C(19,"label",23),M(20),E(),C(21,"div",4),ae(22,"input",24),M(23," Definitivamente s\xED "),ae(24,"br")(25,"input",25),M(26," Probablemente s\xED "),ae(27,"br")(28,"input",26),M(29," No estoy seguro/a "),ae(30,"br")(31,"input",27),M(32," Probablemente no "),ae(33,"br")(34,"input",28),M(35," Definitivamente no "),ae(36,"br"),E(),C(37,"button",29),re("click",function(){Ie(n);let r=se();return De(r.atras())}),M(38,"Atras"),E(),C(39,"button",16),re("click",function(){Ie(n);let r=se();return De(r.enviarEncuesta())}),M(40,"Enviar"),E()()}if(t&2){let n=se();F(2),ke("3. ",n.pregunta3,""),F(18),ke("4. ",n.pregunta4,"")}}function wQ(t,e){if(t&1){let n=Ue();C(0,"form",0)(1,"h2"),M(2,"Experiencia con el Especialista"),E(),C(3,"label",30),M(4,"1. En una escala del 1 al 10, \xBFc\xF3mo calificar\xEDa su experiencia general con el especialista?"),E(),C(5,"div",4),ae(6,"input",31),C(7,"span"),M(8),E()(),C(9,"label",32),M(10,"2. \xBFTiene alg\xFAn comentario adicional sobre su experiencia con el especialista?"),E(),C(11,"div",4),ae(12,"input",33),E(),C(13,"button",16),re("click",function(){Ie(n);let r=se();return De(r.enviarCalificacion())}),M(14,"Enviar"),E()()}if(t&2){let n,i=se();J("formGroup",i.formCalificacion),F(8),ke("Puntuaci\xF3n seleccionada: ",(n=i.formCalificacion.get("calificacion"))==null?null:n.value,"")}}var RL=(()=>{let e=class e{constructor(i,r,o,s,a,c){this.fb=i,this.route=r,this.router=o,this.firestore=s,this.afAuth=a,this.turnosService=c,this.turnoId=null,this.indice=0,this.pregunta1="\xBFC\xF3mo calificar\xEDa la atenci\xF3n recibida?",this.pregunta2="\xBFRecomendar\xEDa la cl\xEDnica a un amigo o familiar?",this.pregunta3="\xBFEl servicio cumpli\xF3 sus expectativas?",this.pregunta4="\xBFVolver\xEDa a utilizar el servicio?",this.formEncuesta=this.fb.group({pregunta1:["",Ut.required],pregunta2:["",Ut.required],pregunta3:["",Ut.required],pregunta4:["",Ut.required]}),this.formCalificacion=this.fb.group({calificacion:[5,Ut.required],comentario:["",Ut.required]})}ngOnInit(){this.afAuth.authState.subscribe(i=>{i?console.log("Usuario autenticado:",i.uid):console.error("No se encontr\xF3 el usuario autenticado.")}),this.turnoId=this.route.snapshot.paramMap.get("id"),console.log("ID del turno:",this.turnoId),this.turnoId?this.turnosService.getTurnoById(this.turnoId).subscribe(i=>{i?(this.turno=i,console.log("Datos del turno obtenidos:",this.turno)):console.error("No se encontr\xF3 el turno con ID:",this.turnoId)}):console.error("No se encontr\xF3 el ID del turno en los par\xE1metros de la ruta.")}siguiente(){this.indice++}atras(){this.indice--}enviarEncuesta(){if(this.formEncuesta.valid){let i=this.formEncuesta.value;this.turnosService.completarEncuesta(i).then(()=>{this.router.navigate(["/misturnos"]),alert("Encuesta enviada exitosamente.")}).catch(r=>{console.error("Error al enviar la encuesta:",r),alert("Error al enviar la encuesta. Por favor, int\xE9ntelo nuevamente.")})}else console.error("Formulario de encuesta inv\xE1lido."),alert("Formulario de encuesta inv\xE1lido. Por favor, revise los campos.")}enviarCalificacion(){if(this.formCalificacion.valid&&this.turnoId){let i=this.formCalificacion.value;console.log("Calificaci\xF3n a enviar:",i),this.turnosService.calificarAtencion(this.turnoId,i).then(()=>{this.router.navigate(["/misturnos"]),alert("Calificaci\xF3n enviada exitosamente.")}).catch(r=>{alert("Error al enviar la calificaci\xF3n. Por favor, int\xE9ntelo nuevamente.")})}}mostrarCompletarEncuesta(){return this.turno&&this.turno.estado==="Realizado"&&this.turno.resena}mostrarCalificarAtencion(){return this.turno&&this.turno.estado==="Realizado"}};e.\u0275fac=function(r){return new(r||e)(U(v_),U(ts),U(Mi),U(Tt),U(kt),U(po))},e.\u0275cmp=Ae({type:e,selectors:[["app-encuesta"]],standalone:!0,features:[Me],decls:6,vars:4,consts:[[3,"formGroup"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],["for","pregunta1"],[1,"rating"],["type","radio","formControlName","pregunta1","value","5"],["type","radio","formControlName","pregunta1","value","4"],["type","radio","formControlName","pregunta1","value","3"],["type","radio","formControlName","pregunta1","value","2"],["type","radio","formControlName","pregunta1","value","1"],["for","pregunta2"],["type","radio","formControlName","pregunta2","value","5"],["type","radio","formControlName","pregunta2","value","4"],["type","radio","formControlName","pregunta2","value","3"],["type","radio","formControlName","pregunta2","value","2"],["type","radio","formControlName","pregunta2","value","1"],[1,"mt-3",2,"width","5vw","float","right",3,"click"],["for","pregunta3"],["type","radio","formControlName","pregunta3","value","5"],["type","radio","formControlName","pregunta3","value","4"],["type","radio","formControlName","pregunta3","value","3"],["type","radio","formControlName","pregunta3","value","2"],["type","radio","formControlName","pregunta3","value","1"],["for","pregunta4"],["type","radio","formControlName","pregunta4","value","5"],["type","radio","formControlName","pregunta4","value","4"],["type","radio","formControlName","pregunta4","value","3"],["type","radio","formControlName","pregunta4","value","2"],["type","radio","formControlName","pregunta4","value","1"],[1,"mt-3",2,"width","5vw","float","left",3,"click"],["for","calificacion"],["type","range","min","1","max","10","formControlName","calificacion"],["for","comentario"],["type","text","formControlName","comentario","name","comentario",1,"input-field",2,"width","100%"]],template:function(r,o){r&1&&(C(0,"form",0)(1,"h2"),M(2,"Experiencia con la Cl\xEDnica en L\xEDnea"),E(),pe(3,yQ,39,2,"div",1)(4,_Q,41,2,"div",1),E(),pe(5,wQ,15,2,"form",2)),r&2&&(J("formGroup",o.formEncuesta),F(3),J("ngIf",o.indice===0),F(),J("ngIf",o.indice===1),F(),J("ngIf",o.mostrarCalificarAtencion()))},dependencies:[It,gi,mi,$t,kS,PS,cn,pi,ud,op]});let t=e;return t})();var F_=class{constructor(){this.altura=0,this.peso=0,this.temperatura=0,this.presion="",this.Paciente="",this.Especialista="",this.datosDinamicos={}}};var PL=[{path:"home",component:g2},{path:"solicitud",component:IL},{path:"EspecialistaTurno",component:xL},{path:"HistoriaClinica",component:F_},{path:"encuesta",component:RL},{path:"regis",component:Hy},{path:"miperfil",component:ML},{path:"regespecialista",component:mL},{path:"misturnos",component:DL},{path:"Turnos",component:_L},{path:"login",component:uL},{path:"gestion",component:gL,canActivate:[yL]},{path:"register",component:dL},{path:"",redirectTo:"/home",pathMatch:"full"}];var kL={apiKey:"AIzaSyDNLikYsZRPri9E24kHAdcwHDgdmDqql_s",authDomain:"clinica-efd25.firebaseapp.com",projectId:"clinica-efd25",storageBucket:"clinica-efd25.appspot.com",messagingSenderId:"445632815623",appId:"1:445632815623:web:5be72d4431af83a61080a2"},OL={providers:[vF(PL),iP(()=>rP(kL)),sP(()=>aP(Qg())),tN(()=>nN(Qg())),ON(()=>NN(Qg())),_n,m2,zt,eP,yh,gi,zR(HR()),{provide:la,useValue:kL}]};function bQ(t,e){t&1&&(C(0,"li",6)(1,"a",12),M(2,"Usuarios"),E()())}function EQ(t,e){t&1&&(C(0,"a",13),M(1," Solicitar Turnos"),E())}function CQ(t,e){t&1&&(C(0,"a",14),M(1,"Turnos"),E())}function IQ(t,e){t&1&&(C(0,"a",15),M(1,"EspecialistaTurno"),E())}function DQ(t,e){t&1&&(C(0,"li",6)(1,"a",16),M(2,"Mi perfil"),E()())}function TQ(t,e){t&1&&(C(0,"li",6)(1,"a",14),M(2," Turnos"),E()())}function SQ(t,e){t&1&&(C(0,"li",6)(1,"a",17),M(2,"Mis Turnos"),E()())}var NL=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.firestore=r,this.isPaciente=!1,this.isAdministrador=!1,this.isEspecialista=!1}ngOnInit(){this.isPaciente=!1,this.isAdministrador=!1,this.isEspecialista=!1,this.afAuth.authState.subscribe(i=>{i?(this.firestore.collection("pacientes").doc(i.uid).get().subscribe(r=>{this.isPaciente=r.exists}),this.firestore.collection("administradores").doc(i.uid).get().subscribe(r=>{this.isAdministrador=r.exists}),this.firestore.collection("especialistas").doc(i.uid).get().subscribe(r=>{this.isEspecialista=r.exists})):(this.isPaciente=!1,this.isAdministrador=!1,this.isEspecialista=!1)})}};e.\u0275fac=function(r){return new(r||e)(U(kt),U(Tt))},e.\u0275cmp=Ae({type:e,selectors:[["app-menu"]],standalone:!0,features:[Me],decls:20,vars:7,consts:[[1,"navbar","navbar-expand-md","bg-body-tertiary","fixed-top"],[1,"container-fluid","d-flex","justify-content-between","align-items-center"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbar-toggler","aria-controls","navbar-toggler","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbar-toggler",1,"collapse","navbar-collapse"],[1,"navbar-nav","justify-content-center"],[1,"nav-item"],["routerLink","/home",1,"nav-link","active"],["class","nav-item",4,"ngIf"],["routerLink","/solicitud","class","nav-link",4,"ngIfIsPaciente","ngIf"],["routerLink","/Turnos","class","nav-link",4,"ngIf"],["routerLink","/EspecialistaTurno","class","nav-link",4,"ngIf"],["routerLink","/gestion",1,"nav-link"],["routerLink","/solicitud",1,"nav-link"],["routerLink","/Turnos",1,"nav-link"],["routerLink","/EspecialistaTurno",1,"nav-link"],["routerLink","/miperfil",1,"nav-link"],["routerLink","/misturnos",1,"nav-link"]],template:function(r,o){r&1&&(C(0,"nav",0)(1,"div",1)(2,"button",2),ae(3,"span",3),E(),C(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),M(8,"Home"),E()(),pe(9,bQ,3,0,"li",8),C(10,"li",6),pe(11,EQ,2,0,"a",9),E(),C(12,"li",6),pe(13,CQ,2,0,"a",10),E(),C(14,"li",6),pe(15,IQ,2,0,"a",11),E(),pe(16,DQ,3,0,"li",8)(17,TQ,3,0,"li",8)(18,SQ,3,0,"li",8),E()()()(),ae(19,"router-outlet")),r&2&&(F(9),J("ngIf",o.isAdministrador),F(2),J("ngIf",o.isAdministrador),F(2),J("ngIf",o.isAdministrador),F(2),J("ngIf",o.isEspecialista),F(),J("ngIf",o.isAdministrador||o.isPaciente||o.isEspecialista),F(),J("ngIf",o.isAdministrador),F(),J("ngIf",o.isPaciente))},dependencies:[Nf,gF,It],styles:['body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;color:#95abce}a[_ngcontent-%COMP%]{color:#428bca;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#6aa3d5;text-decoration:none}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}.logged-in-user[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:16px;margin-right:20px}.logged-in-user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;color:#fff}.logged-in-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3b58b9;color:#fff;border:none;font-size:29;padding:4px 20px;border-radius:4px;cursor:pointer}.logged-in-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#8988a0}.navbar[_ngcontent-%COMP%]{padding:0}.navbar[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;font-weight:1600;text-align:center}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{color:#fff;padding:10px 30px;font-size:18px;text-transform:uppercase;transition:.3s}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%]{font-size:18px;line-height:0;margin-left:5px}.navbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#428bca;color:#fff;border:none;border-radius:30px;padding:10px 20px;font-size:15px;text-transform:uppercase;transition:background-color .3s}.navbar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#629fd3}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;list-style:none;align-items:center}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;position:relative;margin-right:20px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{display:flex;align-items:center;padding:10px 30px;text-transform:uppercase;font-size:12px;font-weight:600;color:#fff;white-space:nowrap;transition:.3s}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%]{font-size:12px;line-height:0;margin-left:5px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:focus, .navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{color:#5697d0}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;position:absolute;left:14px;top:calc(100% + 30px);margin:0;padding:10px 0;z-index:99;opacity:0;visibility:hidden;background:#fff;box-shadow:0 0 30px #435c9740;transition:.3s}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{min-width:200px}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px;font-weight:500;text-transform:none;color:#193c5a}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{color:#428bca}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]:hover > ul[_ngcontent-%COMP%]{opacity:1;top:100%;visibility:visible}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{top:0;left:calc(100% - 30px);visibility:hidden}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]:hover > ul[_ngcontent-%COMP%]{opacity:1;top:0;left:100%;visibility:visible}*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600}.navbar[_ngcontent-%COMP%]{background:#486e8de6}.btn[_ngcontent-%COMP%]{background:#428bca;border-radius:30px;color:#ffe5d9!important}@media (max-width: 1366px){.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{left:-90%}.navbar[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]:hover > ul[_ngcontent-%COMP%]{left:-100%}}#hero[_ngcontent-%COMP%]{width:100%;height:100vh;background-color:#9fc3e0cc;overflow:hidden;position:relative}.custom-img[_ngcontent-%COMP%]{width:120%;height:auto}#hero[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]:before{background-size:cover;background-position:center;background-repeat:no-repeat;position:absolute;inset:0}#hero[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]:before{content:"";background-color:#0c0d0ecc}#hero[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:absolute;inset:70px 50px 0}.logged-in-user[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-left:10px}.logged-in-user-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:20px}.logged-in-user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:20px;color:#f8f8f8;font-weight:700}.logged-in-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3b58b9;color:#fff;border:none;padding:4px 10px;border-radius:4px;cursor:pointer}.logged-in-user[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#4f4e99}.card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out;margin:15px;min-width:251px;background-color:#7579b9;color:#fff;border-radius:15px 15px 15px 0}#hero[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{text-align:center}#hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px;font-size:48px;font-weight:700}#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{animation-delay:.4s;margin:0 auto 30px;color:#fff}#hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{transition-property:opacity;background-position:center top}#hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .active.carousel-item-start[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .active.carousel-item-end[_ngcontent-%COMP%]{opacity:0}#hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .carousel-item-next.carousel-item-start[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-inner[_ngcontent-%COMP%]   .carousel-item-prev.carousel-item-end[_ngcontent-%COMP%]{opacity:1;transition:.5s}']});let t=e;return t})();var FL=(()=>{let e=class e{constructor(){this.title="Miclinica"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-root"]],standalone:!0,features:[Me],decls:6,vars:0,consts:[[1,"row"],[1,"col-12"]],template:function(r,o){r&1&&(C(0,"div",0)(1,"div",1),ae(2,"app-menu"),E(),C(3,"div",1),ae(4,"br")(5,"router-outlet"),E()())},dependencies:[Nf,NL],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#ede7e4;overflow:hidden;border:none}.container[_ngcontent-%COMP%]{margin:0 auto;display:flex;flex-direction:column;justify-content:center;align-items:center}.navbar[_ngcontent-%COMP%]{background-color:#343a40}.navbar-brand[_ngcontent-%COMP%], .navbar-brand[_ngcontent-%COMP%]:hover, .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff}.navbar-toggler[_ngcontent-%COMP%]{border-color:transparent}.navbar-toggler-icon[_ngcontent-%COMP%]{background-color:#fff}.dropdown-menu[_ngcontent-%COMP%]{background-color:#343a40}.dropdown-item[_ngcontent-%COMP%]{color:#fff}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#495057;color:#fff}"]});let t=e;return t})();var LL={firebase:{apiKey:"AIzaSyDNLikYsZRPri9E24kHAdcwHDgdmDqql_s",authDomain:"clinica-efd25.firebaseapp.com",projectId:"clinica-efd25",storageBucket:"clinica-efd25.appspot.com",messagingSenderId:"445632815623",appId:"1:445632815623:web:5be72d4431af83a61080a2"},production:!0,firebaseConfig:{apiKey:"AIzaSyDNLikYsZRPri9E24kHAdcwHDgdmDqql_s",authDomain:"clinica-efd25.firebaseapp.com",projectId:"clinica-efd25",storageBucket:"clinica-efd25.appspot.com",messagingSenderId:"445632815623",appId:"1:445632815623:web:5be72d4431af83a61080a2"}};LL.production&&void 0;XR(FL,OL).catch(t=>console.error(t));
